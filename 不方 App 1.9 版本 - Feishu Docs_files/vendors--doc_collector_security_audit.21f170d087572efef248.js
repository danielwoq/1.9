(this.webpackJsonp=this.webpackJsonp||[]).push([["vendors--doc_collector_security_audit"],{"49sm":function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},H7XF:function(t,e,r){"use strict";e.byteLength=a,e.toByteArray=s,e.fromByteArray=y;for(var u=[],c=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)u[i]=n[i],c[n.charCodeAt(i)]=i;function l(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function a(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n}function h(t,e,r){return 3*(e+r)/4-r}function s(t){for(var e,r=l(t),n=r[0],i=r[1],o=new p(h(t,n,i)),a=0,s=0<i?n-4:n,u=0;u<s;u+=4)e=c[t.charCodeAt(u)]<<18|c[t.charCodeAt(u+1)]<<12|c[t.charCodeAt(u+2)]<<6|c[t.charCodeAt(u+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;return 2===i&&(e=c[t.charCodeAt(u)]<<2|c[t.charCodeAt(u+1)]>>4,o[a++]=255&e),1===i&&(e=c[t.charCodeAt(u)]<<10|c[t.charCodeAt(u+1)]<<4|c[t.charCodeAt(u+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e),o}function f(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function d(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(f(n));return i.join("")}function y(t){for(var e,r=t.length,n=r%3,i=[],o=16383,a=0,s=r-n;a<s;a+=o)i.push(d(t,a,s<a+o?s:a+o));return 1===n?(e=t[r-1],i.push(u[e>>2]+u[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(u[e>>10]+u[e>>4&63]+u[e<<2&63]+"=")),i.join("")}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},HDXh:function(t,rt,nt){"use strict";(function(t){var n=nt("H7XF"),o=nt("kVK+"),a=nt("49sm");function e(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function r(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,r);if("number"!=typeof t)return i(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}function i(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?d(t,e,r,n):"string"==typeof e?h(t,e,r):y(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e,r,n){return u(e),!(e<=0)&&void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}function p(t,e){if(u(e),t=s(t,e<0?0:0|g(e)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function h(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_(e,r),i=(t=s(t,n)).write(e,r);return i!==n&&(t=t.slice(0,i)),t}function f(t,e){var r=e.length<0?0:0|g(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e),t}function y(t,e){if(l.isBuffer(e)){var r=0|g(e.length);return 0===(t=s(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||et(e.length)?s(t,0):f(t,e);if("Buffer"===e.type&&a(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function m(t){return+t!=t&&(t=0),l.alloc(+t)}function _(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(n)return X(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return j(this,e,r);case"ascii":return N(this,e,r);case"latin1":case"binary":return R(this,e,r);case"base64":return D(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function w(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:O(t,e,r,n,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):O(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function O(t,e,r,n,i){var o=1,a=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a/=o=2,s/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var c=-1,p=r;p<a;p++)if(u(t,p)===u(e,-1===c?0:p-c)){if(-1===c&&(c=p),p-c+1===s)return c*o}else-1!==c&&(p-=p-c),c=-1;else for(a<r+s&&(r=a-s),p=r;0<=p;p--){for(var l=!0,h=0;h<s;h++)if(u(t,p+h)!==u(e,h)){l=!1;break}if(l)return p}return-1}function P(t,e,r,n){r=Number(r)||0;var i=t.length-r;(!n||i<(n=Number(n)))&&(n=i);var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<n&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function E(t,e,r,n){return tt(X(e,t.length-r),t,r,n)}function S(t,e,r,n){return tt(Q(e),t,r,n)}function k(t,e,r,n){return S(t,e,r,n)}function T(t,e,r,n){return tt($(e),t,r,n)}function I(t,e,r,n){return tt(Z(e,t.length-r),t,r,n)}function D(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function j(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,c=t[i],p=null,l=239<c?4:223<c?3:191<c?2:1;if(i+l<=r)switch(l){case 1:c<128&&(p=c);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&c)<<6|63&o)&&(p=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&2047<(u=(15&c)<<12|(63&o)<<6|63&a)&&(u<55296||57343<u)&&(p=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)&&u<1114112&&(p=u)}null===p?(p=65533,l=1):65535<p&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),i+=l}return C(n)}rt.Buffer=l,rt.SlowBuffer=m,rt.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:e(),rt.kMaxLength=r(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,r){return i(null,t,e,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,r){return c(null,t,e,r)},l.allocUnsafe=function(t){return p(null,t)},l.allocUnsafeSlow=function(t){return p(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var r=l.allocUnsafe(e),n=0,i=0;i<t.length;++i){var o=t[i];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},l.byteLength=_,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?j(this,0,t):v.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",e=rt.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,r,n,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=e)return 0;if(i<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(n,i),c=t.slice(e,r),p=0;p<s;++p)if(u[p]!==c[p]){o=u[p],a=c[p];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return w(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return w(this,t,e,r,!1)},l.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o=!1;;)switch(n){case"hex":return P(this,t,e,r);case"utf8":case"utf-8":return E(this,t,e,r);case"ascii":return S(this,t,e,r);case"latin1":case"binary":return k(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function C(t){var e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function N(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function B(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||n<r)&&(r=n);for(var i="",o=e;o<r;++o)i+=W(t[o]);return i}function L(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function U(t,e,r,n,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function z(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function F(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function Y(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function V(t,e,r,n,i){return i||Y(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function q(t,e,r,n,i){return i||Y(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}l.prototype.slice=function(t,e){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=l.prototype;else for(var n=e-t,i=new l(n,void 0),o=0;o<n;++o)i[o]=this[o+t];return i},l.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},l.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},l.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=e,i=1,o=this[t+--n];0<n&&(i*=256);)o+=this[t+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||U(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},l.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||U(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+r},l.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,r,n){var i;t=+t,e|=0,n||U(this,t,e,r,(i=Math.pow(2,8*r-1))-1,-i);var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},l.prototype.writeIntBE=function(t,e,r,n){var i;t=+t,e|=0,n||U(this,t,e,r,(i=Math.pow(2,8*r-1))-1,-i);var o=r-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,r){return V(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return V(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return q(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return q(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,n){if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),e=e||0,0<n&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;0<=i;--i)t[i+e]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},l.prototype.fill=function(t,e,r,n){if("string"==typeof t){var i;if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1!==t.length||(i=t.charCodeAt(0))<256&&(t=i),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(s=e;s<r;++s)this[s]=t;else for(var o=l.isBuffer(t)?t:X(new l(t,n).toString()),a=o.length,s=0;s<r-e;++s)this[s+e]=o[s%a];return this};var K=/[^+\/0-9A-Za-z-_]/g;function H(t){if((t=J(t).replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function W(t){return t<16?"0"+t.toString(16):t.toString(16)}function X(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if(55295<(r=t.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===n){-1<(e-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(e-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,r<128){if(--e<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Q(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function Z(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}function $(t){return n.toByteArray(H(t))}function tt(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function et(t){return t!=t}}).call(this,nt("yLpj"))},LqQ0:function(t,pe,le){"use strict";(function(t){le.d(pe,"a",function(){return se}),le.d(pe,"b",function(){return ue}),le.d(pe,"c",function(){return ae});var e=le("cDf5"),n=le.n(e),r=le("YAKS"),i=le.n(r),o=le("vYB2"),a=le.n(o),s=le("HEbw"),g=le.n(s);function f(t,a,s,u){return new(s=s||Promise)(function(r,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?r(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,i)}o((u=u.apply(t,a||[])).next())})}function d(r,n){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!((a=0<(a=s.trys).length&&a[a.length-1])||6!==e[0]&&2!==e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(r,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function u(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}var c,p,l,h,y,m,_,v,b,w,O,P,E,S,k,T,I,D,j,x=i.a.Writer,C=i.a.util,N=i.a.roots.default||(i.a.roots.default={});function R(t){if(this.Events=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function B(t){if(this.Recipients=[],this.Objects=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function L(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function M(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function U(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function z(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function F(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function Y(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function V(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function q(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}N.security_event=((j={}).ModuleType=(c={},(p=Object.create(c))[c[0]="ModuleUnknown"]=0,p[c[1]="ModuleDocs"]=1,p[c[2]="ModuleSheets"]=2,p[c[3]="ModuleFiles"]=3,p[c[4]="ModuleFolders"]=4,p[c[5]="ModulePassport"]=5,p[c[6]="ModuleMindNote"]=6,p[c[7]="ModuleBitable"]=7,p[c[8]="ModuleSlide"]=8,p[c[9]="ModuleChat"]=9,p[c[10]="ModuleIMImageAndVideo"]=10,p[c[11]="ModuleVideo"]=11,p[c[12]="ModuleIMFile"]=12,p),j.ClientType=(I={},(D=Object.create(I))[I[0]="ClientUnknown"]=0,D[I[1]="ClientLarkPC"]=1,D[I[2]="ClientAndroid"]=2,D[I[3]="ClientIOS"]=3,D[I[4]="ClientWeb"]=4,D),j.FlagType=(k={},(T=Object.create(k))[k[0]="FlagNormal"]=0,T[k[1]="FlagTest"]=1,T[k[2]="FlagStress"]=2,T),j.OperationType=(E={},(S=Object.create(E))[E[0]="OperationTypeUnknown"]=0,S[E[1]="OperationCreate"]=1,S[E[2]="OperationRead"]=2,S[E[3]="OperationUpdate"]=3,S[E[4]="OperationDelete"]=4,S[E[5]="OperationComment"]=5,S[E[6]="OperationExport"]=6,S[E[7]="OperationDownload"]=7,S[E[8]="OperationPrint"]=8,S[E[9]="OperationUpdateCollaborator"]=9,S[E[10]="OperationShareTo3rdApp"]=10,S[E[11]="OperationUpdateShareSetting"]=11,S[E[12]="OperationFrontExport"]=12,S[E[13]="OperationOpenWith3rdApp"]=13,S[E[14]="OperationImport"]=14,S[E[15]="OperationLogin"]=15,S[E[16]="OperationJoin"]=16,S[E[17]="OperationQuit"]=17,S[E[18]="OperationSaveAs"]=18,S[E[19]="OperationCopyContent"]=19,S[E[20]="OperationForward"]=20,S),j.EntityType=(O={},(P=Object.create(O))[O[0]="EntityTypeUnknown"]=0,P[O[1]="EntityUserID"]=1,P[O[2]="EntityDepartmentID"]=2,P[O[3]="EntityTenantID"]=3,P[O[4]="EntityChatID"]=4,P[O[5]="EntityDocID"]=5,P[O[6]="EntitySheetID"]=6,P[O[7]="EntityFileID"]=7,P[O[8]="EntityFolderID"]=8,P[O[9]="EntityMindNoteID"]=9,P[O[10]="EntityBitableID"]=10,P[O[11]="EntitySlideID"]=11,P[O[12]="EntityBotID"]=12,P[O[13]="EntityVideoID"]=13,P[O[14]="EntityDriverSDKFileID"]=14,P[O[15]="EntityLink"]=15,P[O[16]="EntityChatter"]=16,P[O[17]="EntityImage"]=17,P[O[18]="EntityVideoIM"]=18,P[O[19]="EntityFileIM"]=19,P),j.PermissionSettingType=(b={},(w=Object.create(b))[b[0]="PermissionSettingTypeUnknown"]=0,w[b[1]="DisableLinkShare"]=1,w[b[2]="CanReadByLinkInTenant"]=2,w[b[3]="CanEditByLinkInTenant"]=3,w[b[4]="CanReadByLinkInInternet"]=4,w[b[5]="CanEditByLinkInInternet"]=5,w),j.PermissionActionType=(_={},(v=Object.create(_))[_[0]="PermissionActionTypeUnknown"]=0,v[_[1]="AddUser"]=1,v[_[2]="RemoveUser"]=2,v[_[3]="AddChat"]=3,v[_[4]="RemoveChat"]=4,v[_[5]="AddDepartment"]=5,v[_[6]="RemoveDepartment"]=6,v),j.CommentType=(y={},(m=Object.create(y))[y[0]="CommentTypeUnknown"]=0,m[y[1]="AddComment"]=1,m[y[2]="AddReply"]=2,m[y[3]="EditReply"]=3,m[y[4]="DeleteReply"]=4,m[y[5]="UpdateComment"]=5,m),j.AppDetail=(l={},(h=Object.create(l))[l[0]="AppDetailUnknown"]=0,h[l[1]="WeChat"]=1,h[l[2]="WeChatMoments"]=2,h[l[3]="QQ"]=3,h[l[4]="Weibo"]=4,h[l[5]="Others"]=5,h),j.ObjectDetail=(q.prototype.CloneSource="",q.prototype.TextDetail="",q.prototype.FileName="",q.prototype.ThirdPartyAppID="",q.prototype.PermissionSettingType=0,q.create=function(t){return new q(t)},q.encode=function(t,e){return e=e||x.create(),null!=t.CloneSource&&Object.hasOwnProperty.call(t,"CloneSource")&&e.uint32(10).string(t.CloneSource),null!=t.TextDetail&&Object.hasOwnProperty.call(t,"TextDetail")&&e.uint32(18).string(t.TextDetail),null!=t.FileName&&Object.hasOwnProperty.call(t,"FileName")&&e.uint32(26).string(t.FileName),null!=t.ThirdPartyAppID&&Object.hasOwnProperty.call(t,"ThirdPartyAppID")&&e.uint32(34).string(t.ThirdPartyAppID),null!=t.PermissionSettingType&&Object.hasOwnProperty.call(t,"PermissionSettingType")&&e.uint32(40).int32(t.PermissionSettingType),e},q.verify=function(t){if("object"!=n()(t)||null===t)return"object expected";if(null!=t.CloneSource&&t.hasOwnProperty("CloneSource")&&!C.isString(t.CloneSource))return"CloneSource: string expected";if(null!=t.TextDetail&&t.hasOwnProperty("TextDetail")&&!C.isString(t.TextDetail))return"TextDetail: string expected";if(null!=t.FileName&&t.hasOwnProperty("FileName")&&!C.isString(t.FileName))return"FileName: string expected";if(null!=t.ThirdPartyAppID&&t.hasOwnProperty("ThirdPartyAppID")&&!C.isString(t.ThirdPartyAppID))return"ThirdPartyAppID: string expected";if(null!=t.PermissionSettingType&&t.hasOwnProperty("PermissionSettingType"))switch(t.PermissionSettingType){default:return"PermissionSettingType: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:}return null},q),j.RecipientDetail=(V.prototype.PermissionActionType=0,V.create=function(t){return new V(t)},V.encode=function(t,e){return e=e||x.create(),null!=t.PermissionActionType&&Object.hasOwnProperty.call(t,"PermissionActionType")&&e.uint32(8).int32(t.PermissionActionType),e},V.verify=function(t){if("object"!=n()(t)||null===t)return"object expected";if(null!=t.PermissionActionType&&t.hasOwnProperty("PermissionActionType"))switch(t.PermissionActionType){default:return"PermissionActionType: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:}return null},V),j.OperatorDetail=(Y.create=function(t){return new Y(t)},Y.encode=function(t,e){return e=e||x.create()},Y.verify=function(t){return"object"!=n()(t)||null===t?"object expected":null},Y),j.Extend=(F.prototype.CommentType=0,F.prototype.AppDetail=0,F.prototype.CreateGroup=C.Long?C.Long.fromBits(0,0,!1):0,F.prototype.DismissGroup=C.Long?C.Long.fromBits(0,0,!1):0,F.create=function(t){return new F(t)},F.encode=function(t,e){return e=e||x.create(),null!=t.CommentType&&Object.hasOwnProperty.call(t,"CommentType")&&e.uint32(8).int32(t.CommentType),null!=t.AppDetail&&Object.hasOwnProperty.call(t,"AppDetail")&&e.uint32(16).int32(t.AppDetail),null!=t.CreateGroup&&Object.hasOwnProperty.call(t,"CreateGroup")&&e.uint32(24).int64(t.CreateGroup),null!=t.DismissGroup&&Object.hasOwnProperty.call(t,"DismissGroup")&&e.uint32(32).int64(t.DismissGroup),e},F.verify=function(t){if("object"!=n()(t)||null===t)return"object expected";if(null!=t.CommentType&&t.hasOwnProperty("CommentType"))switch(t.CommentType){default:return"CommentType: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:}if(null!=t.AppDetail&&t.hasOwnProperty("AppDetail"))switch(t.AppDetail){default:return"AppDetail: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:}return null!=t.CreateGroup&&t.hasOwnProperty("CreateGroup")&&!(C.isInteger(t.CreateGroup)||t.CreateGroup&&C.isInteger(t.CreateGroup.low)&&C.isInteger(t.CreateGroup.high))?"CreateGroup: integer|Long expected":null!=t.DismissGroup&&t.hasOwnProperty("DismissGroup")&&!(C.isInteger(t.DismissGroup)||t.DismissGroup&&C.isInteger(t.DismissGroup.low)&&C.isInteger(t.DismissGroup.high))?"DismissGroup: integer|Long expected":null},F),j.Env=(z.prototype.Client=0,z.prototype.DID="",z.prototype.Location="",z.prototype.UA="",z.prototype.IP="",z.prototype.Flag=0,z.create=function(t){return new z(t)},z.encode=function(t,e){return e=e||x.create(),null!=t.Client&&Object.hasOwnProperty.call(t,"Client")&&e.uint32(8).int32(t.Client),null!=t.DID&&Object.hasOwnProperty.call(t,"DID")&&e.uint32(18).string(t.DID),null!=t.Location&&Object.hasOwnProperty.call(t,"Location")&&e.uint32(26).string(t.Location),null!=t.UA&&Object.hasOwnProperty.call(t,"UA")&&e.uint32(34).string(t.UA),null!=t.IP&&Object.hasOwnProperty.call(t,"IP")&&e.uint32(42).string(t.IP),null!=t.Flag&&Object.hasOwnProperty.call(t,"Flag")&&e.uint32(48).int32(t.Flag),e},z.verify=function(t){if("object"!=n()(t)||null===t)return"object expected";if(null!=t.Client&&t.hasOwnProperty("Client"))switch(t.Client){default:return"Client: enum value expected";case 0:case 1:case 2:case 3:case 4:}if(null!=t.DID&&t.hasOwnProperty("DID")&&!C.isString(t.DID))return"DID: string expected";if(null!=t.Location&&t.hasOwnProperty("Location")&&!C.isString(t.Location))return"Location: string expected";if(null!=t.UA&&t.hasOwnProperty("UA")&&!C.isString(t.UA))return"UA: string expected";if(null!=t.IP&&t.hasOwnProperty("IP")&&!C.isString(t.IP))return"IP: string expected";if(null!=t.Flag&&t.hasOwnProperty("Flag"))switch(t.Flag){default:return"Flag: enum value expected";case 0:case 1:case 2:}return null},z),j.OperatorEntity=(U.prototype.Type=0,U.prototype.Value="",U.prototype.Detail=null,U.create=function(t){return new U(t)},U.encode=function(t,e){return(e=e||x.create()).uint32(8).int32(t.Type),e.uint32(18).string(t.Value),null!=t.Detail&&Object.hasOwnProperty.call(t,"Detail")&&N.security_event.OperatorDetail.encode(t.Detail,e.uint32(26).fork()).ldelim(),e},U.verify=function(t){if("object"!=n()(t)||null===t)return"object expected";switch(t.Type){default:return"Type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:}if(!C.isString(t.Value))return"Value: string expected";if(null!=t.Detail&&t.hasOwnProperty("Detail")){var e=N.security_event.OperatorDetail.verify(t.Detail);if(e)return"Detail."+e}return null},U),j.RecipientEntity=(M.prototype.Type=0,M.prototype.Value="",M.prototype.Detail=null,M.create=function(t){return new M(t)},M.encode=function(t,e){return(e=e||x.create()).uint32(8).int32(t.Type),e.uint32(18).string(t.Value),null!=t.Detail&&Object.hasOwnProperty.call(t,"Detail")&&N.security_event.RecipientDetail.encode(t.Detail,e.uint32(26).fork()).ldelim(),e},M.verify=function(t){if("object"!=n()(t)||null===t)return"object expected";switch(t.Type){default:return"Type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:}if(!C.isString(t.Value))return"Value: string expected";if(null!=t.Detail&&t.hasOwnProperty("Detail")){var e=N.security_event.RecipientDetail.verify(t.Detail);if(e)return"Detail."+e}return null},M),j.ObjectEntity=(L.prototype.Type=0,L.prototype.Value="",L.prototype.Detail=null,L.create=function(t){return new L(t)},L.encode=function(t,e){return(e=e||x.create()).uint32(8).int32(t.Type),e.uint32(18).string(t.Value),null!=t.Detail&&Object.hasOwnProperty.call(t,"Detail")&&N.security_event.ObjectDetail.encode(t.Detail,e.uint32(26).fork()).ldelim(),e},L.verify=function(t){if("object"!=n()(t)||null===t)return"object expected";switch(t.Type){default:return"Type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:}if(!C.isString(t.Value))return"Value: string expected";if(null!=t.Detail&&t.hasOwnProperty("Detail")){var e=N.security_event.ObjectDetail.verify(t.Detail);if(e)return"Detail."+e}return null},L),j.Event=(B.prototype.Module=0,B.prototype.Operation=0,B.prototype.TimeStamp="",B.prototype.TenantID="",B.prototype.Operator=null,B.prototype.Recipients=C.emptyArray,B.prototype.Objects=C.emptyArray,B.prototype.Env=null,B.prototype.Extend=null,B.create=function(t){return new B(t)},B.encode=function(t,e){if((e=e||x.create()).uint32(8).int32(t.Module),e.uint32(16).int32(t.Operation),e.uint32(26).string(t.TimeStamp),null!=t.TenantID&&Object.hasOwnProperty.call(t,"TenantID")&&e.uint32(34).string(t.TenantID),N.security_event.OperatorEntity.encode(t.Operator,e.uint32(42).fork()).ldelim(),null!=t.Recipients&&t.Recipients.length)for(var r=0;r<t.Recipients.length;++r)N.security_event.RecipientEntity.encode(t.Recipients[r],e.uint32(50).fork()).ldelim();if(null!=t.Objects&&t.Objects.length)for(r=0;r<t.Objects.length;++r)N.security_event.ObjectEntity.encode(t.Objects[r],e.uint32(58).fork()).ldelim();return null!=t.Env&&Object.hasOwnProperty.call(t,"Env")&&N.security_event.Env.encode(t.Env,e.uint32(66).fork()).ldelim(),null!=t.Extend&&Object.hasOwnProperty.call(t,"Extend")&&N.security_event.Extend.encode(t.Extend,e.uint32(74).fork()).ldelim(),e},B.verify=function(t){if("object"!=n()(t)||null===t)return"object expected";switch(t.Module){default:return"Module: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:}switch(t.Operation){default:return"Operation: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:}if(!C.isString(t.TimeStamp))return"TimeStamp: string expected";if(null!=t.TenantID&&t.hasOwnProperty("TenantID")&&!C.isString(t.TenantID))return"TenantID: string expected";if(r=N.security_event.OperatorEntity.verify(t.Operator))return"Operator."+r;if(null!=t.Recipients&&t.hasOwnProperty("Recipients")){if(!Array.isArray(t.Recipients))return"Recipients: array expected";for(var e=0;e<t.Recipients.length;++e)if(r=N.security_event.RecipientEntity.verify(t.Recipients[e]))return"Recipients."+r}if(null!=t.Objects&&t.hasOwnProperty("Objects")){if(!Array.isArray(t.Objects))return"Objects: array expected";for(e=0;e<t.Objects.length;++e){var r;if(r=N.security_event.ObjectEntity.verify(t.Objects[e]))return"Objects."+r}}return null!=t.Env&&t.hasOwnProperty("Env")&&(r=N.security_event.Env.verify(t.Env))?"Env."+r:null!=t.Extend&&t.hasOwnProperty("Extend")&&(r=N.security_event.Extend.verify(t.Extend))?"Extend."+r:null},B),j.EventsRequest=(R.prototype.Events=C.emptyArray,R.create=function(t){return new R(t)},R.encode=function(t,e){if(e=e||x.create(),null!=t.Events&&t.Events.length)for(var r=0;r<t.Events.length;++r)N.security_event.Event.encode(t.Events[r],e.uint32(10).fork()).ldelim();return e},R.verify=function(t){if("object"!=n()(t)||null===t)return"object expected";if(null!=t.Events&&t.hasOwnProperty("Events")){if(!Array.isArray(t.Events))return"Events: array expected";for(var e=0;e<t.Events.length;++e){var r=N.security_event.Event.verify(t.Events[e]);if(r)return"Events."+r}}return null},R),j);var K,H,J,W,X,Q,Z,$=N,tt=i.a.Reader,et=i.a.Writer,rt=i.a.util,nt=i.a.roots.default||(i.a.roots.default={});function it(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function ot(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function at(t){if(this.operate_permission_data=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function st(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function ut(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function ct(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}nt.authorization=((Z={}).PermissionType=(K={},(H=Object.create(K))[K[0]="PERMISSION_TYPE_UNKNOWN"]=0,H[K[1]="FILE_UPLOAD"]=1,H[K[2]="FILE_IMPORT"]=2,H[K[3]="FILE_DOWNLOAD"]=3,H[K[4]="FILE_EXPORT"]=4,H[K[5]="FILE_PRINT"]=5,H[K[6]="FILE_APP_OPEN"]=6,H[K[7]="FILE_ACCESS_FOLDER"]=7,H[K[8]="FILE_READ"]=8,H[K[9]="FILE_EDIT"]=9,H[K[10]="FILE_COMMENT"]=10,H[K[11]="FILE_COPY"]=11,H[K[12]="FILE_DELETE"]=12,H[K[13]="FILE_SHARE"]=13,H[K[14]="SEARCH"]=14,H),Z.PushPermissionEvent=(ct.create=function(t){return new ct(t)},ct.encode=function(t,e){return e=e||et.create()},ct.decode=function(t,e){t instanceof tt||(t=tt.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new nt.authorization.PushPermissionEvent;t.pos<r;){var i=t.uint32();t.skipType(7&i)}return n},ct.fromObject=function(t){return t instanceof nt.authorization.PushPermissionEvent?t:new nt.authorization.PushPermissionEvent},ct.toObject=function(){return{}},ct.prototype.toJSON=function(){return this.constructor.toObject(this,i.a.util.toJSONOptions)},ct),Z.ResultType=(X={},(Q=Object.create(X))[X[0]="RESULT_TYPE_UNKNOWN"]=0,Q[X[1]="Deny"]=1,Q[X[2]="Allow"]=2,Q[X[3]="Null"]=3,Q),Z.EntityType=(J={},(W=Object.create(J))[J[0]="ENTITY_TYPE_UNKNOWN"]=0,W[J[1]="ANY"]=1,W[J[2]="USER"]=2,W[J[3]="IM_IMAGE"]=3,W[J[4]="IM_VIDEO"]=4,W[J[5]="IM_FILE"]=5,W[J[6]="CCM_DOC"]=6,W[J[7]="CCM_SHEET"]=7,W[J[8]="CCM_BITABLE"]=8,W[J[9]="CCM_MINDNOTE"]=9,W[J[10]="CCM_FILE"]=10,W[J[11]="CCM_SLIDE"]=11,W),Z.Entity=(ut.prototype.id="",ut.prototype.entity_type=0,ut.create=function(t){return new ut(t)},ut.encode=function(t,e){return(e=e||et.create()).uint32(10).string(t.id),e.uint32(16).int32(t.entity_type),e},ut.decode=function(t,e){t instanceof tt||(t=tt.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new nt.authorization.Entity;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:n.id=t.string();break;case 2:n.entity_type=t.int32();break;default:t.skipType(7&i)}}if(!n.hasOwnProperty("id"))throw rt.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("entity_type"))throw rt.ProtocolError("missing required 'entity_type'",{instance:n});return n},ut.fromObject=function(t){if(t instanceof nt.authorization.Entity)return t;var e=new nt.authorization.Entity;switch(null!=t.id&&(e.id=String(t.id)),t.entity_type){case"ENTITY_TYPE_UNKNOWN":case 0:e.entity_type=0;break;case"ANY":case 1:e.entity_type=1;break;case"USER":case 2:e.entity_type=2;break;case"IM_IMAGE":case 3:e.entity_type=3;break;case"IM_VIDEO":case 4:e.entity_type=4;break;case"IM_FILE":case 5:e.entity_type=5;break;case"CCM_DOC":case 6:e.entity_type=6;break;case"CCM_SHEET":case 7:e.entity_type=7;break;case"CCM_BITABLE":case 8:e.entity_type=8;break;case"CCM_MINDNOTE":case 9:e.entity_type=9;break;case"CCM_FILE":case 10:e.entity_type=10;break;case"CCM_SLIDE":case 11:e.entity_type=11}return e},ut.toObject=function(t,e){var r={};return(e=e||{}).defaults&&(r.id="",r.entity_type=e.enums===String?"ENTITY_TYPE_UNKNOWN":0),null!=t.id&&t.hasOwnProperty("id")&&(r.id=t.id),null!=t.entity_type&&t.hasOwnProperty("entity_type")&&(r.entity_type=e.enums===String?nt.authorization.EntityType[t.entity_type]:t.entity_type),r},ut.prototype.toJSON=function(){return this.constructor.toObject(this,i.a.util.toJSONOptions)},ut),Z.OperatePermission=(st.prototype.perm_type=0,st.prototype.result=0,st.prototype.object=null,st.create=function(t){return new st(t)},st.encode=function(t,e){return(e=e||et.create()).uint32(8).int32(t.perm_type),e.uint32(16).int32(t.result),nt.authorization.Entity.encode(t.object,e.uint32(26).fork()).ldelim(),e},st.decode=function(t,e){t instanceof tt||(t=tt.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new nt.authorization.OperatePermission;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:n.perm_type=t.int32();break;case 2:n.result=t.int32();break;case 3:n.object=nt.authorization.Entity.decode(t,t.uint32());break;default:t.skipType(7&i)}}if(!n.hasOwnProperty("perm_type"))throw rt.ProtocolError("missing required 'perm_type'",{instance:n});if(!n.hasOwnProperty("result"))throw rt.ProtocolError("missing required 'result'",{instance:n});if(!n.hasOwnProperty("object"))throw rt.ProtocolError("missing required 'object'",{instance:n});return n},st.fromObject=function(t){if(t instanceof nt.authorization.OperatePermission)return t;var e=new nt.authorization.OperatePermission;switch(t.perm_type){case"PERMISSION_TYPE_UNKNOWN":case 0:e.perm_type=0;break;case"FILE_UPLOAD":case 1:e.perm_type=1;break;case"FILE_IMPORT":case 2:e.perm_type=2;break;case"FILE_DOWNLOAD":case 3:e.perm_type=3;break;case"FILE_EXPORT":case 4:e.perm_type=4;break;case"FILE_PRINT":case 5:e.perm_type=5;break;case"FILE_APP_OPEN":case 6:e.perm_type=6;break;case"FILE_ACCESS_FOLDER":case 7:e.perm_type=7;break;case"FILE_READ":case 8:e.perm_type=8;break;case"FILE_EDIT":case 9:e.perm_type=9;break;case"FILE_COMMENT":case 10:e.perm_type=10;break;case"FILE_COPY":case 11:e.perm_type=11;break;case"FILE_DELETE":case 12:e.perm_type=12;break;case"FILE_SHARE":case 13:e.perm_type=13;break;case"SEARCH":case 14:e.perm_type=14}switch(t.result){case"RESULT_TYPE_UNKNOWN":case 0:e.result=0;break;case"Deny":case 1:e.result=1;break;case"Allow":case 2:e.result=2;break;case"Null":case 3:e.result=3}if(null!=t.object){if("object"!=n()(t.object))throw TypeError(".authorization.OperatePermission.object: object expected");e.object=nt.authorization.Entity.fromObject(t.object)}return e},st.toObject=function(t,e){var r={};return(e=e||{}).defaults&&(r.perm_type=e.enums===String?"PERMISSION_TYPE_UNKNOWN":0,r.result=e.enums===String?"RESULT_TYPE_UNKNOWN":0,r.object=null),null!=t.perm_type&&t.hasOwnProperty("perm_type")&&(r.perm_type=e.enums===String?nt.authorization.PermissionType[t.perm_type]:t.perm_type),null!=t.result&&t.hasOwnProperty("result")&&(r.result=e.enums===String?nt.authorization.ResultType[t.result]:t.result),null!=t.object&&t.hasOwnProperty("object")&&(r.object=nt.authorization.Entity.toObject(t.object,e)),r},st.prototype.toJSON=function(){return this.constructor.toObject(this,i.a.util.toJSONOptions)},st),Z.AllPermissionData=(at.prototype.update_time=rt.Long?rt.Long.fromBits(0,0,!1):0,at.prototype.expire_time=rt.Long?rt.Long.fromBits(0,0,!1):0,at.prototype.operate_permission_data=rt.emptyArray,at.create=function(t){return new at(t)},at.encode=function(t,e){if((e=e||et.create()).uint32(8).int64(t.update_time),e.uint32(16).int64(t.expire_time),null!=t.operate_permission_data&&t.operate_permission_data.length)for(var r=0;r<t.operate_permission_data.length;++r)nt.authorization.OperatePermission.encode(t.operate_permission_data[r],e.uint32(26).fork()).ldelim();return e},at.decode=function(t,e){t instanceof tt||(t=tt.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new nt.authorization.AllPermissionData;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:n.update_time=t.int64();break;case 2:n.expire_time=t.int64();break;case 3:n.operate_permission_data&&n.operate_permission_data.length||(n.operate_permission_data=[]),n.operate_permission_data.push(nt.authorization.OperatePermission.decode(t,t.uint32()));break;default:t.skipType(7&i)}}if(!n.hasOwnProperty("update_time"))throw rt.ProtocolError("missing required 'update_time'",{instance:n});if(!n.hasOwnProperty("expire_time"))throw rt.ProtocolError("missing required 'expire_time'",{instance:n});return n},at.fromObject=function(t){if(t instanceof nt.authorization.AllPermissionData)return t;var e=new nt.authorization.AllPermissionData;if(null!=t.update_time&&(rt.Long?(e.update_time=rt.Long.fromValue(t.update_time)).unsigned=!1:"string"==typeof t.update_time?e.update_time=parseInt(t.update_time,10):"number"==typeof t.update_time?e.update_time=t.update_time:"object"==n()(t.update_time)&&(e.update_time=new rt.LongBits(t.update_time.low>>>0,t.update_time.high>>>0).toNumber())),null!=t.expire_time&&(rt.Long?(e.expire_time=rt.Long.fromValue(t.expire_time)).unsigned=!1:"string"==typeof t.expire_time?e.expire_time=parseInt(t.expire_time,10):"number"==typeof t.expire_time?e.expire_time=t.expire_time:"object"==n()(t.expire_time)&&(e.expire_time=new rt.LongBits(t.expire_time.low>>>0,t.expire_time.high>>>0).toNumber())),t.operate_permission_data){if(!Array.isArray(t.operate_permission_data))throw TypeError(".authorization.AllPermissionData.operate_permission_data: array expected");e.operate_permission_data=[];for(var r=0;r<t.operate_permission_data.length;++r){if("object"!=n()(t.operate_permission_data[r]))throw TypeError(".authorization.AllPermissionData.operate_permission_data: object expected");e.operate_permission_data[r]=nt.authorization.OperatePermission.fromObject(t.operate_permission_data[r])}}return e},at.toObject=function(t,e){var r,n={};if(((e=e||{}).arrays||e.defaults)&&(n.operate_permission_data=[]),e.defaults&&(rt.Long?(r=new rt.Long(0,0,!1),n.update_time=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.update_time=e.longs===String?"0":0,rt.Long?(r=new rt.Long(0,0,!1),n.expire_time=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.expire_time=e.longs===String?"0":0),null!=t.update_time&&t.hasOwnProperty("update_time")&&("number"==typeof t.update_time?n.update_time=e.longs===String?String(t.update_time):t.update_time:n.update_time=e.longs===String?rt.Long.prototype.toString.call(t.update_time):e.longs===Number?new rt.LongBits(t.update_time.low>>>0,t.update_time.high>>>0).toNumber():t.update_time),null!=t.expire_time&&t.hasOwnProperty("expire_time")&&("number"==typeof t.expire_time?n.expire_time=e.longs===String?String(t.expire_time):t.expire_time:n.expire_time=e.longs===String?rt.Long.prototype.toString.call(t.expire_time):e.longs===Number?new rt.LongBits(t.expire_time.low>>>0,t.expire_time.high>>>0).toNumber():t.expire_time),t.operate_permission_data&&t.operate_permission_data.length){n.operate_permission_data=[];for(var i=0;i<t.operate_permission_data.length;++i)n.operate_permission_data[i]=nt.authorization.OperatePermission.toObject(t.operate_permission_data[i],e)}return n},at.prototype.toJSON=function(){return this.constructor.toObject(this,i.a.util.toJSONOptions)},at),Z.PullPermissionRequest=(ot.prototype.app_id=rt.Long?rt.Long.fromBits(0,0,!1):0,ot.prototype.api_version="",ot.prototype.perm_version="",ot.create=function(t){return new ot(t)},ot.encode=function(t,e){return(e=e||et.create()).uint32(8).int64(t.app_id),e.uint32(18).string(t.api_version),e.uint32(26).string(t.perm_version),e},ot.decode=function(t,e){t instanceof tt||(t=tt.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new nt.authorization.PullPermissionRequest;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:n.app_id=t.int64();break;case 2:n.api_version=t.string();break;case 3:n.perm_version=t.string();break;default:t.skipType(7&i)}}if(!n.hasOwnProperty("app_id"))throw rt.ProtocolError("missing required 'app_id'",{instance:n});if(!n.hasOwnProperty("api_version"))throw rt.ProtocolError("missing required 'api_version'",{instance:n});if(!n.hasOwnProperty("perm_version"))throw rt.ProtocolError("missing required 'perm_version'",{instance:n});return n},ot.fromObject=function(t){if(t instanceof nt.authorization.PullPermissionRequest)return t;var e=new nt.authorization.PullPermissionRequest;return null!=t.app_id&&(rt.Long?(e.app_id=rt.Long.fromValue(t.app_id)).unsigned=!1:"string"==typeof t.app_id?e.app_id=parseInt(t.app_id,10):"number"==typeof t.app_id?e.app_id=t.app_id:"object"==n()(t.app_id)&&(e.app_id=new rt.LongBits(t.app_id.low>>>0,t.app_id.high>>>0).toNumber())),null!=t.api_version&&(e.api_version=String(t.api_version)),null!=t.perm_version&&(e.perm_version=String(t.perm_version)),e},ot.toObject=function(t,e){var r,n={};return(e=e||{}).defaults&&(rt.Long?(r=new rt.Long(0,0,!1),n.app_id=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.app_id=e.longs===String?"0":0,n.api_version="",n.perm_version=""),null!=t.app_id&&t.hasOwnProperty("app_id")&&("number"==typeof t.app_id?n.app_id=e.longs===String?String(t.app_id):t.app_id:n.app_id=e.longs===String?rt.Long.prototype.toString.call(t.app_id):e.longs===Number?new rt.LongBits(t.app_id.low>>>0,t.app_id.high>>>0).toNumber():t.app_id),null!=t.api_version&&t.hasOwnProperty("api_version")&&(n.api_version=t.api_version),null!=t.perm_version&&t.hasOwnProperty("perm_version")&&(n.perm_version=t.perm_version),n},ot.prototype.toJSON=function(){return this.constructor.toObject(this,i.a.util.toJSONOptions)},ot),Z.PullPermissionResponse=(it.prototype.permission_data=null,it.prototype.clear_old=!1,it.prototype.perm_version="",it.create=function(t){return new it(t)},it.encode=function(t,e){return e=e||et.create(),nt.authorization.AllPermissionData.encode(t.permission_data,e.uint32(10).fork()).ldelim(),e.uint32(16).bool(t.clear_old),e.uint32(26).string(t.perm_version),e},it.decode=function(t,e){t instanceof tt||(t=tt.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new nt.authorization.PullPermissionResponse;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:n.permission_data=nt.authorization.AllPermissionData.decode(t,t.uint32());break;case 2:n.clear_old=t.bool();break;case 3:n.perm_version=t.string();break;default:t.skipType(7&i)}}if(!n.hasOwnProperty("permission_data"))throw rt.ProtocolError("missing required 'permission_data'",{instance:n});if(!n.hasOwnProperty("clear_old"))throw rt.ProtocolError("missing required 'clear_old'",{instance:n});if(!n.hasOwnProperty("perm_version"))throw rt.ProtocolError("missing required 'perm_version'",{instance:n});return n},it.fromObject=function(t){if(t instanceof nt.authorization.PullPermissionResponse)return t;var e=new nt.authorization.PullPermissionResponse;if(null!=t.permission_data){if("object"!=n()(t.permission_data))throw TypeError(".authorization.PullPermissionResponse.permission_data: object expected");e.permission_data=nt.authorization.AllPermissionData.fromObject(t.permission_data)}return null!=t.clear_old&&(e.clear_old=Boolean(t.clear_old)),null!=t.perm_version&&(e.perm_version=String(t.perm_version)),e},it.toObject=function(t,e){var r={};return(e=e||{}).defaults&&(r.permission_data=null,r.clear_old=!1,r.perm_version=""),null!=t.permission_data&&t.hasOwnProperty("permission_data")&&(r.permission_data=nt.authorization.AllPermissionData.toObject(t.permission_data,e)),null!=t.clear_old&&t.hasOwnProperty("clear_old")&&(r.clear_old=t.clear_old),null!=t.perm_version&&t.hasOwnProperty("perm_version")&&(r.perm_version=t.perm_version),r},it.prototype.toJSON=function(){return this.constructor.toObject(this,i.a.util.toJSONOptions)},it),Z);var pt,lt,ht,ft,dt=nt;(ft=pt=pt||{})[ft.Success=0]="Success",ft[ft.Error=1]="Error",(ht=lt=lt||{})[ht.Allow=0]="Allow",ht[ht.Deny=1]="Deny",ht[ht.Null=2]="Null";var yt,gt=(Et.isOn=!1,Et.method=console.log,Et.updateIsOn=function(t){Et.isOn=Boolean(t),"[object Function]"===Object.prototype.toString.apply(t)&&(Et.method=t)},Et),mt=(Pt.prototype.useDatabase=function(e){e.onversionchange=function(t){e.close()}},Pt.prototype.open=function(){var i=this;return new Promise(function(e,r){var n;i.db?e(i.db):((n=i.database.open(i.databaseName,i.databaseVersion)).onerror=function(t){i.log("open db error, event=",t),r(t)},n.onsuccess=function(t){i.log("open db success"),i.db=n.result,i.useDatabase(i.db),e(i.db)},n.onupgradeneeded=function(t){i.log("create db success"),i.db=t.target.result,i.storeList.forEach(function(t){i.db.objectStoreNames.contains(t)||i.db.createObjectStore(t,{keyPath:"key"})}),i.useDatabase(i.db),e(i.db)},n.onblocked=function(){i.log("open db blocked")})})},Pt.prototype.add=function(n,i){var o=this,a=i.key;return new Promise(function(e,r){var t=o.db.transaction(n,"readwrite").objectStore(n).add(i);t.onsuccess=function(t){o.log("add data success, store=",n,"key=",a),e(a)},t.onerror=function(t){o.log("add data error, store=",n,"key=",a),r(t)}})},Pt.prototype.put=function(n,i){var o=this,a=i.key;return new Promise(function(e,r){var t=o.db.transaction(n,"readwrite").objectStore(n).put(i);t.onsuccess=function(t){o.log("put data success, store=",n,"key=",a),e(a)},t.onerror=function(t){o.log("put data error, store=",n,"key=",a),r(t)}})},Pt.prototype.read=function(i,o){var a=this;return new Promise(function(e,r){var n=a.db.transaction(i).objectStore(i).get(o);n.onsuccess=function(t){n.result?(a.log("read data success, store=",i,"key=",o),e(n.result)):(a.log("read data null, store=",i,"key=",o),r(t))},n.onerror=function(t){a.log("read data error, store=",i,"key=",o),r(t)}})},Pt.prototype.remove=function(n,i){var o=this;return new Promise(function(e,r){var t=o.db.transaction(n,"readwrite").objectStore(n).delete(i);t.onsuccess=function(t){o.log("remove data success, store=",n,"key=",i),e(i)},t.onerror=function(t){o.log("remove data error, store=",n,"key=",i),r(t)}})},Pt.prototype.readMulti=function(n,t){void 0===t&&(t=10);var i=this,o=t,a=[];return console.log("ppp"),new Promise(function(r,e){var t=i.db.transaction(n).objectStore(n).openCursor();t.onsuccess=function(t){var e=t.target.result;if(!e)return i.log("read multi data no more store=",n),void r(a);a.push("sss"),console.log(JSON.stringify(e.value)),e.continue(),--o<=0&&(i.log("read multi data reach count store=",n),r(a))},t.onerror=function(t){i.log("read multi data error store=",n),e(t)}})},Pt.prototype.get=function(i,o){var a=this;return new Promise(function(e,r){var n=a.db.transaction(i,"readwrite").objectStore(i).get(o);n.onsuccess=function(t){a.log("get data success, store=",i,"key=",o),e(n.result)},n.onerror=function(t){a.log("get data error, store=",i,"key=",o),r(t)}})},Pt.prototype.getAll=function(n){var i=this;return new Promise(function(e,r){var t=i.db.transaction(n).objectStore(n).getAll();t.onsuccess=function(t){i.log("get all data success store=",n),e(t.target.result)},t.onerror=function(t){i.log("get all data error store=",n),r(t)}})},Pt.prototype.count=function(n){var i=this;return new Promise(function(t,e){var r=i.db.transaction(n).objectStore(n).count();r.onsuccess=function(){t(r.result)},r.onerror=function(t){e(t)}})},Pt),_t="event_temp",vt="event_fail",bt="authority",wt=(Ot.prototype.add=function(i){return f(this,void 0,void 0,function(){var e,r,n;return d(this,function(t){switch(t.label){case 0:e=this.storeName,r="",t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this.count()];case 2:return t.sent()<this.maxNum?[4,Ot.idb.add(e,i)]:[3,4];case 3:r=t.sent(),t.label=4;case 4:return[3,6];case 5:return n=t.sent(),this.log("add fail e=",n),[3,6];case 6:return[2,r]}})})},Ot.prototype.put=function(n){return f(this,void 0,void 0,function(){var e,r;return d(this,function(t){switch(t.label){case 0:e=this.storeName,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,this.get(n.key)];case 2:return t.sent()?[3,4]:[4,this.add(n)];case 3:return t.sent(),[3,6];case 4:return[4,Ot.idb.put(e,n)];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return r=t.sent(),this.log("put fail e=",r),[3,8];case 8:return[2,n.key]}})})},Ot.prototype.remove=function(n){return f(this,void 0,void 0,function(){var e,r;return d(this,function(t){switch(t.label){case 0:if(e=this.storeName,!n)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ot.idb.remove(e,n)];case 2:return t.sent(),[3,4];case 3:return r=t.sent(),this.log("remove fail e=",r),[3,4];case 4:return[2]}})})},Ot.prototype.count=function(){return f(this,void 0,void 0,function(){var e,r;return d(this,function(t){switch(t.label){case 0:e=this.storeName,r=0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ot.idb.count(e)];case 2:return r=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2,r]}})})},Ot.prototype.readMulti=function(n){return f(this,void 0,void 0,function(){var e,r;return d(this,function(t){switch(t.label){case 0:e=this.storeName,r=[],t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ot.idb.readMulti(e,n)];case 2:return r=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2,r]}})})},Ot.prototype.get=function(i){return f(this,void 0,void 0,function(){var e,r,n;return d(this,function(t){switch(t.label){case 0:if(e=this.storeName,!i)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ot.idb.get(e,i)];case 2:return r=t.sent(),[3,4];case 3:return n=t.sent(),this.log("get fail e=",n),[3,4];case 4:return[2,r]}})})},Ot.prototype.getAll=function(){return f(this,void 0,void 0,function(){var e,r;return d(this,function(t){switch(t.label){case 0:e=this.storeName,r=[],t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ot.idb.getAll(e)];case 2:return r=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2,r]}})})},Ot);function Ot(t){this.maxNum=500,this.log=new gt("store").info,this.storeName=t}function Pt(t){var e=t.database,r=t.databaseName,n=t.databaseVersion,i=t.storeList;this.log=new gt("idb").info,this.database=e||window.indexedDB,this.databaseName=r,this.databaseVersion=n||1,this.storeList=i||[]}function Et(t){var r=this;this.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Et.isOn&&Et.method.apply(Et,u(["[lark-security-audit] ["+r.type+"]"],t))},this.type=t||""}wt.initIdb=function(e){return f(void 0,void 0,void 0,function(){return d(this,function(t){return yt||(wt.idb=new mt({database:e,databaseName:"security-audit",databaseVersion:2,storeList:[_t,vt,bt]}),yt=wt.idb.open()),[2,yt]})})};var St,kt,At,Tt,It,Dt=new wt(_t),jt=new wt(vt),xt=new wt(bt),Ct=i.a.Reader,Nt=i.a.Writer,Rt=i.a.util,Bt=i.a.roots.default||(i.a.roots.default={});function Lt(t){if(this.version_payloads=[],this.pipe_entities=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function Mt(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function Ut(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}function zt(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}Bt.improto=((It={}).Command=(St={},(kt=Object.create(St))[St[1]="ACK"]=1,kt[St[2]="CONNECT"]=2,kt[St[3]="DISCONNECT"]=3,kt[St[4]="PING"]=4,kt[St[1011741]="PULL_PERMISSION"]=1011741,kt),It.PayloadType=(At={},(Tt=Object.create(At))[At[0]="TYPE_UNKNOWN"]=0,Tt[At[1]="PB2"]=1,Tt[At[2]="JSON"]=2,Tt),It.PipeEntity=(zt.prototype.type="",zt.prototype.id=Rt.Long?Rt.Long.fromBits(0,0,!1):0,zt.create=function(t){return new zt(t)},zt.encode=function(t,e){return(e=e||Nt.create()).uint32(10).string(t.type),null!=t.id&&Object.hasOwnProperty.call(t,"id")&&e.uint32(24).int64(t.id),e},zt.decode=function(t,e){t instanceof Ct||(t=Ct.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new Bt.improto.PipeEntity;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:n.type=t.string();break;case 3:n.id=t.int64();break;default:t.skipType(7&i)}}if(!n.hasOwnProperty("type"))throw Rt.ProtocolError("missing required 'type'",{instance:n});return n},zt.fromObject=function(t){if(t instanceof Bt.improto.PipeEntity)return t;var e=new Bt.improto.PipeEntity;return null!=t.type&&(e.type=String(t.type)),null!=t.id&&(Rt.Long?(e.id=Rt.Long.fromValue(t.id)).unsigned=!1:"string"==typeof t.id?e.id=parseInt(t.id,10):"number"==typeof t.id?e.id=t.id:"object"==n()(t.id)&&(e.id=new Rt.LongBits(t.id.low>>>0,t.id.high>>>0).toNumber())),e},zt.toObject=function(t,e){var r,n={};return(e=e||{}).defaults&&(n.type="",Rt.Long?(r=new Rt.Long(0,0,!1),n.id=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.id=e.longs===String?"0":0),null!=t.type&&t.hasOwnProperty("type")&&(n.type=t.type),null!=t.id&&t.hasOwnProperty("id")&&("number"==typeof t.id?n.id=e.longs===String?String(t.id):t.id:n.id=e.longs===String?Rt.Long.prototype.toString.call(t.id):e.longs===Number?new Rt.LongBits(t.id.low>>>0,t.id.high>>>0).toNumber():t.id),n},zt.prototype.toJSON=function(){return this.constructor.toObject(this,i.a.util.toJSONOptions)},zt),It.VersionRange=(Ut.prototype.start="",Ut.prototype.end="",Ut.create=function(t){return new Ut(t)},Ut.encode=function(t,e){return(e=e||Nt.create()).uint32(10).string(t.start),e.uint32(18).string(t.end),e},Ut.decode=function(t,e){t instanceof Ct||(t=Ct.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new Bt.improto.VersionRange;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:n.start=t.string();break;case 2:n.end=t.string();break;default:t.skipType(7&i)}}if(!n.hasOwnProperty("start"))throw Rt.ProtocolError("missing required 'start'",{instance:n});if(!n.hasOwnProperty("end"))throw Rt.ProtocolError("missing required 'end'",{instance:n});return n},Ut.fromObject=function(t){if(t instanceof Bt.improto.VersionRange)return t;var e=new Bt.improto.VersionRange;return null!=t.start&&(e.start=String(t.start)),null!=t.end&&(e.end=String(t.end)),e},Ut.toObject=function(t,e){var r={};return(e=e||{}).defaults&&(r.start="",r.end=""),null!=t.start&&t.hasOwnProperty("start")&&(r.start=t.start),null!=t.end&&t.hasOwnProperty("end")&&(r.end=t.end),r},Ut.prototype.toJSON=function(){return this.constructor.toObject(this,i.a.util.toJSONOptions)},Ut),It.Packet=(Lt.prototype.sid="",Lt.prototype.payload_type=1,Lt.prototype.cmd=1,Lt.prototype.status=200,Lt.prototype.payload=Rt.newBuffer([]),Lt.prototype.cid="",Lt.prototype.pipe_entity=null,Lt.prototype.version_payloads=Rt.emptyArray,Lt.prototype.pipe_entities=Rt.emptyArray,Lt.prototype.wait_retry_interval=0,Lt.prototype.command=0,Lt.create=function(t){return new Lt(t)},Lt.encode=function(t,e){if(e=e||Nt.create(),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&e.uint32(10).string(t.sid),e.uint32(16).int32(t.payload_type),e.uint32(24).int32(t.cmd),null!=t.status&&Object.hasOwnProperty.call(t,"status")&&e.uint32(32).uint32(t.status),null!=t.payload&&Object.hasOwnProperty.call(t,"payload")&&e.uint32(42).bytes(t.payload),null!=t.cid&&Object.hasOwnProperty.call(t,"cid")&&e.uint32(50).string(t.cid),null!=t.pipe_entity&&Object.hasOwnProperty.call(t,"pipe_entity")&&Bt.improto.PipeEntity.encode(t.pipe_entity,e.uint32(58).fork()).ldelim(),null!=t.version_payloads&&t.version_payloads.length)for(var r=0;r<t.version_payloads.length;++r)Bt.improto.Packet.VersionPayload.encode(t.version_payloads[r],e.uint32(66).fork()).ldelim();if(null!=t.pipe_entities&&t.pipe_entities.length)for(r=0;r<t.pipe_entities.length;++r)Bt.improto.PipeEntity.encode(t.pipe_entities[r],e.uint32(74).fork()).ldelim();return null!=t.wait_retry_interval&&Object.hasOwnProperty.call(t,"wait_retry_interval")&&e.uint32(80).uint32(t.wait_retry_interval),null!=t.command&&Object.hasOwnProperty.call(t,"command")&&e.uint32(88).int32(t.command),e},Lt.decode=function(t,e){t instanceof Ct||(t=Ct.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new Bt.improto.Packet;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:n.sid=t.string();break;case 2:n.payload_type=t.int32();break;case 3:n.cmd=t.int32();break;case 4:n.status=t.uint32();break;case 5:n.payload=t.bytes();break;case 6:n.cid=t.string();break;case 7:n.pipe_entity=Bt.improto.PipeEntity.decode(t,t.uint32());break;case 8:n.version_payloads&&n.version_payloads.length||(n.version_payloads=[]),n.version_payloads.push(Bt.improto.Packet.VersionPayload.decode(t,t.uint32()));break;case 9:n.pipe_entities&&n.pipe_entities.length||(n.pipe_entities=[]),n.pipe_entities.push(Bt.improto.PipeEntity.decode(t,t.uint32()));break;case 10:n.wait_retry_interval=t.uint32();break;case 11:n.command=t.int32();break;default:t.skipType(7&i)}}if(!n.hasOwnProperty("payload_type"))throw Rt.ProtocolError("missing required 'payload_type'",{instance:n});if(!n.hasOwnProperty("cmd"))throw Rt.ProtocolError("missing required 'cmd'",{instance:n});return n},Lt.fromObject=function(t){if(t instanceof Bt.improto.Packet)return t;var e=new Bt.improto.Packet;switch(null!=t.sid&&(e.sid=String(t.sid)),t.payload_type){case"TYPE_UNKNOWN":case 0:e.payload_type=0;break;case"PB2":case 1:e.payload_type=1;break;case"JSON":case 2:e.payload_type=2}switch(t.cmd){case"ACK":case 1:e.cmd=1;break;case"CONNECT":case 2:e.cmd=2;break;case"DISCONNECT":case 3:e.cmd=3;break;case"PING":case 4:e.cmd=4;break;case"PULL_PERMISSION":case 1011741:e.cmd=1011741}if(null!=t.status&&(e.status=t.status>>>0),null!=t.payload&&("string"==typeof t.payload?Rt.base64.decode(t.payload,e.payload=Rt.newBuffer(Rt.base64.length(t.payload)),0):t.payload.length&&(e.payload=t.payload)),null!=t.cid&&(e.cid=String(t.cid)),null!=t.pipe_entity){if("object"!=n()(t.pipe_entity))throw TypeError(".improto.Packet.pipe_entity: object expected");e.pipe_entity=Bt.improto.PipeEntity.fromObject(t.pipe_entity)}if(t.version_payloads){if(!Array.isArray(t.version_payloads))throw TypeError(".improto.Packet.version_payloads: array expected");e.version_payloads=[];for(var r=0;r<t.version_payloads.length;++r){if("object"!=n()(t.version_payloads[r]))throw TypeError(".improto.Packet.version_payloads: object expected");e.version_payloads[r]=Bt.improto.Packet.VersionPayload.fromObject(t.version_payloads[r])}}if(t.pipe_entities){if(!Array.isArray(t.pipe_entities))throw TypeError(".improto.Packet.pipe_entities: array expected");for(e.pipe_entities=[],r=0;r<t.pipe_entities.length;++r){if("object"!=n()(t.pipe_entities[r]))throw TypeError(".improto.Packet.pipe_entities: object expected");e.pipe_entities[r]=Bt.improto.PipeEntity.fromObject(t.pipe_entities[r])}}return null!=t.wait_retry_interval&&(e.wait_retry_interval=t.wait_retry_interval>>>0),null!=t.command&&(e.command=0|t.command),e},Lt.toObject=function(t,e){var r={};if(((e=e||{}).arrays||e.defaults)&&(r.version_payloads=[],r.pipe_entities=[]),e.defaults&&(r.sid="",r.payload_type=e.enums===String?"PB2":1,r.cmd=e.enums===String?"ACK":1,r.status=200,e.bytes===String?r.payload="":(r.payload=[],e.bytes!==Array&&(r.payload=Rt.newBuffer(r.payload))),r.cid="",r.pipe_entity=null,r.wait_retry_interval=0,r.command=0),null!=t.sid&&t.hasOwnProperty("sid")&&(r.sid=t.sid),null!=t.payload_type&&t.hasOwnProperty("payload_type")&&(r.payload_type=e.enums===String?Bt.improto.PayloadType[t.payload_type]:t.payload_type),null!=t.cmd&&t.hasOwnProperty("cmd")&&(r.cmd=e.enums===String?Bt.improto.Command[t.cmd]:t.cmd),null!=t.status&&t.hasOwnProperty("status")&&(r.status=t.status),null!=t.payload&&t.hasOwnProperty("payload")&&(r.payload=e.bytes===String?Rt.base64.encode(t.payload,0,t.payload.length):e.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),null!=t.cid&&t.hasOwnProperty("cid")&&(r.cid=t.cid),null!=t.pipe_entity&&t.hasOwnProperty("pipe_entity")&&(r.pipe_entity=Bt.improto.PipeEntity.toObject(t.pipe_entity,e)),t.version_payloads&&t.version_payloads.length){r.version_payloads=[];for(var n=0;n<t.version_payloads.length;++n)r.version_payloads[n]=Bt.improto.Packet.VersionPayload.toObject(t.version_payloads[n],e)}if(t.pipe_entities&&t.pipe_entities.length)for(r.pipe_entities=[],n=0;n<t.pipe_entities.length;++n)r.pipe_entities[n]=Bt.improto.PipeEntity.toObject(t.pipe_entities[n],e);return null!=t.wait_retry_interval&&t.hasOwnProperty("wait_retry_interval")&&(r.wait_retry_interval=t.wait_retry_interval),null!=t.command&&t.hasOwnProperty("command")&&(r.command=t.command),r},Lt.prototype.toJSON=function(){return this.constructor.toObject(this,i.a.util.toJSONOptions)},Lt.VersionPayload=(Mt.prototype.version_range=null,Mt.prototype.payload=Rt.newBuffer([]),Mt.create=function(t){return new Mt(t)},Mt.encode=function(t,e){return e=e||Nt.create(),Bt.improto.VersionRange.encode(t.version_range,e.uint32(10).fork()).ldelim(),e.uint32(18).bytes(t.payload),e},Mt.decode=function(t,e){t instanceof Ct||(t=Ct.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new Bt.improto.Packet.VersionPayload;t.pos<r;){var i=t.uint32();switch(i>>>3){case 1:n.version_range=Bt.improto.VersionRange.decode(t,t.uint32());break;case 2:n.payload=t.bytes();break;default:t.skipType(7&i)}}if(!n.hasOwnProperty("version_range"))throw Rt.ProtocolError("missing required 'version_range'",{instance:n});if(!n.hasOwnProperty("payload"))throw Rt.ProtocolError("missing required 'payload'",{instance:n});return n},Mt.fromObject=function(t){if(t instanceof Bt.improto.Packet.VersionPayload)return t;var e=new Bt.improto.Packet.VersionPayload;if(null!=t.version_range){if("object"!=n()(t.version_range))throw TypeError(".improto.Packet.VersionPayload.version_range: object expected");e.version_range=Bt.improto.VersionRange.fromObject(t.version_range)}return null!=t.payload&&("string"==typeof t.payload?Rt.base64.decode(t.payload,e.payload=Rt.newBuffer(Rt.base64.length(t.payload)),0):t.payload.length&&(e.payload=t.payload)),e},Mt.toObject=function(t,e){var r={};return(e=e||{}).defaults&&(r.version_range=null,e.bytes===String?r.payload="":(r.payload=[],e.bytes!==Array&&(r.payload=Rt.newBuffer(r.payload)))),null!=t.version_range&&t.hasOwnProperty("version_range")&&(r.version_range=Bt.improto.VersionRange.toObject(t.version_range,e)),null!=t.payload&&t.hasOwnProperty("payload")&&(r.payload=e.bytes===String?Rt.base64.encode(t.payload,0,t.payload.length):e.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),r},Mt.prototype.toJSON=function(){return this.constructor.toObject(this,i.a.util.toJSONOptions)},Mt),Lt),It);var Ft=Bt;function Yt(){for(var t,e="",r=0;r<32;r++)t=16*Math.random()|0,8!=r&&12!=r&&16!=r&&20!=r||(e+="-"),e+=(12==r?4:16==r?3&t|8:t).toString(16);return e}function A(t,n){return t.reduce(function(t,e){var r=e[n];return t[r]||(t[r]=[]),t[r].push(e),t},{})}var Vt=(Ht.prototype.updateOrigin=function(t){this.origin=t},Ht.prototype.updateRequestId=function(t){this.requestId=t},Ht.prototype.updateSessionKey=function(t){this.sessionKey=t},Ht.prototype.uploadEvent=function(r){return f(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return e={method:"post",data:new Blob([r],{type:"buffer"}),headers:{"X-Request-Id":Yt()}},this.requestId&&(e.headers["X-Request-Id"]=this.requestId),this.sessionKey&&(e.headers["Suite-Session-Key"]=this.sessionKey),[4,this.request(this.origin+"/suite/admin/security/events/",e)];case 1:return[2,t.sent().data]}})})},Ht.prototype.gateway=function(t){var c=t.payload,p=t.cmd;return f(this,void 0,void 0,function(){var e,r,n,i,o,a,s,u;return d(this,function(t){switch(t.label){case 0:return e=Yt(),r={cmd:p,payload_type:Ft.improto.PayloadType.PB2,payload:c,cid:e},n=Ft.improto.Packet.create(r),i=Ft.improto.Packet.encode(n).finish(),o={method:"post",data:new Blob([i],{type:"buffer"}),headers:{"X-Command":p,"Content-Type":"application/x-protobuf","X-Request-Id":e,"X-Source":"web"},responseType:"arraybuffer"},a=this.origin||function(){var t="";try{t="https://internal-api-lark-api."+location.hostname.split(".").slice(-2).join(".")}catch(t){}return t}(),[4,this.request(a+"/im/gateway/",o)];case 1:return s=t.sent(),u=Ft.improto.Packet.decode(new Uint8Array(s.data)),[2,Ft.improto.Packet.toObject(u)]}})})},Ht),qt=$.security_event.EventsRequest,Kt=new Vt;function Ht(){this.origin="",this.request=a.a.create({headers:{"Content-Type":"application/octet-stream"},withCredentials:!0,timeout:3e4})}function Jt(i){return f(this,void 0,void 0,function(){var e,r,n;return d(this,function(t){switch(t.label){case 0:return e={Events:i},r=qt.create(e),n=qt.encode(r).finish(),[4,Kt.uploadEvent(n)];case 1:return[2,t.sent()]}})})}function Gt(a){return f(this,void 0,void 0,function(){var e,r,n,i,o;return d(this,function(t){switch(t.label){case 0:return a.api_version="1-0",e=dt.authorization.PullPermissionRequest.create(a),r=dt.authorization.PullPermissionRequest.encode(e).finish(),n=Ft.improto.Command.PULL_PERMISSION,[4,Kt.gateway({cmd:n,payload:r})];case 1:return i=t.sent(),o=dt.authorization.PullPermissionResponse.decode(i.payload),[2,dt.authorization.PullPermissionResponse.toObject(o)]}})})}var Wt=(Qt.prototype.start=function(){this.isOn||(this.isOn=!0,this.log("start"),this.flushLoop())},Qt.prototype.stop=function(){return f(this,void 0,void 0,function(){return d(this,function(t){return this.log("stop"),this.isOn=!1,this.retryTimes=0,this.t&&(clearTimeout(this.t),this.t=null),[2]})})},Qt.prototype.flushLoop=function(){return f(this,void 0,void 0,function(){var e,r=this;return d(this,function(t){switch(t.label){case 0:return this.log("flushloop start, retrytimes=",this.retryTimes+1),[4,this.flush()];case 1:return t.sent()<=0?this.stop():(this.retryTimes+=1,this.retryTimes>=this.retryMaxTimes?this.stop():(e=this.retryTimes<=1?this.basicInterval:this.basicInterval*(2<<this.retryTimes-2),this.log("flushloop next retry wait=",e,"ms"),this.t=setTimeout(function(){r.flushLoop()},e))),[2]}})})},Qt.prototype.flush=function(){return f(this,void 0,void 0,function(){var e,r,n,i,o=this;return d(this,function(t){switch(t.label){case 0:return[4,jt.getAll()];case 1:e=t.sent(),this.log("flush start, failevents num=",null==e?void 0:e.length),t.label=2;case 2:if(!e||!e.length)return[3,8];if(!(r=e.splice(0,this.batchNum)).length)return[3,8];t.label=3;case 3:return t.trys.push([3,6,,7]),[4,Jt(r.map(function(t){return t.data}))];case 4:return t.sent(),[4,Promise.all(r.map(function(e){return f(o,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,jt.remove(e.key)];case 1:return t.sent(),[2]}})})}))];case 5:return t.sent(),[3,7];case 6:return n=t.sent(),this.log("flush batch upload error e=",n),[3,7];case 7:return[3,2];case 8:return[4,jt.count()];case 9:return i=t.sent(),this.log("flush end, failevents num=",i),[2,i]}})})},new Qt),Xt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function Qt(){this.basicInterval=6e4,this.batchNum=50,this.isOn=!1,this.retryTimes=0,this.retryMaxTimes=7,this.log=new gt("task").info}function Zt(t){var e={exports:{}};return t(e,e.exports),e.exports}var $t=Zt(function(t,e){var r;t.exports=r=r||function(p,r){var t;if("undefined"!=typeof window&&window.crypto&&(t=window.crypto),!t&&"undefined"!=typeof window&&window.msCrypto&&(t=window.msCrypto),!t&&void 0!==Xt&&Xt.crypto&&(t=Xt.crypto),!t)try{t=g.a}catch(p){}var n=function(){if(t){if("function"==typeof t.getRandomValues)try{return t.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof t.randomBytes)try{return t.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(t){var e;return y.prototype=t,e=new y,y.prototype=null,e},e={},o=e.lib={},a=o.Base={extend:function(t){var e=i(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},l=o.WordArray=a.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=e!=r?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var a=r[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=a<<24-(n+o)%4*8}else for(o=0;o<i;o+=4)e[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=p.ceil(e/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(n());return new l.init(e,t)}}),s=e.enc={},u=s.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new l.init(r,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new l.init(r,e)}},h=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e,r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,a=i/(4*o),s=(a=t?p.ceil(a):p.max((0|a)-this._minBufferSize,0))*o,u=p.min(4*s,i);if(s){for(var c=0;c<s;c+=o)this._doProcessBlock(n,c);e=n.splice(0,s),r.sigBytes-=u}return new l.init(e,u)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(o.Hasher=f.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(t,e){return new r.init(e).finalize(t)}},_createHmacHelper:function(r){return function(t,e){return new d.HMAC.init(r,e).finalize(t)}}}),e.algo={});function y(){}return e}(Math)}),te=Zt(function(t,e){var a;t.exports=(a=$t,function(p){var t=a,e=t.lib,r=e.WordArray,n=e.Hasher,i=t.algo,k=[];!function(){for(var t=0;t<64;t++)k[t]=4294967296*p.abs(p.sin(t+1))|0}();var o=i.MD5=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,i=t[n];t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=t[e+0],s=t[e+1],u=t[e+2],c=t[e+3],p=t[e+4],l=t[e+5],h=t[e+6],f=t[e+7],d=t[e+8],y=t[e+9],g=t[e+10],m=t[e+11],_=t[e+12],v=t[e+13],b=t[e+14],w=t[e+15],O=T(O=o[0],S=o[1],E=o[2],P=o[3],a,7,k[0]),P=T(P,O,S,E,s,12,k[1]),E=T(E,P,O,S,u,17,k[2]),S=T(S,E,P,O,c,22,k[3]);O=T(O,S,E,P,p,7,k[4]),P=T(P,O,S,E,l,12,k[5]),E=T(E,P,O,S,h,17,k[6]),S=T(S,E,P,O,f,22,k[7]),O=T(O,S,E,P,d,7,k[8]),P=T(P,O,S,E,y,12,k[9]),E=T(E,P,O,S,g,17,k[10]),S=T(S,E,P,O,m,22,k[11]),O=T(O,S,E,P,_,7,k[12]),P=T(P,O,S,E,v,12,k[13]),E=T(E,P,O,S,b,17,k[14]),O=I(O,S=T(S,E,P,O,w,22,k[15]),E,P,s,5,k[16]),P=I(P,O,S,E,h,9,k[17]),E=I(E,P,O,S,m,14,k[18]),S=I(S,E,P,O,a,20,k[19]),O=I(O,S,E,P,l,5,k[20]),P=I(P,O,S,E,g,9,k[21]),E=I(E,P,O,S,w,14,k[22]),S=I(S,E,P,O,p,20,k[23]),O=I(O,S,E,P,y,5,k[24]),P=I(P,O,S,E,b,9,k[25]),E=I(E,P,O,S,c,14,k[26]),S=I(S,E,P,O,d,20,k[27]),O=I(O,S,E,P,v,5,k[28]),P=I(P,O,S,E,u,9,k[29]),E=I(E,P,O,S,f,14,k[30]),O=D(O,S=I(S,E,P,O,_,20,k[31]),E,P,l,4,k[32]),P=D(P,O,S,E,d,11,k[33]),E=D(E,P,O,S,m,16,k[34]),S=D(S,E,P,O,b,23,k[35]),O=D(O,S,E,P,s,4,k[36]),P=D(P,O,S,E,p,11,k[37]),E=D(E,P,O,S,f,16,k[38]),S=D(S,E,P,O,g,23,k[39]),O=D(O,S,E,P,v,4,k[40]),P=D(P,O,S,E,a,11,k[41]),E=D(E,P,O,S,c,16,k[42]),S=D(S,E,P,O,h,23,k[43]),O=D(O,S,E,P,y,4,k[44]),P=D(P,O,S,E,_,11,k[45]),E=D(E,P,O,S,w,16,k[46]),O=j(O,S=D(S,E,P,O,u,23,k[47]),E,P,a,6,k[48]),P=j(P,O,S,E,f,10,k[49]),E=j(E,P,O,S,b,15,k[50]),S=j(S,E,P,O,l,21,k[51]),O=j(O,S,E,P,_,6,k[52]),P=j(P,O,S,E,c,10,k[53]),E=j(E,P,O,S,g,15,k[54]),S=j(S,E,P,O,s,21,k[55]),O=j(O,S,E,P,d,6,k[56]),P=j(P,O,S,E,w,10,k[57]),E=j(E,P,O,S,h,15,k[58]),S=j(S,E,P,O,v,21,k[59]),O=j(O,S,E,P,p,6,k[60]),P=j(P,O,S,E,m,10,k[61]),E=j(E,P,O,S,u,15,k[62]),S=j(S,E,P,O,y,21,k[63]),o[0]=o[0]+O|0,o[1]=o[1]+S|0,o[2]=o[2]+E|0,o[3]=o[3]+P|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32;var i=p.floor(r/4294967296),o=r;e[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e[14+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(e.length+1),this._process();for(var a=this._hash,s=a.words,u=0;u<4;u++){var c=s[u];s[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return a},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});function T(t,e,r,n,i,o,a){var s=t+(e&r|~e&n)+i+a;return(s<<o|s>>>32-o)+e}function I(t,e,r,n,i,o,a){var s=t+(e&n|r&~n)+i+a;return(s<<o|s>>>32-o)+e}function D(t,e,r,n,i,o,a){var s=t+(e^r^n)+i+a;return(s<<o|s>>>32-o)+e}function j(t,e,r,n,i,o,a){var s=t+(r^(e|~n))+i+a;return(s<<o|s>>>32-o)+e}t.MD5=n._createHelper(o),t.HmacMD5=n._createHmacHelper(o)}(Math),a.MD5)}),ee=(Zt(function(t,e){var r,s;function u(t,e,r){for(var n,i=[],o=0,a=0;a<e;a++)a%4&&(n=r[t.charCodeAt(a-1)]<<a%4*2|r[t.charCodeAt(a)]>>>6-a%4*2,i[o>>>2]|=n<<24-o%4*8,o++);return s.create(i,o)}t.exports=(s=(r=$t).lib.WordArray,r.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var i=[],o=0;o<r;o+=3)for(var a=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<r;s++)i.push(n.charAt(a>>>6*(3-s)&63));var u=n.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var i=0;i<r.length;i++)n[r.charCodeAt(i)]=i}var o,a=r.charAt(64);return!a||-1!==(o=t.indexOf(a))&&(e=o),u(t,e,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)}),Zt(function(t,e){var r,n,i,o,a,l,s,u;t.exports=(n=(r=u=$t).lib,i=n.WordArray,o=n.Hasher,a=r.algo,l=[],s=a.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r,n=this._hash.words,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=0;c<80;c++){c<16?l[c]=0|t[e+c]:(r=l[c-3]^l[c-8]^l[c-14]^l[c-16],l[c]=r<<1|r>>>31);var p=(i<<5|i>>>27)+u+l[c];p+=c<20?1518500249+(o&a|~o&s):c<40?1859775393+(o^a^s):c<60?(o&a|o&s|a&s)-1894007588:(o^a^s)-899497514,u=s,s=a,a=o<<30|o>>>2,o=i,i=p}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),e[15+(n+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}}),r.SHA1=o._createHelper(s),r.HmacSHA1=o._createHmacHelper(s),u.SHA1)}),Zt(function(t,e){var r,c;t.exports=(r=$t.lib.Base,c=$t.enc.Utf8,void($t.algo.HMAC=r.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=c.parse(e));var r=t.blockSize,n=4*r;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),o=this._iKey=e.clone(),a=i.words,s=o.words,u=0;u<r;u++)a[u]^=1549556828,s[u]^=909522486;i.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,r=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(r))}})))}),Zt(function(t,e){var r,n,i,p,o,a,s,u;t.exports=(i=(n=(r=u=$t).lib).Base,p=n.WordArray,a=(o=r.algo).MD5,s=o.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r,n=this.cfg,i=n.hasher.create(),o=p.create(),a=o.words,s=n.keySize,u=n.iterations;a.length<s;){r&&i.update(r),r=i.update(t).finalize(e),i.reset();for(var c=1;c<u;c++)r=i.finalize(r),i.reset();o.concat(r)}return o.sigBytes=4*s,o}}),r.EvpKDF=function(t,e,r){return s.create(r).compute(t,e)},u.EvpKDF)}),Zt(function(t,e){var a,r,n,i,u,o,s,c,p,l,h,f,d,y,g,m,_,v,b,w;function O(t,e,r){var n,i=this._iv;i?(n=i,this._iv=a):n=this._prevBlock;for(var o=0;o<r;o++)t[e+o]^=n[o]}function P(t){return"string"==typeof t?b:_}t.exports=void($t.lib.Cipher||(i=(n=(r=$t).lib).Base,u=n.WordArray,o=n.BufferedBlockAlgorithm,(s=r.enc).Utf8,c=s.Base64,p=r.algo.EvpKDF,l=n.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(t,e,r){return P(e).encrypt(n,t,e,r)},decrypt:function(t,e,r){return P(e).decrypt(n,t,e,r)}}}}),n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=r.mode={},f=n.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),d=h.CBC=((w=f.extend()).Encryptor=w.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize;O.call(this,t,e,n),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),w.Decryptor=w.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=t.slice(e,e+n);r.decryptBlock(t,e),O.call(this,t,e,n),this._prevBlock=i}}),w),y=(r.pad={}).Pkcs7={pad:function(t,e){for(var r=4*e,n=r-t.sigBytes%r,i=n<<24|n<<16|n<<8|n,o=[],a=0;a<n;a+=4)o.push(i);var s=u.create(o,n);t.concat(s)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:y}),reset:function(){var t;l.reset.call(this);var e=this.cfg,r=e.iv,n=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=n.createEncryptor:(t=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,r&&r.words):(this._mode=t.call(n,this,r&&r.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),g=n.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),m=(r.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,r=t.salt;return(r?u.create([1398893684,1701076831]).concat(r).concat(e):e).toString(c)},parse:function(t){var e,r=c.parse(t),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(e=u.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),g.create({ciphertext:r,salt:e})}},_=n.SerializableCipher=i.extend({cfg:i.extend({format:m}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n),o=i.finalize(e),a=i.cfg;return g.create({ciphertext:o,key:r,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),v=(r.kdf={}).OpenSSL={execute:function(t,e,r,n){n=n||u.random(8);var i=p.create({keySize:e+r}).compute(t,n),o=u.create(i.words.slice(e),4*r);return i.sigBytes=4*e,g.create({key:i,iv:o,salt:n})}},b=n.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:v}),encrypt:function(t,e,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,t.keySize,t.ivSize);n.iv=i.iv;var o=_.encrypt.call(this,t,e,i.key,n);return o.mixIn(i),o},decrypt:function(t,e,r,n){n=this.cfg.extend(n),e=this._parse(e,n.format);var i=n.kdf.execute(r,t.keySize,t.ivSize,e.salt);return n.iv=i.iv,_.decrypt.call(this,t,e,i.key,n)}})))}),Zt(function(t,e){var i;t.exports=(i=$t,function(){var t=i,e=t.lib.BlockCipher,r=t.algo,c=[],p=[],l=[],h=[],f=[],d=[],y=[],g=[],m=[],_=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var r=0,n=0,e=0;e<256;e++){var i=(i=n^n<<1^n<<2^n<<3^n<<4)>>>8^255&i^99;c[r]=i;var o=t[p[i]=r],a=t[o],s=t[a],u=257*t[i]^16843008*i;l[r]=u<<24|u>>>8,h[r]=u<<16|u>>>16,f[r]=u<<8|u>>>24,d[r]=u,u=16843009*s^65537*a^257*o^16843008*r,y[i]=u<<24|u>>>8,g[i]=u<<16|u>>>16,m[i]=u<<8|u>>>24,_[i]=u,r?(r=o^t[t[t[s^o]]],n^=t[t[n]]):r=n=1}}();var v=[0,1,2,4,8,16,32,64,128,27,54],n=r.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4,n=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],o=0;o<n;o++)o<r?i[o]=e[o]:(u=i[o-1],o%r?6<r&&o%r==4&&(u=c[u>>>24]<<24|c[u>>>16&255]<<16|c[u>>>8&255]<<8|c[255&u]):(u=c[(u=u<<8|u>>>24)>>>24]<<24|c[u>>>16&255]<<16|c[u>>>8&255]<<8|c[255&u],u^=v[o/r|0]<<24),i[o]=i[o-r]^u);for(var a=this._invKeySchedule=[],s=0;s<n;s++){var o=n-s,u=s%4?i[o]:i[o-4];a[s]=s<4||o<=4?u:y[c[u>>>24]]^g[c[u>>>16&255]]^m[c[u>>>8&255]]^_[c[255&u]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,l,h,f,d,c)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,y,g,m,_,p),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,a,s){for(var u=this._nRounds,c=t[e]^r[0],p=t[e+1]^r[1],l=t[e+2]^r[2],h=t[e+3]^r[3],f=4,d=1;d<u;d++)var y=n[c>>>24]^i[p>>>16&255]^o[l>>>8&255]^a[255&h]^r[f++],g=n[p>>>24]^i[l>>>16&255]^o[h>>>8&255]^a[255&c]^r[f++],m=n[l>>>24]^i[h>>>16&255]^o[c>>>8&255]^a[255&p]^r[f++],_=n[h>>>24]^i[c>>>16&255]^o[p>>>8&255]^a[255&l]^r[f++],c=y,p=g,l=m,h=_;y=(s[c>>>24]<<24|s[p>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^r[f++],g=(s[p>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^r[f++],m=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&p])^r[f++],_=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[p>>>8&255]<<8|s[255&l])^r[f++],t[e]=y,t[e+1]=g,t[e+2]=m,t[e+3]=_},keySize:8});t.AES=e._createHelper(n)}(),i.AES)})),re=Zt(function(t,e){t.exports=$t.enc.Utf8});function G(t){return te(t).toString()}function ne(t,e){try{var r=ee.decrypt(t,e).toString(re);return JSON.parse(r)}catch(t){return null}}function ie(n,i,o){return f(this,void 0,void 0,function(){var e,r;return d(this,function(t){switch(t.label){case 0:return e="updatetime_"+n,[4,xt.get(e)];case 1:return!(r=t.sent())||Date.now()-r.data>=i?(o(),[4,xt.put({data:Date.now(),key:e})]):[3,3];case 2:t.sent(),t.label=3;case 3:return setTimeout(function(){ie(n,i,o)},i),[2]}})})}var oe=$.security_event.Event,ae=(ce.prototype.init=function(){return f(this,void 0,void 0,function(){var e=this;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,wt.initIdb()];case 1:return t.sent(),Wt.start(),this.appId&&this.userId&&!this.authorityOff?[4,this.updateAuthorityInfo()]:[3,3];case 2:t.sent(),ie(G(this.appId+"_"+this.userId),9e5,function(){e.updateAuthorityInfo()}),t.label=3;case 3:return[3,5];case 4:return t.sent(),this.log("init error"),[3,5];case 5:return[2]}})})},ce.prototype.initDone=function(){return f(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.initP?[4,this.initP]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},ce.prototype.updateConfig=function(t){t&&(t.hasOwnProperty("origin")&&Kt.updateOrigin(t.origin),t.hasOwnProperty("requestId")&&Kt.updateRequestId(t.requestId),t.hasOwnProperty("sessionKey")&&Kt.updateSessionKey(t.sessionKey),t.hasOwnProperty("log")&&gt.updateIsOn(t.log),t.hasOwnProperty("userId")&&(this.userId=t.userId),t.hasOwnProperty("appId")&&(this.appId=t.appId),t.hasOwnProperty("authorityOff")&&(this.authorityOff=t.authorityOff))},ce.prototype.updateSharedParams=function(t){Object.assign(this.sharedParams,t)},ce.prototype.auditEvent=function(s,u){var c;return void 0===u&&(u=!1),f(this,void 0,void 0,function(){var e,r,n,i,o,a;return d(this,function(t){switch(t.label){case 0:return this.initP?[4,this.initP]:[3,2];case 1:t.sent(),t.label=2;case 2:if(e=Object.assign({TimeStamp:""+Date.now()},this.sharedParams,s),r=oe.verify(e))return[2,Promise.reject({code:pt.Error,message:r,error:new Error(r)})];if(n=Yt(),u)return[3,6];this.log("store event in queue, key=",n),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,jt.add({data:e,key:n})];case 4:return t.sent(),Wt.start(),this.log("store event in queue success, key=",n),[2,{code:pt.Success,message:"wait in queue"}];case 5:return i=t.sent(),this.log("store event in queue error, key=",n,"e=",i),[2,Promise.reject({code:pt.Error,message:(null==i?void 0:i.message)||"store event error",error:i})];case 6:return this.log("upload event start, key=",n),[4,Dt.add({data:e,key:n})];case 7:t.sent(),t.label=8;case 8:return t.trys.push([8,10,,11]),[4,Jt([e])];case 9:return o=t.sent(),Dt.remove(n),null!==(c=null==o?void 0:o.data)&&void 0!==c&&c.failNum?(this.log("upload event partly success, key=",n),[2,Promise.reject({code:pt.Error,data:o.data,message:o.message})]):(this.log("upload event all success, key=",n),[2,{code:pt.Success,data:null==o?void 0:o.data,message:null==o?void 0:o.message}]);case 10:return a=t.sent(),this.log("upload event error, key=",n,"e=",a),jt.add({data:e,key:n}),Dt.remove(n),Wt.start(),[2,Promise.reject({code:pt.Error,message:(null==a?void 0:a.message)||"server error",error:a})];case 11:return[2]}})})},ce.prototype.updateAuthorityInfo=function(){var l,h;return f(this,void 0,void 0,function(){var e,r,n,i,o,a,s,u,c,p;return d(this,function(t){switch(t.label){case 0:if(this.authorityOff)return this.log("update authority info, authority is off"),[2];if(!this.appId||!this.userId)return this.log("update authority info, no appId or userId"),[2];e=G(this.appId+"_"+this.userId),this.log("update authority info, hashKey=",e),t.label=1;case 1:return t.trys.push([1,5,,6]),r="",n=void 0,[4,xt.get(e)];case 2:return(i=t.sent())&&(o=ne(i.data,this.userId))&&(r=o.perm_version,n=o),this.cacheAuthorityInfo=n,a={app_id:this.appId},r&&(a.perm_version=r),[4,Gt(a)];case 3:return(s=t.sent())&&s.permission_data&&s.permission_data.operate_permission_data?(s.clear_old?n=s:(u=function(t,e,r){void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===r&&(r="");var n=A(t,r),i=A(e,r),o=Object.assign({},n,i);return Object.values(o).reduce(function(t,e){return t.concat(e)},[])}(null===(l=null==n?void 0:n.permission_data)||void 0===l?void 0:l.operate_permission_data,null===(h=null==s?void 0:s.permission_data)||void 0===h?void 0:h.operate_permission_data,"perm_type"),(n=s).permission_data.operate_permission_data=u),this.cacheAuthorityInfo=n,c=function(t,e){try{return ee.encrypt(JSON.stringify(t),e).toString()}catch(t){return""}}(n,this.userId),[4,xt.put({data:c,key:e})]):(this.log("update authority info, data is empty"),[2]);case 4:return t.sent(),this.log("update authority info success"),[2,s];case 5:return p=t.sent(),this.log("update authority info error, e=",p),[3,6];case 6:return[2]}})})},ce.prototype.preCheckAuthority=function(t){var e=t.perm_type;return this.authorityOff?(this.log("check authority, authority is off"),{code:lt.Null,message:"authority is off"}):(this.log("check authority, params=",t),e?this.appId&&this.userId?void 0:(this.log("check authority, no appId or userId"),{code:lt.Null,message:"no appId or userId"}):(this.log("check authority, no permType"),{code:lt.Null,message:"no permType"}))},ce.prototype.postCheckAuthority=function(t,e){var r,n=t.perm_type,i=t.object,o=e.permission_data.operate_permission_data,a=void 0===o?[]:o;if(this.log("check authority, try to find permData"),i&&(r=a.find(function(t){var e,r;return t.perm_type===n&&i.entity_type===(null===(e=t.object)||void 0===e?void 0:e.entity_type)&&i.id===(null===(r=t.object)||void 0===r?void 0:r.id)})),!(r=r||a.find(function(t){return t.perm_type===n&&t.object.entity_type===dt.authorization.EntityType.ANY})))return this.log("check authority, no permData"),{code:lt.Null,message:"no permData"};switch(this.log("check authority, find permData=",r),r.result){case dt.authorization.ResultType.Allow:return this.log("check authority, allow"),{code:lt.Allow,message:"allow"};case dt.authorization.ResultType.Deny:return this.log("check authority, deny"),{code:lt.Deny,message:"deny"};default:return this.log("check authority, null"),{code:lt.Null,message:"null"}}},ce.prototype.checkAuthority=function(a){return f(this,void 0,void 0,function(){var e,r,n,i,o;return d(this,function(t){switch(t.label){case 0:return(e=this.preCheckAuthority(a))?[2,e]:this.initP?[4,this.initP]:[3,2];case 1:t.sent(),t.label=2;case 2:return r=G(this.appId+"_"+this.userId),[4,xt.get(r)];case 3:return(n=t.sent())&&n.data?(i=ne(n.data,this.userId))&&i.permission_data?(o=i.permission_data.expire_time,Math.floor(Date.now()/1e3)>o?[4,xt.remove(r)]:[3,5]):(this.log("check authority, decrypt error"),[2,{code:lt.Null,message:"decrypt error"}]):(this.log("check authority, no authorityInfo"),[2,{code:lt.Null,message:"no authorityInfo"}]);case 4:return t.sent(),this.log("check authority, time expired"),[2,{code:lt.Null,message:"time expired"}];case 5:return[2,this.postCheckAuthority(a,i)]}})})},ce.prototype.checkAuthoritySync=function(t){var e=this.preCheckAuthority(t);if(e)return e;var r=this.cacheAuthorityInfo;if(!r||!r.permission_data)return this.log("check authority,  no cache authorityInfo"),{code:lt.Null,message:"no cache authorityInfo"};var n=r.permission_data.expire_time;return Math.floor(Date.now()/1e3)>n?(this.log("check authority, time expired"),this.cacheAuthorityInfo=null,{code:lt.Null,message:"time expired"}):this.postCheckAuthority(t,r)},ce),se=dt.authorization,ue=$.security_event;function ce(t){this.sharedParams={Module:$.security_event.ModuleType.ModuleUnknown},this.log=new gt("main").info,this.authorityOff=!1,this.updateConfig(t),this.initP=this.init()}}).call(this,le("yLpj"))},YAKS:function(t,e,r){"use strict";t.exports=r("pGAK")},fXKp:function(t,e,r){"use strict";var n=r("hwdV").Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function a(t){var e=o(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}function s(t){var e;switch(this.encoding=a(t),this.encoding){case"utf16le":this.text=d,this.end=y,e=4;break;case"utf8":this.fillLast=l,e=4;break;case"base64":this.text=g,this.end=m,e=3;break;default:return this.write=_,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function u(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function c(t,e,r){var n=e.length-1;if(n<r)return 0;var i=u(e[n]);return 0<=i?(0<i&&(t.lastNeed=i-1),i):--n<r||-2===i?0:0<=(i=u(e[n]))?(0<i&&(t.lastNeed=i-2),i):!(--n<r||-2===i)&&0<=(i=u(e[n]))?(0<i&&(2===i?i=0:t.lastNeed=i-3),i):0}function p(t,e,r){return 128!=(192&e[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<e.length?128!=(192&e[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<e.length&&128!=(192&e[2])?(t.lastNeed=2,""):void 0:void 0}function l(t){var e=this.lastTotal-this.lastNeed,r=p(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){var r=c(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function d(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(55296<=n&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}function y(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function g(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function m(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function _(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}(e.StringDecoder=s).prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},s.prototype.end=f,s.prototype.text=h,s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},hwdV:function(t,e,r){var n=r("HDXh"),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),o(i,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},"kVK+":function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,p=-7,l=r?i-1:0,h=r?-1:1,f=t[e+l];for(l+=h,o=f&(1<<-p)-1,f>>=-p,p+=s;0<p;o=256*o+t[e+l],l+=h,p-=8);for(a=o&(1<<-p)-1,o>>=-p,p+=n;0<p;a=256*a+t[e+l],l+=h,p-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=c}return(f?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,p=(1<<c)-1,l=p>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=p):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),2<=(e+=1<=a+l?h/u:h*Math.pow(2,1-l))*u&&(a++,u/=2),p<=a+l?(s=0,a=p):1<=a+l?(s=(e*u-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));8<=i;t[r+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;0<c;t[r+f]=255&a,f+=d,a/=256,c-=8);t[r+f-d]|=128*y}}}]);
//# sourceMappingURL=vendors--doc_collector_security_audit.cdbf58c6c6902d902861.js.map