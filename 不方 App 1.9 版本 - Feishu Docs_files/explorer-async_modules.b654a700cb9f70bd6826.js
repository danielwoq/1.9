(this.webpackJsonp=this.webpackJsonp||[]).push([["explorer-async_modules"],{"1o3a":function(e,t,r){"use strict";var n=r("o0o1"),E=r.n(n),l=r("oZtI"),f=r("XMIC"),_=r("mHIB"),O=r("jryj"),a=r("jp/M"),d=function(n){return function(e){var t=e.type,r=e.payload;return t===a.actionTypes.ui.CONFIRM_OR_CANCEL_ACTION_FROM_MODAL&&r.isConfirm&&r.type===n}},h=function(n){return function(e){var t=e.type,r=e.payload;return t===a.actionTypes.ui.CONFIRM_OR_CANCEL_ACTION_FROM_MODAL&&!r.isConfirm&&r.type===n}};r.d(t,"a",function(){return o});var b=E.a.mark(o);function o(t){var r,n,a,o,c,s,i,u,p;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.confirmDialogProps,n=t.actionToPut,a=t.onError,o=t.onSuccess,e.prev=1,e.next=4,Object(l.put)(Object(f.c)(O.MODAL_TYPES.CONFIRMATION,r));case 4:return e.next=6,Object(l.race)({confirmAction:Object(l.take)(d(r.confirmationType)),cancelAction:Object(l.take)(h(r.confirmationType))});case 6:if(c=e.sent,s=c.confirmAction,c.cancelAction)return e.abrupt("return");e.next=11;break;case 11:return _.a.deregister(),i="function"==typeof n?Object(l.call)(n,s):l.put.resolve(n),e.next=15,Object(l.race)({successAction:i,modalAbortByUser:Object(l.take)(h(r.confirmationType))});case 15:if(u=e.sent,p=u.successAction,u.modalAbortByUser)return e.next=21,Object(l.cancel)();e.next=21;break;case 21:if(p)return e.next=24,Object(l.put)(Object(f.b)(O.MODAL_TYPES.CONFIRMATION,O.CLOSE_TYPES.COMPLETE));e.next=27;break;case 24:if(o)return e.next=27,o(p);e.next=27;break;case 27:e.next=37;break;case 29:return e.prev=29,e.t0=e.catch(1),console.error(e.t0),e.next=34,Object(l.put)(Object(f.b)(O.MODAL_TYPES.CONFIRMATION,O.CLOSE_TYPES.ABORT));case 34:if(a)return e.next=37,a(e.t0);e.next=37;break;case 37:case"end":return e.stop()}},b,null,[[1,29]])}},"3doy":function(e,t,r){"use strict";r.r(t);var n,a,o=r("lSNA"),c=r.n(o),s=r("RIqP"),i=r.n(s),u=r("BmhO"),p=r("QM+C"),E=r("ahx2"),l=r("hNo0");(a=n=n||{}).ADD="ADD",a.TASK_PROGRESS="TASK_PROGRESS",a.FILE_PROGRESS="FILE_PROGRESS",a.SUCCESS="SUCCESS",a.ERROR="ERROR",a.CANCEL="CANCEL",a.CANCEL_ALL="CANCEL_ALL",a.PAUSE="PAUSE",a.PAUSE_ALL="PAUSE_ALL",a.PENDING="PENDING";var f,_,O,d,h,b,y,T,S,R,C,v,m,x,k,j,g,I,L,N,M,D,F=r("658s");r.d(t,"BoxUploadStatus",function(){return _}),r.d(t,"BoxDownloadStatus",function(){return d}),r.d(t,"BoxLarkUploadStatus",function(){return b}),r.d(t,"CallerType",function(){return T}),r.d(t,"RegenerateType",function(){return S}),r.d(t,"RedirectType",function(){return C}),r.d(t,"PreviewRightPanelType",function(){return m}),r.d(t,"VersionPreviewType",function(){return k}),r.d(t,"WarningType",function(){return g}),r.d(t,"FileErrorType",function(){return L}),r.d(t,"PostFileCdnUrlPolicy",function(){return M}),r.d(t,"PDFPreviewTypes",function(){return V}),r.d(t,"mountPointTypeMap",function(){return W}),r.d(t,"IOMessageDataType",function(){return w}),r.d(t,"CommentType",function(){return U}),r.d(t,"FeedToolbarHiddenWidth",function(){return K}),r.d(t,"COMPLETE_DELETE_CALLER",function(){return B}),r.d(t,"NoteMetaSyncTypes",function(){return Y}),r.d(t,"MountPointType",function(){return l.a}),r.d(t,"ACTION",function(){return n}),r.d(t,"NEW_FILE_VERSION_SOURCE",function(){return F.a}),(O=_=_||{}).PENDING="pending",O.UPLOADING="uploading",O.SUCCESS="success",O.ERROR="error",O.PAUSE="pause",(h=d=d||{}).PENDING="downloadPending",h.DOWNLOADING="downloading",h.SUCCESS="downloadSuccess",h.ERROR="downloadError",h.PAUSE="downloadPause",(y=b=b||{}).PENDING="uploadPending",y.UPLOADING="uploading",y.CONVERTING="importConverting",y.SUCCESS="uploadSuccess",y.ERROR="uploadError",y.PAUSE="uploadPause",(T=T||{}).EXPLORER="explorer",(R=S=S||{})[R.DEFAULT=0]="DEFAULT",R[R.MANUAL=1]="MANUAL",(v=C=C||{})[v.OFF=0]="OFF",v[v.ON=1]="ON",(x=m=m||{}).Comment="Comment",x.FileInfo="FileInfo",(j=k=k||{}).Revert="Revert",j.Download="Download",j.Delete="Delete",(I=g=g||{})[I.ColumnCut=1]="ColumnCut",I[I.CellCut=2]="CellCut",I[I.ColumnAndCellCut=3]="ColumnAndCellCut",(N=L=L||{})[N.Other=1]="Other",N[N.NumLimited=88]="NumLimited",N[N.UnknownProblem=100]="UnknownProblem",N[N.xmlVersionNotSupport=101]="xmlVersionNotSupport",N[N.FileEncrypted=102]="FileEncrypted",N[N.ForderNumLimited=4001]="ForderNumLimited",N[N.SizeLimited=9004]="SizeLimited",N[N.EmptyFile=9011]="EmptyFile",N[N.FolderNodeLimited=E.NODE_OUT_OF_LIMIT_BY_EXPLORER_ERROR_CODE]="FolderNodeLimited",(D=M=M||{}).equal="equal",D.near="near",D.allow_up="allow_up",D.allow_down="allow_down";var w,P,U,H,V=[u.s.PDF].concat(i()(u.F),i()(u.G),i()(u.B),i()(u.H)),W=(f={},c()(f,p.NUM_FILE_TYPE.DOC,l.a.DOC),c()(f,p.NUM_FILE_TYPE.BITABLE,l.a.BITABLE),c()(f,l.a.BITABLE,l.a.BITABLE),f);(P=w=w||{}).USER_NEWINFO="USER_NEWINFO",P.USER_LEAVE="USER_LEAVE",P.ROOM_MEMBERS="ROOM_MEMBERS",P.USER_CHANGES="USER_CHANGES",P.MESSAGE_CHANNEL="MESSAGE_CHANNEL",P.PUSH_COMMENT="driveCommonPushChannel",P.DELETE_FILE_VERSION="DELETE_FILE_VERSION",P.UPLOAD_FILE_VERSION="UPLOAD_FILE_VERSION",P.UPDATE_FILE_META="UPDATE_FILE_META",(H=U=U||{})[H.RECT=1]="RECT",H[H.OLD=2]="OLD",H[H.FULL=3]="FULL",H[H.TEXT=4]="TEXT";var B,Y,q,K=300;(B=B||{}).STORAGE_CENTER="quota_center",(q=Y=Y||{}).USER_CHANGES="USER_CHANGES",q.ACCEPT_COMMIT="ACCEPT_COMMIT",q.NEW_CHANGES="NEW_CHANGES"},"3iXK":function(e,t,r){"use strict";var n,a,o,c,s,i;r.r(t),r.d(t,"CreateLimitationModalType",function(){return n}),r.d(t,"ConfirmationOrCancelType",function(){return o}),r.d(t,"ModuleTypeMap",function(){return s}),(a=n=n||{}).CloneFile="CloneFile",a.CopyPasteFileImage="CopyPasteFileImage",a.CreateSuite="CreateSuite",a.RestoreFileVersion="RestoreFileVersion",a.UploadFile="UploadFile",a.ImportFile="ImportFile",a.UserStorageLimit="UserStorageLimit",(c=o=o||{}).Destroy="Destroy",c.DeleteEntity="DeleteEntity",c.DeleteRecord="DeleteRecord",c.DeleteStorageFile="DeleteStorageFile",c.Default="Default",c.DeleteUnderSuite="DeleteUnderSuite",c.DeleteSoftLink="DeleteSoftLink",(i=s=s||{}).RECENT="recent",i.SEARCH="search",i.TREE="tree",i.NAME="name"},"3y84":function(e,t,r){"use strict";r.d(t,"b",function(){return s}),r.d(t,"a",function(){return i});var n=r("o0o1"),p=r.n(n),a=r("yXPU"),o=r.n(a),E=r("toa8"),l=r("Q6nf"),c=r("y94N"),f=r("QM+C"),_=r("jp/M");function s(e,t){return!(!e||!c.c.includes(e))||!Boolean(t.filter(function(e){return Boolean(e)}).length)}function i(e,t,r){return u.apply(this,arguments)}function u(){return(u=o()(p.a.mark(function e(c,s,t){var i,r,n,a,o,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=[],t.forEach(function(e){var t,r,n,a,o="string"==typeof e?(t=e,r=(n=s.get(t))&&n.type||"",n&&n.token||""):(t=e.obj_token,r=((n=s.get(t))||e).type||"",(n||e).token||"");r&&(a=Boolean(n&&n.get("owner_id")===c),i.push({type:r,token:o,objToken:t,isOwner:a}))}),e.prev=2,r=0;case 4:if(r<i.length)return n=i.slice(r,r+f.MAX_PAYLOAD_TOKEN_COUNT),e.next=8,Object(E.d)({baseURL:l.a,headers:{"Content-Type":"application/json"},url:_.apiUrls.GET_EXTERNAL_HINT,method:_.apiUrls.METHOD.POST,data:{objs:n.map(function(e){return{type:e.type,token:e.objToken}})}});e.next=20;break;case 8:a=e.sent,o=a.data,e.t0=p.a.keys(o);case 11:if((e.t1=e.t0()).done){e.next=17;break}if(u=e.t1.value,!1===o[u])return e.abrupt("return",!0);e.next=15;break;case 15:e.next=11;break;case 17:r+=f.MAX_PAYLOAD_TOKEN_COUNT,e.next=4;break;case 20:return e.abrupt("return",!1);case 23:e.prev=23,e.t2=e.catch(2),console.error(e.t2);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,null,[[2,23]])}))).apply(this,arguments)}},"4MPO":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("Ixoi");function a(e){return Object(n.l)(e)?"obj_token":"token"}},"4kdM":function(e,t,r){"use strict";var n=r("LV2V"),E=r("YHEm"),l=r("XFn8"),f=r("4/q3"),_=Object.prototype,O=_.hasOwnProperty,a=Object(n.a)(function(e,t){e=Object(e);var r=-1,n=t.length,a=2<n?t[2]:void 0;for(a&&Object(l.a)(t[0],t[1],a)&&(n=1);++r<n;)for(var o=t[r],c=Object(f.a)(o),s=-1,i=c.length;++s<i;){var u=c[s],p=e[u];(void 0===p||Object(E.a)(p,_[u])&&!O.call(e,u))&&(e[u]=o[u])}return e});t.a=a},"5Pwn":function(e,i,u){"use strict";(function(t){u.d(i,"c",function(){return e}),u.d(i,"b",function(){return o}),u.d(i,"a",function(){return c}),u.d(i,"d",function(){return s});var r=u("QM+C"),n=function(e){return 1<e.length},a=function(e){return e[0]===r.NUM_FILE_TYPE.FOLDER},e=function(e){return e?n(e)?t("explorer.to_share_folder_and_doc"):a(e)?t("explorer.to_share_folder"):t("explorer.to_share_doc"):""},o=function(e){return e?n(e)?t("explorer.to_person_folder_and_doc"):a(e)?t("explorer.to_person_folder"):t("explorer.to_person_doc"):""},c=function(e){return e?e.get("name")||e.get("title"):""},s=function(e){return e?e.reduce(function(e,t,r){var n=t.type;return null!==n&&e.every(function(e){return e!==n})?e.concat(n):e},[]):[]}}).call(this,u("2vAP"))},"658s":function(e,t,r){"use strict";var n,a;r.d(t,"a",function(){return n}),(a=n=n||{})[a.WEB=0]="WEB",a[a.CLIENT=1]="CLIENT",a[a.ANDRIOD=2]="ANDRIOD",a[a.IOS=3]="IOS",a[a.LARK=4]="LARK",a[a.OTHER=5]="OTHER",a[a.SYNC_DISK=6]="SYNC_DISK",a[a.WPS=7]="WPS"},"65XM":function(e,t,r){"use strict";r.r(t),r.d(t,"fetchSearchedUser",function(){return u}),r.d(t,"fetchSearchedUserByContact",function(){return p}),r.d(t,"fetchSearchedSuite",function(){return E}),r.d(t,"fetchSearchedFolder",function(){return l}),r.d(t,"fetchRefineSearch",function(){return f}),r.d(t,"cancelSearchedSuite",function(){return _}),r.d(t,"fetchSearchedWiki",function(){return O}),r.d(t,"cancelSearchedWiki",function(){return d}),r.d(t,"fetchSearchedWikiAdvanced",function(){return h}),r.d(t,"fetchSearchHistory",function(){return b}),r.d(t,"updateSearchHistory",function(){return y}),r.d(t,"updateRefineSearchHistory",function(){return T}),r.d(t,"deleteSearchHistory",function(){return S}),r.d(t,"getRefineSearch",function(){return v}),r.d(t,"fetchRefinedAdvanced",function(){return m}),r.d(t,"resetSearchState",function(){return x}),r.d(t,"showAdvancedSearch",function(){return k}),r.d(t,"hideAdvancedSearch",function(){return j}),r.d(t,"switchTab",function(){return D}),r.d(t,"switchRecentTab",function(){return F}),r.d(t,"toggleSearchUserChosen",function(){return w}),r.d(t,"toggleSearchChatChosen",function(){return P}),r.d(t,"toggleSearchWikiSpaceChosen",function(){return U}),r.d(t,"toggleSearchFolderChosen",function(){return H}),r.d(t,"selectUser",function(){return V}),r.d(t,"selectCandidateUser",function(){return W}),r.d(t,"deleteUser",function(){return B}),r.d(t,"deleteChat",function(){return Y}),r.d(t,"deleteWikiSpace",function(){return q}),r.d(t,"deleteFolder",function(){return K}),r.d(t,"selectChat",function(){return X}),r.d(t,"selectWikiSpace",function(){return z}),r.d(t,"selectFolder",function(){return J}),r.d(t,"resetFolder",function(){return Q}),r.d(t,"changeOpenTime",function(){return Z}),r.d(t,"chooseFileType",function(){return $}),r.d(t,"changeSearchKeyword",function(){return ee}),r.d(t,"loadMoreRefineSearch",function(){return te}),r.d(t,"loadRelevantRefineSearch",function(){return re}),r.d(t,"loadRelevantMoreRefineSearch",function(){return ne}),r.d(t,"fillAdvancedSearchList",function(){return ae}),r.d(t,"setAdvancedSearchLoadType",function(){return oe}),r.d(t,"setIsSearchHistoryShown",function(){return ce}),r.d(t,"setIsAdvanceSearchIconShown",function(){return se}),r.d(t,"setIsMoreRecentBtnShown",function(){return ie}),r.d(t,"enterWiki",function(){return ue}),r.d(t,"leaveWiki",function(){return pe}),r.d(t,"setIsUserCandidateItemsShown",function(){return Ee}),r.d(t,"setIsChatCandidateItemsShown",function(){return le}),r.d(t,"fetchRecentWiki",function(){return fe});var R,n,a=r("lSNA"),g=r.n(a),o=r("4kdM"),I=r("jp/M"),L=r("QM+C"),N=r("I1f5"),c=r("ZGZ5"),s=r("94ch"),C=r("cyON"),i=r("JgWU"),M="web";(n=R=R||{})[n.ALL=0]="ALL",n[n.ONLY_WIKI=1]="ONLY_WIKI",n[n.ONLY_SPACE=2]="ONLY_SPACE";var u=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(e,{count:10}),g()({type:I.actionTypes.search.FETCH_SEARCH_USER},L.REQUEST,{url:I.apiUrls.GET_SEARCH_USER,params:Object.assign({query:t},e),options:{transformResponse:function(e){return Object.assign({},e,{query:t})},takeLatest:!0}})},p=function(t,r){return g()({type:I.actionTypes.search.FETCH_SEARCH_USER_BY_CONTACT},L.REQUEST,{url:I.apiUrls.GET_SEARCH_USER_BY_CONTACT,params:{content:t,content_type:r},options:{transformResponse:function(e){return Object.assign({},e,{query:t,searchType:r})},takeLatest:!0}})},E=function(e,t,r,n){return g()({type:I.actionTypes.search.FETCH_SEARCH_SUITE},L.REQUEST,{url:I.apiUrls.GET_SEARCH_SUITE,params:Object.assign({query:e,offset:t,count:r},n),mergeRequestHeaderIntoMeta:!0,options:{takeLatest:!0}})},l=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return g()({type:I.actionTypes.search.FETCH_SEARCH_FOLDER},L.REQUEST,{url:I.apiUrls.GET_REFINE_SEARCH,params:Object.assign({query:e},t,{source:M}),mergeRequestHeaderIntoMeta:!0,options:{takeLatest:!0}})},f=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return g()({type:I.actionTypes.search.FETCH_REFINE_SEARCH},L.REQUEST,{url:I.apiUrls.GET_REFINE_SEARCH,params:Object.assign({query:e},t,{source:M}),mergeRequestHeaderIntoMeta:!0,options:{takeLatest:!0}})},_=function(){return{type:"CANCEL_".concat(I.actionTypes.search.FETCH_SEARCH_SUITE)}},O=function(e,t,r,n){return g()({type:I.actionTypes.search.FETCH_SEARCH_WIKI},L.REQUEST,{url:I.apiUrls.GET_WIKI_SEARCH_SUITE,params:Object.assign({query:e,offset:t,count:r},n),mergeRequestHeaderIntoMeta:!0,options:{takeLatest:!0}})},d=function(){return{type:"CANCEL_".concat(I.actionTypes.search.FETCH_SEARCH_WIKI)}},h=function(e){var t=e.query,r=void 0===t?"":t,n=e.offset,a=void 0===n?0:n,o=e.count,c=void 0===o?12:o,s=e.ownerId,i=void 0===s?"":s,u=e.searchType,p=void 0===u?R.ONLY_WIKI:u,E=e.groupID,l=void 0===E?"":E,f=e.spaceID,_=void 0===f?"":f,O=e.openTime,d=void 0===O?"":O,h=e.sortRule,b=void 0===h?0:h,y=e.needPath,T=void 0===y?0:y,S={type:I.actionTypes.search.FETCH_SEARCH_WIKI_ADVANCED};return g()(S,L.REQUEST,{url:I.apiUrls.GET_WIKI_SEARCH_SUITE,params:{query:r,offset:a,count:c,space_id:_,group_id:l,open_time:d,owner_id:i,search_type:p,sort_rule:b,need_main_path:T,source:M},mergeRequestHeaderIntoMeta:!0,options:{takeLatest:!0}}),g()(S,C.a,!0),S},b=function(e){return g()({type:I.actionTypes.search.FETCH_SEARCH_HISTORY},L.REQUEST,{url:I.apiUrls.GET_SEARCH_HISTORY,params:{size:e}})},y=function(e){return g()({type:I.actionTypes.search.UPDATE_SEARCH_HISTORY},L.REQUEST,{url:I.apiUrls.UPDATE_SEARCH_HISTORY,params:{query:e}})},T=function(e){return g()({type:I.actionTypes.search.UPDATE_REFINE_SEARCH_HISTORY},L.REQUEST,{headers:{"Content-Type":"application/json"},url:I.apiUrls.UPDATE_REFINE_SEARCH_HISTORY,method:I.apiUrls.METHOD.POST,data:e})},S=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return g()({type:I.actionTypes.search.DELETE_SEARCH_HISTORY},L.REQUEST,{url:I.apiUrls.DELETE_SEARCH_HISTORY,params:{type:t,query:e}})},v=function(e){var t=e.query,r=void 0===t?"":t,n=e.offset,a=void 0===n?0:n,o=e.count,c=void 0===o?12:o,s=e.objTypes,i=void 0===s?String(N.OBJ_TYPE.ALL):s,u=e.ownerId,p=void 0===u?"":u,E=e.chatID,l=void 0===E?"":E,f=e.groupID,_=void 0===f?"":f,O=e.folderTokens,d=void 0===O?"":O,h=e.openTime,b=void 0===h?"":h,y=e.fileType,T=void 0===y?"":y,S=e.sortRule,R=void 0===S?0:S,C=e.needPath,v=void 0===C?0:C,m=e.searchQuickAccess,x=void 0!==m&&m,k=e.configSource,j=void 0===k?0:k;return g()({type:I.actionTypes.search.FETCH_REFINE_SEARCH},L.REQUEST,{url:I.apiUrls.GET_REFINE_SEARCH,params:{query:r,offset:a,count:c,obj_types:i,owner_id:p,chat_id:l,group_id:_,folder_tokens:d,open_time:b,file_type:T,sort_rule:R,need_path:v,search_quick_access:x,source:M,config_source:j},mergeRequestHeaderIntoMeta:!0,options:{takeLatest:!0,transformResponse:function(e){return Object.assign({},e)}}})},m=function(e){return Object.assign({},v(e),g()({type:I.actionTypes.search.FETCH_REFINE_SEARCH_ADVANCED},C.a,!0))},x=function(){return function(e,t){var r=t(),n=Object(c.a)(r);return e({type:I.actionTypes.search.RESET_ADVANCED_SEARCH,payload:n})}},k=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{type:I.actionTypes.search.SHOW_ADVANCED_SEARCH,payload:e}},j=function(){return{type:I.actionTypes.search.HIDE_ADVANCED_SEARCH}},D=function(e){return{type:I.actionTypes.search.SWITCH_TAB,payload:e}},F=function(e){return{type:I.actionTypes.search.SWITCH_RECENT_TAB,payload:e}},w=function(e){return{type:I.actionTypes.search.TOGGLE_USER_CHOSEN,payload:e}},P=function(e){return{type:I.actionTypes.search.TOGGLE_CHAT_CHOSEN,payload:e}},U=function(e){return{type:I.actionTypes.search.TOGGLE_WIKI_SPACE_CHOSEN,payload:e}},H=function(e){return{type:I.actionTypes.search.TOGGLE_FOLDER_CHOSEN,payload:e}},V=function(a){return function(e,t){var r=t(),n=Object(s.a)(r).get(a);if(n)return e({type:I.actionTypes.search.SELECT_USER,payload:n})}},W=function(r){return function(e,t){return e({type:I.actionTypes.search.SELECT_USER,payload:r})}},B=function(e){return{type:I.actionTypes.search.DELETE_USER,payload:e}},Y=function(e){return{type:I.actionTypes.search.DELETE_CHAT,payload:e}},q=function(e){return{type:I.actionTypes.search.DELETE_WIKI_SPACE,payload:e}},K=function(e){return{type:I.actionTypes.search.DELETE_FOLDER,payload:e}},X=function(r){return function(e,t){if(r)return e({type:I.actionTypes.search.SELECT_CHAT,payload:r})}},z=function(r){return function(e,t){if(r)return e({type:I.actionTypes.search.SELECT_WIKI_SPACE,payload:r})}},J=function(r){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(e,t){if(r)return e({isAppend:n,type:I.actionTypes.search.SELECT_FOLDER,payload:r})}},Q=function(){return function(e,t){return e({type:I.actionTypes.search.RESET_FOLDER})}},Z=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return{type:I.actionTypes.search.CHANGE_OPEN_TIME,payload:e}},$=function(e){return{type:I.actionTypes.search.CHOOSE_FILE_TYPE,payload:e}},ee=function(e,t){var r={keyword:e,source:t||N.SEARCH_SOURCE.INPUT};return{type:I.actionTypes.search.CHANGE_SEARCH_KEYWORD,payload:r}},te=function(e){return{type:I.actionTypes.search.LOAD_MORE_REFINE_SEARCH,payload:e}},re=function(){return{type:I.actionTypes.search.LOAD_RELEVANT_REFINE_SEARCH}},ne=function(e){return{type:I.actionTypes.search.LOAD_RELEVANT_MORE_REFINE_SEARCH,payload:e}},ae=function(e){return{type:I.actionTypes.search.FILL_ADVANCED_SEARCH_LIST,payload:e}},oe=function(e){return{type:I.actionTypes.search.SET_ADVANCED_SEARCH_LOAD_TYPE,payload:e}},ce=function(e){return{type:I.actionTypes.search.SET_IS_SEARCH_HISTORY_SHOWN,payload:e}},se=function(e){return{type:I.actionTypes.search.SET_IS_ADVANCE_SEARCH_ICON_SHOWN,payload:e}},ie=function(e){return{type:I.actionTypes.search.SET_IS_MORE_RECENT_BTN_SHOWN,payload:e}},ue=function(e){return{type:I.actionTypes.search.ENTER_WIKI}},pe=function(e){return{type:I.actionTypes.search.LEAVE_WIKI}},Ee=function(e){return{type:I.actionTypes.search.SET_IS_USER_CANDIDATE_ITEMS_SHOWN,payload:e}},le=function(e){return{type:I.actionTypes.search.SET_IS_CHAT_CANDIDATE_ITEMS_SHOWN,payload:e}},fe=function(e,t,r){var n={type:I.actionTypes.search.FETCH_RECENT_WIKI};return g()(n,L.REQUEST,{url:I.apiUrls.WIKI_GET_RECENT,method:"GET",params:{offset:e,size:t,space_id:r}}),g()(n,i.c,function(e){return e.payload.users}),n}},Huva:function(e,b,y){"use strict";(function(C){y.d(b,"a",function(){return _});var e=y("o0o1"),j=y.n(e),g=y("c8Bs"),I=y("lCmp"),L=y("oZtI"),v=y("jp/M"),m=y("QM+C"),x=y("yiFV"),n=y("y94N"),N=y("aR0j"),o=y("ZGZ5"),M=y("FFjf"),D=y("3y84"),F=y("rLED"),w=y("XMIC"),s=y("X+Le"),P=y("jryj"),i=y("5Pwn"),U=y("/PhZ"),k=y("Hv6m"),a=y("4MPO"),H=y("rAc3"),V=y("4Uab"),W=y("GIKb"),t=j.a.mark(_),B=j.a.mark(O),r=j.a.mark(q),u=j.a.mark(K),p=j.a.mark(X),E=j.a.mark(z),l=j.a.mark(d),c=j.a.mark(J),Y=j.a.mark(h),f=j.a.mark(Q);function _(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.takeEvery)(v.actionTypes.explorer.USER_FRIENDLY_MOVE_FILE,O);case 2:return e.next=4,Object(L.takeEvery)(v.actionTypes.explorer.USER_FRIENDLY_MOVE_FILE_SHOW_TOAST,h);case 4:case"end":return e.stop()}},t)}function O(t){var r,n,a,o,c,s,i,u,p,E,l,f,_,O,d,h,b,y,T,S,R,C,v,m,x,k;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.payload,n=r.srcTokens,a=r.destToken,o=r.objTokens,c=r.fatherTokenOfSrcTokens,s=r.cancelable,i=r.fatherToken,u=r.fatherType,e.next=5,Object(L.select)(N.y);case 5:return p=e.sent,E=n.map(function(e){return p.get(e)}),l=p.get(a),e.next=10,Object(L.select)(M.b);case 10:return f=e.sent,e.next=13,Object(L.select)(N.M);case 13:return _=e.sent,O=$(f,c,_),d=Z({destToken:a,destItem:l}),h=Object.assign({},r,{correctedDestToken:d,fatherTokenOfSrcTokens:O}),b=Object(I.a)(E,function(e){return Boolean(e&&Object(H.i)(e))}),y=Boolean(l&&Object(H.i)(l)),T=Object(D.b)(f,n),S={srcItems:E,destItem:l,payload:h},e.next=23,Q(T,E,O,p,l);case 23:if(e.sent){e.next=26;break}return e.abrupt("return");case 26:if(T)return R=Object(F.m)(),e.next=30,Object(L.select)(N.k);e.next=43;break;case 30:return C=e.sent,v=C.toArray(),e.next=34,J(v);case 34:if(m=e.sent,R&&m&&l.is_external)return e.next=38,Object(L.put)(Object(w.c)(P.MODAL_TYPES.MOVE_TO_EXTERNAL_SHARED_FOLDER,{objTokens:o,destToken:d}));e.next=40;break;case 38:e.next=42;break;case 40:return e.next=42,L.put.resolve(Object(U.commonAddFileTo)({objTokens:o,destToken:d,urlType:Object(W.a)(l)}));case 42:return e.abrupt("return");case 43:if(!b||!y){e.next=50;break}if(x=!1,Object(H.f)(E[0])&&(k=E[0].get("space_id"),x=Object(g.a)(E.slice(1).concat(l),function(e){return Object(H.f)(e)&&e.get("space_id")===k})),x){e.next=50;break}return e.delegateYield(q(t),"t0",48);case 48:return e.delegateYield(K(S),"t1",49);case 49:return e.abrupt("return",e.t1);case 50:if(!b&&y)return e.delegateYield(q(t),"t2",52);e.next=54;break;case 52:return e.delegateYield(X(S),"t3",53);case 53:return e.abrupt("return",e.t3);case 54:if(b&&!y)return e.delegateYield(q(t),"t4",56);e.next=58;break;case 56:return e.delegateYield(z(S),"t5",57);case 57:return e.abrupt("return",e.t5);case 58:return e.next=60,L.put.resolve(Object(U.moveFile)({urlType:Object(W.a)(E[0]),srcToken:n,destToken:d,cancelable:s,fatherToken:i,fatherType:u}));case 60:return e.next=62,Object(L.put)(Object(w.b)(P.MODAL_TYPES.MOVE,P.CLOSE_TYPES.COMPLETE));case 62:e.next=69;break;case 64:return e.prev=64,e.t6=e.catch(0),e.next=68,Object(L.put)(Object(w.a)());case 68:console.error(e.t6);case 69:case"end":return e.stop()}},B,null,[[0,64]])}function q(e){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.put)(Object(w.b)(P.MODAL_TYPES.MOVE,P.CLOSE_TYPES.TRANSFER));case 2:case"end":return e.stop()}},r)}function K(t){var r,n,a,o,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=t.srcItems,a=t.destItem,e.next=3,J(n);case 3:return o=e.sent,c={srcItems:n,destItem:a,fileExternalAccess:o},e.next=7,Object(L.put)(Object(w.c)(P.MODAL_TYPES.MOVE_BETWEEN_SHARE_FOLDER,c));case 7:return e.next=9,d(r);case 9:if(e.sent)return e.next=13,Object(L.put)(Object(w.b)(P.MODAL_TYPES.MOVE_BETWEEN_SHARE_FOLDER,P.CLOSE_TYPES.COMPLETE));e.next=13;break;case 13:case"end":return e.stop()}},u)}function X(t){var r,n,a,o,c,s;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.srcTokens,a=r.correctedDestToken,o=t.srcItems,c=t.destItem,e.next=3,J(o);case 3:return s=e.sent,e.next=6,Object(L.put)(Object(w.c)(P.MODAL_TYPES.MOVE_TO_SHARE_FOLDER,{selectedType:Object(i.d)(o),destName:Object(i.a)(c),srcToken:n,destToken:a,destItem:c,fileExternalAccess:s}));case 6:return e.next=8,d(t.payload);case 8:if(e.sent)return e.next=12,Object(L.put)(Object(w.b)(P.MODAL_TYPES.MOVE_TO_SHARE_FOLDER,P.CLOSE_TYPES.COMPLETE));e.next=12;break;case 12:case"end":return e.stop()}},p)}function z(t){var r,n,a,o,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.srcTokens,a=r.correctedDestToken,o=t.srcItems,c=Object(I.a)(o,function(e){return Object(H.a)(e)}),e.next=4,Object(L.put)(Object(w.c)(P.MODAL_TYPES.MOVE_TO_PERSONAL_FOLDER,{confirmText:C(c?"explorer.move_to_person_from_new_folder":"explore.move_to_person_from_old_folder"),selectedType:Object(i.d)(o),srcToken:n,destToken:a}));case 4:return e.next=6,d(t.payload);case 6:if(e.sent)return e.next=10,Object(L.put)(Object(w.b)(P.MODAL_TYPES.MOVE_TO_PERSONAL_FOLDER,P.CLOSE_TYPES.COMPLETE));e.next=10;break;case 10:case"end":return e.stop()}},E)}function d(t){var r,n,a,o,c,s,i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.race)({closeModal:Object(L.take)(v.actionTypes.ui.CLOSE_MODAL),stage2:Object(L.take)(v.actionTypes.explorer.USER_FRIENDLY_MOVE_FILE_CONFIRM)});case 2:if(r=e.sent,r.stage2){e.next=6;break}return e.abrupt("return",!1);case 6:return n=t.srcTokens,a=t.cancelable,o=t.correctedDestToken,c=t.fatherType,s=t.fatherToken,e.next=9,Object(L.select)(N.y);case 9:return i=e.sent,e.next=12,L.put.resolve(Object(U.moveFile)({urlType:Object(W.a)(i.get(n[0])),srcToken:n,destToken:o,cancelable:a,fatherType:c,fatherToken:s}));case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}},l)}function J(t){var r,n,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.select)(o.a);case 2:return r=e.sent,n=r.get("id"),e.next=6,Object(L.select)(N.W);case 6:return a=e.sent,e.next=9,Object(L.call)(D.a,n,a,t);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},c)}function h(t){var r,n,a,o,c,s,i,u,p,E,l,f,_,O,d,h,b,y,T,S,R;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.params,a=r.successAction,o=n.srcTokens,c=n.destToken,s=n.cancelable,i=n.fatherTokenOfSrcTokens,u=a.payload.success_tokens,p=1<u.length,E=u.length,l=p?"".concat(C("explorer.move_success")," ").concat(E," ").concat(C("explorer.item")):C("explorer.move_success"),f=i!==x.DummyTokens.ShareFolders&&s,e.next=9,Object(L.call)(V.b,{type:m.TOAST_TYPE.success,duration:4e3,content:l,cancelable:f});case 9:if(e.sent!==V.a.Cancelled)return e.abrupt("return");e.next=12;break;case 12:if(i){e.next=15;break}return console.error("please provide the fatherTokenOfSrcTokens"),e.abrupt("return");case 15:return e.next=17,Object(L.select)(N.y);case 17:return _=e.sent,O=_.get(c)?_.get(c).type:null,e.next=21,Object(L.put)(Object(U.moveFile)({urlType:Object(W.a)(_.get(u[0])),srcToken:u,destToken:i,cancelable:!1,fatherToken:c,fatherType:O}));case 21:return e.next=23,Object(L.race)({success:Object(L.take)(v.actionTypes.explorer.MOVE_FILE_SUCCESS),failed:Object(L.take)(v.actionTypes.explorer.MOVE_FILE_FAIL),canceled:Object(L.take)(v.actionTypes.explorer.MOVE_FILE_CANCEL)});case 23:if(d=e.sent,d.success){e.next=27;break}return e.abrupt("return");case 27:return e.next=29,Object(L.put)(Object(k.a)());case 29:b=!(h=!0),y=void 0,e.prev=32,T=o[Symbol.iterator]();case 34:if(h=(S=T.next()).done){e.next=41;break}return R=S.value,e.next=38,Object(L.put)(Object(U.removeChildFromFather)({fatherToken:c,childToken:R}));case 38:h=!0,e.next=34;break;case 41:e.next=47;break;case 43:e.prev=43,e.t0=e.catch(32),b=!0,y=e.t0;case 47:e.prev=47,e.prev=48,h||null==T.return||T.return();case 50:if(e.prev=50,b)throw y;e.next=53;break;case 53:return e.finish(50);case 54:return e.finish(47);case 55:case"end":return e.stop()}},Y,null,[[32,43,47,55],[48,,50,54]])}function Q(t,r,e,n,a){var o,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}if(o=!1,c="",a.type!==m.NUM_ROOT_META.EXPLORER&&(Object(I.a)(r,function(e){return Object(H.m)(e)})&&Object(H.k)(a)?(o=!0,c=C("explorer.team_space.normal_to_beta")):Object(I.a)(r,function(e){return Object(H.k)(e)})&&Object(H.m)(a)&&(o=!0,c=C("explorer.team_space.beta_to_normal"))),o)return e.next=7,Object(L.put)(Object(s.showToast)({type:"error",content:c}));e.next=8;break;case 7:return e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},f)}function Z(e){var t=e.destToken,r=e.destItem;if(!r)return console.error("dest item notfound, please check your dest_token"),t;var n=Object(a.a)(r.toJS());return t=r.get(n)}function $(e,t,r){return e===n.p.MyFolder?r:e===n.p.SharedFolder?x.DummyTokens.ShareFolders:t}}).call(this,y("2vAP"))},SEc5:function(e,t,r){"use strict";r.d(t,"c",function(){return Y}),r.d(t,"b",function(){return q});var n=r("o0o1"),N=r.n(n),M=r("oZtI"),D=r("jp/M"),F=r("65XM"),w=r("I1f5"),P=r("l4d2"),U=r("UFSZ"),H=r("dBKg"),a=r("wd/R"),o=r.n(a),V=r("jryj"),c=N.a.mark(s),W=N.a.mark(i),B=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=e;if(2!==e.length||e.every(function(e){return 0===e})||e.some(function(e){return isNaN(e)})){if(!t)return[];r=[o()().subtract(90,"days").valueOf(),Date.now()]}return r.map(function(e){return Math.round(e/1e3)||0})},Y=function(e,t){return e===w.OBJ_TYPE.ALL?t?w.OBJ_ALL_RECENT_MODE:w.OBJ_ALL:[e]},q=function(e,t,r){var n=Boolean(t===w.OBJ_TYPE.ALL||t===w.OBJ_TYPE.FILE);return r&&n&&[w.FILE_TYPE_NUM.OTHER,w.FILE_TYPE_NUM.FOLDER].includes(e)&&(n=!1),n?e:""};function s(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.takeLatest)([D.actionTypes.ui.OPEN_MODAL,D.actionTypes.search.SWITCH_TAB,D.actionTypes.search.TOGGLE_USER_CHOSEN,D.actionTypes.search.TOGGLE_WIKI_SPACE_CHOSEN,D.actionTypes.search.SELECT_WIKI_SPACE,D.actionTypes.search.SELECT_USER,D.actionTypes.search.TOGGLE_CHAT_CHOSEN,D.actionTypes.search.TOGGLE_FOLDER_CHOSEN,D.actionTypes.search.SELECT_CHAT,D.actionTypes.search.SELECT_FOLDER,D.actionTypes.search.RESET_FOLDER,D.actionTypes.search.CHANGE_OPEN_TIME,D.actionTypes.search.CHOOSE_FILE_TYPE,D.actionTypes.search.LOAD_MORE_REFINE_SEARCH,D.actionTypes.search.LOAD_RELEVANT_REFINE_SEARCH,D.actionTypes.search.LOAD_RELEVANT_MORE_REFINE_SEARCH,D.actionTypes.search.CHANGE_SEARCH_KEYWORD,D.actionTypes.search.SWITCH_RECENT_TAB,D.actionTypes.search.DELETE_USER,D.actionTypes.search.DELETE_CHAT,D.actionTypes.search.DELETE_FOLDER,D.actionTypes.search.DELETE_WIKI_SPACE],i);case 2:case"end":return e.stop()}},c)}function i(t){var r,n,a,o,c,s,i,u,p,E,l,f,_,O,d,h,b,y,T,S,R,C,v,m,x,k,j,g,I,L;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type===D.actionTypes.ui.OPEN_MODAL&&t.payload.modalType!==V.MODAL_TYPES.ADVANCED_SEARCH)return e.abrupt("return");e.next=2;break;case 2:return e.next=4,Object(M.select)(U.c);case 4:return r=e.sent.keyword.trim(),n=0===r.length,e.next=8,Object(M.select)(U.h);case 8:return a=e.sent,e.next=11,Object(M.select)(U.k);case 11:return o=e.sent,e.next=14,Object(M.select)(U.i);case 14:return c=e.sent,e.next=17,Object(M.select)(U.j);case 17:return s=e.sent,e.next=20,Object(M.select)(U.d);case 20:return i=e.sent,e.next=23,Object(M.select)(U.a);case 23:return u=e.sent,e.next=26,Object(M.select)(U.f);case 26:return p=e.sent,e.next=29,Object(M.select)(H.b);case 29:return E=e.sent,e.next=32,Object(M.select)(U.v);case 32:return l=e.sent,e.next=35,Object(M.select)(U.s);case 35:return f=e.sent,e.next=38,Object(M.select)(U.l);case 38:_=e.sent,O=o.filter(function(e){return Boolean(e.get("isChosen"))}).map(function(e){return e.get("id","")}).join(","),d=c.filter(function(e){return Boolean(e.get("isChosen")&&e.get("owner_type")===D.common.OWNER_TYPE.LARK_CHAT_GROUP)}).map(function(e){return e.get("owner_id","")}).join(","),h=c.filter(function(e){return Boolean(e.get("isChosen")&&D.common.OWNER_TYPE_USER.includes(e.get("owner_type")))}).map(function(e){return e.get("owner_id","")}).join(","),b=s.filter(function(e){return Boolean(e.get("isChosen"))}).map(function(e){return e.get("token","")}).join(","),y=b===P.a,T=B(u,n).join(","),S=Y(a,n).join(","),R=q(i,a,n),e.t0=t.type,e.next=e.t0===D.actionTypes.search.LOAD_MORE_REFINE_SEARCH?50:e.t0===D.actionTypes.search.LOAD_RELEVANT_REFINE_SEARCH?53:e.t0===D.actionTypes.search.LOAD_RELEVANT_MORE_REFINE_SEARCH?56:59;break;case 50:return C=w.ADVANCED_SEARCH_LOAD_TYPE.LOAD_MORE,v=!0,e.abrupt("break",61);case 53:return C=w.ADVANCED_SEARCH_LOAD_TYPE.LOAD_RELEVANT,v=!1,e.abrupt("break",61);case 56:return C=w.ADVANCED_SEARCH_LOAD_TYPE.LOAD_RELEVANT_MORE,v=!0,e.abrupt("break",61);case 59:C=w.ADVANCED_SEARCH_LOAD_TYPE.NORMAL,v=!1;case 61:return e.next=63,Object(M.put)(Object(F.setAdvancedSearchLoadType)(C));case 63:if(m=v?p:0,n)return e.next=67,Object(M.select)(U.b);e.next=69;break;case 67:k=e.sent,x=t.type===D.actionTypes.search.LOAD_RELEVANT_REFINE_SEARCH||t.type===D.actionTypes.search.LOAD_RELEVANT_MORE_REFINE_SEARCH?k===w.RECENT_TYPE.OPENED?w.SORT_RULE.RECENT_RELEVANT_OPENED:w.SORT_RULE.RECENT_RELEVANT_MODIFIED:k===w.RECENT_TYPE.OPENED?w.SORT_RULE.RECENT_OPENED:w.SORT_RULE.RECENT_MODIFIED;case 69:if(l){e.next=78;break}return e.next=72,M.put.resolve(Object(F.fetchRefinedAdvanced)({query:r.trim(),offset:m,objTypes:S,ownerId:O,folderTokens:b,openTime:T,fileType:R,chatID:d,groupID:h,sortRule:x,searchQuickAccess:y,configSource:Number(E)}));case 72:if((j=e.sent).type===D.actionTypes.search.FETCH_REFINE_SEARCH_ADVANCED_SUCCESS)return e.next=76,Object(M.put)(Object(F.fillAdvancedSearchList)(Object.assign({},j.payload,{query:r,searchId:j.meta["Request-Id"]})));e.next=76;break;case 76:e.next=86;break;case 78:return g=_.filter(function(e){return e.isChosen}).map(function(e){return e.id}).join(","),I={query:r.trim(),offset:m,ownerId:O,openTime:T,chatID:d,groupID:h,spaceID:f?"":g,sortRule:x,searchQuickAccess:y},e.next=82,M.put.resolve(Object(F.fetchSearchedWikiAdvanced)(I));case 82:if((L=e.sent).type===D.actionTypes.search.FETCH_SEARCH_WIKI_ADVANCED_SUCCESS)return e.next=86,Object(M.put)(Object(F.fillAdvancedSearchList)(Object.assign({},L.payload,{query:r,searchId:L.meta["Request-Id"]})));e.next=86;break;case 86:case"end":return e.stop()}},W)}t.a=s},Sz9a:function(e,i,U){"use strict";(function(p){U.d(i,"a",function(){return c}),U.d(i,"b",function(){return w});var e,t=U("lSNA"),r=U.n(t),n=U("o0o1"),E=U.n(n),l=U("Mpt7"),f=U("oZtI"),_=U("y94N"),O=U("jp/M"),d=U("QM+C"),h=U("3iXK"),b=U("ZGZ5"),y=U("FFjf"),T=U("aR0j"),S=U("/PhZ"),R=U("YsLn"),C=U("03In"),v=U("3doy"),m=U("GIKb"),x=U("UHRa"),k=U("1o3a"),j=E.a.mark(c),o=E.a.mark(L),g=E.a.mark(N),s=E.a.mark(D),a=E.a.mark(F),u=E.a.mark(w),I=E.a.mark(P);function c(t){var r,n,a,o,c,s,i,u;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,n=r.listName,a=r.token,o=r.objToken,!n){e.next=5;break}c=n,e.next=8;break;case 5:return e.next=7,Object(f.select)(y.b);case 7:c=e.sent;case 8:if(a)return e.next=11,Object(f.select)(T.y);e.next=13;break;case 11:i=e.sent,s=Object(l.List)(a).map(function(e){return i.get(e)});case 13:if(o)return e.next=16,Object(f.select)(T.W);e.next=18;break;case 16:u=e.sent,s=Object(l.List)(o).map(function(e){return u.get(e)});case 18:if(s){e.next=22;break}return e.next=21,Object(f.select)(T.ob);case 21:s=e.sent;case 22:e.t0=c,e.next=e.t0===_.p.SharedFolder||e.t0===_.p.MyFolder||e.t0===_.p.Folder||e.t0===_.p.TeamSpace?25:e.t0===_.p.Recent||e.t0===_.p.SharedWithMe||e.t0===_.p.SharedWithMe2?28:e.t0===_.p.MyObject?31:e.t0===_.p.Trash||e.t0===_.p.SharedFolderTrash?34:e.t0===_.p.StorageCenter?37:40;break;case 25:return e.next=27,N(c,s);case 27:return e.abrupt("break",42);case 28:return e.next=30,D(c,s);case 30:return e.abrupt("break",42);case 31:return e.next=33,F(c,s);case 33:return e.abrupt("break",42);case 34:return e.next=36,w(c,s);case 36:return e.abrupt("break",42);case 37:return e.next=39,P(c,s);case 39:return e.abrupt("break",42);case 40:return console.warn("DeleteOrRemove behavior is not handled"),e.abrupt("break",42);case 42:case"end":return e.stop()}},j)}function L(){var t,r,n,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.select)(T.mb);case 2:return t=e.sent,r=t.first(),n=r.fatherType,a=r.fatherToken,e.abrupt("return",{fatherType:n,fatherToken:a});case 5:case"end":return e.stop()}},o)}function N(s,i){var t,r,n,a,o,c,u;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(x.a)({listName:s,fileEntities:i}),e.next=3,Object(f.select)(b.a);case 3:return r=e.sent,n=r?r.get("id"):window.User.id,a=i.every(function(e){return d.suiteType.includes(e.type)}),o=i.every(function(e){return e.get("owner_id")===n}),c=a&&o,u=Object.assign({},t,{confirmationType:h.ConfirmationOrCancelType.DeleteSoftLink,showDeleteCheckbox:c,deleteEntityText:1===i.size?p("explorer.v3.delete_original_item_single"):p("explorer.v3.delete_original_item_multiple")}),e.next=11,Object(k.a)({confirmDialogProps:u,actionToPut:E.a.mark(function e(t){var r,n,a,o,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:if(r=e.sent,t.payload.props.deleteEntity)return a=i.map(function(e){return e.obj_token}).filter(function(e){return!!e}).toArray(),o=Object(S.cancelableDeleteObject)(Object.assign({listName:s,objTokens:a},r)),e.next=8,f.put.resolve(o);e.next=11;break;case 8:n=e.sent,e.next=15;break;case 11:return c=Object(S.cancelableRemoveFile)(Object.assign({urlType:Object(m.a)(i.first()),token:i.map(function(e){return e.token}).toArray(),isOwner:!0,fetchAfter:!0},r)),e.next=14,f.put.resolve(c);case 14:n=e.sent;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}},e)})});case 11:case"end":return e.stop()}},g)}var M=(e={},r()(e,_.p.Recent,S.deleteRecentRecord),r()(e,_.p.SharedWithMe,S.deleteSharedRecord),r()(e,_.p.SharedWithMe2,S.deleteSharedRecord),e);function D(i,u){var t,r,n,a,o,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(x.a)({listName:i,fileEntities:u}),e.next=3,Object(f.select)(b.a);case 3:return r=e.sent,n=r?r.get("id"):window.User.id,a=u.every(function(e){return e.get("owner_id")===n}),o=u.some(function(e){return e.type===d.NUM_SUITE_TYPE.WIKI}),c=Object.assign({},t,{confirmationType:h.ConfirmationOrCancelType.DeleteRecord,showDeleteCheckbox:i===_.p.Recent&&a&&!o,deleteEntityText:1===u.size?p("explorer.v3.delete_original_item_single"):p("explorer.v3.delete_original_item_multiple")}),e.next=10,Object(k.a)({confirmDialogProps:c,actionToPut:E.a.mark(function e(t){var r,n,a,o,c,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i===_.p.Recent&&t.payload.props.deleteEntity)return n=u.map(function(e){return e.obj_token}).filter(function(e){return!!e}).toArray(),a={fatherToken:"",fatherType:null},o=Object(S.cancelableDeleteObject)(Object.assign({listName:i,objTokens:n},a)),e.next=6,f.put.resolve(o);e.next=9;break;case 6:r=e.sent,e.next=14;break;case 9:return c=M[i],s=u.map(function(e){return e.obj_token}).toArray(),e.next=13,f.put.resolve(c(s));case 13:r=e.sent;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e)})});case 10:case"end":return e.stop()}},s)}function F(c,s){var t,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(x.a)({listName:c,fileEntities:s}),r=Object.assign({},t,{confirmationType:h.ConfirmationOrCancelType.DeleteEntity}),e.next=4,Object(k.a)({confirmDialogProps:r,actionToPut:E.a.mark(function e(t){var r,n,a,o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.map(function(e){return e.obj_token}).toArray(),n={fatherToken:"",fatherType:null},a=Object(S.cancelableDeleteObject)(Object.assign({listName:c,objTokens:r},n)),e.next=5,f.put.resolve(a);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e)})});case 4:case"end":return e.stop()}},a)}function w(t,r){var n,a,o,c,s,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(x.a)({listName:t,fileEntities:r}),a=r.map(function(e){return e.token}).toArray(),e.next=4,Object(f.select)(T.lb);case 4:return o=e.sent,c=Object.assign({},n,{confirmationType:h.ConfirmationOrCancelType.DeleteEntity}),s=Object(m.a)(),i=Object(S.deleteRemovedFile)(s,a,o,!1,1),e.next=10,Object(k.a)({confirmDialogProps:c,actionToPut:i});case 10:case"end":return e.stop()}},u)}function P(t,r){var n,a,o,c,s,i,u;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=500,e.next=3,Object(f.select)(T.mb);case 3:if(a=e.sent,a.map(function(e){return e.obj_token}).toArray().length>n)return o={type:O.actionTypes.toast.TOAST_SHOW,toastConfig:{type:"error",closable:!0,content:p("explorer.v3.storage_delete_fail",n)}},e.next=9,Object(f.put)(o);e.next=10;break;case 9:return e.abrupt("return");case 10:return c=Object(x.a)({listName:t,fileEntities:r}),s=r.map(function(e){return e.obj_token}).toArray(),i=Object.assign({},c,{confirmationType:h.ConfirmationOrCancelType.DeleteEntity}),u=Object(C.c)(s,v.COMPLETE_DELETE_CALLER.STORAGE_CENTER),e.next=16,Object(k.a)({confirmDialogProps:i,actionToPut:u,onSuccess:E.a.mark(function e(t){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.put)(Object(R.a)());case 2:return r={type:O.actionTypes.toast.TOAST_SHOW,toastConfig:{type:"success",content:"".concat(p("explorer.deleted")," ").concat(t.payload.success_tokens.length," ").concat(p("explorer.n_items"))}},e.next=5,Object(f.put)(r);case 5:case"end":return e.stop()}},e)})});case 16:case"end":return e.stop()}},I)}}).call(this,U("2vAP"))},TYER:function(e,t,r){"use strict";r.d(t,"a",function(){return E}),r.d(t,"b",function(){return K}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return a}),r.d(t,"e",function(){return v}),r.d(t,"f",function(){return Y}),r.d(t,"g",function(){return s}),r.d(t,"h",function(){return C}),r.d(t,"i",function(){return R}),r.d(t,"j",function(){return H});var R,n,a,o,C,c,s,i,u,p,E,l,v,f,_=r("cDf5"),O=r.n(_),m=r("UXvI"),x=r("XhtD"),d=r("vJtL"),h=r("YHdI"),b=r("4O8T"),k=r.n(b);(n=R=R||{})[n.SUCCESS=0]="SUCCESS",n[n.FAILED=1]="FAILED",n[n.INVALID_PARAM=2]="INVALID_PARAM",n[n.NOT_FOUND=3]="NOT_FOUND",n[n.FORBIDDEN=4]="FORBIDDEN",n[n.LOGIN_REQUIRED=5]="LOGIN_REQUIRED",n[n.LIMIT_EXCEED=6]="LIMIT_EXCEED",n[n.CHANGESET_LIMIT_EXCEED=1001]="CHANGESET_LIMIT_EXCEED",n[n.OBJECT_DELETED=1002]="OBJECT_DELETED",n[n.NOT_IN_SESSION=1003]="NOT_IN_SESSION",n[n.CHAGESET_INVALID=1005]="CHAGESET_INVALID",n[n.INTERNAL_ERROR=1006]="INTERNAL_ERROR",n[n.INVALID_MESSAGE=1007]="INVALID_MESSAGE",n[n.SYNC_FAILED=1008]="SYNC_FAILED",n[n.VERSION_TOO_OLD=1010]="VERSION_TOO_OLD",n[n.WRITE_PERMISSION_DENIED=1012]="WRITE_PERMISSION_DENIED",n[n.COMMENT_PERMISSION_DENIED=1013]="COMMENT_PERMISSION_DENIED",n[n.SERVICE_ERROR=1015]="SERVICE_ERROR",n[n.DATABASE_CONFLICT=1021]="DATABASE_CONFLICT",n[n.SERVER_BUSY=9998]="SERVER_BUSY",n[n.MISSING_VERSION_VERIFY_FAILED=-1101]="MISSING_VERSION_VERIFY_FAILED",n[n.RETRY_OVER_TIMES=-1102]="RETRY_OVER_TIMES",(o=a=a||{}).JSON="JSON",o.MESSAGE_BOX="MESSAGE_BOX",o.DOC="DOC",(c=C=C||{}).USER_NEWINFO="USER_NEWINFO",c.USER_LEAVE="USER_LEAVE",c.CLIENT_VARS="CLIENT_VARS",c.GET_VERSION="GET_VERSION",c.ENGAGEMENT_CURSOR="ENGAGEMENT_CURSOR",c.WATCH="WATCH",c.ACCEPT_WATCH="ACCEPT_WATCH",c.ACCEPT_COMMIT="ACCEPT_COMMIT",c.NEW_CHANGES="NEW_CHANGES",c.GET_MESSAGE="GET_MESSAGE",c.USER_CHANGES="USER_CHANGES",c.MESSAGE_CHANNEL="MESSAGE_CHANNEL",c.ROOM_MEMBERS="ROOM_MEMBERS",c.ERROR="ERROR",c.MESSAGE="MESSAGE",(i=s=s||{}).ENGINE_CHANNEL="engine_channel",i.MEMBER_CHANNEL="member_channel",(p=u=u||{}).Content="content",p.Note="note",p.Topic="topic",p.Title="title",p.Image="image",p.None="none",(l=E=E||{})[l.MISSING_VERSION_TOO_MANY=0]="MISSING_VERSION_TOO_MANY",l[l.MISSING_VERSION_VERIFY_FAILED=1]="MISSING_VERSION_VERIFY_FAILED",(f=v=v||{}).CLIENT_ERROR="CLIENT_ERROR",f.RESPONSE_ERROR="RESPONSE_ERROR";var j=function(){return(j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function y(e,t){var r={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}function T(e,t,r,n){var a,o=arguments.length,c=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":O()(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(a=e[s])&&(c=(o<3?a(c):3<o?a(t,r,c):a(t,r))||c);return 3<o&&c&&Object.defineProperty(t,r,c),c}function S(e,t){if("object"===("undefined"==typeof Reflect?"undefined":O()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function g(e,c,r,s){function i(t){return t instanceof r?t:new r(function(e){e(t)})}return new(r=r||Promise)(function(t,r){function n(e){try{o(s.next(e))}catch(e){r(e)}}function a(e){try{o(s.throw(e))}catch(e){r(e)}}function o(e){e.done?t(e.value):i(e.value).then(n,a)}o((s=s.apply(e,c||[])).next())})}function I(e,r){var n,a,o,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},t={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return i([t,e])}}function i(t){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(o=0<(o=c.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){c.label=t[1];break}if(6===t[0]&&c.label<o[1]){c.label=o[1],o=t;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(t);break}o[2]&&c.ops.pop(),c.trys.pop();continue}t=r.call(e,c)}catch(e){t=[6,e],a=0}finally{n=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}function L(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function N(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),c=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)c.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return c}function M(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(N(arguments[t]));return e}function D(e){return e&&"function"==typeof e.then}function F(c){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[2],a=(r.get,r.set,r.writable,r.value),n=y(r,["get","set","writable","value"]);if(!Object(d.default)(a))return r;var o=new Map;return j(j({},n),{value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0]||c;if(!o.get(r)){var n=a.call.apply(a,M([this],e));return D(n)?(o.set(r,!0),n.then(function(e){return o.delete(r),e}).catch(function(e){throw o.delete(r),e})):console.error("should return an Promise")}}})}}function w(t){return new Promise(function(e){setTimeout(function(){e()},t)})}var P=(U.prototype.log=function(e,t){this.loggable&&console.log(this.prefix,e,t)},U.prototype.enable=function(){this.loggable=!0},U.prototype.disable=function(){this.loggable=!1},U);function U(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.loggable=!0,this.prefix="["+e.join("][")+"]"}var H=(V.prototype._log=function(e,t){void 0===t&&(t={}),this._logger.log(e,j(j({},this._loggerOptions),t))},Object.defineProperty(V.prototype,"NEW_CHANGES",{get:function(){return this._alias&&this._alias[C.NEW_CHANGES]||C.NEW_CHANGES},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"CLIENT_VARS",{get:function(){return this._alias&&this._alias[C.CLIENT_VARS]||C.CLIENT_VARS},enumerable:!0,configurable:!0}),V.prototype.registerEntity=function(){return g(this,void 0,void 0,function(){var t,r,n,a,o,c=this;return I(this,function(e){switch(e.label){case 0:return t={interval:1,callback:function(e){var t=c._version;e<=t||(console.log("engine: local: "+t+", remote: "+e),c.fetchMissVersionWithLimitingFrequency(e))}},r=Object.values(this.channels).reduce(function(e,t){var r,n=t.channel,a=t.heartbeat;return n&&a?j(j({},e),((r={})[n]=a,r)):e},((o={})[s.ENGINE_CHANNEL]=t,o)),n=this.generateWatchEntity(),a={handler:this.handleMessageFromServer,filter:n},[4,Promise.resolve(this._io.isEntityRegistered(n))];case 1:return e.sent()?(this._io.addHeartbeat(n,s.ENGINE_CHANNEL,t),this._io.addMessage(n,s.ENGINE_CHANNEL,a)):this._io.register(n,{message:a,heartbeats:r,acceptWatchHandler:this.handleAcceptWatch,isNewHeartbeatsProtocol:this._isNewProtocol}),[2]}})})},V.prototype.generateWatchEntity=function(){return j(j({type:this._syncType,token:this._token},this._requestDataOptions),this._requestWatchDataOptions)},V.prototype.syncEngineBaseRev=function(e){this.syncBaseRev("engine_channel",e)},V.prototype.syncBaseRev=function(e,t){this._receiveClientVars&&this._io.setHeartbeatVersion({type:this._syncType,token:this._token},e,t)},V.prototype.verrifyFetchMiss=function(e,t){return t[0]===e[0]},V.prototype.fetchMissVersionWithLimitingFrequency=function(e){e>this._latestVersion&&(this._latestVersion=e),this.fetchMissVersionFromCurrentToLatest()},V.prototype.fetchMissVersion=function(a){var o=this;if(this._receiveClientVars){if(!this._isFetching){var e=a[0];return a[a.length-1]-e>this.missVersionLimit?(this._log("dev_sync_fetch_missing_version_too_old"),void this.emit(C.ERROR,{type:v.RESPONSE_ERROR,msg:"version too old",code:R.VERSION_TOO_OLD,requestType:C.NEW_CHANGES})):0!==a.length?(this._log("dev_sync_fetch_missing",{rev_list:a,version:this._version}),this._isFetching=!0,(this._isNewProtocol&&this._request&&this._requestAPI?this.autoRetryRequestDoNotRelyOnIO(this._requestAPI.NEW_CHANGES,{member_id:this.memberId,token:this._token,rev_list:a}).then(function(e){return o.tryHandleErrorV2(e,C.NEW_CHANGES)}).then(function(e){var t,r=e.data,n=o.getChangesets(r);n?(t=n.sort(function(e,t){return o.getVersionOfChangeset(e)-o.getVersionOfChangeset(t)}).map(function(e){return o.getVersionOfChangeset(e)}),o.verrifyFetchMiss(a,t)?(B("NEW_CHANGES",e),o.handleNewChanges(r)):(o._log("dev_sync_fetch_missing_verrify_failed",{version:o._version,fetching_list:a,fetched_verion:t}),o.emit(C.ERROR,{code:R.MISSING_VERSION_VERIFY_FAILED,type:v.CLIENT_ERROR,msg:"fetched missing version verrified failed",options:{send:a,receive:t}}))):o._log("dev_sync_fetch_missing_no_changes")}):this.autoRetryRequest({type:this.NEW_CHANGES,member_id:this.memberId,token:this._token,rev_list:a},h.c.http).then(function(e){return o.tryHandleError(e,C.NEW_CHANGES)}).then(function(e){var t,r=e.data,n=o.getChangesets(r);n?(t=n.sort(function(e,t){return o.getVersionOfChangeset(e)-o.getVersionOfChangeset(t)}).map(function(e){return o.getVersionOfChangeset(e)}),o.verrifyFetchMiss(a,t)?o.handleMessageFromServer(e):(o._log("dev_sync_fetch_missing_verrify_failed",{version:o._version,fetching_list:a,fetched_verion:t}),o.emit(C.ERROR,{code:R.MISSING_VERSION_VERIFY_FAILED,type:v.CLIENT_ERROR,msg:"fetched missing version verrified failed",options:{send:a,receive:t}}))):o._log("dev_sync_fetch_missing_no_changes")})).finally(function(){o._log("dev_sync_fetch_missing_end",{rev_list:a,version:o._version}),o._isFetching=!1})):void this._log("dev_sync_fetch_missing_versions_is_empty",{version:this._version})}}else this._log("dev_sync_fetch_missing_before_client_vars")},V.prototype.verifyMessage=function(e){return e.type===this._syncType&&(e.data&&e.data.type===C.ERROR?e.token===this._token:e.data&&e.data.token===this._token)},V.prototype.autoRetryRequestDoNotRelyOnIO=function(n,a,o){return void 0===o&&(o=0),g(this,void 0,void 0,function(){var t,r;return I(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,6]),[4,this._request({url:n,method:"post",headers:j({"Content-Type":"application/json"},this._requestExceptWatchHeaderOptions),data:j(j({},a),this._requestDataOptions)})];case 1:return t=e.sent(),o<=0?[2,t]:t.code!==R.SERVICE_ERROR&&t.code!==R.DATABASE_CONFLICT?[3,3]:[4,w(3/o*1e3)];case 2:return e.sent(),this._log("dev_sync_request_retry_since_code",{retry:o,res_code:t.code,rev:this.version}),console.warn("[sync] retry request by server code"),[2,this.autoRetryRequestDoNotRelyOnIO(n,a,o-1)];case 3:return[3,6];case 4:if(r=e.sent(),o<=0)throw console.error("[sync] error response when io reject"),r;return[4,w(3/o*1e3)];case 5:return e.sent(),this._log("dev_sync_request_retry_since_reject",{retry:o,rev:this.version}),console.warn("[sync] retry request by net error"),[2,this.autoRetryRequestDoNotRelyOnIO(n,a,o-1)];case 6:return[2,t]}})})},V.prototype.autoRetryRequest=function(n,a,o){return void 0===a&&(a=h.c.http),void 0===o&&(o=0),g(this,void 0,void 0,function(){var t,r;return I(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,6]),[4,this._io.request(j({type:this._syncType,data:j(j({},n),this._requestDataOptions)},this._requestMessageOptions),{channel:a})];case 1:return t=e.sent(),o<=0?[2,t]:t.code!==R.SERVICE_ERROR&&t.data.code!==R.SERVICE_ERROR&&t.data.code!==R.DATABASE_CONFLICT?[3,3]:[4,w(3/o*1e3)];case 2:return e.sent(),this._log("dev_sync_request_retry_since_code",{retry:o,res_code:t.code,data_code:t.data.code,rev:this.version}),console.warn("[sync] retry request by server code"),[2,this.autoRetryRequest(n,h.c.http,o-1)];case 3:return[3,6];case 4:if(r=e.sent(),o<=0)throw console.error("[sync] error response when io reject"),r;return[4,w(3/o*1e3)];case 5:return e.sent(),this._log("dev_sync_request_retry_since_reject",{retry:o,rev:this.version}),console.warn("[sync] retry request by net error"),[2,this.autoRetryRequest(n,h.c.http,o-1)];case 6:return[2,t]}})})},V.prototype.handleChannelMessage=function(e){var t,r,n,a,o,c=e.type,s=this._channelMessageMap.get(c);s&&(t=s.getVersionOfChannelMessage,r=s.channel,n=s.refetchMessageIfVersionBreak,t&&r&&(a=t(e),(o=(this.io.getHeartbeatInfo(this.syncType,this.token)||{})[r].version)&&o+1<a&&n?n(o,a):this.syncBaseRev(r,a)),s.onChannelMessage&&s.onChannelMessage(e))},V.prototype.emit=function(e,t){this._em.emit(e,t)},V.prototype.on=function(e,t){this._em.on(e,t)},V.prototype.off=function(e,t){this._em.off(e,t)},Object.defineProperty(V.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"memberId",{get:function(){return this._io.getMemberId()+""},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"token",{get:function(){return this._token},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"io",{get:function(){return this._io},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"channels",{get:function(){return this._channels},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"syncType",{get:function(){return this._syncType},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"receiveClientVars",{get:function(){return this._receiveClientVars},enumerable:!0,configurable:!0}),V.prototype.setClientVars=function(e){this.handleClientVars(e)},V.prototype.fetchClientVars=function(i){return void 0===i&&(i={}),g(this,void 0,void 0,function(){var t,r,n,a,o,c,s=this;return I(this,function(e){switch(e.label){case 0:return this._log("dev_fetch_client_vars"),this._isNewProtocol&&this._request&&this._requestAPI?[4,this.autoRetryRequestDoNotRelyOnIO(this._requestAPI.CLIENT_VARS,j({token:this._token,member_id:this.memberId},i),3).then(function(e){return s.tryHandleErrorV2(e,C.CLIENT_VARS)})]:[3,2];case 1:return(t=e.sent()).code!==R.SUCCESS?(console.error("fetchClientVars failed: ",t.data),[2,Promise.reject(t.data)]):(r=t.data,n=this.getVersionOfClientVars(r),this.handleClientVars(n),[2,r]);case 2:return[4,this.autoRetryRequest(j({type:this.CLIENT_VARS,token:this._token,member_id:this.memberId},i),h.c.http,3).then(function(e){return s.tryHandleError(e,C.CLIENT_VARS)})];case 3:return(a=e.sent()).data.type===C.ERROR?(console.error("fetchClientVars failed: ",a.data),[2,Promise.reject(a.data)]):(o=a.data,c=this.getVersionOfClientVars(o),this.handleClientVars(c),[2,o])}})})},V.prototype.handleClientVars=function(e){var t=this;this._log("dev_handle_client_vars",{version:e}),this._receiveClientVars=!0,this._version=e,this.syncEngineBaseRev(this._version);var r=this.generateWatchEntity();this._io.watch(r,{isNewProtocol:this._isNewProtocol}).catch(function(e){t._log("dev_watch_failed"),t.emit(C.ERROR,j(j({},e),{type:v.RESPONSE_ERROR,requestType:C.WATCH}))})},V.prototype.sendUserChange=function(e){var r=this;return this._log("dev_user_changes",{local_rev:this._version,rev:this._version+1}),this._isNewProtocol&&this._request&&this._requestAPI?this.autoRetryRequestDoNotRelyOnIO(this._requestAPI.USER_CHANGES,j({token:this._token,type:C.USER_CHANGES,member_id:this.memberId},e),3).then(function(e){return r.tryHandleErrorV2(e,C.USER_CHANGES)}).then(function(e){var t=e.data;B("ACCEPT_COMMIT",e),r.handleAcceptCommit(t),r.emit(C.MESSAGE,e)}):this.autoRetryRequest(j({token:this._token,type:C.USER_CHANGES,member_id:this.memberId},e),h.c.socket,3).then(function(e){return r.tryHandleError(e,C.USER_CHANGES)}).then(this.handleMessageFromServer)},V.prototype.destroy=function(){var e,t;null!==(t=(e=this.fetchMissVersionFromCurrentToLatest).cancel)&&void 0!==t&&t.call(e);var r=this.generateWatchEntity();this._io.removeMessage(r,s.ENGINE_CHANNEL),this._io.removeHeartbeat(r,s.ENGINE_CHANNEL),this._io.unRegister(r),this._em.removeEvent()},V);function V(e){var t,r,l=this,n=e.io,a=e.type,o=e.token,c=e.alias,s=e.requestMessageOptions,i=e.requestDataOptions,u=e.requestWatchDataOptions,p=e.requestExceptWatchHeaderOptions,E=e.request,f=e.requestAPI,_=e.isNewProtocol,O=e.registerChannels,d=e.logger,h=e.fetchMissWait,b=void 0===h?1e3:h;this._version=1,this._receiveClientVars=!1,this._loggerOptions={},this._em=new k.a,this._channelMessageMap=new Map,this._isFetching=!1,this._isNewProtocol=!1,this._latestVersion=1,this.tryHandleError=function(e,t){var r,n,a=e.data,o=e.request_id;return a.type===C.ERROR&&(r=a.code,n=a.msg,l._log("dev_sync_error",{code:r,requestType:t,msg:n,requestId:o}),l.emit(C.ERROR,j(j({},a),{type:v.RESPONSE_ERROR,requestType:t}))),e},this.tryHandleErrorV2=function(e,t){var r=e.code,n=e.msg;return r!==R.SUCCESS&&(l._log("dev_sync_error",{code:r,requestType:t,msg:n}),l.emit(C.ERROR,j(j({},e),{type:v.RESPONSE_ERROR,requestType:t}))),e},this.fetchMissVersionFromCurrentToLatest=function(){l._version>=l._latestVersion||l.fetchMissVersion(Object(x.a)(l._version+1,l._latestVersion+1))},this.handleMessageFromServer=function(e){if(!e.data)return l.emit(C.MESSAGE,e),e;if(W(e),!l.verifyMessage(e))return l.emit(C.MESSAGE,e),e;var t=e.data;switch(t.type){case l.NEW_CHANGES:l.handleNewChanges(t);break;case C.ACCEPT_COMMIT:l.handleAcceptCommit(t);break;default:l.handleChannelMessage(t)}return l.emit(C.MESSAGE,e),e},this.handleAcceptWatch=function(e){var t,r,n=e.data.entities,a=l._version;l.emit(C.ACCEPT_WATCH);try{for(var o=L(n),c=o.next();!c.done;c=o.next()){var s=c.value,i=s.type,u=s.token,p=s.version;if(i===l._syncType&&u===l._token)return void(p&&a<p&&l.fetchMissVersionWithLimitingFrequency(p))}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},this.handleNewChanges=function(e){var t,r;if(e.over_size){var n=l.getVersionOfOversize(e);return(l._log("dev_sync_new_changes_oversize",{version:n,rev:l.version}),n<=l._version)?void l._log("dev_sync_new_changes_oversize_return"):void l.fetchMissVersionWithLimitingFrequency(n)}var a=l.getChangesets(e);if(l._log("dev_sync_new_changes",{rev_list:a.map(function(e){return l.getVersionOfChangeset(e)}),rev:l._version}),a.length)if(a.sort(function(e,t){return l.getVersionOfChangeset(e)-l.getVersionOfChangeset(t)}),l.getVersionOfChangeset(a[0])>l._version+1){var o=a[a.length-1],c=l.getVersionOfChangeset(o);l.fetchMissVersionWithLimitingFrequency(c)}else try{for(var s=L(a),i=s.next();!i.done;i=s.next()){var u=i.value,p=l.getVersionOfChangeset(u);if(!(p<=l._version)){if(p>l._version+1)break;var E=l.version;if(l._version=p,l.syncEngineBaseRev(l._version),l.isSelfChangeset(u))return l._log("dev_sync_new_changes_ack",{rev:l.version}),void l.emit(C.ACCEPT_COMMIT,u);l._log("dev_sync_emit_new_changes",{oldVersion:E,rev:l.version}),l.emit(C.NEW_CHANGES,u)}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}},this.handleAcceptCommit=function(e){var t=l.getVersionOfAcceptCommit(e);l._log("dev_sync_ack",{rev:t,local_rev:l._version});var r=l._version;t===r+1?(l._version=t,l.syncEngineBaseRev(l._version),l.emit(C.ACCEPT_COMMIT,e)):r<t&&l.fetchMissVersionWithLimitingFrequency(t)},this.fetchMissVersionFromCurrentToLatest=Object(m.default)(this.fetchMissVersionFromCurrentToLatest,b),this._io=n,this._syncType=a,this._token=o,this._alias=c,this._requestMessageOptions=s||{},this._requestDataOptions=i||{},this._requestWatchDataOptions=u||{},this._requestExceptWatchHeaderOptions=p||{},this._request=E,this._requestAPI=f,this._isNewProtocol=Boolean(_),this._channels=O?O(this):{};var y=function(t){t.messageTypes&&Array.from(t.messageTypes).forEach(function(e){l._channelMessageMap.set(e,t)})};try{for(var T=L(Object.values(this.channels)),S=T.next();!S.done;S=T.next())y(S.value)}catch(e){t={error:e}}finally{try{S&&!S.done&&(r=T.return)&&r.call(T)}finally{if(t)throw t.error}}this._loggerOptions={sync_type:this._syncType,sync_token:window.encryptTea?window.encryptTea(this._token):""},this._logger=d||new P("DataJS","Sync",a),this.registerEntity()}function W(e){var t=e.data,r=t.type;"RESPONSE"===r||r===C.ENGAGEMENT_CURSOR||r===C.CLIENT_VARS&&"gzip_snapshot"in t||(r!==C.ERROR?console.log("received!",r,t.new_rev||t.revision||t.note_revision,e.request_id):console.error("received!",r,t.code,t.msg,e.request_id))}function B(e,t){var r=t.data;console.log("received!",e,r.new_rev||r.revision||r.note_revision,t)}var Y=(Object.defineProperty(q.prototype,"messageTypes",{get:function(){return new Set([C.USER_LEAVE,C.USER_NEWINFO,C.ROOM_MEMBERS])},enumerable:!0,configurable:!0}),Object.defineProperty(q.prototype,"channel",{get:function(){return"member_channel"},enumerable:!0,configurable:!0}),Object.defineProperty(q.prototype,"heartbeat",{get:function(){var r=this;return{interval:1,callback:function(e,t){e<=t||(console.log("oldVersion: "+t+", newVersion: "+e),r.fetchRoomMembers())}}},enumerable:!0,configurable:!0}),q.prototype.getVersionOfChannelMessage=function(e){return e.version},q.prototype.fetchRoomMembers=function(){var n=this;return this.fetchMemberList().then(function(e){var t=e.data,r=t.version;n.setHeartbeatVersion(r),n.emit(C.ROOM_MEMBERS,t)})},q.prototype.setHeartbeatVersion=function(e){this.sync.io.setHeartbeatVersion({type:this.sync.syncType,token:this.sync.token},this.channel,e)},q.prototype.onChannelMessage=function(e){switch(e.type){case C.USER_NEWINFO:this.emit(C.USER_NEWINFO,e);break;case C.USER_LEAVE:this.emit(C.USER_LEAVE,e)}},q.prototype.on=function(e,t){this._em.on(e,t)},q.prototype.off=function(e,t){this._em.off(e,t)},q.prototype.emit=function(e,t){this._em.emit(e,t)},T([F(),S("design:type",Function),S("design:paramtypes",[]),S("design:returntype",void 0)],q.prototype,"fetchRoomMembers",null),q);function q(e,t){var r=this,n=t.fetchMemberList,a=t.shouldFetchMemberList;this.sync=e,this._em=new k.a,this.handleAcceptWatch=function(){r.fetchRoomMembers()},this.refetchMessageIfVersionBreak=function(e,t){t<=e+1||r.shouldFetchMemberList&&!1===r.shouldFetchMemberList()||r.fetchRoomMembers()},this.fetchMemberList=n,this.shouldFetchMemberList=a,e.on(C.ACCEPT_WATCH,this.handleAcceptWatch)}var K=(Object.defineProperty(X.prototype,"messageTypes",{get:function(){return new Set([C.ENGAGEMENT_CURSOR])},enumerable:!0,configurable:!0}),X.prototype.onChannelMessage=function(e){this.emit(C.ENGAGEMENT_CURSOR,e)},X.prototype.on=function(e,t){this._em.on(e,t)},X.prototype.off=function(e,t){this._em.off(e,t)},X.prototype.emit=function(e,t){this._em.emit(e,t)},X);function X(){this._em=new k.a}},UFSZ:function(e,t,r){"use strict";r.d(t,"h",function(){return o}),r.d(t,"b",function(){return c}),r.d(t,"k",function(){return s}),r.d(t,"i",function(){return i}),r.d(t,"z",function(){return u}),r.d(t,"v",function(){return p}),r.d(t,"s",function(){return E}),r.d(t,"l",function(){return l}),r.d(t,"j",function(){return f}),r.d(t,"d",function(){return _}),r.d(t,"c",function(){return O}),r.d(t,"a",function(){return d}),r.d(t,"g",function(){return h}),r.d(t,"e",function(){return b}),r.d(t,"y",function(){return y}),r.d(t,"f",function(){return T}),r.d(t,"t",function(){return S}),r.d(t,"n",function(){return R}),r.d(t,"q",function(){return C}),r.d(t,"x",function(){return v}),r.d(t,"o",function(){return m}),r.d(t,"p",function(){return x}),r.d(t,"m",function(){return k}),r.d(t,"r",function(){return j}),r.d(t,"u",function(){return g}),r.d(t,"w",function(){return I});var n=r("peh1"),a=r("m1/u"),o=function(e){return e.appState.search.currentSearchTab},c=function(e){return e.appState.search.currentRecentTab},s=function(e){return e.appState.search.currentSearchedUsers},i=function(e){return e.appState.search.currentSearchedChats},u=function(e){return e.appState.search.currentSearchedWikiSpaces},p=Object(n.createSelector)(u,function(e){return e.some(function(e){return e.isChosen})}),E=Object(n.createSelector)(u,function(e){return Boolean(e.first()&&e.first().isChosen)}),l=Object(n.createSelector)(u,function(e){return e.slice(1)}),f=function(e){return e.appState.search.currentSearchedFolders},_=function(e){return e.appState.search.currentSearchFileType},O=function(e){return e.appState.search.currentSearchDemand},d=function(e){return e.appState.search.currentOpenTime},h=function(e){return e.appState.search.currentSearchResult},b=function(e){return e.appState.search.currentSearchLoadType},y=Object(n.createSelector)(p,Object(a.a)("refineSearchAdvanced"),Object(a.a)("searchWikiAdvanced"),function(e,t,r){return e?r:t}),T=function(e){return e.appState.search.currentSearchOffset},S=function(e){return e.appState.search.isSearchHistoryShown},R=function(e){return e.appState.search.isAdvanceSearchIconShown},C=function(e){return e.appState.search.isMoreRecentBtnShown},v=function(e){return e.appState.search.isUserCandidateItemsShown},m=function(e){return e.appState.search.isBrowseHistoryShown},x=function(e){return e.appState.search.isChatCandidateItemsShown},k=function(e){return e.appState.search.isAdvanceSearchByGlobalSearchEnable},j=function(e){return e.appState.search.isRelatedResultBtnShown},g=function(e){return e.appState.search.isSearchIconTooltipShown},I=function(e){return e.appState.search.isSearchWikiOnly}},UHRa:function(e,a,p){"use strict";(function(o){p.d(a,"a",function(){return n});var e,t=p("lSNA"),r=p.n(t),c=p("y94N"),s=p("QM+C"),i=(e={},r()(e,c.p.Recent,o("explorer.v3.recent_list")),r()(e,c.p.SharedWithMe,o("explorer.v3.shared_with_me")),r()(e,c.p.SharedWithMe2,o("explorer.v3.shared_with_me")),e);function n(e){var t=e.listName,r=e.fileEntities,n=r.size;if(t===c.p.MyObject)return u(r);if([c.p.Trash,c.p.SharedFolderTrash].includes(t))return 1===n?{title:o("explorer.v3.delete_item_under_trash.title_single"),body:o("explorer.v3.delete_item_under_trash.content_single"),confirmText:o("common.confirm")}:{title:o("explorer.v3.delete_item_under_trash.title_multiple",n),body:o("explorer.v3.delete_item_under_trash.content_multiple"),confirmText:o("common.confirm")};if(t===c.p.StorageCenter)return{title:o("explorer.v3.storage_delete_title"),body:o("explorer.v3.storage_delete_content"),confirmText:o("common.confirm")};if([c.p.Recent,c.p.SharedWithMe,c.p.SharedWithMe2].includes(t)){var a=i[t];return 1===n?{title:o("explorer.v3.remove_general_record.title_single",a),body:o("explorer.v3.remove_general_record.content_single",a),confirmText:o("common.confirm")}:{title:o("explorer.v3.remove_general_record.title_multiple",a),body:o("explorer.v3.remove_general_record.content_multiple",a),confirmText:o("common.confirm")}}return t===c.p.Folder?1===n?r.first().type===s.NUM_FOLDER_TYPE.FOLDER?{title:o("explorer.v3.remove_root_folder.title_single",r.first().name),body:o("explorer.v3.remove_root_folder.content_single"),confirmText:o("common.confirm")}:{title:o("explorer.v3.remove_item_under_folder.title_single"),body:o("explorer.v3.remove_item_under_folder.content_single"),confirmText:o("common.confirm")}:{title:o("explorer.v3.remove_item_under_folder.title_multiple",n),body:o("explorer.v3.remove_item_under_folder.body_multiple"),confirmText:o("common.confirm")}:[c.p.MyFolder,c.p.SharedFolder,c.p.TeamSpace].includes(t)&&1===n?{title:o("explorer.v3.remove_root_folder.title_single",r.first().name),body:o("explorer.v3.remove_root_folder.content_single"),confirmText:o("common.confirm")}:{title:"",body:"",confirmText:""}}function u(e){var t=e.size;if(1!==t)return{title:o("explorer.v3.remove_item_entity.title_multiple",t),body:o("explorer.v3.remove_item_entity.content_multiple"),confirmText:o("common.confirm")};var r=e.first(),n=r.typeText,a=r.name;return{title:o("explorer.v3.remove_item_entity.title_single",n,a),body:o("explorer.v3.remove_item_entity.content_single"),confirmText:o("common.confirm")}}}).call(this,p("2vAP"))},WzBf:function(e,t,r){"use strict";r.d(t,"a",function(){return E});var n=r("lwsE"),a=r.n(n),o=r("W8MJ"),c=r.n(o),s=r("mJXI"),i=r("5gS9"),u=r("toa8"),p=r("rLED"),E=function(){function o(){a()(this,o)}return c()(o,null,[{key:"register",value:function(e,t){var r=this.generateOptions(e),n=r.token,a=o.messageBoxMap.get(n);a||(a=new s.a(r,i.b.getInstance(),u.d,Object(p.H)()),o.messageBoxMap.set(n,a)),a.register(t,r.subtype)}},{key:"deregister",value:function(e,t){var r=this.generateOptions(e),n=o.messageBoxMap.get(r.token);n&&(n.deregister(t,r.subtype),n.isRegistered()||(n.destory(),o.messageBoxMap.delete(r.token)))}},{key:"onError",value:function(e,t){var r=this.generateOptions(e),n=o.messageBoxMap.get(r.token);n||(n=new s.a(r,i.b.getInstance(),u.d,Object(p.H)()),o.messageBoxMap.set(r.token,n)),n.onError(t)}},{key:"removeErrorListener",value:function(e,t){var r=this.generateOptions(e),n=o.messageBoxMap.get(r.token);n&&n.removeErrorListener(t)}},{key:"generateOptions",value:function(e){return"string"==typeof e?{token:e}:e}}]),o}();E.messageBoxMap=new Map},X6Qb:function(e,a,o){"use strict";(function(y){o.d(a,"a",function(){return r});var e=o("o0o1"),T=o.n(e),S=o("3Hq1"),R=o("oZtI"),C=o("jp/M"),v=o("XMIC"),m=o("/PhZ"),x=o("aR0j"),k=o("jryj"),j=o("GIKb"),t=T.a.mark(r),g=T.a.mark(n);function r(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.takeEvery)(C.actionTypes.explorer.DELETE_FILE_PATH,n);case 2:case"end":return e.stop()}},t)}function n(t){var r,n,a,o,c,s,i,u,p,E,l,f,_,O,d,h,b;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,n=r.paths,a=r.token,o=r.fetchAfter,c=r.fatherToken,s=r.fatherType,a){e.next=4;break}return console.error("Please provide the target file token!"),e.abrupt("return");case 4:return i=n.first().get("name")||n.first().get("title"),u=y("explorer.v3.remove_path.title"),p=[y("explorer.v3.remove_path.content",i)],E=y("explorer.delete"),e.next=10,Object(R.put)(Object(v.c)(k.MODAL_TYPES.UNIVERSAL_DELETE_CONFIRM,{title:u,content:p,okText:E}));case 10:return e.next=12,Object(R.race)({confirm:Object(R.take)(C.actionTypes.explorer.CONFIRM_DELETE),close:Object(R.take)(C.actionTypes.ui.CLOSE_MODAL)});case 12:if(l=e.sent,f=l.confirm,Object(S.default)(f))return e.abrupt("return");e.next=16;break;case 16:return e.next=18,Object(R.select)(x.y);case 18:return _=e.sent,O=Object(j.a)(_.get(a)),e.next=22,Object(R.put)(Object(m.removeFile)({urlType:O,token:[a],isOwner:!1,fetchAfter:o,fatherToken:c,fatherType:s}));case 22:return e.next=24,Object(R.race)({success:Object(R.take)(C.actionTypes.explorer.REMOVE_FILE_SUCCESS),failed:Object(R.take)(C.actionTypes.explorer.REMOVE_FILE_FAIL),canceled:Object(R.take)(C.actionTypes.explorer.REMOVE_FILE_CANCEL)});case 24:if(d=e.sent,h=d.failed,b=d.canceled,h||b)return e.abrupt("return");e.next=29;break;case 29:return e.next=31,Object(R.put)(Object(v.b)(k.MODAL_TYPES.UNIVERSAL_DELETE_CONFIRM,k.CLOSE_TYPES.COMPLETE));case 31:case"end":return e.stop()}},g)}}).call(this,o("2vAP"))},XhtD:function(e,t,r){"use strict";var n=r("eHo2"),a=Object(n.a)();t.a=a},Xrzz:function(e,t,r){"use strict";var n=r("3iXK");r.d(t,"a",function(){return n})},YsLn:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"c",function(){return c}),r.d(t,"b",function(){return s}),r.d(t,"i",function(){return i}),r.d(t,"d",function(){return u}),r.d(t,"h",function(){return p}),r.d(t,"l",function(){return E}),r.d(t,"k",function(){return l}),r.d(t,"e",function(){return f}),r.d(t,"g",function(){return _}),r.d(t,"j",function(){return O}),r.d(t,"f",function(){return d}),r.d(t,"m",function(){return h});var n=r("S9xK"),a=r("jp/M"),o=function(){return{type:a.actionTypes.box.EMIT_UPDATE_STORAGE_USAGES}},c=function(e){return{type:n.a.SET_CURRENT_FOLDER_IMAGE_LIST_INFO,payload:e}},s=function(){return{type:n.a.RESET_CURRENT_FOLDER_IMAGE_LIST_INFO}},i=function(e){return{type:a.actionTypes.box.SET_PREVIEW_SDK_DOWNLOAD,payload:e}},u=function(e){return{type:a.actionTypes.box.SET_FILE_FIND,payload:e}},p=function(e){return{type:a.actionTypes.box.SET_PDF_PRINT,payload:e}},E=function(){return{type:a.actionTypes.box.UPDATE_VERSION_SEED}},l=function(e,t){return{type:a.actionTypes.box.FILE_NAME_UPDATED,payload:{fileName:e,version:t}}},f=function(e){return{type:a.actionTypes.box.SET_IFRAME_LAYER_SHOW,payload:e}},_=function(e){return{type:n.a.SET_BOX_SUITE_IS_IN_EDIT_MODE,payload:e}},O=function(){return{type:a.actionTypes.box.TOGGLE_FILE_INFO_PANEL}},d=function(e){return{type:n.a.SET_IS_FILE_DRAGGING,payload:e}},h=function(e){var t=e.token,r=e.isFolder,n=e.parentToken;return{type:a.actionTypes.box.UPLOAD_SUCCESS,payload:{token:t,isFolder:r,parentToken:n}}}},"bB+y":function(e,T,S){"use strict";(function(i){S.d(T,"a",function(){return t});var e=S("o0o1"),u=S.n(e),p=S("oZtI"),E=S("vc5i"),l=S("aR0j"),f=S("/PhZ"),r=S("jp/M"),n=S("L342"),a=S("5dbN"),o=S("iP/4"),c=S("U6jp"),s=S("uzgA"),_=S("1o3a"),O=S("Xrzz"),d=S("QM+C"),h=u.a.mark(t),b=u.a.mark(y);function t(e){var o,t,r,n,a,c,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.select)(E.n);case 2:return o=e.sent,e.next=5,Object(p.select)(E.o);case 5:return t=e.sent,e.next=8,Object(p.select)(l.W);case 8:return r=e.sent,n=o?r.get(o).get("name"):"",a=d.mapTypeNumToFileTypeText[t],c=/^\s*$/.test(n),s={confirmationType:O.a.ConfirmationOrCancelType.DeleteUnderSuite,title:c?i("CreationDoc_ECM_UntitledDocDeleteTitle"):i("explorer.v3.delete_suite.title",a,n),body:i("explorer.v3.delete_suite.content"),confirmText:i("common.confirm")},e.next=15,Object(_.a)({confirmDialogProps:s,actionToPut:u.a.mark(function e(t){var r,n,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={fatherToken:"",fatherType:null},n=Object(f.cancelableDeleteObject)(Object.assign({objTokens:[o],listName:null},r)),e.next=4,p.put.resolve(n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}),onSuccess:y});case 15:case"end":return e.stop()}},h)}function y(e){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.a.isLarkWindow&&Object(c.c)(),Object(a.locateRoute)().isWikiIndex)return e.abrupt("return");e.next=3;break;case 3:return e.next=5,Object(p.select)(s.a);case 5:return t=e.sent,e.next=8,Object(p.put)(Object(n.b)(t||r.route.URL.HOME));case 8:case"end":return e.stop()}},b)}}).call(this,S("2vAP"))},c8Bs:function(e,t,r){"use strict";var a=r("THPu"),o=r("26kz");function n(e,n){var a=!0;return Object(o.a)(e,function(e,t,r){return a=!!n(e,t,r)}),a}var c=n,s=r("fywt"),i=r("/1FC"),u=r("XFn8");function p(e,t,r){var n=Object(i.a)(e)?a.a:c;return r&&Object(u.a)(e,t,r)&&(t=void 0),n(e,Object(s.a)(t,3))}t.a=p},cugM:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e){return e.appState.ui.currentModals}},eHo2:function(e,t,r){"use strict";var s=Math.ceil,i=Math.max;function n(e,t,r,n){for(var a=-1,o=i(s((t-e)/(r||1)),0),c=Array(o);o--;)c[n?o:++a]=e,e+=r;return c}var a=n,o=r("XFn8"),c=r("ywm8");function u(n){return function(e,t,r){return r&&"number"!=typeof r&&Object(o.a)(e,t,r)&&(t=r=void 0),e=Object(c.a)(e),void 0===t?(t=e,e=0):t=Object(c.a)(t),r=void 0===r?e<t?1:-1:Object(c.a)(r),a(e,t,r,n)}}t.a=u},esSv:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o});var n=r("9VmL"),a=function(e,t){return{type:n.a.JUMP_WIKI_FROM_SPACE,payload:{isCtrlOrMetaKeyClicked:e,spaceId:t}}},o=function(e){return{type:n.a.JUMP_WIKI_FROM_CREATE_IN_SPACE,payload:e}}},hNo0:function(e,t,r){"use strict";var n,a;r.d(t,"a",function(){return n}),(a=n=n||{}).DOC="doc",a.BITABLE="bitable",a.BITABLE_IMAGE="bitable_image",a.BITABLE_FILE="bitable_file",a.EXPLORER="explorer",a.SHEET_IMAGE="sheet_image",a.DOC_IMAGE="doc_image",a.COMMENT_IMAGE="comment_image"},j3eB:function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),ae=r.n(n),a=r("LPA4"),o=r("SebV"),oe=r("oZtI"),_=r("L342"),ce=r("jp/M"),c=r("aXiW"),O=r("1T6K"),s=ae.a.mark(u),i=ae.a.mark(p);function u(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeEvery)([ce.actionTypes.explorer.CREATE_FOLDER_SUCCESS,ce.actionTypes.explorer.CREATE_SHARE_FOLDER_SUCCESS,ce.actionTypes.explorer.CREATE_FILE_SUCCESS,ce.actionTypes.explorer.CREATE_TEAM_SPACE_SUCCESS],p);case 2:case"end":return e.stop()}},s)}function p(t){var r,n,a;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type===ce.actionTypes.explorer.CREATE_FILE_SUCCESS&&t.payload.type!==ce.common.NUM_FILE_TYPE.FOLDER)return e.abrupt("return");e.next=2;break;case 2:if(r=t.payload,n=r.token,r.isInPathTree)return e.abrupt("return");e.next=5;break;case 5:return a=t.type===ce.actionTypes.explorer.CREATE_SHARE_FOLDER_SUCCESS||t.payload.isShared,Object(c.a)("create_new_objs").report({file_id:n,file_type:a?"share_folder":"folder"}),e.next=9,Object(oe.put)(Object(_.b)("".concat(O.URL.FOLDER).concat(n)));case 9:case"end":return e.stop()}},i)}var E=u,se=r("aR0j"),ie=r("QM+C"),l=r("rAc3"),f=r("2ACu"),d=r("1dfU"),ue=r("zeK0"),h=ae.a.mark(y),b=ae.a.mark(T);function y(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeEvery)(ce.actionTypes.explorer.MOVE_FILE_SUCCESS,T);case 2:case"end":return e.stop()}},h)}function T(t){var r,n,a,o,c,s,i,u;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n=r.destToken,a=r.success_tokens,e.next=3,Object(oe.select)(se.y);case 3:return o=e.sent,c=o.get(n),s=Boolean(c&&Object(l.a)(c)),i=a.filter(function(e){var t=o.get(e);return t&&t.get("type")===ie.NUM_FOLDER_TYPE.FOLDER&&!t.get("space_id")}),s&&0!==i.length&&i.forEach(function(e){Object(f.default)("client_sfolder_manage",{file_id:Object(d.a)(e),file_type:"share_folder",action:"create_share_folder",parent_folder_id:Object(d.a)(n),source:"folder_move"})}),e.next=10,Object(oe.select)(se.r);case 10:if((u=e.sent)&&0!==u.size){e.next=13;break}return e.abrupt("return");case 13:-1<u.findIndex(function(e){return a.includes(e)})&&Object(ue.f)();case 15:case"end":return e.stop()}},b)}var S=r("uzgA"),pe=r("5dbN"),R=r("jJw9"),C=ae.a.mark(m),v=ae.a.mark(x);function m(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeEvery)([ce.actionTypes.explorer.REMOVE_FILE_SUCCESS,ce.actionTypes.permission.POST_LEAVE_TEAM_SPACE_SUCCESS],x);case 2:case"end":return e.stop()}},C)}function x(t){var r,n,a,o,c,s,i,u,p,E,l,f;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,n=r.fetchAfter,a=r.token,Object(pe.isUnderSuiteView)()||Object(pe.isUnderRootRoute)())return e.abrupt("return");e.next=3;break;case 3:if(t.type!==ce.actionTypes.explorer.REMOVE_FILE_SUCCESS||n){e.next=5;break}return e.abrupt("return");case 5:if(Object(pe.locateRoute)().isFolder)return e.next=8,Object(oe.select)(se.r);e.next=32;break;case 8:if((o=e.sent)&&0!==o.size){e.next=11;break}return e.abrupt("return");case 11:if(c="string"==typeof a?[a]:a,!(0<(s=o.findIndex(function(e){return c.includes(e)})))){e.next=31;break}if(0==s-1)return e.next=18,Object(oe.select)(se.s);e.next=22;break;case 18:u=e.sent,i=u.first(),e.next=27;break;case 22:return p=o.get(s-1),e.next=25,Object(oe.select)(se.y);case 25:E=e.sent,i=E.get(p);case 27:return l=Object(R.generatePath)({type:i.type,token:i.token,obj_token:i.obj_token}),e.next=30,Object(oe.put)(Object(_.b)(l));case 30:case 31:return e.abrupt("return");case 32:return e.next=34,Object(oe.select)(S.a);case 34:if(f=e.sent)return e.next=38,Object(oe.put)(Object(_.c)(f));e.next=40;break;case 38:e.next=42;break;case 40:return e.next=42,Object(oe.put)(Object(_.c)(O.PATH.ME));case 42:case"end":return e.stop()}},v)}var k=r("7EGn"),Ee=r("lgTS"),le=r("/PhZ"),j=r("+mgp"),g=ae.a.mark(M),I=ae.a.mark(D),L=ae.a.mark(F),N=ae.a.mark(w);function M(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeEvery)([ce.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_START,ce.actionTypes.permission.POST_ADD_ROLE_MEMBER_START],D);case 2:case"end":return e.stop()}},g)}function D(t){var r,n,a,o;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=Object(k.default)(t,"payload.token","")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(oe.select)(se.y);case 6:if(n=e.sent,a=n.get(r),Object(l.e)(a)){e.next=10;break}return e.abrupt("return");case 10:e.t0=t.type,e.next=e.t0===ce.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_START?13:e.t0===ce.actionTypes.permission.POST_ADD_ROLE_MEMBER_START?17:21;break;case 13:return e.next=15,Object(oe.race)({success:Object(oe.take)(ce.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_SUCCESS),failed:Object(oe.take)(ce.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_FAIL),canceled:Object(oe.take)(ce.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_CANCEL)});case 15:return o=e.sent,e.abrupt("break",21);case 17:return e.next=19,Object(oe.race)({success:Object(oe.take)(ce.actionTypes.permission.POST_ADD_ROLE_MEMBER_SUCCESS),failed:Object(oe.take)(ce.actionTypes.permission.POST_ADD_ROLE_MEMBER_FAIL),canceled:Object(oe.take)(ce.actionTypes.permission.POST_ADD_ROLE_MEMBER_CANCEL)});case 19:return o=e.sent,e.abrupt("break",21);case 21:if(o.success){e.next=23;break}return e.abrupt("return");case 23:if(t.type===ce.actionTypes.permission.POST_ADD_ROLE_MEMBER_START&&Object(f.default)("client_sfolder_manage",{file_id:Object(d.a)(r),file_type:"share_folder",action:"create_share_folder",source:"folder_share"}),j.s)return e.next=28,Object(oe.spawn)(w,Object.assign({},t,{payload:Object.assign({},t.payload)}));e.next=30;break;case 28:e.next=32;break;case 30:return e.next=32,Object(oe.spawn)(F,Object.assign({},t,{payload:Object.assign({},t.payload)}));case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),console.error(e.t1);case 37:case"end":return e.stop()}},I,null,[[0,34]])}function F(t){var r,n,a;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(oe.select)(se.m);case 3:return r=e.sent,e.next=6,Object(oe.select)(se.qb);case 6:if(n=e.sent,a=t.payload.token,n.fatherType===ie.NUM_ROOT_META.EXPLORER)return e.next=11,Object(oe.put)(Object(le.removeChildFromFather)({fatherToken:n.fatherToken,childToken:a}));e.next=11;break;case 11:if(r!==a){e.next=15;break}Object(ue.f)(),e.next=17;break;case 15:return e.next=17,Object(oe.put)(Object(_.b)("".concat(ce.route.URL.FOLDER).concat(a)));case 17:return e.next=19,Object(oe.put)(Object(le.fetchRootShareFolderWithinParams)(Ee.h.FetchVisible,!1));case 19:e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(0),e.t0;case 24:case"end":return e.stop()}},L,null,[[0,21]])}function w(t){var r,n,a;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(oe.select)(se.m);case 3:return r=e.sent,e.next=6,Object(oe.select)(se.qb);case 6:if(n=e.sent,a=t.payload.token,n.fatherType===ie.NUM_ROOT_META.EXPLORER)return e.abrupt("return");e.next=10;break;case 10:if(r!==a){e.next=14;break}Object(ue.f)(),e.next=16;break;case 14:return e.next=16,Object(oe.put)(Object(_.b)("".concat(ce.route.URL.FOLDER).concat(a)));case 16:return e.next=18,Object(oe.put)(Object(le.fetchMySpaceFolderWithinParams)());case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),e.t0;case 23:case"end":return e.stop()}},N,null,[[0,20]])}var P=M,U=ae.a.mark(V),H=ae.a.mark(W);function V(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeEvery)(ce.actionTypes.ui.CLOSE_MODAL,W);case 2:case"end":return e.stop()}},U)}function W(t){var r,n,a,o,c;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[ce.ui.MODAL_TYPES.ATTACHMENT_PREVIEW,ce.ui.MODAL_TYPES.IMPORT_CENTER],n=[ce.ui.CLOSE_TYPES.ABORT,ce.ui.CLOSE_TYPES.TRANSFER],a=t.payload,o=a.modalType,c=a.closeType,-1<r.indexOf(o))return e.abrupt("return");e.next=5;break;case 5:if(-1<n.indexOf(c))return e.abrupt("return");e.next=7;break;case 7:if(ce.ui.modalTypesArr.indexOf(o)<0)return e.abrupt("return");e.next=9;break;case 9:return e.next=11,Object(oe.put)(Object(le.setSelectedFileMetas)([]));case 11:case"end":return e.stop()}},H)}var B=r("ahx2"),Y=r("3iXK"),q=r("jryj"),K=r("XMIC"),X=ae.a.mark(Q),z=ae.a.mark(Z),J=ae.a.mark($);function Q(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeEvery)([ce.actionTypes.box.CHECK_PARSER_STATUS_FAIL,ce.actionTypes.box.RESTORE_FILE_VERSION_FAIL,ce.actionTypes.explorer.CREATE_FILE_FAIL,ce.actionTypes.suite.COPY_SUITE_FAIL,ce.actionTypes.template.CREATE_BY_TEMPLATE_FAIL],Z);case 2:return e.next=4,Object(oe.takeEvery)(ce.actionTypes.explorer.MANUALLY_SHOW_USAGE_LIMIT,$);case 4:case"end":return e.stop()}},X)}function Z(t){var r,n;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(k.default)(t,"error.code")===B.CREATE_LIMITATION_ERROR_CODE)return r=Object(k.default)(t,"type")===ce.actionTypes.box.RESTORE_FILE_VERSION_FAIL,n=Object(k.default)(t,"payload.obj_type")===ie.NUM_SUITE_TYPE.FILE,e.next=5,Object(oe.put)(Object(K.c)(q.MODAL_TYPES.CREATE_LIMITATION,r?Y.CreateLimitationModalType.RestoreFileVersion:n?Y.CreateLimitationModalType.CloneFile:Y.CreateLimitationModalType.CreateSuite));e.next=5;break;case 5:case"end":return e.stop()}},z)}function $(t){var r;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(k.default)(t,"payload"),e.next=3,Object(oe.put)(Object(K.c)(q.MODAL_TYPES.CREATE_LIMITATION,r));case 3:case"end":return e.stop()}},J)}var ee=Q,te=r("SEc5"),re=r("Huva"),ne=r("bB+y"),fe=r("Sz9a"),_e=ae.a.mark(de),Oe=ae.a.mark(he);function de(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeLatest)(ce.actionTypes.explorer.TRIGGER_HANDLE_DELETE_OR_REMOVE_FILE,he);case 2:case"end":return e.stop()}},_e)}function he(t){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(pe.isUnderSuiteView)())return e.next=3,Object(ne.a)(t);e.next=5;break;case 3:e.next=7;break;case 5:return e.next=7,Object(fe.a)(t);case 7:case"end":return e.stop()}},Oe)}var be=r("gSGL"),ye=r("y94N"),Te=r("Mpt7"),Se=ae.a.mark(Ce),Re=ae.a.mark(ve);function Ce(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeLatest)(ce.actionTypes.explorer.PERMANENTLY_DELETE_FILE,ve);case 2:case"end":return e.stop()}},Se)}function ve(t){var r,n,a;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload.token,Object(be.a)(r)&&(r=[r]),e.next=4,Object(oe.select)(se.y);case 4:return n=e.sent,a=Object(Te.List)(r).map(function(e){return n.get(e)}),e.next=8,Object(fe.b)(ye.p.SharedFolderTrash,a);case 8:return e.abrupt("return");case 9:case"end":return e.stop()}},Re)}var me=ae.a.mark(xe);function xe(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)([Ce,de]);case 2:case"end":return e.stop()}},me)}var Ae=xe,ke=ae.a.mark(ge),je=ae.a.mark(Ie);function ge(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeEvery)([ce.actionTypes.explorer.REMOVE_FILE_SUCCESS,ce.actionTypes.explorer.RESTORE_REMOVED_FILE_SUCCESS,ce.actionTypes.explorer.DELETE_REMOVED_FILE_SUCCESS],Ie);case 2:case"end":return e.stop()}},ke)}function Ie(){var t;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.select)(se.q);case 2:if((t=e.sent)&&Object(l.a)(t))return e.next=6,Object(oe.put)(Object(le.fetchDustbinChildren)(t.get("token")));e.next=6;break;case 6:case"end":return e.stop()}},je)}var Le=ge,Ne=r("cugM"),Me=ae.a.mark(Fe),De=ae.a.mark(we);function Fe(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeEvery)(ce.actionTypes.route.LOCATION_CHANGE,we);case 2:case"end":return e.stop()}},Me)}function we(e){var t,r,n,a;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.select)(Ne.a);case 2:t=e.sent,r=t.toJS(),n=0,a=r.length;case 5:if(n<a)return e.next=8,Object(oe.put)(Object(K.b)(r[n].type,q.CLOSE_TYPES.ABORT));e.next=11;break;case 8:n++,e.next=5;break;case 11:case"end":return e.stop()}},De)}var Pe=r("X6Qb"),Ue=r("lSNA"),He=r.n(Ue),Ve=r("3Hq1"),Ge=r("yiFV"),We=r("GIKb"),Be=ae.a.mark(Qe),Ye=ae.a.mark(Ze),qe=ae.a.mark($e),Ke=ae.a.mark(et),Xe=ae.a.mark(tt),ze=ae.a.mark(rt),Je=ae.a.mark(nt);function Qe(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeEvery)([ce.actionTypes.explorer.COMMON_ADD_FILE_TO_SUCCESS,ce.actionTypes.explorer.MOVE_FILE_SUCCESS,ce.actionTypes.explorer.CREATE_FILE_SUCCESS,ce.actionTypes.explorer.CREATE_SHARE_FOLDER_SUCCESS,ce.actionTypes.explorer.CREATE_FOLDER_SUCCESS,ce.actionTypes.explorer.REMOVE_FILE_SUCCESS,ce.actionTypes.explorer.RESTORE_REMOVED_FILE_SUCCESS,ce.actionTypes.explorer.DELETE_REMOVED_FILE_SUCCESS,ce.actionTypes.explorer.DELETE_OBJECT_SUCCESS,ce.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_SUCCESS,ce.actionTypes.permission.POST_ADD_ROLE_MEMBER_SUCCESS,ce.actionTypes.suite.COPY_SUITE_SUCCESS,ce.actionTypes.box.COMPLETE_DELETE_STORAGE_FILES_SUCCESS,ce.actionTypes.box.UPLOAD_SUCCESS],Ze);case 2:case"end":return e.stop()}},Be)}function Ze(t){var r,n,a,o,c,s,i,u,p,E,l,f,_,O,d,h,b,y,T,S,R,C,v,m,x,k,j,g,I,L,N,M,D,F,w,P,U,H,V,W,B,Y,q,K,X,z,J,Q,Z,$,ee,te,re,ne;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===ce.actionTypes.explorer.COMMON_ADD_FILE_TO_SUCCESS?3:e.t0===ce.actionTypes.explorer.MOVE_FILE_SUCCESS?12:e.t0===ce.actionTypes.explorer.CREATE_FILE_SUCCESS?37:e.t0===ce.actionTypes.explorer.CREATE_SHARE_FOLDER_SUCCESS?50:e.t0===ce.actionTypes.explorer.CREATE_FOLDER_SUCCESS?53:e.t0===ce.actionTypes.explorer.REMOVE_FILE_SUCCESS?72:e.t0===ce.actionTypes.explorer.RESTORE_REMOVED_FILE_SUCCESS?76:e.t0===ce.actionTypes.suite.COPY_SUITE_SUCCESS?116:e.t0===ce.actionTypes.explorer.DELETE_REMOVED_FILE_SUCCESS?127:e.t0===ce.actionTypes.explorer.DELETE_OBJECT_SUCCESS?131:e.t0===ce.actionTypes.permission.POST_ADD_ROLE_MEMBER_SUCCESS?157:e.t0===ce.actionTypes.explorer.ADD_MEMBERS_TO_FOLDER_SUCCESS?163:e.t0===ce.actionTypes.box.COMPLETE_DELETE_STORAGE_FILES_SUCCESS?169:e.t0===ce.actionTypes.box.UPLOAD_SUCCESS?176:195;break;case 3:return r=t.payload.destToken,e.next=6,tt(r);case 6:if(e.sent)return e.next=10,Object(oe.put)(Object(le.fetchTreeFileMeta)({urlType:Object(We.a)(),token:r}));e.next=10;break;case 10:return Object(ue.f)({token:r}),e.abrupt("break",196);case 12:return n=t.payload,a=n.fatherType,o=n.fatherToken,c=n.success_tokens,s=n.destToken,e.next=15,Object(oe.put)(Object(le.removeChildFromFather)({fatherToken:o,fatherType:a,childToken:c}));case 15:return e.next=17,Object(oe.select)(se.ib);case 17:if(i=e.sent,!(u=at({token:s,rootTokenMap:i}))){e.next=29;break}e.t1=u,e.next=e.t1===ie.NUM_ROOT_META.EXPLORER?23:26;break;case 23:return e.next=25,Object(oe.put)(Object(le.fetchMySpaceFolderWithinParams)());case 25:case 26:return e.abrupt("break",27);case 27:e.next=36;break;case 29:return e.next=31,tt(s);case 31:if(e.sent)return e.next=35,Object(oe.put)(Object(le.fetchTreeFileMeta)({urlType:Object(We.a)(),token:s}));e.next=35;break;case 35:Object(ue.f)({token:s});case 36:return e.abrupt("break",196);case 37:if(p=t.payload,E=p.type,l=p.parentToken)return e.next=41,tt(l);e.next=46;break;case 41:if(e.sent)return e.next=45,Object(oe.put)(Object(le.fetchTreeFileMeta)({urlType:Object(We.a)(),token:l}));e.next=45;break;case 45:Object(ue.f)({token:l});case 46:if(l||E!==ie.NUM_FILE_TYPE.FOLDER){e.next=49;break}return e.next=49,Object(oe.put)(Object(le.fetchMySpaceFolderWithinParams)());case 49:return e.abrupt("break",196);case 50:return e.next=52,Object(oe.put)(Object(le.fetchRootShareFolderWithinParams)(Ee.h.FetchVisible,!1));case 52:return e.abrupt("break",196);case 53:if(f=t.payload,_=f.isShared,O=f.parentToken)return e.next=57,tt(O);e.next=64;break;case 57:if(e.sent)return e.next=61,Object(oe.put)(Object(le.fetchTreeFileMeta)({urlType:Object(We.a)(),token:O}));e.next=61;break;case 61:Object(ue.f)({token:O}),e.next=71;break;case 64:if(_)return e.next=67,Object(oe.put)(Object(le.fetchRootShareFolderWithinParams)(Ee.h.FetchVisible,!1));e.next=69;break;case 67:e.next=71;break;case 69:return e.next=71,Object(oe.put)(Object(le.fetchMySpaceFolderWithinParams)());case 71:return e.abrupt("break",196);case 72:return d=t.payload,h=d.success_token,b=d.fatherType,y=d.fatherToken,e.next=75,Object(oe.put)(Object(le.removeChildFromFather)({childToken:h,fatherToken:y,fatherType:b}));case 75:return e.abrupt("break",196);case 76:if(Object(pe.locateRoute)().isStorage)return e.next=79,Object(oe.put)(Object(le.fetchStorageList)());e.next=79;break;case 79:if(T=t.payload,S=T.fatherType,R=T.fatherToken,C=T.parent_info,v=T.success_tokens,m=null===S&&""===R){e.next=89;break}if(S===ie.NUM_FILE_TYPE.FOLDER&&""!==R&&Object(ue.f)({token:R}),S===ie.NUM_ROOT_META.EXPLORER)return e.next=86,Object(oe.put)(Object(le.fetchMySpaceFolderWithinParams)());e.next=86;break;case 86:if(S===ie.NUM_ROOT_META.SHARE_FOLDERS)return e.next=89,Object(oe.put)(Object(le.fetchRootShareFolderWithinParams)(Ee.h.FetchVisible,!1));e.next=89;break;case 89:if(C&&Object.keys(C).length){e.next=91;break}return e.abrupt("return");case 91:return e.next=93,nt(C);case 93:if(x=e.sent,k=x.notUnderRootNodeTokens,j=x.rootNodeTypes,m)return e.next=98,Object(oe.select)(se.m);e.next=106;break;case 98:if(g=e.sent,k.includes(g)&&Object(ue.f)(),j.includes(ie.NUM_ROOT_META.EXPLORER))return e.next=103,Object(oe.put)(Object(le.fetchMySpaceFolderWithinParams)());e.next=103;break;case 103:if(j.includes(ie.NUM_ROOT_META.SHARE_FOLDERS))return e.next=106,Object(oe.put)(Object(le.fetchRootShareFolderWithinParams)(Ee.h.FetchVisible,!1));e.next=106;break;case 106:return I=k.reduce(function(e,t){if(!C[t])return e;var r=C[t].parent_token,n=e[r],a=n?n.concat(t):[t];return Object.assign({},e,He()({},r,a))},{}),e.next=109,Object(oe.select)(se.Kb);case 109:return L=e.sent,N=L.withMutations(function(a){Object.keys(I).forEach(function(e){var t,r,n=a.get(e);n&&(t=I[e],r=Object(Te.List)(t).concat(n),a.set(e,r))})}),M=Object(le.setTokenMap)({treeDirectory:!0,tokenMap:N}),e.next=114,Object(oe.put)(M);case 114:return Object.keys(C).length!==v.length&&console.log("need refresh entity list"),e.abrupt("break",196);case 116:if(D=t.payload,F=D.parentToken,w=D.parentType,ie.EXPLORER_ROOT_PATH_YPE.includes(w))return e.abrupt("return");e.next=119;break;case 119:return e.next=121,tt(F);case 121:if(e.sent)return e.next=125,Object(oe.put)(Object(le.fetchTreeFileMeta)({urlType:Object(We.a)(),token:F}));e.next=125;break;case 125:return Object(ue.f)({token:F}),e.abrupt("break",196);case 127:if(Object(pe.locateRoute)().isStorage)return e.next=130,Object(oe.put)(Object(le.fetchStorageList)());e.next=130;break;case 130:return e.abrupt("break",196);case 131:return P=t.payload,U=P.success_obj_token,H=P.fatherToken,V=P.fatherType,e.next=134,et(U);case 134:return W=e.sent,e.next=137,$e({fatherTokens:W,objTokens:U,treeDirectory:!0});case 137:return e.next=139,Object(oe.select)(se.m);case 139:if(B=e.sent,Object(pe.locateRoute)().isFolder&&H===B)return e.next=143,Object(oe.select)(se.o);e.next=152;break;case 143:return Y=e.sent,e.next=146,Object(oe.select)(se.y);case 146:if(q=e.sent,K=Y.map(function(e){return{token:e,objToken:q.get(e).obj_token}}),(X=K.reduce(function(e,t){return U.includes(t.objToken)?e.concat(t.token):e},[])).length)return e.next=152,Object(oe.put)(Object(le.removeChildFromFather)({fatherToken:H,fatherType:V,listName:ye.p.Folder,childToken:X}));e.next=152;break;case 152:if(Object(ue.d)(),Object(pe.locateRoute)().isStorage)return e.next=156,Object(oe.put)(Object(le.fetchStorageList)());e.next=156;break;case 156:return e.abrupt("break",196);case 157:if(z=t.payload,J=z.isSharedFolder,Q=z.token,J)return e.abrupt("return");e.next=160;break;case 160:return e.next=162,rt(Q);case 162:return e.abrupt("break",196);case 163:if(Z=t.payload.token){e.next=166;break}return e.abrupt("return");case 166:return e.next=168,rt(Z);case 168:return e.abrupt("break",196);case 169:return $=t.payload.success_tokens,e.next=172,et($);case 172:return ee=e.sent,e.next=175,$e({fatherTokens:ee,objTokens:$,treeDirectory:!0});case 175:return e.abrupt("break",196);case 176:if(te=t.payload,re=te.parentToken,ne=te.isFolder,Object(pe.locateRoute)().isStorage)return e.next=180,Object(oe.put)(Object(le.fetchStorageList)());e.next=180;break;case 180:if(re||ne){e.next=182;break}return e.abrupt("return");case 182:if(!re&&ne)return e.next=185,Object(oe.put)(Object(le.fetchMySpaceFolderWithinParams)());e.next=186;break;case 185:return e.abrupt("return");case 186:if(re)return e.next=189,tt(re);e.next=194;break;case 189:if(e.sent)return e.next=193,Object(oe.put)(Object(le.fetchTreeFileMeta)({urlType:Object(We.a)(),token:re}));e.next=193;break;case 193:Object(ue.f)({token:re});case 194:case 195:return e.abrupt("break",196);case 196:case"end":return e.stop()}},Ye)}function $e(t){var r,a,n,o,c,s,i,u,p;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fatherTokens,a=t.objTokens,n=t.byRequest,o=t.treeDirectory,r.length){e.next=4;break}return console.warn("[refreshDirectoriesByFilterObjTokens]: PathTokens is empty. Refresh will not be executed"),e.abrupt("return");case 4:if(n)return c=r.map(function(e){return Object(le.fetchTreeFileMeta)({urlType:Object(We.a)(),token:e})}),e.next=8,Object(oe.all)(c.map(function(e){return Object(oe.put)(e)}));e.next=10;break;case 8:e.next=23;break;case 10:return e.next=12,Object(oe.select)(se.y);case 12:return s=e.sent,e.next=15,Object(oe.select)(se.B);case 15:return i=e.sent,e.next=18,Object(oe.select)(se.Kb);case 18:return u=e.sent,p=(o?u:i).withMutations(function(n){r.forEach(function(e){var t,r=n.get(e);r&&(t=r.filter(function(e){var t=s.get(e).obj_token;return!a.includes(t)}),n.set(e,t))})}),e.next=23,Object(oe.put)(Object(le.setTokenMap)({treeDirectory:o,tokenMap:p}));case 23:case"end":return e.stop()}},qe)}function et(n){var t,a,o,r;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.select)(se.D);case 2:return t=e.sent,e.next=5,Object(oe.select)(se.Kb);case 5:return a=e.sent,e.next=8,Object(oe.select)(se.y);case 8:return o=e.sent,r=t.filter(function(e){var t=a.get(e);if(!t)return!1;var r=t.map(function(e){return o.get(e).obj_token});return n.some(function(e){return r.includes(e)})}),e.abrupt("return",r);case 11:case"end":return e.stop()}},Ke)}function tt(t){var r;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.select)(se.D);case 2:return r=e.sent,e.abrupt("return",r.includes(t));case 4:case"end":return e.stop()}},Xe)}function rt(r){var t,n,a;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.select)(se.D);case 2:return t=e.sent,e.next=5,Object(oe.select)(se.Kb);case 5:if(n=e.sent,a=t.find(function(e){var t=n.get(e);return!!t&&t.includes(r)})){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,Object(oe.put)(Object(le.removeChildFromFather)({fatherToken:a,fatherType:ie.NUM_FILE_TYPE.FOLDER,listName:ye.p.Folder,childToken:r}));case 11:case"end":return e.stop()}},ze)}function nt(o){var t,c,s,r;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.keys(o),e.next=3,Object(oe.select)(se.y);case 3:return c=e.sent,e.next=6,Object(oe.select)(se.ib);case 6:return s=e.sent,r=t.reduce(function(e,t){if(!o[t])return e;var r=o[t].parent_token,n=at({token:r,rootTokenMap:s});if(Object(Ve.default)(c.get(r))&&null===n)return e;var a=null!==n?{rootNodeTypes:e.rootNodeTypes.concat(Number(n))}:{notUnderRootNodeTokens:e.notUnderRootNodeTokens.concat(t)};return Object.assign({},e,{},a)},{notUnderRootNodeTokens:[],rootNodeTypes:[]}),e.abrupt("return",r);case 9:case"end":return e.stop()}},Je)}function at(e){var t=e.token,r=e.rootTokenMap;if(t===Ge.DummyTokens.ShareFolders)return ie.NUM_ROOT_META.SHARE_FOLDERS;var n=r.keyOf(t);return n?Number(n):null}var ot=r("ZGZ5"),ct=r("H0C5"),st=ae.a.mark(ut),it=ae.a.mark(pt);function ut(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeLatest)([ce.actionTypes.explorer.CREATE_FILE_SUCCESS,ce.actionTypes.suite.COPY_SUITE_SUCCESS,ce.actionTypes.explorer.REMOVE_FILE_SUCCESS,ce.actionTypes.explorer.DELETE_OBJECT_SUCCESS,ce.actionTypes.explorer.COMMON_ADD_FILE_TO_SUCCESS,ce.actionTypes.explorer.RESTORE_REMOVED_FILE_SUCCESS],pt);case 2:case"end":return e.stop()}},st)}function pt(t){var r,n,a,o,c,s,i,u,p;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===ce.actionTypes.explorer.CREATE_FILE_SUCCESS?3:e.t0===ce.actionTypes.suite.COPY_SUITE_SUCCESS?9:e.t0===ce.actionTypes.explorer.REMOVE_FILE_SUCCESS?14:e.t0===ce.actionTypes.explorer.DELETE_OBJECT_SUCCESS?26:e.t0===ce.actionTypes.explorer.COMMON_ADD_FILE_TO_SUCCESS?30:e.t0===ce.actionTypes.explorer.RESTORE_REMOVED_FILE_SUCCESS?39:44;break;case 3:if(r=t.payload.type,ie.suiteType.includes(r)&&Object(pe.locateRoute)().isMe){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Object(oe.put)(Object(le.fetchMyObjectListWithinParams)());case 8:return e.abrupt("break",45);case 9:if(Object(pe.locateRoute)().isMe){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,Object(oe.put)(Object(le.fetchMyObjectListWithinParams)());case 13:return e.abrupt("break",45);case 14:return n=t.payload.success_token,e.next=17,Object(oe.select)(se.W);case 17:return a=e.sent,e.next=20,Object(oe.select)(ot.a);case 20:return o=e.sent,c=o.get("id"),s=n.reduce(function(e,t,r){var n=a.find(function(e){return e.token===t});return n&&n.owner_id===c?e.concat(n.obj_token):e},[]),e.next=25,Object(oe.put)(Object(le.removeChildFromFather)({listName:ye.p.Recent,childToken:s}));case 25:return e.abrupt("break",45);case 26:return i=t.payload.success_obj_token,e.next=29,Object(oe.put)(Object(le.removeChildFromFather)({listName:ye.p.MyObject,childToken:i}));case 29:return e.abrupt("break",45);case 30:return e.next=32,Object(oe.select)(Et);case 32:if(u=e.sent,u.onlyUnOrganized)return p=t.payload.objTokens,e.next=38,Object(oe.put)(Object(le.removeIndexFromMyObjectList)(p));e.next=38;break;case 38:return e.abrupt("break",45);case 39:if(Object(pe.locateRoute)().isMe){e.next=41;break}return e.abrupt("return");case 41:return e.next=43,Object(oe.put)(Object(le.fetchMyObjectListWithinParams)());case 43:case 44:return e.abrupt("break",45);case 45:case"end":return e.stop()}},it)}var Et=Object(ct.a)(ye.p.MyObject),lt=r("vc5i"),ft=ae.a.mark(Ot),_t=ae.a.mark(dt);function Ot(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeLatest)([ce.actionTypes.explorer.REMOVE_FILE_SUCCESS,ce.actionTypes.explorer.COMMON_ADD_FILE_TO_SUCCESS],dt);case 2:case"end":return e.stop()}},ft)}function dt(t){var r,n,a,o;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===ce.actionTypes.explorer.REMOVE_FILE_SUCCESS?3:e.t0===ce.actionTypes.explorer.COMMON_ADD_FILE_TO_SUCCESS?14:25;break;case 3:if(Object(pe.isUnderSuiteView)()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Object(oe.select)(lt.n);case 7:return r=e.sent,e.next=10,Object(oe.select)(lt.o);case 10:return n=e.sent,e.next=13,Object(oe.put)(Object(le.fetchObjPaths)(r,n));case 13:return e.abrupt("return");case 14:if(Object(pe.locateRoute)().isHome||Object(pe.locateRoute)().isMe){e.next=16;break}return e.abrupt("return");case 16:if(!(a=t.payload.objTokens)||!a[0]||1<a.length)return e.abrupt("return");e.next=19;break;case 19:return e.next=21,Object(oe.select)(se.W);case 21:return o=e.sent,e.next=24,Object(oe.put)(Object(le.fetchObjPaths)(a[0],o.getIn([a[0],"type"])));case 24:case 25:return e.abrupt("return");case 26:case"end":return e.stop()}},_t)}var ht=ae.a.mark(bt);function bt(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)([Qe,ut,Ot]);case 2:case"end":return e.stop()}},ht)}var yt=ae.a.mark(St),Tt=ae.a.mark(Rt);function St(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeLatest)(ce.actionTypes.explorer.ADD_STAR_SUCCESS,Rt);case 2:case"end":return e.stop()}},yt)}function Rt(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(ue.e)();case 1:case"end":return e.stop()}},Tt)}var Ct=r("9VmL"),vt=r("esSv"),mt=ae.a.mark(At),xt=ae.a.mark(kt);function At(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.takeEvery)(Ct.a.WIKI_PAGE_TREE_CREATE_WIKI_SUCCESS,kt);case 2:case"end":return e.stop()}},mt)}function kt(t){var r,n,a,o,c,s;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.payload){e.next=2;break}return e.abrupt("return");case 2:if(r=t.payload,n=r.source,a=r.obj_token,o=r.wiki_token,c=r.space_id,s=r.obj_type,"space"!==n)return e.abrupt("return");e.next=5;break;case 5:return e.next=7,Object(oe.put)(Object(vt.b)({spaceId:c,wikiToken:o,objToken:a,objType:s}));case 7:case"end":return e.stop()}},xt)}var jt=ae.a.mark(gt);function gt(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)([E,bt,y,m,P,V,ee,te.a,re.a,Ae,Le,Fe,Pe.a,St,At],o.a);case 2:case"end":return e.stop()}},jt)}var It=gt;function Lt(){return{id:"explorer-async",sagas:[It]}}r.d(t,"getExplorerAsyncModule",function(){return Lt})},l4d2:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o});var n=r("nCBi"),a="favoriteFolderToken";function o(e){return!!e.target&&(e.target.classList.contains(n.k)||e.target.classList.contains(n.j)||e.target.classList.contains(n.a))}},lCmp:function(e,t,r){"use strict";var a=r("fGER"),o=r("fywt"),c=r("26kz");function n(e,n){var a;return Object(c.a)(e,function(e,t,r){return!(a=n(e,t,r))}),!!a}var s=n,i=r("/1FC"),u=r("XFn8");function p(e,t,r){var n=Object(i.a)(e)?a.a:s;return r&&Object(u.a)(e,t,r)&&(t=void 0),n(e,Object(o.a)(t,3))}t.a=p},mHIB:function(e,t,r){"use strict";var n=r("lwsE"),a=r.n(n),o=r("W8MJ"),c=r.n(o),u=r("WzBf"),p=r("SebV"),s=r("fHNB"),i=function(){function e(){a()(this,e),this.enabled=!1,this.documentDeleted=!1}return c()(e,[{key:"getConfig",value:function(e,t){var r=this;return[{options:{token:"NOTICE_".concat(e,"_").concat(t),resourceType:"NOTICE_".concat(e),routeType:"token",routeKey:t,subtype:"DELETE"},handler:function(e){r.documentDeleted=!0,Object(s.a)(!0)}}]}},{key:"register",value:function(e,t){var r=this;this.tagOptions=this.getConfig(e,t);var n=!0,a=!1,o=void 0;try{for(var c,s=this.tagOptions[Symbol.iterator]();!(n=(c=s.next()).done);n=!0){var i=c.value;u.a.register(i.options,i.handler),u.a.onError(i.options,function(e){console.error("[MessageBoxError]:",e),Object(p.a)(e)})}}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return this.enabled=!0,function(){return r.deregister()}}},{key:"deregister",value:function(){if(this.enabled){var e=!0,t=!1,r=void 0;try{for(var n,a=this.tagOptions[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=n.value;u.a.deregister(o.options,o.handler)}}catch(e){t=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}this.tagOptions=[],this.enabled=!1,this.documentDeleted=!1}}},{key:"isDocumentDeleted",value:function(){return this.documentDeleted}},{key:"isEnabled",value:function(){return this.enabled}}]),e}();t.a=new i},mJXI:function(e,t,r){"use strict";r.d(t,"a",function(){return _});var s=r("Bw5p"),i=r("TYER"),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function a(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function E(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,l=(a(c,o=i.j),c.prototype.getVersionOfOversize=function(e){return e.version},c.prototype.getVersionOfChangeset=function(e){return e.version},c.prototype.getChangesets=function(e){return e.messages},c.prototype.getVersionOfClientVars=function(e){return e.version},c.prototype.getVersionOfAcceptCommit=function(e){return e.version},c.prototype.isSelfChangeset=function(){return!1},c);function c(e){var t=o.call(this,u(u({},e),{requestAPI:{CLIENT_VARS:"/api/msg_box/get_version",NEW_CHANGES:"/api/msg_box/get_message",USER_CHANGES:""}}))||this;return t.missVersionLimit=100,t}var f=(p.prototype.log=function(e,t){this.loggable&&console.log(this.prefix,e,t)},p.prototype.enable=function(){this.loggable=!0},p.prototype.disable=function(){this.loggable=!1},p);function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.loggable=!0,this.prefix="["+e.join("][")+"]"}var _=(O.prototype.destory=function(){this.sync&&this.sync.destroy(),this.messageCallbackSet.clear(),this.messageSubtypeCallbackMap.clear(),this.errorCallbackSet.clear()},O.prototype.getMessageCallbackSetSize=function(){return this.messageCallbackSet.size},O.prototype.isRegistered=function(){return!(!this.messageCallbackSet.size&&!this.messageSubtypeCallbackMap.size)},O.prototype.getErrorCallbackSetSize=function(){return this.errorCallbackSet.size},O);function O(e,t,r,n){var p=this;this.options=e,this.io=t,this.request=r,this.isNewProtocol=n,this.messageCallbackSet=new Set,this.messageSubtypeCallbackMap=new Map,this.errorCallbackSet=new Set,this.connect=function(){var e,t,r=p.options,n=p.io,a=p.request,o=r.token,c=r.version;p.sync=new l({token:o,io:n,type:i.d.MESSAGE_BOX,alias:((e={})[i.h.NEW_CHANGES]="GET_MESSAGE",e[i.h.CLIENT_VARS]="GET_VERSION",e),logger:r.resourceType?new f("DataJS","Sync",i.d.MESSAGE_BOX,null!=(t=r.resourceType)?t:""):new f("DataJS","Sync",i.d.MESSAGE_BOX),requestDataOptions:u(u({},Object(s.a)(r,["extra"])),{resource_type:r.resourceType}),requestWatchDataOptions:{route_type:r.routeType,route_key:r.routeKey},requestExceptWatchHeaderOptions:{"route-key":r.routeKey,"route-type":r.routeType},request:a,isNewProtocol:p.isNewProtocol}),p.sync.on(i.h.NEW_CHANGES,p.handleMessage),p.sync.on(i.h.ERROR,p.handleSyncError),void 0!==c?p.sync.setClientVars(c):p.sync.fetchClientVars()},this.register=function(e,t){var r,n=p.messageCallbackSet,a=p.messageSubtypeCallbackMap;t?((r=a.get(t))||(r=new Set,a.set(t,r)),r.add(e)):n.add(e)},this.deregister=function(e,t){var r,n=p.messageCallbackSet,a=p.messageSubtypeCallbackMap;t?(r=a.get(t))&&(r.delete(e),0===r.size&&a.delete(t)):n.delete(e)},this.onError=function(e){return p.errorCallbackSet.add(e),p.errorCallbackSet.size},this.removeErrorListener=function(e){return p.errorCallbackSet.delete(e),p.errorCallbackSet.size},this.handleMessage=function(e){var t,r,n=e.message,a=e.extra,o=e.sub_type;if(n){var c=o?p.messageSubtypeCallbackMap.get(o):p.messageCallbackSet;if(c)try{for(var s=E(c),i=s.next();!i.done;i=s.next()){var u=i.value;u&&u(n,a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}}},this.handleSyncError=function(e){var t,r;try{for(var n=E(p.errorCallbackSet),a=n.next();!a.done;a=n.next()){var o=a.value;o&&o(e)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},this.connect()}}}]);
//# sourceMappingURL=explorer-async_modules.d289a1035cf6f67cb618.js.map