(this.webpackJsonp=this.webpackJsonp||[]).push([["onboarding-doc_modules"],{DfMb:function(e,s,u){"use strict";(function(t){u.d(s,"a",function(){return a});var e=u("o0o1"),_=u.n(e),l=u("7EGn"),d=u("oZtI"),j=u("yaX4"),E=u("nYlk"),k=u("jp/M"),g=u("G8Hj"),T=u("2ACu"),r=u("LPA4"),R=u("qKwb"),m=u("b9hN"),S=u("vc5i"),P=u("ZGZ5"),h=u("SGN9"),C=u("0uEh"),n=_.a.mark(a),v=_.a.mark(c),y=15e3,U=5;function a(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.takeEvery)([k.actionTypes.onboarding.CREATE_DOC_GUIDE_PREPARE],Object(r.b)(c));case 2:case"end":return e.stop()}},n)}function c(){var t,r,n,a,c,s,u,o,i,b,O,f,p,x;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.GROUP_TYPE.CREATE_DOC,e.next=3,Object(d.call)(C.c,t);case 3:if(e.sent)return e.abrupt("return");e.next=6;break;case 6:return r=Object(h.g)(t),e.next=9,Object(d.call)(C.a,r);case 9:if(n=e.sent,a=n&&n.markedSuiteToken||"",c=Boolean(n&&n.profileChecked)){e.next=23;break}return e.next=15,Object(d.call)(C.b,g.PROFILE_GROUP.USER,g.PROFILE.user.docs_acc_create_doc_count);case 15:if(-1===(s=e.sent))return e.abrupt("return");e.next=18;break;case 18:if(U<s)return e.next=21,Object(d.put)(Object(j.a)(r));e.next=22;break;case 21:return e.abrupt("return");case 22:c=!0;case 23:return e.next=25,Object(d.take)(m.a.SET_EDITOR);case 25:return e.next=27,Object(d.select)(P.a);case 27:return u=e.sent,e.next=30,Object(d.select)(S.f);case 30:if(o=e.sent){e.next=37;break}return e.next=34,Object(d.take)(k.actionTypes.suite.FETCH_CURRENT_SUITE_SUCCESS);case 34:return e.next=36,Object(d.select)(S.f);case 36:o=e.sent;case 37:if((i=o.get("owner_id"))&&u.get("id")===i){e.next=40;break}return e.abrupt("return");case 40:return e.next=42,Object(d.select)(S.n);case 42:if(b=e.sent,a)return e.next=46,d.put.resolve(Object(j.d)(r));e.next=54;break;case 46:if(O=e.sent,!0===Object(l.default)(O,"payload.is_done"))return Object(T.default)("empty_doc_onboarding",{onboarding_tour_status:"close"}),e.abrupt("return");e.next=50;break;case 50:if(a===b)return e.next=53,Object(d.put)(Object(E.h)(!0));e.next=53;break;case 53:return e.abrupt("return");case 54:if(f=o.get("create_time"),Date.now()-1e3*f<y){e.next=58;break}return e.abrupt("return");case 58:return e.next=60,Object(d.select)(R.a);case 60:if(p=e.sent,"\n\n"!==Object(l.default)(p,"collab_client_vars.initialAttributedText.0.text"))return e.abrupt("return");e.next=64;break;case 64:return e.next=66,Object(d.select)(R.c);case 66:if(x=e.sent){e.next=69;break}return e.abrupt("return");case 69:return w(x),e.next=72,Object(d.put)(Object(j.d)(r,JSON.stringify({markedSuiteToken:b,profileChecked:c})));case 72:return e.next=74,Object(d.put)(Object(E.h)(!0));case 74:case"end":return e.stop()}},v)}function w(e){e.replaceAllText("".concat(t("onboarding.create_doc.template_title"),"\n").concat(t("onboarding.create_doc.template_body")," \n")),setTimeout(function(){e.changesetTracker.tryChangeCallback()})}}).call(this,u("2vAP"))},MeAF:function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),E=r.n(n),k=r("oZtI"),a=r("DfMb"),f=r("7EGn"),p=r("YYkm"),g=r("yaX4"),x=r("nYlk"),T=r("jp/M"),R=r("G8Hj"),c=r("LPA4"),_=r("2ACu"),m=r("qKwb"),S=r("vc5i"),P=r("ZGZ5"),h=r("5cZX"),C=r("SGN9"),v=r("b9hN"),y=r("0uEh"),s=E.a.mark(u),l=E.a.mark(o),d=3;function u(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.takeEvery)([T.actionTypes.onboarding.SHARED_DOC_GUIDE_PREPARE],Object(c.b)(o));case 2:case"end":return e.stop()}},s)}function o(){var t,r,n,a,c,s,u,o,i,b,O;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.GROUP_TYPE.SHARED_DOC,e.next=3,Object(k.call)(y.c,t);case 3:if(e.sent)return e.abrupt("return");e.next=6;break;case 6:return r=Object(C.g)(t),e.next=9,Object(k.call)(y.a,r);case 9:if(n=e.sent,a=Boolean(n&&n.profileChecked)){e.next=22;break}return e.next=14,Object(k.call)(y.b,R.PROFILE_GROUP.USER,R.PROFILE.user.docs_acc_open_share_count);case 14:if(-1===(c=e.sent))return e.abrupt("return");e.next=17;break;case 17:if(d<c)return e.next=20,Object(k.put)(Object(g.a)(r));e.next=21;break;case 20:return e.abrupt("return");case 21:a=!0;case 22:return e.next=24,Object(k.select)(P.a);case 24:return s=e.sent,e.next=27,Object(k.select)(S.f);case 27:if(u=e.sent){e.next=34;break}return e.next=31,Object(k.take)(T.actionTypes.suite.FETCH_CURRENT_SUITE_SUCCESS);case 31:return e.next=33,Object(k.select)(S.f);case 33:u=e.sent;case 34:return o=u.get("owner_id"),e.next=37,Object(k.select)(h.b);case 37:if(i=e.sent,o&&s.get("id")!==o&&i){e.next=40;break}return e.abrupt("return");case 40:return e.next=42,Object(k.take)(v.a.SET_EDITOR);case 42:return e.next=44,Object(k.select)(m.c);case 44:if(b=e.sent,!Object(p.a)()&&j(b))return e.abrupt("return");e.next=47;break;case 47:return e.next=49,k.put.resolve(Object(g.d)(r,JSON.stringify({profileChecked:a})));case 49:if(O=e.sent,!0===Object(f.default)(O,"payload.is_done"))return Object(_.default)("shared_doc_onboarding",{onboarding_tour_status:"close"}),e.abrupt("return");e.next=53;break;case 53:return e.next=55,Object(k.put)(Object(x.j)(!0));case 55:case"end":return e.stop()}},l)}function j(e){return!i(e).filter(b).length}function i(e){for(var t=e.getRep().lines,r=[],n=0,a=t.atIndex(0);null!==a;a=t.next(a),n+=1)r.push({entry:a,index:n});return r}function b(e,t){var r=e.entry;return!(!r.lineNode||!r.lineNode.textContent||0===t)&&/(?:^| )heading-h[123](?: |$)/.test(r.lineNode.className)}var O=r("RIqP"),U=r.n(O),w=r("n3ZB"),D=E.a.mark(q),I=E.a.mark(B),N=E.a.mark(K),F=E.a.mark(X),L=E.a.mark($),Y=15e3,H=864e5,Z=5,M=10,J=[{type:R.STEP_TYPES.unused_feature_share,countName:"docs_acct_share_page_enter_count",triggerTime:0},{type:R.STEP_TYPES.unused_feature_comment,countName:"docs_acc_comment_count",triggerTime:0},{type:R.STEP_TYPES.unused_feature_presentation,countName:"docs_acc_play_mode_enter_count",triggerTime:0}];function q(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.takeEvery)([T.actionTypes.onboarding.UNUSED_DOC_FEATURE_CHECK],Object(c.b)(K));case 2:case"end":return e.stop()}},D)}function B(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.takeEvery)([T.actionTypes.onboarding.CANCEL_UNUSED_DOC_FEATURE_GUIDE],Object(c.b)(X));case 2:case"end":return e.stop()}},I)}function K(){var t,r,n,a,c,s,u,o,i,b,O,f,p,x,_,l,d,j;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:if((t=e.sent)<=Z)return e.abrupt("return");e.next=5;break;case 5:return e.next=7,Object(k.call)(y.c,R.GROUP_TYPE.SHARED_DOC);case 7:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,Object(k.call)(y.c,R.GROUP_TYPE.CREATE_DOC);case 12:if(!e.sent&&t<=M)return e.abrupt("return");e.next=15;break;case 15:return e.next=17,Object(k.select)(P.a);case 17:return r=e.sent,e.next=20,Object(k.select)(S.f);case 20:if(n=e.sent){e.next=27;break}return e.next=24,Object(k.take)(T.actionTypes.suite.FETCH_CURRENT_SUITE_SUCCESS);case 24:return e.next=26,Object(k.select)(S.f);case 26:n=e.sent;case 27:if(a=n.get("create_time"),Date.now()-1e3*a<Y)return e.abrupt("return");e.next=31;break;case 31:c=!0,s=0;case 33:if(s<J.length)return e.next=36,Object(k.call)(y.a,J[s].type);e.next=41;break;case 36:if((u=e.sent)&&u.triggerTime)try{J[s].triggerTime=parseInt(u.triggerTime,10)||0}catch(e){J[s].triggerTime=0,c=!1}else c=!1;case 38:s++,e.next=33;break;case 41:return c||J.sort(function(e,t){var r=e.triggerTime-t.triggerTime;return 0===r?1:r}),e.next=44,Object(k.select)(m.c);case 44:if(o=e.sent){e.next=51;break}return e.next=48,Object(k.take)(v.a.SET_EDITOR);case 48:return e.next=50,Object(k.select)(m.c);case 50:o=e.sent;case 51:return e.next=53,Object(k.select)(w.i);case 53:return i=e.sent,e.next=56,Object(k.select)(h.b);case 56:b=e.sent,O=0;case 58:if(O<J.length)return f=J[O],p=f.type,x=f.countName,_=f.triggerTime,e.next=62,Object(k.call)(y.b,R.PROFILE_GROUP.USER,R.PROFILE.user[x]);e.next=77;break;case 62:if(l=e.sent,d=Date.now(),j=n.get("owner_id"),0!==l||Object(C.n)(i,p)||!(H<d-_)){e.next=74;break}if(p!==R.STEP_TYPES.unused_feature_comment||j&&r.get("id")!==j&&o&&""!==o.getRep().lines.atIndex(0).text&&b){e.next=68;break}return e.abrupt("continue",74);case 68:return e.next=70,k.put.resolve(Object(g.d)(p,JSON.stringify({triggerTime:d})));case 70:if(e.sent.payload.is_done){e.next=74;break}return Object(C.b)(p),e.abrupt("break",77);case 74:O++,e.next=58;break;case 77:case"end":return e.stop()}},N)}function X(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.q.apply(void 0,U()(J.map(function(e){return e.type})));case 1:case"end":return e.stop()}},F)}function $(){var t,r,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.call)(y.b,R.PROFILE_GROUP.USER,R.PROFILE.user.docs_acc_open_share_count);case 2:return t=e.sent,e.next=5,Object(k.call)(y.b,R.PROFILE_GROUP.USER,R.PROFILE.user.docs_acc_create_doc_count);case 5:if(r=e.sent,-1===t||-1===r)return e.abrupt("return",-1);e.next=8;break;case 8:return n=t+r,e.abrupt("return",n);case 10:case"end":return e.stop()}},L)}var z=E.a.mark(Q);function Q(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.all)([Object(k.fork)(a.a),Object(k.fork)(u),Object(k.fork)(q),Object(k.fork)(B)]);case 2:case"end":return e.stop()}},z)}var V=Q;function W(){return{id:"onboarding-doc",sagas:[V]}}r.d(t,"getOnboardingDocModule",function(){return W})}}]);
//# sourceMappingURL=onboarding-doc_modules.1ade3f7a2b9e3d275903.js.map