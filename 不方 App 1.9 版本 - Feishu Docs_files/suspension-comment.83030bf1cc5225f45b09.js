(this.webpackJsonp=this.webpackJsonp||[]).push([["suspension-comment"],{"+69G":function(e,t,n){"use strict";n.r(t);var o=n("m/+l"),i=n("xIGa"),s=n("G8Hj"),a=n("n3ZB"),r=n("SGN9"),l=n("NltJ"),u=function(e){var t=Object(a.j)(e),n=Object(a.i)(e);if(Object(r.n)(n,s.STEP_TYPES.suspension_comment_intro))return!1;var o=s.PROFILE_GROUP.USER,i=s.PROFILE.user.docs_acc_comment_count;return 0===Object(r.k)(t,o,i)},h=function(e){return{isUnusedDocComment:u(e),commentList:Object(l.p)(e)}},c=Object(o.connect)(h)(i.a);t.default=c},BjAo:function(e,t,n){},oGlR:function(e,t,n){"use strict";var o=n("pVnL"),i=n.n(o),s=n("QILm"),a=n.n(s),r=n("q1tI"),l=n.n(r);t.a=function(e){e.styles;var t=a()(e,["styles"]);return l.a.createElement("svg",i()({width:"24",height:"24",viewBox:"0 0 24 24"},t),l.a.createElement("path",{d:"M19.2 4c.44 0 .8.36.8.8v12.41a.8.8 0 01-.8.8h-4.84l-1.8 1.76a.8.8 0 01-1.12 0l-1.8-1.76H4.8a.8.8 0 01-.8-.8V4.8c0-.44.36-.8.8-.8h14.4zm-.7 1.5h-13v11.01h4.75l.44.43L12 18.22l1.75-1.7h4.75V5.5zM16.6 10c.22 0 .4.18.4.4v.7a.4.4 0 01-.4.4H7.4a.4.4 0 01-.4-.4v-.7c0-.22.18-.4.4-.4h9.2z",fillRule:"nonzero"}))}},xIGa:function(e,T,P){"use strict";(function(u){var e=P("lwsE"),o=P.n(e),t=P("W8MJ"),i=P.n(t),n=P("a1gu"),s=P.n(n),a=P("Nsbk"),r=P.n(a),l=P("7W2i"),h=P.n(l),c=P("cDf5"),d=P.n(c),p=P("UXvI"),m=P("q1tI"),v=P.n(m),f=P("D28M"),b=P("oGlR"),g=P("TSYQ"),B=P.n(g),C=P("4PSP"),y=P("2ACu"),E=P("UlbS"),M=P("SGN9"),O=P("G8Hj"),k=P("VI6H"),j=P("zhgJ"),S=(P("BjAo"),function(e,t,n,o){var i,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;0<=r;r--)(i=e[r])&&(a=(s<3?i(a):3<s?i(t,n,a):i(t,n))||a);return 3<s&&a&&Object.defineProperty(t,n,a),a}),L=100,Y=function(e){function n(){var t;return o()(this,n),(t=s()(this,r()(n).apply(this,arguments))).state={visible:!1,mouseY:0,onboarding:!1,onboardingMouseY:0,isHoverBtn:!1},t.getToolTipContainer=function(){var e=document.createElement("div");return e.style.position="absolute",e.style.left=0,e.style.top=0,t.etherpadWrapperContainer.appendChild(e),e},t}return h()(n,e),i()(n,[{key:"componentDidMount",value:function(){this.initEtherpadContainer(),this.handleEditorEvents("on");var e=this.props.isUnusedDocComment;this.handleOnboarding(e)}},{key:"componentWillUnmount",value:function(){this.handleContainerEvent("remove"),this.handleEditorEvents("off"),Object(M.q)(O.STEP_TYPES.suspension_comment_intro)}},{key:"initEtherpadContainer",value:function(){var e;this.dom&&(this.etherpadContainer=Object(f.o)(this.dom,"etherpad-container"),this.etherpadWrapperContainer=Object(f.o)(this.dom,"etherpad-container-wrapper"),this.scrollContainer=this.props.editor.getScrollContainer(),e=document.querySelector(".navigation-bar-wrapper"),this.navigationBarHeight=e?e.offsetHeight:0,this.etherpadContainer&&this.scrollContainer&&this.etherpadWrapperContainer&&(Object(f.a)(this.etherpadContainer,"suspension-comment"),this.mouseMoveThrottled=Object(p.default)(this.handleMouseMove,50),this.handleContainerEvent("add")))}},{key:"handleContainerEvent",value:function(e){this.etherpadWrapperContainer&&this.etherpadContainer&&this.etherpadWrapperContainer["".concat(e,"EventListener")]("mousemove",this.mouseMoveThrottled)}},{key:"handleEditorEvents",value:function(e){var t=this.props.editor;t[e]("showBtn",this.showBtn),t[e]("hideBtn",this.hideBtn),t[e]("changeBeforeLine",this.changeBeforeLine)}},{key:"componentDidUpdate",value:function(e){var t=e.editor;this.props.editor!==t&&(this.handleEditorEvents("off"),this.handleEditorEvents("on"))}},{key:"shouldComponentUpdate",value:function(e,t){var n=t.visible,o=t.mouseY,i=t.onboarding,s=t.onboardingMouseY,a=t.isHoverBtn,r=e.commentList,l=e.isUnusedDocComment,u=e.editor,h=this.props,c=h.commentList,d=h.isUnusedDocComment,p=h.editor;(0<r.length&&0===c.length||0===r.length&&0<c.length)&&setTimeout(function(){Object(M.r)()},500),l&&!d&&this.handleOnboarding(l);var m=this.state,v=m.visible,f=m.mouseY,b=m.onboarding,g=m.onboardingMouseY,B=m.isHoverBtn;return n!==v||o!==f||i!==b||s!==g||a!==B||p!==u}},{key:"handleOnboarding",value:function(e){var t,n=this.props.editor;Object(j.g)()&&!Object(k.f)()&&e&&(n.plugins.suspensionComment.getIsLineShouldHideButton(1)||(t=n.plugins.suspensionComment.util.getLineEntryTopBottom(1).lineTop,this.setState({onboarding:!0,onboardingMouseY:t},function(){Object(M.b)(O.STEP_TYPES.suspension_comment_intro)})))}},{key:"changeBeforeLine",value:function(){var e;this.clientY&&(e=this.getScrollTop()+this.clientY,this.props.editor.plugins.suspensionComment.onMouseAcross(e))}},{key:"hideBtn",value:function(){this.handleButtonVisible(!1)}},{key:"showBtn",value:function(e){var t=e.lineNum,n=e.mouseY;this.lineNum=t,this.handleButtonVisible(!0,n)}},{key:"handleClickButton",value:function(e){var t=this.props.editor,n=this.state,o=n.visible,i=n.mouseY;o&&(Object(y.default)("toggle_attribute",{action:"hover_comment"}),t.plugins.suspensionComment.onClick(e,this.lineNum,i)),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.nativeEvent.stopImmediatePropagation()}},{key:"handleClickOnboardingButton",value:function(e){var t=this.props.editor,n=this.state.onboardingMouseY;t.plugins.suspensionComment.onClick(e,1,n),this.setState({onboarding:!1}),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Object(M.q)(O.STEP_TYPES.suspension_comment_intro),e.nativeEvent.stopImmediatePropagation()}},{key:"handleButtonMouseEnter",value:function(e){this.handleMouseButton(e),this.setState({isHoverBtn:!0})}},{key:"handleButtonMouseLeave",value:function(e){this.handleMouseButton(e),this.setState({isHoverBtn:!1})}},{key:"handleMouseButton",value:function(e){this.props.editor.plugins.suspensionComment.handleMouseEvent(e)}},{key:"handleButtonVisible",value:function(e,t){this.setState({visible:e,mouseY:t||this.state.mouseY})}},{key:"handleMouseMove",value:function(e){var t=this.props,n=t.editor,o=t.enterTransMode,i=t.isUseScrollContainer,s=this.getMouseCoords(e),a=s.mouseX,r=s.mouseY,l=this.etherpadContainer,u=0,h=0,c=l.getBoundingClientRect().left,h=i?(u=c+l.offsetWidth-L,c+l.offsetWidth+L):(u=l.offsetLeft+l.offsetWidth-L,l.offsetLeft+l.offsetWidth+L);if(o&&(u=i?c:l.offsetLeft),u<a&&a<h)return n.plugins.suspensionComment.onMouseAcross(r);this.handleLeave()}},{key:"handleLeave",value:function(){this.props.editor.plugins.suspensionComment.resetLineNum(),this.state.visible&&this.handleButtonVisible(!1)}},{key:"setRef",value:function(e){this.dom=e}},{key:"getScrollTop",value:function(){return this.scrollContainer.scrollTop-this.getAppMainContainerTop()}},{key:"getAppMainContainerTop",value:function(){var e=this.props.isUseScrollContainer,t=document.querySelector(".app-main-container"),n=this.props.editor.getScrollContainer();return e&&n?n.getBoundingClientRect().top:t?t.offsetTop:this.navigationBarHeight}},{key:"getMouseCoords",value:function(e){var t=e.clientX,n=e.clientY+this.getScrollTop();return this.clientY=e.clientY,{mouseX:t,mouseY:n}}},{key:"render",value:function(){var e=this.state,t=e.mouseY,n=e.visible,o=e.onboarding,i=e.onboardingMouseY,s=e.isHoverBtn,a={top:t},r={top:i},l=B()({"suspension-comment-area":!0,visible:n});return v.a.createElement("div",{className:l,ref:this.setRef},v.a.createElement(E.Tooltip,{visible:s&&n,title:u("common.comment"),placement:"bottom"},v.a.createElement("button",{style:a,className:"comment-btn",onClick:this.handleClickButton,onMouseEnter:this.handleButtonMouseEnter,onMouseLeave:this.handleButtonMouseLeave},v.a.createElement(b.a,null))),o&&v.a.createElement("button",{style:r,className:"comment-btn suspension-comment-intro","data-selector":"suspension_comment_intro",onClick:this.handleClickOnboardingButton,onMouseEnter:this.handleButtonMouseEnter,onMouseLeave:this.handleButtonMouseLeave},v.a.createElement(b.a,null)))}}]),n}(m.Component);S([Object(C.Bind)()],Y.prototype,"changeBeforeLine",null),S([Object(C.Bind)()],Y.prototype,"hideBtn",null),S([Object(C.Bind)()],Y.prototype,"showBtn",null),S([Object(C.Bind)()],Y.prototype,"handleClickButton",null),S([Object(C.Bind)()],Y.prototype,"handleClickOnboardingButton",null),S([Object(C.Bind)()],Y.prototype,"handleButtonMouseEnter",null),S([Object(C.Bind)()],Y.prototype,"handleButtonMouseLeave",null),S([Object(C.Bind)()],Y.prototype,"handleMouseMove",null),S([Object(C.Bind)()],Y.prototype,"handleLeave",null),S([Object(C.Bind)()],Y.prototype,"setRef",null),T.a=Y}).call(this,P("2vAP"))}}]);
//# sourceMappingURL=suspension-comment.d8c3e7ade3e4ccf3f267.js.map