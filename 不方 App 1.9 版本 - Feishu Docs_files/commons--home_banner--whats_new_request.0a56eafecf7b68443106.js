(this.webpackJsonp=this.webpackJsonp||[]).push([["commons--home_banner--whats_new_request"],{"/h1b":function(e,t,r){var n;n=function(r){return n=[function(e,t,r){e.exports=r(2)},function(e,t){e.exports=r},function(e,t,r){var n=function(o){"use strict";var e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function a(e,t,r,n){var o,a,s,c,i=t&&t.prototype instanceof l?t:l,u=Object.create(i.prototype),d=new O(n||[]);return u._invoke=(o=e,a=r,s=d,c="suspendedStart",function(e,t){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===e)throw t;return S()}for(s.method=e,s.arg=t;;){var r=s.delegate;if(r){var n=g(r,s);if(n){if(n===f)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===c)throw c="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c="executing";var i=p(o,a,s);if("normal"===i.type){if(c=s.done?"completed":"suspendedYield",i.arg===f)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(c="completed",s.method="throw",s.arg=i.arg)}}),u}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}o.wrap=a;var f={};function l(){}function s(){}function c(){}var d={};d[i]=function(){return this};var y=Object.getPrototypeOf,h=y&&y(y(P([])));h&&h!==e&&u.call(h,i)&&(d=h);var v=c.prototype=l.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function b(c){var t;this._invoke=function(r,n){function e(){return new Promise(function(e,t){!function t(e,r,n,i){var o=p(c[e],c,r);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&u.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,n,i)},function(e){t("throw",e,n,i)}):Promise.resolve(s).then(function(e){a.value=e,n(a)},function(e){return t("throw",e,n,i)})}i(o.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function g(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(u.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return(s.prototype=v.constructor=c).constructor=s,c[n]=s.displayName="GeneratorFunction",o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,n in e||(e[n]="GeneratorFunction")),e.prototype=Object.create(v),e},o.awrap=function(e){return{__await:e}},m(b.prototype),b.prototype[r]=function(){return this},o.AsyncIterator=b,o.async=function(e,t,r,n){var i=new b(a(e,t,r,n));return o.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},m(v),v[n]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},o.keys=function(r){var e,n=[];for(e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=P,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&u.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n,i=r.completion;return"throw"===i.type&&(n=i.arg,k(r)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},o}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.r(t);var s,n,c={origin:"",locale:"zh-CN",isOversea:!1};(n=s=s||{})[n.SUCCESS=0]="SUCCESS",n[n.UNEXPIRED_CODE=4206]="UNEXPIRED_CODE";var u=[s.UNEXPIRED_CODE],i=function(t){try{return encodeURIComponent(t)}catch(e){return t}};function d(o){return new Promise(function(e,t){var r,n=document.createElement("script"),i=function(){r&&(clearTimeout(r),r=void 0)};n.onload=function(){i(),e()},n.onerror=function(e){i(),t(e)},n.src="https://".concat(o,"/security/device/captcha/device?disableSSL=false&appId=suite_web_login&_timestamp_=").concat((new Date).getTime()),document.body.appendChild(n),setTimeout(function(){r=void 0,i(),t(new Error("inject captcha script timeout."))},15e3)})}var p=function(){return"undefined"==typeof window?"":window.location.origin.includes("http://")?c.isOversea?"internal-api.larksuite.com":"internal-api.feishu.cn":function(){try{var e=window.location.host.split(".");return e.shift(),"internal-api.".concat(e.join(".")).replace(/-(staging|pre)/,"")}catch(e){return""}}()};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(0),y=r.n(l);function h(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function v(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function i(e){h(n,t,r,i,o,"next",e)}function o(e){h(n,t,r,i,o,"throw",e)}i(void 0)})}}var m=r(1),b=r.n(m);function g(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach(function(e){o(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var k=["/verify_token/apply_code","/verify_token/apply_code"],O={headers:{"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache"},responseType:"json",timeout:3e4,withCredentials:!0},P=function(){var e,t,r,n,i,o=b.a.create(O);return o.setTokens=(i={verifyToken:"",xPassportToken:""},(e=o).interceptors.request.use((n=v(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.baseURL="".concat(c.origin||"","/suite/passport"),c.locale&&(t.headers["X-locale"]=c.locale),e.abrupt("return",t);case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})),e.interceptors.request.use((r=v(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.verifyToken&&(t.headers["X-Verify-Token"]=i.verifyToken),i.xPassportToken&&(t.headers["X-Passport-Token"]=i.xPassportToken),e.abrupt("return",t);case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})),e.interceptors.request.use((t=v(y.a.mark(function e(t){var r,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k.some(function(e){return t.url.includes(e)})){e.next=3;break}return e.abrupt("return",t);case 3:return r=c.captchaDomain||p(),e.next=6,d(r);case 6:return e.next=8,new Promise(function(t,r){var e,n;"undefined"!=typeof window?((e=window.Device&&window.Device.getDevice)||r(new Error("window.Device.getDevice not defined.")),n=setTimeout(function(){clearTimeout(n),r(new Error("window.Device.getDevice timeout."))},15e3),e(function(e){return e&&"false"!==e?(clearTimeout(n),void t(e)):r("captcha value invalid:".concat(e,"."))})):r(new Error("ssr haven't window."))});case 8:return(n=e.sent)&&(t.headers["X-Captcha-Id"]=n),e.abrupt("return",t);case 11:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),e.interceptors.response.use(function(e){var t=e.headers["x-verify-token"],r=e.headers["x-passport-token"];return t&&(i.verifyToken=t),r&&(i.xPassportToken=r),e&&e.data&&e.data.code!==s.SUCCESS&&!u.includes(e.data.code)?Promise.reject(e.data):e&&e.data&&(e.data.code===s.SUCCESS||u.includes(e.data.code))?i.verifyToken?w({},e.data.data||{},{verify_token:i.verifyToken}):e.data.data||{}:e},function(e){return e.response&&e.response.data&&"object"===f(e.response.data)?Promise.reject(w({status:e.response.status},e.response.data)):e.response?Promise.reject(e.response):Promise.reject(e)}),function(e){Object.assign(i,e)}),o};function S(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach(function(e){o(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var j=function e(t){var r,n,i,o=this;a(this,e),this.applyOldCP=v(y.a.mark(function e(){var t,r,n=arguments;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<n.length&&void 0!==n[0]?n[0]:{contactId:""},e.next=3,o.request.post("/v2/cp/modify/apply_old",{contact_id:t.contactId});case 3:return(r=e.sent)&&r.cp_token&&(o.processToken=r.cp_token),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)})),this.verifyOldCP=(i=v(y.a.mark(function e(t){var r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.request.post("/v2/cp/modify/verify_old",E({},t,{cp_token:o.processToken}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),this.applyNewCP=(n=v(y.a.mark(function e(t){var r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.request.post("/v2/cp/modify/apply_new",E({},t,{cp_token:o.processToken}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),this.verifyNewCP=(r=v(y.a.mark(function e(t){var r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.request.post("/v2/cp/modify/verify_new",E({},t,{cp_token:o.processToken}));case 2:return r=e.sent,o.processToken="",e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),this.request=t||P()};function x(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach(function(e){o(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var _=function e(t){var r,n,i=this;a(this,e),this.verifyOldPwd=(n=v(y.a.mark(function e(t){var r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.request.post("/v2/login/forget/apply/modify_pwd_token/",{current_pwd:t.currentPwd});case 2:return(r=e.sent)&&r.modify_pwd_token&&(i.processToken=r.modify_pwd_token),e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),this.setNewPwd=(r=v(y.a.mark(function e(t){var r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.request.post("/v2/login/set/pwd/",T({},t,{modify_pwd_token:i.processToken}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),this.request=t||P()},L=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.redirect_uri,n=t.origin;"undefined"!=typeof window&&(r=r||i(window.location.href),e="".concat(n||"","/suite/passport/logout/web?redirect_uri=").concat(r),window.location.href=e)},I=function e(t){a(this,e),N.call(this),Object.keys(t).map(function(e){c[e]=t[e]}),this.request=P()},N=function(){var n=this;this.request=null,this.getRequest=function(){return n.request},this.config=function(t){Object.keys(t).map(function(e){c[e]=t[e]})},this.getUserInfo=function(){return n.request.get("/account_manage/info")},this.getTenantsList=function(){return n.request.get("/v3/users",{params:{app_id:c.appId}})},this.switchTenant=function(e){var t=e.userId,r=e.path;return n.request.post("/v3/switch",{user_id:t,app_id:c.appId,path:r})},this.qrInit=function(e,t){return n.request.post("/v3/qrlogin/init",{app_id:c.appId,query_scope:e||"local"},{headers:{"X-Passport-Token":t||""}})},this.qrPolling=function(){return n.request.post("/v3/qrlogin/polling")},this.enterApp=function(e,t){return n.request.post("/v3/app",{user_id:e,user_env:t})},this.applyCode=function(e){return n.request.post("/verify_token/apply_code",{contact:e})},this.verifyCode=function(e){return n.request.post("/verify_token/verify_code",{code:e})},this.getUserList=function(e){return n.request.get("/verify_token/user_list",{headers:{"X-Verify-Token":e||""}})},this.loginApp=function(e,t,r,n){"undefined"!=typeof window&&window.location&&(window.location.href="".concat(c.origin||"","/suite/passport/page/login/?redirect_uri=").concat(e,"&app_id=").concat(t,"&verify_token=").concat(r,"&user_id=").concat(n))},this.modifyCpFlow=new j(this.request),this.modifyPasswordFlow=new _(this.request)};r.d(t,"logout",function(){return L}),r.d(t,"LarkPassport",function(){return I}),r.d(t,"createRequest",function(){return P})}],o={},i.m=n,i.c=o,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3);function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,o},e.exports=n(r("vYB2"))},"1+5i":function(e,t,r){var n=r("w/wX"),i=r("sEf8"),o=r("mdPL"),a=o&&o.isSet,s=a?i(a):n;e.exports=s},"1rRh":function(e,t,r){"use strict";var n=r("pvx5"),i={PayloadType:{values:{TYPE_UNKNOWN:0,PB2:1,JSON:2}}};r("qk10").a.define("improto").addJSON(i);i.PayloadType.values;var o={fields:{type:{rule:"required",type:"string",id:1},id:{type:"int64",id:3}}},a=(Object(n.a)("improto","PipeEntity",o),Object(n.a)("improto","PipeEntity",void 0,!0),{fields:{start:{rule:"required",type:"string",id:1},end:{rule:"required",type:"string",id:2}}});Object(n.a)("improto","VersionRange",a),Object(n.a)("improto","VersionRange",void 0,!0);r.d(t,"a",function(){return c});var s={fields:{sid:{type:"string",id:1},payloadType:{rule:"required",type:"PayloadType",id:2,options:{default:"PB2"}},cmd:{rule:"required",type:"int32",id:3},status:{type:"uint32",id:4,options:{default:200}},payload:{type:"bytes",id:5},cid:{type:"string",id:6},pipeEntity:{type:"PipeEntity",id:7},versionPayloads:{rule:"repeated",type:"VersionPayload",id:8},pipeEntities:{rule:"repeated",type:"PipeEntity",id:9},waitRetryInterval:{type:"uint32",id:10},command:{type:"int32",id:11}},nested:{VersionPayload:{fields:{versionRange:{rule:"required",type:"VersionRange",id:1},payload:{rule:"required",type:"bytes",id:2}}}}},c=Object(n.a)("improto","Packet",s);Object(n.a)("improto","Packet",void 0,!0)},"4dRn":function(e,t,r){"use strict";var n=r("o0o1"),y=r.n(n),i=r("yXPU"),o=r.n(i),a=r("lwsE"),s=r.n(a),c=r("W8MJ"),u=r.n(c),d=r("pvx5"),p={ErrorType:{values:{UNKNOWN_TYPE:0,STOPPED_FEATURE:1,SESSION_ERROR:2,PERMISSION_ERROR:3,PARAM_ERROR:4,CONTENT_ERROR:5,NOT_SUFFICIENT_FUNDS:6}}};r("qk10").a.define("errors").addJSON(p);p.ErrorType.values;var f,l,h,v,m,b,g,w,k,O={fields:{message:{type:"string",id:1},code:{type:"int32",id:2},type:{type:"ErrorType",id:3},userErrMessage:{type:"string",id:4},userErrTitle:{type:"string",id:5},requestId:{type:"string",id:6},extra:{type:"bytes",id:7}}},P=Object(d.a)("errors","LarkError",O),S=(Object(d.a)("errors","LarkError",void 0,!0),r("1rRh")),E=r("a1gu"),j=r.n(E),x=r("Nsbk"),T=r.n(x),_=r("7W2i"),L=r.n(_),I=r("oShl"),N=function(e){function i(e,t,r){var n;return s()(this,i),(n=j()(this,T()(i).call(this,t))).code=e,n.displayMessage=r||t,n.message=t,n}return L()(i,e),i}(r.n(I)()(Error)),C=r("Nbl6"),R=r("lSNA"),q=r.n(R);(h=l=l||{})[h.Offline=1]="Offline",h[h.Online2G=2]="Online2G",h[h.Online3G=3]="Online3G",h[h.Online4G=4]="Online4G",h[h.OnlineWifi=5]="OnlineWifi",h[h.OnlineWired=6]="OnlineWired",(m=v=v||{})[m.Opening=1]="Opening",m[m.Success=2]="Success",m[m.Closed=3]="Closed",(g=b=b||{})[g.Lark=1]="Lark",g[g.InitLastSid=9e3]="InitLastSid",(k=w=w||{})[k.Default=1]="Default",k[k.InitLastSid=3]="InitLastSid";var D="2.7.0",U=(f={},q()(f,77,"3.20.0"),q()(f,7600,"3.15.0"),q()(f,7601,"3.15.0"),q()(f,5080,"3.15.0"),q()(f,5018,"3.15.0"),f),M=r("8ZJ+"),F=r("bqta"),B=r("4Voa");r.d(t,"a",function(){return $});var W,V,Y=B.a.getLogger("Request");function J(e){return[400,403,900].includes(e)}(V=W=W||{})[V.PB=1]="PB",V[V.JSON=2]="JSON";var X=function(){function e(){var t=this;s()(this,e),this.unwrap=function(){if(t.isError)throw t.error;return t.data},this.expect=function(e){if(t.isError)throw e(t.error),t.error;return t.data},this.result=function(){var e=t.isError?t.error:void 0;return{data:t.data,err:e}}}return u()(e,[{key:"isClientErr",value:function(){return!!this.code&&(400<=this.code&&this.code<500)}},{key:"isUnauthorized",value:function(){return 401===this.code}}]),e}();function z(e,t){return H.apply(this,arguments)}function H(){return(H=o()(y.a.mark(function e(t,r){var n,i,o,a,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok)return e.abrupt("return");e.next=2;break;case 2:if(J(t.status)){e.next=7;break}return e.next=5,t.text();case 5:return n=e.sent,e.abrupt("return",new N(t.code,n));case 7:if(r===W.PB)return e.next=10,t.arrayBuffer();e.next=16;break;case 10:return i=e.sent,o=new Uint8Array(i),a=P.decode(o),e.abrupt("return",new N(a.code,a.message,a.userErrMessage));case 16:if(r===W.JSON)return e.next=19,t.json();e.next=26;break;case 19:if(e.t0=e.sent,e.t0){e.next=22;break}e.t0={};case 22:return s=e.t0,e.abrupt("return",new N(s.code,s.message));case 26:return e.abrupt("return",t.error);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Z(e){e.cid||(e.cid=Object(F.a)());var t={cmd:e.cmd,payloadType:1,payload:e.payload,cid:e.cid};return S.a.encode(t)}function K(e){return Q.apply(this,arguments)}function Q(){return(Q=o()(y.a.mark(function e(t){var r,n,i,o,a,s,c,u,d,p,f,l;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=new X).isError=!0,e.prev=2,n=t.commandVersion||D,U[t.cmd]&&(n=U[t.cmd]),i=Z(t),o=t.options||Object(M.b)(),a=o.appId,s=o.appVersion,t.url||Object(M.c)().api){e.next=11;break}throw Y.error("Must provide url or init default url."),new Error("EmptyUrl");case 11:return c=Date.now(),e.next=14,Object(C.a)({url:t.url||"https://".concat(Object(M.c)().api,"/im/gateway/"),method:"POST",data:i,headers:Object.assign({"content-type":"application/x-protobuf","x-Source":"web","x-request-id":t.cid||"","x-command":t.cmd.toString(),"x-web-version":s,"x-command-version":n,"X-AppID":(a||0).toString(),locale:t.locale||Object(M.d)()},t.headers||{})});case 14:if(u=e.sent,d=Date.now()-c,Y.info("send packet to gateway end: cmd=".concat(t.cmd," requestId=").concat(t.cid," time=").concat(d)),r.code=u.status,u.ok)return e.next=21,u.arrayBuffer();e.next=27;break;case 21:p=e.sent,f=S.a.decode(new Uint8Array(p)),r.data=f.payload,r.isError=!1,e.next=32;break;case 27:return e.next=29,z(u,W.PB);case 29:l=e.sent,r.error=l,Y.error("send packet to gateway failed: cmd=".concat(t.cmd),"response=",r);case 32:e.next=39;break;case 34:e.prev=34,e.t0=e.catch(2),r.error||(r.error=new N(0,e.t0&&e.t0.message||e.t0)),r.code||(r.code=422),Y.error("send packet to gateway failed: cmd=".concat(t.cmd," error=").concat(e.t0));case 39:return e.abrupt("return",r);case 40:case"end":return e.stop()}},e,null,[[2,34]])}))).apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=o()(y.a.mark(function e(t){var r,n,i,o,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.requestCodec,n=t.responseCodec,i=r.encode(t.payload),e.next=4,K(Object.assign({},t,{payload:i}));case 4:if((o=e.sent).isError)return e.abrupt("return",o);e.next=7;break;case 7:return a=o.data&&n.decode(o.data),o.data=a,e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}},"8ZJ+":function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return d}),r.d(t,"b",function(){return v});var n=r("o0o1"),p=r.n(n),i=r("lSNA"),f=r.n(i),o=r("yXPU"),a=r.n(o),l=r("aBZb"),y=r("4Voa").a.getLogger("Net"),h=!1;function s(e,t){return c.apply(this,arguments)}function c(){return(c=a()(p.a.mark(function e(t,r){var n,i,o,a,s,c,u,d;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h)return y.warn("Sdk has inited"),e.abrupt("return");e.next=3;break;case 3:i=t.domains,o=t.locale,Object(l.e)({domains:(n={},f()(n,l.a.API,[i.api]),f()(n,l.a.LONG,[i.long||""]),n),locale:o}),s=(a=r||{}).appId,c=void 0===s?0:s,u=a.appVersion,d=void 0===u?"3.13.0":u,Object(l.e)({appId:c,appVersion:d}),y.info("Sdk inited"),h=!0;case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function u(){var e=Object(l.c)("domains")||{};if(e[l.a.API])return{api:(e[l.a.API]||[""])[0],long:(e[l.a.LONG]||[])[0]};throw"APINotProvided"}function d(){var e=Object(l.c)("locale")||l.b.ZhCn;if(e)return e;throw"LocaleNotProvided"}function v(){var e=Object(l.d)(["appId","appVersion"]);return{appId:e.appId,appVersion:e.appVersion}}},BkRI:function(e,t,r){var n=r("OBhP"),i=1,o=4;function a(e){return n(e,i|o)}e.exports=a},"Dw+G":function(e,t,r){var n=r("juv8"),i=r("mTTR");function o(e,t){return e&&n(t,i(t),e)}e.exports=o},EEGq:function(e,t,r){var n=r("juv8"),i=r("oCl/");function o(e,t){return n(e,i(e),t)}e.exports=o},FPYm:function(e,t,r){"use strict";var n,i,o=r("8ZJ+"),a=r("4dRn"),s=r("cDf5"),c=r.n(s),u=r("RIqP"),d=r.n(u),p=r("o0o1"),f=r.n(p),l=r("yXPU"),y=r.n(l),h=r("lwsE"),v=r.n(h),m=r("W8MJ"),b=r.n(m),g=r("fiWp"),w=r("1rRh"),k=r("J4zp"),O=r.n(k),P=r("2lpH"),S=r.n(P),E=r("pvx5"),j={fields:{seqid:{rule:"required",type:"uint64",id:1},logid:{rule:"required",type:"uint64",id:2},service:{rule:"required",type:"int32",id:3},method:{rule:"required",type:"int32",id:4},headers:{rule:"repeated",type:"ExtendedEntry",id:5},payloadEncoding:{type:"string",id:6},payloadType:{type:"string",id:7},payload:{type:"bytes",id:8}},nested:{ExtendedEntry:{fields:{key:{rule:"required",type:"string",id:1},value:{rule:"required",type:"string",id:2}}}}},x=Object(E.a)("frame","Frame",j),T=(Object(E.a)("frame","Frame",void 0,!0),{fields:{sid:{rule:"required",type:"string",id:1,options:{default:""}},count:{rule:"required",type:"uint32",id:2,options:{default:20}},version:{type:"uint32",id:3},frontierDowngrade:{type:"bool",id:4,options:{default:!1}},batchUniqId:{type:"string",id:5},batchIndex:{type:"int64",id:6}}}),_=Object(E.a)("improto","PullPacketsBySeqIdRequest",T),L=(Object(E.a)("improto","PullPacketsBySeqIdRequest",void 0,!0),{fields:{hasMore:{rule:"required",type:"bool",id:1,options:{default:!1}},packets:{rule:"repeated",type:"Packet",id:2},lastPacketCreateTime:{type:"int64",id:3},lastSid:{type:"string",id:4},responseTime:{type:"int64",id:5},maxBatchIndex:{type:"int64",id:6}}}),I=Object(E.a)("improto","PullPacketsBySeqIdResponse",L),N=(Object(E.a)("improto","PullPacketsBySeqIdResponse",void 0,!0),{fields:{sids:{rule:"repeated",type:"string",id:1}}}),C=Object(E.a)("improto","PullPacketsBySidsRequest",N),R=(Object(E.a)("improto","PullPacketsBySidsRequest",void 0,!0),{fields:{packets:{keyType:"string",type:"Packet",id:1}}}),q=Object(E.a)("improto","PullPacketsBySidsResponse",R),D=(Object(E.a)("improto","PullPacketsBySidsResponse",void 0,!0),"x-request-time");function U(e){var t=x.decode(e);return w.a.decode(t.payload)}function M(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=S.a.fromNumber(Date.now()),o=3===t;return x.encode(Object.assign({seqid:i,logid:i,service:e,method:t,headers:[].concat(d()(o?[]:[{key:D,value:i.multiply(1e3).toString()}]),d()(Object.entries(n).map(function(e){var t=O()(e,2);return{key:t[0],value:t[1]}})))},o?{}:{payloadType:"pb",payload:r}))}function F(e){return Object(a.a)({cmd:12001,requestCodec:C,responseCodec:q,payload:{sids:e}})}function B(e,t){return W.apply(this,arguments)}function W(){return(W=y()(f.a.mark(function e(t,r){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)({cmd:32,requestCodec:_,responseCodec:I,payload:{sid:t,count:r}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}(i=n=n||{})[i.Low=0]="Low",i[i.Middle=1]="Middle",i[i.High=2]="High";var V,Y=r("4Voa"),J=r("bqta"),X=r("4C8p"),z=r("FBen"),H=r("aBZb"),Z={sass:"5f45da0e6c7a17dcba80494ef0ab9b21",ka31:"29cd5e7f9de36d4620dee45299e6d088",kastaging:"0036e93a4fc4e5af8acafd200e538391",kami:"0036e93a4fc4e5af8acafd200e538391",kap:"0036e93a4fc4e5af8acafd200e538391",kacrc:"82e450f4f5cdcbae7647dbb82a7fdfef"},K="f8a69f1719916z",Q=1,$=2,ee="web_did",te=new Set([2102,2210,2306,2215,89343,89344,6,41,30002,30003]),re=r("2KoG"),ne=r("Nbl6"),ie=r("lhny"),oe=r("vGEt"),ae=Y.a.getLogger("domain"),se={},ce=new g.EventEmitter,ue={INIT:"INIT",CHANGE:"CHANGE"};function de(){return Object(ie.a)().then(fe)}var pe={biz_domain_config:function(e){var a={};return Object.entries(e).forEach(function(e){var t=O()(e,2),r=t[0],n=t[1],i=r.toUpperCase(),o=oe.a[i];o&&(a[o]=n)}),a},lark_domains_v3:function(e){var a={};return Object.entries(e).forEach(function(e){var t=O()(e,2),r=t[0],n=t[1],i=r.toUpperCase(),o=oe.a[i];o&&(a[o]=Object.keys(n.domains))}),a}};function fe(o){var a={};Object.entries(pe).forEach(function(e){var t=O()(e,2),r=t[0],n=t[1],i=o[r];i&&Object.assign(a,n(i))}),se=a,le()}function le(){ce.emit(ue.CHANGE,se)}function ye(e){if(V)return V;var t={},r=Object(H.c)("domains");return r&&(t=Object.assign(t,r)),e&&(t=Object.assign(t,e)),se=t,V=de(),Object(ie.b)(fe),V}function he(e){return me(e).then(function(e){return e[0]})}function ve(e){V||ye();var t=Object(H.c)("domains");if(t&&t[e])return t[e];var r=se[e];return r||ae.warn("domain::getDomains: domain not found: ".concat(e)),r||[]}function me(e){V||ye();var t=ve(e);return t.length?Promise.resolve(t):V.then(function(){return ve(e)})}var be=Object(re.a)("lark_web_core_frontier");function ge(){return we.apply(this,arguments)}function we(){return(we=y()(f.a.mark(function e(){var t,r,n,i,o,a,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.getItem(ee);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:return t=e.t0,e.next=8,he(oe.a.PASSPORT);case 8:return r=e.sent,n="https://".concat(r,"/suite/passport/frontier_ticket/"),e.next=12,Object(ne.a)({method:"GET",url:Object(z.a)(n,{local_device_id:t})},!1);case 12:return i=e.sent,e.next=15,i.json();case 15:return o=e.sent,a=o.device_id,s=o.ticket,a&&be.setItem(ee,a),e.abrupt("return",{deviceId:a,ticket:s});case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ke,Oe,Pe=r("/h1b"),Se=r("SHBd");function Ee(){return ke=ke||he(oe.a.PASSPORT).then(function(e){var t=Object(H.d)(["appId","locale","isOversea"]),r=t.appId,n=t.locale,i=t.isOversea;return new Pe.LarkPassport({appId:r,locale:n,isOversea:i})})}function je(){return Ee().then(function(e){return e.getCurUserInfo()}).then(function(e){return{userId:e.user_id,tenantId:e.tenant_id}})}function xe(e){return Ee().then(function(e){return e.logout()}).then(function(){return"function"==typeof e&&e()})}function Te(){return _e.apply(this,arguments)}function _e(){return(_e=y()(f.a.mark(function e(){var t,r,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:return t=e.sent,r=t.userId,(n=Boolean(r))||Se.b.emit(Se.a.Unauthorized),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}Se.b.on(Se.a.Unauthorized,function(){return xe(Oe)});var Le,Ie,Ne=Y.a.getLogger("Socket"),Ce=function(){function r(e){var t=this;v()(this,r),this.netStatus=Le.Online,this.autoRetry=!0,this.retryLimit=3,this.retryCount=0,this.retryTimer=null,this.protocol="wss:",this.path="/ws/v2",this.wsListeners={open:[],close:[],error:[],message:[]},this.sendMessageCache=[],this.onSocketOpen=function(){Ne.info("socket open"),t.resetRetryState(),t.sendMessageCache.forEach(function(e){t.ws.send(e)}),t.sendMessageCache=[]},this.onSocketClose=function(e){switch(Ne.info("socket close, code=".concat(e.code,", reason=").concat(e.reason)),e.code){case 4301:case 4302:case 4303:Ne.error("Session expired, code is: ".concat(e.code,", reason is ").concat(e.reason)),Se.b.emit(Se.a.Unauthorized);case 4304:t.buildSocketURL(),t.retry()||(Ne.error("Ticket invalid, code is: ".concat(e.code,", reason is ").concat(e.reason)),Se.b.emit(Se.a.Unauthorized));break;case 4305:default:t.retry()||Te().then(function(e){return e&&t.reconnect()},function(){return t.reconnect()})}},this.onSocketError=function(){Ne.warn("socket error.")},e=e||{},this.host=e.host||this.host,this.protocol=e.protocol||this.protocol,this.path=e.path||this.path,this.autoRetry="autoRetry"in e?Boolean(e.autoRetry):this.autoRetry,this.retryLimit=e.retryLimit||this.retryLimit,this.connect()}function e(){return t.apply(this,arguments)}var t,n,i;function o(){return n.apply(this,arguments)}function a(){return i.apply(this,arguments)}return b()(r,[{key:"close",value:function(){this.ws&&this.ws.readyState!==WebSocket.CLOSING&&this.ws.close()}},{key:"send",value:function(e){if(!this.ws)return Ne.info("socket not created"),void this.sendMessageCache.push(e);switch(this.ws.readyState){case WebSocket.OPEN:this.ws.send(e);break;case WebSocket.CONNECTING:this.sendMessageCache.push(e);break;case WebSocket.CLOSING:case WebSocket.CLOSED:Ne.info("socket has been closed, drop the message")}}},{key:"addEventListener",value:function(e,t){this.wsListeners[e].push(t)}},{key:"connect",value:(i=y()(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne.info("connect to socket"),this.ws){e.next=8;break}return Ne.info("first connect"),e.next=5,this.buildSocketURL();case 5:return this.createNewSocket(),this.startNetDetector(),e.abrupt("return");case 8:if((t=this.ws.readyState)===WebSocket.OPEN||t===WebSocket.CONNECTING)return Ne.info("socket already connect"),e.abrupt("return");e.next=12;break;case 12:if(t===WebSocket.CLOSED)return Ne.info("socket closed, create new socket"),this.createNewSocket(),e.abrupt("return");e.next=16;break;case 16:case"end":return e.stop()}},e,this)})),a)},{key:"onNetStatusChange",value:function(e){e!==this.netStatus&&(Ne.info("net status changed from ".concat(this.netStatus," to ").concat(e)),(this.netStatus=e)===Le.Online&&this.createNewSocket())}},{key:"startNetDetector",value:function(){var e=this;self.addEventListener("online",function(){e.onNetStatusChange(Le.Online),Ne.debug("online")}),self.addEventListener("offline",function(){e.onNetStatusChange(Le.Offline),Ne.debug("offline")})}},{key:"buildAccessKey",value:function(e){var t=Object(H.c)("channel");if(!t)throw"ChannelNotProvided";var r=Z[t]||Z.sass,n="".concat($).concat(r).concat(e).concat(K);return Object(X.a)(n)}},{key:"buildSocketURL",value:(n=y()(f.a.mark(function e(){var t,r,n,i,o,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.host,e.t0){e.next=5;break}return e.next=4,this.getWSHost();case 4:e.t0=e.sent;case 5:return this.host=e.t0,e.next=8,ge();case 8:t=e.sent,r=t.deviceId,n=t.ticket,i=this.buildAccessKey(r),o={access_key:i,aid:Q,ticket:n,device_id:r,fpid:$,accept_encoding:"gzip",request_id:Object(J.a)()},a="".concat(this.protocol,"//").concat(this.host).concat(this.path),this.wsURL=Object(z.a)(a,o);case 15:case"end":return e.stop()}},e,this)})),o)},{key:"resetRetryState",value:function(){this.retryCount=0,this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null}},{key:"retry",value:function(){var e=this;return!!this.autoRetry&&(this.netStatus===Le.Offline?(this.resetRetryState(),!1):this.retryTimer?(Ne.info("auto retry drop, there is a retry request queued"),!0):(this.retryCount+=1,this.retryCount>this.retryLimit?(Ne.info("auto retry exceed limit, stop retry, count=".concat(this.retryCount,", limit=").concat(this.retryLimit)),this.resetRetryState(),!1):(this.retryTimer=setTimeout(function(){Ne.info("auto retry start, count=".concat(e.retryCount)),e.createNewSocket(),e.retryTimer=null}),!0)))}},{key:"createNewSocket",value:(t=y()(f.a.mark(function e(){var r=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ne.info("create new socket"),this.ws&&this.ws.close(),this.ws=new WebSocket(this.wsURL),this.ws.binaryType="arraybuffer",this.ws.addEventListener("open",this.onSocketOpen),this.ws.addEventListener("close",this.onSocketClose),this.ws.addEventListener("error",this.onSocketError),this.ws.addEventListener("open",function(t){return r.wsListeners.open.forEach(function(e){return e(t)})}),this.ws.addEventListener("close",function(t){return r.wsListeners.close.forEach(function(e){return e(t)})}),this.ws.addEventListener("error",function(t){return r.wsListeners.error.forEach(function(e){return e(t)})}),this.ws.addEventListener("message",function(t){return r.wsListeners.message.forEach(function(e){return e(t)})});case 11:case"end":return e.stop()}},e,this)})),e)},{key:"reconnect",value:function(){var e=this;setTimeout(function(){return e.connect()},3e4)}},{key:"getWSHost",value:function(){return he(oe.a.LONG)}}]),r}();(Ie=Le=Le||{})[Ie.Online=0]="Online",Ie[Ie.Offline=1]="Offline";var Re="lark_web_core_frontier__last_sid",qe=localStorage.getItem(Re)||"";function De(e){var t=Ae(),r=S.a.fromString(e);t&&!S.a.fromString(t).lessThan(r)||(qe=e,localStorage.setItem(Re,e))}function Ae(){return qe=localStorage.getItem(Re)||qe}var Ue,Me,Ge=Y.a.getLogger("Pipeline"),Fe=new(function(){function e(){v()(this,e),this.retryTimes=0,this.retryLimit=10,this.syncPacketsCount=200,this.packets=[],this.syncState=0}function t(e,t){return r.apply(this,arguments)}var r,n;function i(){return n.apply(this,arguments)}return b()(e,[{key:"syncPipes",value:(n=y()(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ge.debug("Start to sync pipes"),this.retryTimes=0,this.syncState=0,t=Ae()){e.next=7;break}return this.syncState=1,e.abrupt("return");case 7:return e.next=9,this.syncPackets(t,this.syncPacketsCount);case 9:return this.syncState=1,e.abrupt("return",this.packets);case 11:case"end":return e.stop()}},e,this)})),i)},{key:"getSyncState",value:function(){return this.syncState}},{key:"syncPackets",value:(r=y()(f.a.mark(function e(t,r){var n,i,o,a,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t,r);case 2:if(n=e.sent,this.retryTimes+=1,!n.isError){e.next=10;break}if(this.retryTimes>this.retryLimit)return Ge.warn("Pipeline retried max times but failed."),e.abrupt("return");e.next=8;break;case 8:return e.next=10,this.syncPackets(t,r);case 10:if(i=n.data||{},o=i.packets,a=i.hasMore,s=i.lastSid,o&&(this.packets=[].concat(d()(this.packets),d()(o))),a&&s&&S.a.fromString(t).lessThan(S.a.fromString(s)))return this.retryTimes=0,e.next=16,this.syncPackets(s,r);e.next=16;break;case 16:case"end":return e.stop()}},e,this)})),t)}]),e}()),Be=function(){function a(e){var t=this,r=e.beat,n=e.dead,i=e.interval,o=e.timeout;v()(this,a),this.interval=3e4,this.timeout=1e4,this.living=!0,this.beat=r,this.dead=n,i&&(this.interval=i),o&&(this.timeout=o),this.interTimer=setInterval(function(){return t.detect()},this.interval)}return b()(a,[{key:"live",value:function(){this.living=!0,this.timer&&clearTimeout(this.timer)}},{key:"destroy",value:function(){this.interTimer&&clearInterval(this.interTimer),this.timer&&clearTimeout(this.timer)}},{key:"detect",value:function(){var e=this;this.beat(),this.timer=setTimeout(function(){e.living&&(e.dead(),e.living=!1),e.timer&&clearTimeout(e.timer)},this.timeout)}}]),a}(),We=Y.a.getLogger("Frontier");(Me=Ue=Ue||{})[Me.WS=1]="WS",Me[Me.PIPE=2]="PIPE";new(function(){function e(){var i=this;v()(this,e),this.emitter=new g.EventEmitter,this.listenersMap=new Map,this.cachedPushPackets=[],this.emittedSids=new Set,this.createSocket=function(){var e=Object(o.c)().long;i.socket=new Ce({host:e}),i.socket.addEventListener("open",y()(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe.syncPipes();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:e.t0.forEach(function(e){return i.handlePacket(e,Ue.PIPE)});case 7:case"end":return e.stop()}},e)})))},this.handleWSMessage=function(e){var t;i.heartBeat&&i.heartBeat.live();try{t=U(new Uint8Array(e.data))}catch(e){return void We.warn("WS message is not a pb packet")}i.send({cmd:1,sid:t.sid});var r,n=t.sid;n?(We.debug("receive ws packet, sid is ",n),0===Fe.getSyncState()?te.has(t.cmd)?i.handlePacket(t,Ue.WS):i.cachedPushPackets.push(t):(0<i.cachedPushPackets.length&&(r=d()(i.cachedPushPackets),i.cachedPushPackets=[],r.forEach(function(e){i.handlePacket(e,Ue.WS)})),i.handlePacket(t,Ue.WS))):We.warn("received empty sid")},this.handlePushSid=function(e){var t=e.sid;t?(We.debug("receive push sid, start pull, sid=",t),F([t]).then(function(e){var t=(e.data||{}).packets;Object.values(t||{}).forEach(function(e){We.debug("handle packet than pull by sid, cmd=".concat(e.cmd,", status=").concat(e.status,", sid=").concat(e.sid,", cid=").concat(e.cid)),i.handlePacket(e,Ue.WS,!1)})})):We.warn("receive push sid empty")},this.handlePacket=function(e,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=e.sid;n?(r&&De(n),6e3!==e.cmd?i.emittedSids.has(n)?We.debug("sid already emitted: ",n):(i.emitter.emit(String(e.cmd),{data:e.payload,source:t})&&We.debug("emit packet: source=".concat(t," cmd=").concat(e.cmd," sid=").concat(n)),i.emittedSids.add(n)):i.handlePushSid(e)):We.warn("received empty sid")}}return b()(e,[{key:"startup",value:function(e){var t=this;e&&e instanceof WebSocket||(this.createSocket(),this.heartBeat=new Be({beat:function(){return t.send({cmd:4})},dead:function(){t.socket.close()}})),this.socket.addEventListener("message",this.handleWSMessage)}},{key:"shutdown",value:function(){this.socket.close(),this.emitter.removeAllListeners(),this.listenersMap.clear(),this.emittedSids.clear(),this.cachedPushPackets=[],this.heartBeat&&this.heartBeat.destroy()}},{key:"send",value:function(e){if(!this.socket)throw"SocketNotProvided";var t,r,n,i,o,a;"object"===c()(e)&&"number"==typeof e.cmd?(t=e.cmd,r=e.codec,n=e.payload,i=e.sid,o=r&&n&&r.encode(n),a=M(1,1,w.a.encode({cmd:t,payloadType:1,payload:o,sid:i})),this.socket.send(a)):this.socket.send(e)}},{key:"on",value:function(e,i,t){var r=this;if("function"==typeof this.listenersMap.get(i))return We.warn("duplicated listener for cmd ".concat(e,": "),i),function(){return r.off(e,i)};var o=(t||{}).codec;if(!o)throw"CodecNotProvided";var n=function(e){var t=e.data,r=e.source,n=o.decode(t);i(n,r)};return this.emitter.on(String(e),n),this.listenersMap.set(i,n),function(){return r.off(e,i)}}},{key:"off",value:function(e,t){var r=this.listenersMap.get(t);r&&"function"==typeof r&&(this.emitter.off(String(e),r),this.listenersMap.delete(t))}},{key:"getDeviceId",value:function(){return ge().then(function(e){return e.deviceId})}}]),e}());r.d(t,"a",function(){return o.a}),r.d(t,"b",function(){return a.a})},G6z8:function(e,t,r){var n=r("fR/l"),i=r("oCl/"),o=r("mTTR");function a(e){return n(e,o,i)}e.exports=a},Gi0A:function(e,t,r){var n=r("QqLw"),i=r("ExA7"),o="[object Map]";function a(e){return i(e)&&n(e)==o}e.exports=a},OBhP:function(e,t,r){var h=r("fmRc"),v=r("gFfm"),m=r("MrPd"),b=r("WwFo"),g=r("Dw+G"),w=r("5Tg0"),k=r("Q1l4"),O=r("VOtZ"),P=r("EEGq"),S=r("qZTm"),E=r("G6z8"),j=r("QqLw"),x=r("yHx3"),T=r("wrZu"),_=r("+iFO"),L=r("Z0cm"),I=r("DSRE"),N=r("zEVN"),C=r("GoyQ"),R=r("1+5i"),q=r("7GkX"),D=r("mTTR"),U=1,M=2,F=4,B="[object Arguments]",n="[object Array]",i="[object Boolean]",o="[object Date]",a="[object Error]",W="[object Function]",V="[object GeneratorFunction]",s="[object Map]",c="[object Number]",Y="[object Object]",u="[object RegExp]",d="[object Set]",p="[object String]",f="[object Symbol]",l="[object WeakMap]",y="[object ArrayBuffer]",J="[object DataView]",X="[object Float32Array]",z="[object Float64Array]",H="[object Int8Array]",Z="[object Int16Array]",K="[object Int32Array]",Q="[object Uint8Array]",$="[object Uint8ClampedArray]",ee="[object Uint16Array]",te="[object Uint32Array]",re={};function ne(r,n,i,e,t,o){var a,s=n&U,c=n&M,u=n&F;if(i&&(a=t?i(r,e,t,o):i(r)),void 0!==a)return a;if(!C(r))return r;var d=L(r);if(d){if(a=x(r),!s)return k(r,a)}else{var p=j(r),f=p==W||p==V;if(I(r))return w(r,s);if(p==Y||p==B||f&&!t){if(a=c||f?{}:_(r),!s)return c?P(r,g(a,r)):O(r,b(a,r))}else{if(!re[p])return t?r:{};a=T(r,p,s)}}var l=(o=o||new h).get(r);if(l)return l;o.set(r,a),R(r)?r.forEach(function(e){a.add(ne(e,n,i,e,r,o))}):N(r)&&r.forEach(function(e,t){a.set(t,ne(e,n,i,t,r,o))});var y=d?void 0:(u?c?E:S:c?D:q)(r);return v(y||r,function(e,t){y&&(e=r[t=e]),m(a,t,ne(e,n,i,t,r,o))}),a}re[B]=re[n]=re[y]=re[J]=re[i]=re[o]=re[X]=re[z]=re[H]=re[Z]=re[K]=re[s]=re[c]=re[Y]=re[u]=re[d]=re[p]=re[f]=re[Q]=re[$]=re[ee]=re[te]=!0,re[a]=re[W]=re[l]=!1,e.exports=ne},VOtZ:function(e,t,r){var n=r("juv8"),i=r("MvSz");function o(e,t){return n(e,i(e),t)}e.exports=o},WwFo:function(e,t,r){var n=r("juv8"),i=r("7GkX");function o(e,t){return e&&n(t,i(t),e)}e.exports=o},XYm9:function(e,t,r){var n=r("+K+b");function i(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}e.exports=i},b2z7:function(e,t){var r=/\w*$/;function n(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}e.exports=n},mwQ1:function(e){e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},"oCl/":function(e,t,r){var n=r("CH3K"),i=r("LcsW"),o=r("MvSz"),a=r("0ycA"),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,o(e)),e=i(e);return t}:a;e.exports=s},"otv/":function(e,t,r){var Symbol=r("nmnc"),n=Symbol?Symbol.prototype:void 0,i=n?n.valueOf:void 0;function o(e){return i?Object(i.call(e)):{}}e.exports=o},pvx5:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("lSNA"),o=r.n(n),a=r("qk10");function i(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!e.includes(".")&&r&&a.a.define(e).addJSON(o()({},t,r));var i=a.a.lookupType("".concat(e,".").concat(t));return{encode:function(e){return i.encode(e).finish()},decode:function(e){return n?i.toObject(i.decode(e),{enums:Number,longs:String}):i.decode(e)},create:function(e){return i.create(e)}}}},qk10:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("2lpH"),i=r.n(n),o=r("Hk1C"),a=r.n(o),s=r("mwQ1");a.a.util.Long=i.a,a.a.configure();var c=a.a.Root.fromJSON(s)},"w/wX":function(e,t,r){var n=r("QqLw"),i=r("ExA7"),o="[object Set]";function a(e){return i(e)&&n(e)==o}e.exports=a},wrZu:function(e,t,r){var i=r("+K+b"),o=r("XYm9"),a=r("b2z7"),s=r("otv/"),c=r("yP5f"),u="[object Boolean]",d="[object Date]",p="[object Map]",f="[object Number]",l="[object RegExp]",y="[object Set]",h="[object String]",v="[object Symbol]",m="[object ArrayBuffer]",b="[object DataView]",g="[object Float32Array]",w="[object Float64Array]",k="[object Int8Array]",O="[object Int16Array]",P="[object Int32Array]",S="[object Uint8Array]",E="[object Uint8ClampedArray]",j="[object Uint16Array]",x="[object Uint32Array]";function n(e,t,r){var n=e.constructor;switch(t){case m:return i(e);case u:case d:return new n(+e);case b:return o(e,r);case g:case w:case k:case O:case P:case S:case E:case j:case x:return c(e,r);case p:return new n;case f:case h:return new n(e);case l:return a(e);case y:return new n;case v:return s(e)}}e.exports=n},yHx3:function(e,t){var n=Object.prototype.hasOwnProperty;function r(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}e.exports=r},zEVN:function(e,t,r){var n=r("Gi0A"),i=r("sEf8"),o=r("mdPL"),a=o&&o.isMap,s=a?i(a):n;e.exports=s}}]);
//# sourceMappingURL=commons--home_banner--whats_new_request.773457cd4cf87da27e51.js.map