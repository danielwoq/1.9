(this.webpackJsonp=this.webpackJsonp||[]).push([["vendors--embed_video_chat"],{"+SKG":function(o,t,e){(function(e){o.exports=t;var n="function"==typeof e&&"function"==typeof e.isBuffer,r="function"==typeof ArrayBuffer,i=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer};function t(t){return n&&e.isBuffer(t)||r&&(t instanceof ArrayBuffer||i(t))}}).call(this,e("HDXh").Buffer)},"+pgx":function(e,t,n){(function(i){var o=n("49sm");function t(t){function r(t){if(!t)return!1;if(i.Buffer&&i.Buffer.isBuffer&&i.Buffer.isBuffer(t)||i.ArrayBuffer&&t instanceof ArrayBuffer||i.Blob&&t instanceof Blob||i.File&&t instanceof File)return!0;if(o(t)){for(var e=0;e<t.length;e++)if(r(t[e]))return!0}else if(t&&"object"==typeof t)for(var n in t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return!0;return!1}return r(t)}e.exports=t}).call(this,n("yLpj"))},"0QNZ":function(t,e,n){"use strict";function o(t){void 0===t&&(t=62);var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];n[8]="-",n[13]="-",n[18]="-",n[23]="-",n[14]="4";for(var r,i=0;i<36;i+=1)n[i]||(r=0|16*Math.random(),n[i]=e[19===i?3&r|8:r]);return n.join("")+"-"+Date.now()}n.r(e);var d,r,p,i,l,s,a,c,u,h,f,m,y,g,v,b,E,S,w,I,T,C,_,R=function(){return(R=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},N=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},O=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},k=(D.prototype.getEvent=function(t){if(t.id){var e=this.events[t.id];if(e)return delete this.events[t.id],e}},D.prototype.callSuccess=function(t,e){var n=this.getEvent(t);n&&n.success(e)},D.prototype.callError=function(t,e){var n=this.getEvent(t);n&&n.error(e)},D.prototype.run=function(){return N(this,void 0,void 0,function(){var e,n,r;return O(this,function(t){switch(t.label){case 0:if(!(e=this.queue[0]))return this.running=!1,[2];if(this.running)return[2];this.running=!0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.func.apply(e,e.args)];case 2:return n=t.sent(),this.callSuccess(e,n),[3,4];case 3:return r=t.sent(),this.callError(e,r),[3,4];case 4:return this.queue.shift(),this.running=!1,this.run(),[2]}})})},D.prototype.on=function(t,e,n){this.events[t]={success:e,error:n}},D.prototype.push=function(i){return N(this,void 0,void 0,function(){var n,e,r=this;return O(this,function(t){return n=R({id:o()+performance.now()},i),this.queue.push(n),e=new Promise(function(t,e){return r.on(n.id,t,e)}),this.run(),[2,e]})})},D.getOrCreateInstance=function(t){return this.instanceMap[t]||(this.instanceMap[t]=this.instanceMap[t]||new D),this.instanceMap[t]},D.wrapOnMethod=function(i){return function(t,e,n){var r=n.value;"function"==typeof r&&(n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D.getOrCreateInstance(i).push({args:t,func:r.bind(this)})})}},D.wrapOnFunction=function(n,r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D.getOrCreateInstance(""+n).push({args:t,func:r.bind(this)})}},D.instanceMap=Object.create(null),D);function D(){this.queue=[],this.events={},this.running=!1}function P(t){return k.wrapOnFunction("core",t)}(r=d=d||{})[r.INTERNAL_FAIL=2001]="INTERNAL_FAIL",r[r.HOST_VC_BUSY=2004]="HOST_VC_BUSY",r[r.HOST_VOIP_BUSY=2005]="HOST_VOIP_BUSY",r[r.PARTICIPANTS_NUM_LIMIT_EXCEED=2006]="PARTICIPANTS_NUM_LIMIT_EXCEED",r[r.GET_MEETING_EXCEPTION=2007]="GET_MEETING_EXCEPTION",r[r.MEETING_STATUS_NOT_EXPECTED=2008]="MEETING_STATUS_NOT_EXPECTED",r[r.PARTICIPANT_STATUS_NOT_EXPECTED=2009]="PARTICIPANT_STATUS_NOT_EXPECTED",r[r.HOST_LEAVE=2014]="HOST_LEAVE",r[r.SETTINGS_NO_CHANGED=2015]="SETTINGS_NO_CHANGED",r[r.MEETING_NUMBER_INVALID_ERROR=2025]="MEETING_NUMBER_INVALID_ERROR",r[r.UPDATE_MEETING_UNKNOWN_ACTION=2028]="UPDATE_MEETING_UNKNOWN_ACTION",r[r.RTC_JOIN_ERROR=9994]="RTC_JOIN_ERROR",r[r.NO_LOCAL_STREAM=9995]="NO_LOCAL_STREAM",r[r.DATA_ERROR=9996]="DATA_ERROR",r[r.HEART_BEAT_FAIL=9997]="HEART_BEAT_FAIL",r[r.ACCESS_DENIED=9998]="ACCESS_DENIED",r[r.STATE_ERROR=9999]="STATE_ERROR",(i=p=p||{}).IDLE="Idle",i.CALLING="Calling",i.RINGING="Ringing",i.MEETING="Meeting",(s=l=l||{}).LF="LF",s.UI="UI",s.LOG="LOG",s.NET="NET",s.RTCSDK="RTCSDK",(c=a=a||{}).COMPLETED="COMPLETED",c.CONNECTED="CONNECTED",c.CLOSED="CLOSED",c.FAILED="FAILED",c.DISCONNECTED="DISCONNECTED",(h=u=u||{})[h.DISCONNECTED=0]="DISCONNECTED",h[h.CONNECTING=1]="CONNECTING",h[h.CONNECTED=2]="CONNECTED",(m=f=f||{}).STATE_CHANGE="STATE_CHANGE",m.STREAM_ADD="STREAM_ADD",m.STREAM_SUBSCRIBED="STREAM_SUBSCRIBED",m.STREAM_REMOVE="STREAM_REMOVE",m.AUDIO_ENABLE="AUDIO_ENABLE",m.VIDEO_ENABLE="VIDEO_ENABLE",m.USER_CONNECTION="USER_CONNECTION",m.USER_DISCONNECTION="USER_DISCONNECTION",m.CUSTOM_MESSAGE="CUSTOM_MESSAGE",m.CLIENT_BANNED="CLIENT_BANNED",m.SIGNAL_SERVER_FAILED="SIGNAL_SERVER_FAILED",m.TOKEN_FAILED="TOKEN_FAILED",m.STREAM_PUBLISHED="STREAM_PUBLISHED",m.ACCESS_DENIED="ACCESS_DENIED",m.ACTIVE_USER_CHANGE="ACTIVE_USER_CHANGE",(g=y=y||{}).PUBLISH="publish",g.UNPUBLISH="unpublish",g.SUBSCRIBE="subscribe",g.UNSUBSCRIBE="unsubscribe",g.UPDATE_SUBSCRIBE="updateSubscribe",g.LEAVE_ROOM="leaveRoom",g.JOIN_ROOM="joinRoom",g.RECONNECTED="reconnected",g.UPDATE_STREAM_ATTRIBUTES="updateStreamAttributes",(b=v=v||{}).SIGNAL_SERVER_FAILED="signalServerFailed",b.SIGNAL_MESSAGE_RELAY="signalingMessageRelay",b.ON_ADD_STREAM="onAddStream",b.ON_REMOVE_STREAM="onRemoveStream",b.STREAM_FAILED="streamFailed",b.ON_UPDATE_STREAM_ATTRIBUTES="onUpdateStreamAttributes",b.ON_UPDATE_USER_ATTRIBUTES="onUpdateUserAttributes",b.ON_CUSTOM_MESSAGE="onCustomMessage",b.USER_CONNECTION="userConnection",b.USER_DISCONNECTION="userDisconnection",b.ERROR="error",b.DISCONNECT="disconnect",b.RECONNECT_ATTEMPT="reconnect_attempt",b.RECONNECTING="reconnecting",b.CONNECT_TIMEOUT="connect_timeout",b.CONNECT_ERROR="connect_error",b.RECONNECT_ERROR="reconnect_error",b.RECONNECT_FAILED="reconnect_failed",b.RECONNECT="reconnect",b.RECONNECTED="reconnected",b.TOKEN_FAILED="tokenFailed",(S=E=E||{})[S.DISCONNECTED=0]="DISCONNECTED",S[S.CONNECTED=1]="CONNECTED",S[S.CONNECTING=2]="CONNECTING",(T=I=I||{}).CONNECTING="CONNECTING",T.SUCCESS="SUCCESS",T.FAILED="FAILED",T.CLOSED="CLOSED",T.IDLE="IDLE",(_=C=C||{}).V120P="120P",_.V120P_1="120P_1",_.V120P_3="120P_3",_.V180P="180P",_.V180P_1="180P_1",_.V180P_3="180P_3",_.V180P_4="180P_4",_.V240P="240P",_.V240P_1="240P_1",_.V240P_3="240P_3",_.V240P_4="240P_4",_.V360P="360P",_.V360P_1="360P_1",_.V360P_3="360P_3",_.V360P_4="360P_4",_.V360P_6="360P_6",_.V360P_7="360P_7",_.V360P_8="360P_8",_.V360P_9="360P_9",_.V360P_10="360P_10",_.V360P_11="360P_11",_.V480P="480P",_.V480P_1="480P_1",_.V480P_2="480P_2",_.V480P_3="480P_3",_.V480P_4="480P_4",_.V480P_6="480P_6",_.V480P_8="480P_8",_.V480P_9="480P_9",_.V480P_10="480P_10",_.V720P="720P",_.V720P_1="720P_1",_.V720P_2="720P_2",_.V720P_3="720P_3",_.V720P_5="720P_5",_.V720P_6="720P_6",_.V1080P="1080P",_.V1080P_1="1080P_1",_.V1080P_2="1080P_2",_.V1080P_3="1080P_3",_.V1080P_5="1080P_5",_.V1440P="1440P",_.V1440P_1="1440P_1",_.V1440P_2="1440P_2",_.V4K="4K",_.V4K_1="4K_1",_.V4K_3="4K_3";var M,L,x,B,U,F,V,j,H,W,K,q,z,X,J,Y,Q,$,Z,tt,et,nt,rt,it,ot=((w={})[C.V120P]=["160x120",15,65],w[C.V120P_1]=["160x120",15,65],w[C.V120P_3]=["120x120",15,50],w[C.V180P]=["320x180",15,140],w[C.V180P_1]=["320X180",15,140],w[C.V180P_3]=["180x180",15,100],w[C.V180P_4]=["240x180",15,120],w[C.V240P]=["320x240",15,200],w[C.V240P_1]=["320X240",15,200],w[C.V240P_3]=["240x240",15,140],w[C.V240P_4]=["424x240",15,220],w[C.V360P]=["640x360",15,400],w[C.V360P_1]=["640x360",15,400],w[C.V360P_3]=["360x360",15,260],w[C.V360P_4]=["640x360",30,600],w[C.V360P_6]=["360x360",30,400],w[C.V360P_7]=["480x360",15,320],w[C.V360P_8]=["480x360",30,490],w[C.V360P_9]=["640x360",15,800],w[C.V360P_10]=["640x360",24,800],w[C.V360P_11]=["640x360",24,1e3],w[C.V480P]=["640x480",15,500],w[C.V480P_1]=["640x480",15,500],w[C.V480P_2]=["640x480",30,1e3],w[C.V480P_3]=["480x480",15,400],w[C.V480P_4]=["640x480",30,750],w[C.V480P_6]=["480x480",30,600],w[C.V480P_8]=["848x480",15,610],w[C.V480P_9]=["848x480",30,930],w[C.V480P_10]=["640x480",10,400],w[C.V720P]=["1280x720",15,1130],w[C.V720P_1]=["1280x720",15,1130],w[C.V720P_2]=["1280x720",15,2080],w[C.V720P_3]=["1280x720",30,1710],w[C.V720P_5]=["960x720",15,910],w[C.V720P_6]=["960x720",30,1380],w[C.V1080P]=["1920x1080",15,2080],w[C.V1080P_1]=["1920x1080",15,2080],w[C.V1080P_2]=["1920x1080",30,3e3],w[C.V1080P_3]=["1920x1080",30,3150],w[C.V1080P_5]=["1920x1080",60,4780],w[C.V1440P]=["2560x1440",30,4850],w[C.V1440P_1]=["2560x1440",30,4850],w[C.V1440P_2]=["2560x1440",60,7350],w[C.V4K]=["3840x2160",30,8910],w[C.V4K_1]=["3840x2160",30,8910],w[C.V4K_3]=["3840x2160",60,13500],w);(L=M=M||{}).ACCESS_ACCEPT="ACCESS_ACCEPT",L.STREAM_ENDED="STREAM_ENDED",L.ACCESS_DENIED="ACCESS_DENIED",L.SUBSCRIED="SUBSCRIED",(B=x=x||{}).COMMITING="COMMITING",B.FINISHED="FINISHED",(F=U=U||{}).UNKNOWN="unknown",F.SAFARI="safari",F.CHROME="chrome",F.FIREFOX="firefox",F.ELECTRON="electron",(j=V=V||{}).POST="post",j.GET="get",(W=H=H||{}).STATE_CHANGE="STATE_CHANGE",W.STREAM_ADD="STREAM_ADD",W.STREAM_SUBSCRIBED="STREAM_SUBSCRIBED",W.STREAM_REMOVE="STREAM_REMOVE",W.AUDIO_ENABLE="AUDIO_ENABLE",W.VIDEO_ENABLE="VIDEO_ENABLE",W.USER_CONNECTION="USER_CONNECTION",W.USER_DISCONNECTION="USER_DISCONNECTION",W.CUSTOM_MESSAGE="CUSTOM_MESSAGE",W.CLIENT_BANNED="CLIENT_BANNED",W.SIGNAL_SERVER_FAILED="SIGNAL_SERVER_FAILED",W.TOKEN_FAILED="TOKEN_FAILED",(q=K=K||{}).PRODUCTION="PRODUCTION",q.DEVELOPMENT="DEVELOPMENT",(X=z=z||{}).NONE="none",X.CN="cn",X.VA="va",X.CUSTOM="custom",(Y=J=J||{}).RTC_LARK_MEDIA_STATISTICS="rtc_lark_media_statistics",Y.RTC_SDK_API_CALL="rtc_sdk_api_call",Y.RTC_SDK_INTERNAL_API_CALL="rtc_sdk_internal_api_call",Y.RTC_SDK_CALLBACK="rtc_sdk_callback",Y.RTC_JOIN_ROOM="rtc_join_room",Y.RTC_LEAVE_ROOM="rtc_leave_room",Y.ROOM_META="room_meta",Y.RTC_GET_CONFIG="rtc_get_config",Y.RTC_SUBSCRIBE="rtc_subscribe",Y.RTC_PUBLISH="rtc_publish",Y.RTC_CREATE_MEDIA="rtc_create_media",Y.RTC_CREATE_OFFER="rtc_create_offer",Y.RTC_RECV_ANSWER="rtc_recv_answer",Y.RTC_ICE="rtc_ice",Y.RTC_ICE_INFO="rtc_ice_info",Y.RTC_RECONNECT="rtc_reconnect",Y.RTC_RECONNECTED="rtc_reconnected",Y.FIRST_REMOTE_AUDIO_RENDER="first_remote_audio_render",Y.WEBSOCKET_EVENT="websocket_event",Y.RTC_SIGNALING="rtc_signaling",Y.RTC_PERMISSION="rtc_permission",Y.RTC_ERROR="rtc_error",Y.RTC_TRANSPORT_EXT="rtc_transport_ext",Y.RTC_TRANSPORT_STATISTICS="rtc_transport_statistics",($=Q=Q||{}).TIMEOUT="timeout",$.CONNECTING="connecting",$.CONNECT="connect",$.RECONNECTING="reconnecting",$.RECONNECT="reconnect",$.CLOSE="close",$.FAIL="fail",$.RECONNECT_ERROR="reconnect_error",$.CONNECT_ERROR="connect_error",$.DISCONNECT="disconnect",$.RECONNECT_FAILED="reconnect_failed",$.RECONNECT_ATTEMPT="reconnect_attempt",(tt=Z=Z||{}).CALL_PUBLISH="call-publish",tt.PUBLISH="publish",tt.CALL_SUBSCRIBE="call-subscribe",tt.SUBSCRIBE="subscribe",tt.CALL_UNPUBLISH="call-unpublish ",tt.UNPUBLISH="unpublish",tt.CALL_UNSUBSCRIBE="call-unsubscribe",tt.UNSUBSCRIBE="unsubscribe",tt.CALL_SIGNALING_MESSAGE="call-signalingMessage",tt.SIGNALING_MESSAGE="signalingMessage",tt.CALL_UPDATE_STREAM_ATTRIBUTES="call-updateStreamAttributes",tt.UPDATE_STREAM_ATTRIBUTES="updateStreamAttributes",tt.CALL_UPDATE_USER_ATTRIBUTES="call-updateUserAttributes",tt.UPDATE_USER_ATTRIBUTES="updateUserAttributes",tt.CALL_LEAVEROOM="call-leaveRoom",tt.CALL_CONTROL_MESSAGE="call-controlMessage",tt.CONTROL_MESSAGE="controlMessage",tt.CALL_JOIN_ROOM="call-joinRoom",tt.JOIN_ROOM="joinRoom",tt.CALL_RECONNECTED="call-reconnected",tt.RECONNECTED="reconnected",tt.ON_STREAMFAILED="on-streamFailed",tt.ON_ONSOCKETADDSTREAM="on-onSocketAddStream",tt.ON_ONSOCKETREMOVESTREAM="on-onSocketRemoveStream",tt.ON_ONUPDATESTREAMATTRIBUTES="on-onUpdateStreamAttributes",tt.ON_ONSOCKETSIGNALINGMESSAGERELAY="on-onSocketSignalingMessageRelay",tt.ON_ONUPDATEUSERATTRIBUTES="on-onUpdateUserAttributes",tt.ON_USERCONNECTIONRESPONSE="on-userConnectionResponse",tt.ON_USERDISCONNECTIONRESPONSE="on-userDisConnectionResponse",tt.ON_STATUSCHANGE="on-statusChange",(nt=et=et||{}).JOIN_ROOM="joinRoom",nt.PUBLISH="publish",nt.UNPUBLISH="unpublish",nt.SUBSCRIBE_STREAM="subscribeStream",nt.UNSUBSCRIBE_STREAM="unsubscribeStream",nt.LEAVE_ROOM="leaveRoom",nt.ENABLE_AUDIO="enableAudio",nt.DISABLE_AUDIO="disableAudio",(it=rt=rt||{}).ON_WARNING="onWarning",it.ON_USER_JOINED="onUserJoined",it.ON_USER_OFFLINE="onUserOffline",it.ON_CONNECTION_INTERRUPTED="onConnectionInterrupted",it.RTCENGINE_CONNECTION_DID_INTERRUPTED="rtcEngineConnectionDidInterrupted",it.ON_STREAM_PUBLISH_SUCCEED="onStreamPublishSucceed",it.ON_STREAM_ADD="onStreamAdd",it.ON_STREAM_REMOVE="onStreamRemove",it.ON_STREAM_SUBSCRIBED="onStreamSubscribed",it.ON_ERROR="onError",it.ON_USER_ENABLE_AUDIO="onUserEnableAudio";n("Pu7W");var st,at,ct=n("fEvf");function ut(){}function dt(t){var r=t.method,i=t.url,o=t.body,s=t.authorization,a=t.contentType;return new Promise(function(t,e){var n=new XMLHttpRequest;n.timeout=4e3,n.ontimeout=function(t){Tt.error("req.ontimeout",t),e(t)},n.onerror=function(t){Tt.error("req.onerror",t),e(t)},n.onreadystatechange=function(){4===n.readyState&&(200===n.status||304===n.status?t("text"===a?n.responseText:JSON.parse(n.responseText)):(Tt.error("req.onreadystatechange",n),e(n.responseText)))},n.open(r,i,!0),s&&n.setRequestHeader("Authorization",s.replace(/[\r\n]/g,"")),n.send(JSON.stringify(o))})}function pt(t){return new URLSearchParams(window.location.search).get(t)}(at=st=st||{}).POST="post",at.GET="get",at.DELETE="delete",at.PUT="put";var lt=function(){return(lt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ht=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},ft=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},mt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},yt=0;function gt(){var t=this;this.dataBuffer=[],this.isSenderOpen=!1,this.reportInterval=5e3,this.reportLimit=1500,this.commonHeaders={tab_device_id:"",rtc_app_id:"",report_time:0,app_version:"",rtc_sdk_version:"",device_id:"",room_id:"",user_id:"",app_id:"",_env_type:"debug",os:"web",web_os_name:"",os_version:"",browser:"",browser_version:"",product_line:"rtc",project_key:"byteview"},this.timer=0,this.failSendLog=[],this.logPostUrl="",this.sendEventToServer=function(i){return void 0===i&&(i=!1),ht(t,void 0,void 0,function(){var e,n,r;return ft(this,function(t){switch(t.label){case 0:if(!this.isSenderOpen)return[2];if(this.dataBuffer.length<=0)return[2];if(n=!1,this.failSendLog.length?(e=this.failSendLog.shift(),n=!0):(r=this.dataBuffer.splice(0,2*this.reportLimit),e={data:r,header:lt(lt({},this.commonHeaders),{report_time:Date.now(),report_log_count:r.length}),from:"web",version:"1"}),i)return navigator.sendBeacon(this.logPostUrl,JSON.stringify(e)),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,dt({method:st.POST,url:this.logPostUrl,body:e})];case 2:return t.sent(),[3,4];case 3:return t.sent(),n?this.failSendLog.unshift(e):this.failSendLog.push(e),[3,4];case 4:return[2]}})})},this.init()}var vt=new(gt.prototype.init=function(){var t=this;window.addEventListener("unload",function(){try{t.isSenderOpen&&t.sendEventToServer(!0)}catch(t){}})},gt.prototype.setCommonHeaders=function(t){Object.assign(this.commonHeaders,t)},gt.prototype.setConfig=function(t){this.logPostUrl=t},gt.prototype.start=function(){this.isSenderOpen=!0,this.timer=window.setInterval(this.sendEventToServer,this.reportInterval)},gt.prototype.stop=function(){clearInterval(this.timer),this.isSenderOpen=!1},gt.prototype.addEventToBuffer=function(t,e){this.isSenderOpen&&(this.dataBuffer.length<2*this.reportLimit-1?(e.event_key=t,e.report_id=yt++,e.timestamp=Date.now(),this.dataBuffer.push(e)):this.dataBuffer.length===2*this.reportLimit-1&&this.dataBuffer.push({report_id:yt++,event_key:"rtc_log_warning",message:"reach log dataBuffer limit: "+this.dataBuffer.length}))},gt),bt=!1,Et="true"===pt("vc_debug"),St=[],wt=(It.createLogger=function(t){return new It(t)},It.setCommonHeaders=function(t){vt.setCommonHeaders(t)},It.setConfig=function(t,e){void 0===e&&(e=!0),vt.setConfig(t),bt=!e||Et},It.addInterceptor=function(t){-1<St.indexOf(t)||St.push(t)},It.start=function(){vt.start()},It.stop=function(){vt.stop()},It.prototype.notifyInterceptors=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];St.forEach(function(t){"string"==typeof n[0]&&t[e]&&t[e](n[0])})},It.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];bt&&console.info.apply(console,mt(["["+this.moduleName+"] "],t)),this.notifyInterceptors.apply(this,mt(["info"],t))},It.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];bt&&console.log.apply(console,mt(["["+this.moduleName+"] "],t)),this.notifyInterceptors.apply(this,mt(["debug"],t))},It.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];bt&&console.error.apply(console,mt(["["+this.moduleName+"] "],t)),this.notifyInterceptors.apply(this,mt(["error"],t))},It.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];bt&&console.warn.apply(console,mt(["["+this.moduleName+"] "],t)),this.notifyInterceptors.apply(this,mt(["warn"],t))},It.prototype.logEvent=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=!0),n&&e.debugMessage&&this.debug(e.debugMessage,e.debugData),e.module=this.moduleName,vt.addEventToBuffer(t,e)},It.prototype.logError=function(t,e){this.error(t,e);var n={error_code:e.code,message:e.message,origin_error:{},module:this.moduleName};e.origin&&(n.origin_error={code:e.origin.code,message:e.origin.message}),vt.addEventToBuffer(t,n)},It);function It(t){this.moduleName="",this.moduleName=t}var Tt=wt.createLogger("WEB-UTIL"),Ct=(_t.prototype.setMaxListeners=function(t){return this.maxListenerNumber=0<t?t:0,this},_t.prototype.initListenersArray=function(t){this.listeners[t]||(this.listeners[t]=[])},_t.prototype.on=function(t,e){var n=this;this.initListenersArray(t);var r=this.listeners[t];return-1<r.indexOf(e)?ut:(r.push(e),r.length>this.maxListenerNumber&&Tt.warn("["+t+"] MaxListenersExceededWarning: Possible EventEmitter memory leak detected. "+this.maxListenerNumber+" change listeners added. Use emitter.setMaxListeners() to increase limit"),function(){n.off(t,e)})},_t.prototype.off=function(t,e){if(!e)return this.listeners[t]=[],this;this.initListenersArray(t);var n=this.listeners[t],r=n.indexOf(e);return-1<r&&n.splice(r,1),this},_t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.listeners[t];return r&&r.forEach(function(t){t.apply(void 0,e)}),this},_t.prototype.offAll=function(){this.listeners={}},_t);function _t(){this.maxListenerNumber=11,this.listeners={}}var Rt,At,Nt=((Rt=function(t,e){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Rt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(Ot,At=wt),Ot.createLogger=function(t){return new Ot(t)},Ot.prototype.logEvent=function(t,e,n){void 0===n&&(n=!0),At.prototype.logEvent.call(this,t,e,n)},Ot);function Ot(t){return At.call(this,t)||this}var kt=Nt.createLogger("RTC-SDK"),Dt=n("gFX4"),Pt=n.n(Dt),Mt="io server disconnect",Lt={version:"0.0.13",rtc_app_id:"5b978bab09b27c0034d252c0",http_port:3e3,https_port:443,mainLandConfigServerUrl:"https://rtc.bytedance.com/decision/v1/multi",abroadConfigServerUrl:"https://rtc.bytevcloud.com/decision/v1/multi",signalServer:"http://127.0.0.1:8081",logServer:"https://log.snssdk.com/video/v1/webrtc_log/",newCnLogServer:"https://lvc-data.bytedance.com/video/v1/webrtc_log/",newVaLogServer:"https://lvc-data.larksuite.com/video/v1/webrtc_log/",allEnvDefaultServerConfig:{"rtc.bytedance.com":{fusionDomain:{host:"rtcio.bytedance.com",path:"/ws_fusion/",secure:!0},domain:{host:"rtcio.bytedance.com",path:"/socket.io/",secure:!0},videoBandwidth:{maxVideoBW:2048,minVideoBW:100}},"rtc-test.bytedance.com":{fusionDomain:{host:"rtcio-test.bytedance.com",path:"/ws_fusion/",secure:!0},domain:{host:"rtcio-test.bytedance.com",path:"/socket.io/",secure:!0},videoBandwidth:{maxVideoBW:2048,minVideoBW:100}}}},xt=function(){for(var e,n,o=-1,s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],r=[],t=0;t<s.length;t+=1)r[s[t]]=t;var a=function(t){e=t,n=0},c=function(){if(!e)return o;if(n>=e.length)return o;var t=255&e.charCodeAt(n);return n+=1,t},i=function(){if(!e)return o;for(;;){if(n>=e.length)return o;var t=e.charAt(n);if(n+=1,r[t])return r[t];if("A"===t)return 0}},u=function(t){var e=t.toString(16);return 1===e.length&&(e="0"+e),e="%"+e,unescape(e)};return{encodeBase64:function(t){var e;a(t),e="";for(var n=new Array(3),r=0,i=!1;!i&&(n[0]=c())!==o;)n[1]=c(),n[2]=c(),e+=s[n[0]>>2],n[1]!==o?(e+=s[n[0]<<4&48|n[1]>>4],n[2]!==o?(e+=s[n[1]<<2&60|n[2]>>6],e+=s[63&n[2]]):(e+=s[n[1]<<2&60],e+="=",i=!0)):(e+=s[n[0]<<4&48],e+="=",e+="=",i=!0),76<=(r+=4)&&(e+="\n",r=0);return e},decodeBase64:function(t){var e;a(t),e="";for(var n=new Array(4),r=!1;!r&&(n[0]=i())!==o&&(n[1]=i())!==o;)n[2]=i(),n[3]=i(),e+=u(n[0]<<2&255|n[1]>>4),n[2]!==o?(e+=u(n[1]<<4&255|n[2]>>2),n[3]!==o?e+=u(n[2]<<6&255|n[3]):r=!0):r=!0;return e}}}(),Bt=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Ut=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Ft=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};function Vt(r){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return new Promise(function(t,e){r.apply(void 0,Ft(n,[Gt(t,e)]))})}}function Gt(e,n){return function(t){t&&200===t.code?e(t):(kt.error("[signal callback error]",t),n(t))}}function jt(t,e,n){if(void 0===n&&(n=!1),t)return!0;if(console.assert(t,"assert failed. "+e),n&&!t)throw new Error("assert failed. "+e);return!1}var Ht="";function Wt(){return Ht||(Ht=U.UNKNOWN,null!==window.navigator.userAgent.match("Firefox")?Ht=U.FIREFOX:null!==window.navigator.userAgent.match("Chrome")?(Ht=U.CHROME,null!==window.navigator.userAgent.match("Electron")&&(Ht=U.ELECTRON)):null===window.navigator.userAgent.match("Safari")&&null===window.navigator.userAgent.match("AppleWebKit")||(Ht=U.SAFARI),Ht)}function Kt(){}function qt(t,e){return e<t?e:t}function zt(s,a){return Bt(this,void 0,void 0,function(){function e(t,i){return t?dt({method:V.POST,url:a,body:i}).then(function(t){return t}):new Promise(function(e,n){var r=0;dt({method:V.POST,url:Lt.mainLandConfigServerUrl,body:i}).then(function(t){e(t)}).catch(function(t){2===++r&&n(t)}),dt({url:Lt.abroadConfigServerUrl,body:i,method:V.POST}).then(function(t){e(t)}).catch(function(t){2===++r&&n(t)})})}var n,r,i,o;return Ut(this,function(t){switch(t.label){case 0:n={deviceType:"web",deviceID:s.deviceId,appID:s.appId,roomID:s.roomId,userID:s.userId,ip:s.userAgentIP||void 0,labelSelector:"sdkVersion="+Lt.version,keys:s.keys},r={},t.label=1;case 1:return t.trys.push([1,3,,9]),[4,e(a,n)];case 2:return r=t.sent(),[3,9];case 3:return i=t.sent(),[4,new Promise(function(t){return setTimeout(t,1e3)})];case 4:t.sent(),t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e(a,n)];case 6:return r=t.sent(),[3,8];case 7:throw t.sent(),o=Lt.mainLandConfigServerUrl.split("/")[2],Lt.allEnvDefaultServerConfig[o]?(r.useDefaultServerConfig=!0,new Error("use default server config")):i;case 8:return[3,9];case 9:return[2,r]}})})}function Xt(t,e){var n=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(window.location.search);if(null==r)return void 0!==e?e:"";var i=decodeURIComponent(r[1].replace(/\+/g," "));try{var o=JSON.parse(i);if("number"==typeof o&&""+o!==i)throw new Error("number too long");return o}catch(t){return i}}function Jt(t){return void 0===t&&(t=K.PRODUCTION),Xt("signalserver")?Xt("signalserver"):t===K.PRODUCTION?"https://lvc.bytedance.com/decision/v1/multi":"https://lvc-test.bytedance.com/decision/v1/multi"}function Yt(t,e,n,r){return t?"Bearer "+t:"Basic "+Qt(e,n,r)}function Qt(t,e,n){return xt.encodeBase64([t,e,n].join(":"))}function $t(t,e){return{code:t,message:e}}var Zt,te,ee=(Zt=function(t,e){return(Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Zt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ne=function(){return(ne=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},re=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},ie=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},oe=(ee(se,te=Ct),se.prototype.getState=function(){return this.state},se.prototype.getDefaultConfig=function(){return{reconnection:!0,reconnectionAttempts:8,secure:!0,forceNew:!0,transports:["websocket"],rejectUnauthorized:!1,query:{wsid:Object(ct.default)()}}},se.prototype.connect=function(t,e){kt.debug("scoket connect"),this.disconnect();var n=ne(ne({},this.getDefaultConfig()),e);this.sio=Pt.a.connect(""+this.protocolPrefix+t.host,n),this.activeEveryPushAckToServer(),this.addEventListeners()},se.prototype.disconnect=function(){var t;if(this.state=E.DISCONNECTED,this.sio){try{this.removeEventListeners(),null!==(t=this.sio)&&void 0!==t&&t.disconnect(),kt.warn("try close socket"),this.sio=null,this.emit(v.DISCONNECT,{})}catch(t){kt.error("try disconnect socket error",t)}this.sender=null,this.sio=null}},se.prototype.getSioSender=function(){var t,e;return this.sender||(this.sender=Vt(null===(e=null===(t=this.sio)||void 0===t?void 0:t.emit)||void 0===e?void 0:e.bind(this.sio))),this.sender},se.prototype.sendMessage=function(n,r){return re(this,void 0,void 0,function(){var e;return ie(this,function(t){switch(t.label){case 0:return kt.debug("sendMessage::",n,r,this.state),this.state!==E.DISCONNECTED?[3,1]:[2,Promise.reject(new Error("websocket state: "+this.state+". cant send any message."))];case 1:return t.trys.push([1,3,,4]),[4,this.getSioSender()(n,r)];case 2:return[2,t.sent()];case 3:throw e=t.sent(),kt.error("socket sendMessage error: "+n,r),e;case 4:return[2]}})})},se.prototype.addEventListeners=function(){var e=this;this.sio.on(v.ERROR,function(t){kt.logEvent(J.WEBSOCKET_EVENT,{websocket_event:Q.CONNECT_ERROR,error_code:t.code,message:t.message||t.name,debugData:t,debugMessage:"socket on error, clientId: "+e.clientId})}),this.sio.on(v.DISCONNECT,function(t){kt.logEvent(J.WEBSOCKET_EVENT,{websocket_event:Q.DISCONNECT,message:"reason: "+t,debugMessage:"close socket. reason: "+t}),t===Mt&&e.disconnect()}),this.sio.on(v.CONNECT_TIMEOUT,function(t){kt.logEvent(J.WEBSOCKET_EVENT,{websocket_event:Q.TIMEOUT,debugMessage:"socket timeout, clientId: "+e.clientId,debugData:t})}),this.sio.on(v.CONNECT_ERROR,function(t){kt.logEvent(J.WEBSOCKET_EVENT,{websocket_event:Q.CONNECT_ERROR,debugMessage:"socket on connect_error, clientId: "+e.clientId,debugData:t})}),this.sio.on(v.RECONNECT_ATTEMPT,function(){kt.debug(J.WEBSOCKET_EVENT,{websocket_event:Q.RECONNECT_ATTEMPT,debugMessage:"socket on reconnect_attempt, clientId: "+e.clientId})}),this.sio.on(v.RECONNECTING,function(t){e.state=E.CONNECTING,kt.debug(J.WEBSOCKET_EVENT,{websocket_event:Q.RECONNECTING,debugMessage:"socket on reconnecting, clientId: "+e.clientId+", attempts: "+t})}),this.sio.on(v.RECONNECT_ERROR,function(t){kt.debug(J.WEBSOCKET_EVENT,{websocket_event:Q.RECONNECT_ERROR,debugMessage:"socket on reconnect_error, clientId: "+e.clientId,debugData:t})}),this.sio.on(v.RECONNECT_FAILED,function(t){kt.debug(J.WEBSOCKET_EVENT,{websocket_event:Q.RECONNECT_FAILED,debugMessage:"socket on reconnect_failed, clientId: "+e.clientId,debugData:t}),e.state=E.DISCONNECTED,e.emit(v.SIGNAL_SERVER_FAILED,t)})},se.prototype.removeEventListeners=function(){var e=this;Object.values(v).map(function(t){return e.sio.off(t)})},se.prototype.activeEveryPushAckToServer=function(){var r,t;this.sio&&(r=this.sio,t=r.on,this.sio.on=function(e,n){return t.call(this,e,function(t){t&&t.messageId&&r.emit(e+"-res",{messageId:t.messageId}),n(t)}),this})},se);function se(){var t=null!==te&&te.apply(this,arguments)||this;return t.protocolPrefix="wss://",t.sio=null,t.state=E.DISCONNECTED,t.sender=null,t.clientId="",t}var ae,ce,ue=(ae=function(t,e){return(ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ae(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),de=function(){return(de=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},pe=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},le=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}};function he(){var n=null!==ce&&ce.apply(this,arguments)||this;return n.messageEvents=Object.values(v),n.token=null,n.pushMessageHandle=function(e){return function(t){n.emit(e,t)}},n}var fe=(ue(he,ce=oe),he.prototype.connect=function(t,e){ce.prototype.connect.call(this,t,e),this.switchMessageEventOn("on"),this.state=E.CONNECTED},he.prototype.disconnect=function(){this.switchMessageEventOn("off"),ce.prototype.disconnect.call(this)},he.prototype.switchMessageEventOn=function(e){var n=this;this.sio&&(this.messageEvents.map(function(t){return n.sio[e](t,n.pushMessageHandle(t))}),"on"===e&&this.sio.on(v.RECONNECT,function(t){kt.warn("socket on reconnect, clientId: "+n.clientId," attempts:",t),n.resendToken(5)}))},he.prototype.sendToken=function(r,i){return pe(this,void 0,void 0,function(){var e,n;return le(this,function(t){switch(t.label){case 0:if(this.token=i,kt.debug("sendToken "+r+". token:",this.token),!this.token)throw new Error("token is null");return e=this.token.controlMessage&&this.token.controlMessage.transcodeMeta?this.token:de(de({},this.token),{controlMessage:void 0}),[4,this.sendMessage(r,e)];case 1:return n=t.sent(),this.clientId=n.clientId,this.state=E.CONNECTED,[2,n]}})})},he.prototype.resendToken=function(r){return pe(this,void 0,void 0,function(){var e,n=this;return le(this,function(t){switch(t.label){case 0:if(!jt(this.token,"resendToken but token is null"))return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sendToken(y.RECONNECTED,this.token)];case 2:return t.sent(),this.emit(v.RECONNECTED),[3,4];case 3:return 500<=(e=t.sent()).code&&e.code<600?0<r?(kt.error("socket reconnect, but response.code",e.code,"so resend token!"),setTimeout(function(){return n.resendToken(r-1)},1e3)):(kt.error("socket reconnect, but signal server response 5xx too many times"),this.emit(v.DISCONNECT,e)):600<=e.code&&e.code<700?(kt.error("room is broken in server",e.code),this.emit(v.SIGNAL_SERVER_FAILED,e)):700<=e.code&&e.code<800?(kt.error("tokenFailed, response.code",e.code),this.emit(v.TOKEN_FAILED,e),this.token=null):(kt.error("socket reconnect, but response.code",e.code,"so disconnect!",e),this.emit(v.DISCONNECT,e)),[3,4];case 4:return[2]}})})},he),me=n("mSTY"),ye=n.n(me);function ge(t,e){var n,r;e.video&&e.maxVideoBW&&((n=t.getMedia("video"))&&n.setBitrate(e.maxVideoBW)),e.audio&&e.maxAudioBW&&((r=t.getMedia("audio"))&&r.setBitrate(e.maxAudioBW))}function ve(t,n){var r,e=t.getMedia("video");e&&(e.getCodecs().forEach(function(t){var e=t.getParams()["profile-level-id"];"h264"===t.getCodec().toLowerCase()&&e&&e.toLowerCase()===n&&(r=t)}),(r=r||e.getCodec("H264"))?r.getParams()["profile-level-id"]===n?kt.debug("sdp has h264 codes profile-level-id which media server support",n):(kt.warn("modify H264 profile-level-id from "+r.getParams()["profile-level-id"]+" to "+n+"(media server only support this)"),r.getParams()["profile-level-id"]=n):kt.error("sdp no h264 codes found",e))}function be(t){t.medias.forEach(function(t){for(var e=0,n=t.extensions.entries();e<n.length;e++){var r=n[e],i=r[0],o=r[1];(o.includes("rtp-hdrext:sdes:mid")||o.includes("rtp-hdrext:sdes:rtp-stream-id")||o.includes("rtp-hdrext:sdes:repaired-rtp-stream-id"))&&t.extensions.delete(i)}})}function Ee(t){var n={ExtensionURI:"ID","urn:ietf:params:rtp-hdrext:ssrc-audio-level":1,"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time":2,"urn:ietf:params:rtp-hdrext:toffset":3,"urn:3gpp:video-orientation":4,"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01":5,"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay":6,"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id":7};function r(t){return t.filter(function(t){var e=void 0!==n[t];return e||kt.debug("Not support extension: "+t),e})}function i(t){var e=new Map;return t.forEach(function(t){e.set(n[t],t)}),e}t.medias.forEach(function(t){var e=r(Array.from(t.extensions.values()));t.extensions=i(e)})}var Se=function(){return(Se=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},we=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Ie=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}};function Te(t){void 0===t&&(t={}),this.sessionId=Object(ct.default)(),this.localDesc=null,this.remoteDesc=null,this.offerOptions={},this.rtcConfig={iceServers:[],bundlePolicy:"max-bundle"},this.pc=null,this.config={},this.enableSimulcast=function(t){return kt.debug("Simulcast not implemented"),t},void 0!==t.iceServers&&(kt.debug("iceServers",t.iceServers),this.rtcConfig.iceServers=t.iceServers),t.forceTurn&&(this.rtcConfig.iceTransportPolicy="relay"),this.offerOptions={offerToReceiveVideo:void 0!==t.video&&!1!==t.video,offerToReceiveAudio:void 0!==t.audio&&!1!==t.audio},this.config=Se(Se({},t),{remoteDescriptionSet:!1,localCandidates:[],remoteCandidates:[]})}var Ce,_e,Re=(Te.prototype.open=function(){var n=this;this.pc=new RTCPeerConnection(this.rtcConfig),this.pc.oniceconnectionstatechange=function(t){var e=t.target.iceConnectionState;kt.debug("oniceconnectionstatechange",e),n.oniceconnectionstatechange(e)},this.pc.onaddstream=function(t){n.onaddstream(t)},this.pc.onremovestream=function(t){n.onremovestream(t)}},Te.prototype.close=function(){this.pc.close(),this.pc.onconnectionstatechange=Kt,this.pc.onremovestream=Kt,this.pc.onaddstream=Kt,this.pc=null},Te.prototype.processAnswer=function(r){return we(this,void 0,void 0,function(){var e,n;return Ie(this,function(t){switch(t.label){case 0:if(!this.localDesc)return kt.warn("此PC没有发出offer前，但收到一个answer",r,this.localDesc),[2];for(kt.debug("processAnswer",r),this.config.remoteDescriptionSet=!0,e=this.config.localCandidates,kt.debug("Local candidates to send from cache:",e.length);0<e.length;);return[4,this.setRemoteDescription(r)];case 1:for(t.sent(),n=this.config.remoteCandidates,kt.debug("Remote candidates to be added from cache: ",n);0<n.length;)this.pc.addIceCandidate(n.shift());return navigator.userAgent.match(/edge/i)&&(kt.warn("edge need add candidate null to end ice"),this.pc.addIceCandidate(null)),[2]}})})},Te.prototype.createOffer=function(n){return void 0===n&&(n=!1),we(this,void 0,void 0,function(){var e;return Ie(this,function(t){switch(t.label){case 0:return n||(this.offerOptions={offerToReceiveAudio:!1,offerToReceiveVideo:!1}),kt.debug((n?"subscribe":"publish")+" creating offer ...",this.offerOptions),[4,this.pc.createOffer(this.offerOptions)];case 1:return e=t.sent(),[2,this.setLocalDescForOffer(n,e)]}})})},Te.prototype.addStream=function(t){var e;null!==(e=this.pc)&&void 0!==e&&e.addStream(t)},Te.prototype.updateSpec=function(t,e){var n,r,i,o,s=this;void 0===e&&(e=function(){}),(t.maxVideoBW||t.maxAudioBW)&&(r=(n=this.config).limitMaxVideoBW,i=n.limitMaxAudioBW,kt.debug("updateSpec maxVideoBW: "+t.maxVideoBW+",\n        limitMaxVideoBW: "+r+", maxAudioBW: "+t.maxAudioBW+", limitMaxAudioBW: "+i),t.maxVideoBW&&(t.maxVideoBW=qt(t.maxVideoBW,r),this.config.maxVideoBW=t.maxVideoBW),t.maxAudioBW&&(t.maxAudioBW=qt(t.maxAudioBW,i),this.config.maxAudioBW=t.maxAudioBW),kt.debug("Result",t.maxVideoBW,t.maxAudioBW),ge(o=ye.a.SDPInfo.processString(this.localDesc.sdp),this.config),this.localDesc.sdp=o.toString(),(t.Sdp||t.maxAudioBW)&&(kt.debug("Updating with SDP renegotiation",this.config.maxVideoBW,this.config.maxAudioBW),this.pc.setLocalDescription(this.localDesc).then(function(){var t=ye.a.SDPInfo.processString(s.remoteDesc.sdp);return ge(t,s.config),s.remoteDesc.sdp=t.toString(),s.pc.setRemoteDescription(new RTCSessionDescription(s.remoteDesc))}).then(function(){s.config.remoteDescriptionSet=!0}).catch(function(){})))},Te.prototype.setRemoteDescription=function(r){return we(this,void 0,void 0,function(){var e,n;return Ie(this,function(t){switch(t.label){case 0:kt.debug("setRemoteDescription::",r),t.label=1;case 1:return t.trys.push([1,3,,4]),ge(e=ye.a.SDPInfo.processString(r.sdp),this.config),r.sdp=e.toString(),this.remoteDesc=r,[4,this.pc.setRemoteDescription(new RTCSessionDescription(this.remoteDesc))];case 2:return t.sent(),[3,4];case 3:throw n=t.sent(),kt.error("setRemoteDescription error::",n),n;case 4:return[2]}})})},Te.prototype.setLocalDescForOffer=function(t,e){var r=this;kt.debug("setLocalDescForOffer",e),this.localDesc=e,t||(this.localDesc.sdp=this.enableSimulcast(this.localDesc.sdp));var n=ye.a.SDPInfo.processString(this.localDesc.sdp);ve(n,"42e01f"),be(n),Ee(n),ge(n,this.config),this.localDesc.sdp=n.toString();var i=new Promise(function(e,t){var n=null;r.pc.onicecandidate=function(t){clearTimeout(n),e(r.pc.localDescription)},n=setTimeout(function(){kt.debug("【onicecandidate】timeout"),e(r.pc.localDescription)},3e3)});return this.setLocalDescription(),i},Te.prototype.setLocalDescription=function(){return we(this,void 0,void 0,function(){return Ie(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),kt.debug("setLocalDescription",this.localDesc),[4,this.pc.setLocalDescription(this.localDesc)];case 1:return t.sent(),kt.debug("Local SDP:",this.localDesc),[3,3];case 2:return t.sent(),kt.error("Local SDP:",this.localDesc),[3,3];case 3:return[2]}})})},Te.prototype.getSenders=function(){var t;return(null===(t=this.pc)||void 0===t?void 0:t.getSenders())||[]},Te.prototype.getReceivers=function(){var t;return(null===(t=this.pc)||void 0===t?void 0:t.getReceivers())||[]},Te.prototype.getRTCConnection=function(){return this.pc},Te.prototype.onaddstream=function(t){},Te.prototype.onremovestream=function(t){},Te.prototype.oniceconnectionstatechange=function(t){},Te);function Ae(){return null!==_e&&_e.apply(this,arguments)||this}var Ne,Oe,ke=((Ce=function(t,e){return(Ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ce(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(Ae,_e=Re),Ae);function De(){return null!==Oe&&Oe.apply(this,arguments)||this}var Pe=((Ne=function(t,e){return(Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ne(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(De,Oe=Re),De),Me=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Le=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}};function xe(){}var Be=(xe.createConnection=function(t){void 0===t&&(t={});var e=Wt();switch(kt.debug("createConnection in "+e),e){case U.CHROME:case U.SAFARI:case U.ELECTRON:return new ke(t);case U.FIREFOX:return new Pe(t);default:throw kt.error("try to create peerconnection in unsupported browser"),new Error("WebRTC stack not available")}},xe.getUserMedia=function(e){return Me(this,void 0,void 0,function(){return Le(this,function(t){return[2,navigator.mediaDevices.getUserMedia(e)]})})},xe);function Ue(t,e){void 0===e&&(e=!1);var n=document.createElement("audio");return n.setAttribute("id","audio"+t),n.setAttribute("class","bytestyle_stream"),n.setAttribute("style","width: 100%; height: 100%; position: absolute"),n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),n.playsinline=!0,e&&(n.muted=!0,n.setAttribute("muted",""),n.volume=0),n}function Fe(t){var e=new MediaStream;return t.getMediaStream().getAudioTracks().forEach(function(t){return e.addTrack(t)}),e}function Ve(){this.audio=null,this.container=null}var Ge=(Ve.prototype.play=function(t,e,n){var r=e.id||"__temp_dom_id__"+Date.now(),i=e.isLocal();this.container=document.getElementById(t),this.container?e?e.getMediaStream()?(this.audio=Ue(r,i),this.container.innerHTML="",this.container.appendChild(this.audio),this.updateSrcObject(e)):kt.error("Create player failed, play stream should after stream-subscribed."):kt.error("Create player failed, stream can not be null."):kt.error("Create player failed, can not find element with id: "+t)},Ve.prototype.destroy=function(){kt.debug("destroy player "+this.audio.id);try{this.audio.pause()}catch(t){kt.error("pause media error",t)}this.container.innerHTML=""},Ve.prototype.updateSrcObject=function(t){t.hasAudio()&&this.updateAudioObject(t),kt.debug("updateSrcObject called. streamId:",t.id)},Ve.prototype.updateAudioObject=function(t){t.getMediaStream()&&(this.audio.srcObject=Fe(t),kt.debug("updateSrcObject called. streamId:",t.id))},Ve),je=(He.prototype.resume=function(){this.audioContext.resume().then(function(){kt.debug("Playback resumed successfully")})},He.prototype.getVolumes=function(){return{instant:this.instant,slow:this.slow,clip:this.clip}},He.prototype.connectToSource=function(t){kt.debug("connectToSource",t),this.mic=this.audioContext.createMediaStreamSource(t),this.mic.connect(this.script),this.script.connect(this.audioContext.destination)},He.prototype.stop=function(){var t;null!==(t=this.mic)&&void 0!==t&&t.disconnect(),this.script.disconnect()},He);function He(t){var o=this;void 0===t&&(t=!1),this.audioContext=new window.AudioContext,this.instant=0,this.slow=0,this.clip=0,this.script=this.audioContext.createScriptProcessor(2048,1,1),this.mic=null,this.script.onaudioprocess=function(t){for(var e=t.inputBuffer.getChannelData(0),n=0,r=0,i=0;i<e.length;++i)n+=e[i]*e[i],.99<Math.abs(e[i])&&(r+=1);o.instant=Math.sqrt(n/e.length),o.slow=.95*o.slow+.05*o.instant,o.clip=r/e.length}}var We,Ke,qe=(We=function(t,e){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}We(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ze=function(){return(ze=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Xe=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Je=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}};function Ye(t){var e=Ke.call(this)||this;e.enableMediaType={audio:!1,video:!1},e.videoSize=[],e.videoFrameRate=[],e.actions={updateSubscribeState:x.FINISHED},e.minVideoBW=100,e.maxVideoBW=500,e.transportType="udp",e.local=!1,e.soundMeter=new je,e.options={},e.mediaStream=null,e.player=null,e.sessionId="",e.uid="",e.id="",e.state=I.IDLE,e.audioMuted=!1,e.videoMuted=!1;var n=t.videoSize;if(!(void 0===n||n instanceof Array&&4===n.length))throw Error("Invalid Video Size");return e.options=t,e.id=t.id||"",e.local=t.local||e.local,e.uid=t.uid||"",e.sessionId=t.sessionId||"",e}var Qe=(qe(Ye,Ke=Ct),Object.defineProperty(Ye.prototype,"stream",{get:function(){return this.mediaStream},set:function(t){t&&(this.soundMeter.stop(),this.soundMeter.connectToSource(t)),this.mediaStream=t},enumerable:!0,configurable:!0}),Ye.prototype.getVolumes=function(){return this.soundMeter.getVolumes()},Ye.prototype.createLocalStream=function(p,l){return Xe(this,void 0,void 0,function(){var e,n,r,i,o,s,a,c,u,d=this;return Je(this,function(t){switch(t.label){case 0:this.videoSize=p||this.videoSize,this.videoFrameRate=l||this.videoFrameRate,e=this.options,n=e.audio,r=e.video,i=e.fake,o=e.screen,s=r,(n||r)&&(kt.debug("requested access to local media"),s&&(s=!0===s?{}:s,void 0!==this.videoSize&&(s.width={min:this.videoSize[0],ideal:this.videoSize[2],max:this.videoSize[2]},s.height={min:this.videoSize[1],ideal:this.videoSize[3],max:this.videoSize[3]}),void 0!==this.videoFrameRate&&(s.frameRate={min:this.videoFrameRate[0],ideal:this.videoFrameRate[1],max:this.videoFrameRate[1]}))),a={video:s,audio:n,fake:i,screen:o},t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Be.getUserMedia(a)];case 2:return c=t.sent(),this.stream=c,kt.debug("get local stream success"),this.stream.getTracks().forEach(function(t){kt.debug("getTracks",t),t.onended=function(){d.stream.getTracks().forEach(function(t){t.onended=null}),d.emit(M.STREAM_ENDED)}}),[3,4];case 3:throw u=t.sent(),kt.error("get local stream fail.",u,u.code),u;case 4:return[2]}})})},Ye.prototype.getAttributes=function(){if(!this.local)return this.options.attributes;var t,e=[];return this.options.video&&(t={width:this.videoSize[2],height:this.videoSize[3],framerate:this.videoFrameRate[1],maxkbps:this.maxVideoBW},e.push(t)),ze(ze({},this.options.attributes),{videoDescriptions:e})},Ye.prototype.getCustomData=function(){return this.options.customData},Ye.prototype.setLocalOptions=function(t){this.maxVideoBW=t.maxVideoBW,this.minVideoBW=t.minVideoBW,this.options.simulcast=t.simulcast,this.transportType=t.transportType},Ye.prototype.getLocalOptions=function(){return{simulcast:this.options.simulcast,minVideoBW:this.minVideoBW,maxVideoBW:this.maxVideoBW,transportType:this.transportType}},Ye.prototype.setRemoteOptions=function(t){this.setEnableMediaType({video:!1!==t.video,audio:!1!==t.audio}),this.transportType=t.transportType},Ye.prototype.setEnableMediaType=function(t){this.enableMediaType.video=t.video,this.enableMediaType.audio=t.audio,this.player&&this.player.updateSrcObject&&this.player.updateSrcObject(this)},Ye.prototype.getRemoteOptions=function(){return{video:this.enableMediaType.video,audio:this.enableMediaType.audio,transportType:this.transportType}},Ye.prototype.setUpdateSubscribeState=function(t){this.actions.updateSubscribeState=t},Ye.prototype.isAllActionsFinished=function(){return this.actions.updateSubscribeState===x.FINISHED},Ye.prototype.getEnableMediaType=function(){return this.enableMediaType},Ye.prototype.setAttributes=function(t){this.local&&this.updateAttributesByServerEnd(t)},Ye.prototype.updateAttributesByServerEnd=function(t){Object.assign(this.options.attributes,t)},Ye.prototype.hasDisableAudio=function(){return!1===this.options.audio||!(!this.options.attributes||!1!==this.options.attributes.audiostream&&!1!==this.options.attributes.localaudio)},Ye.prototype.hasDisableVideo=function(){if(!1===this.options.video)return!0;if(this.options.attributes){var t=this.options.attributes,e=t.videostream,n=t.localvideo;if(!1===e||!1===n)return!0}return!1===this.enableMediaType.video},Ye.prototype.hasVideo=function(){return!1!==this.options.video&&void 0!==this.options.video},Ye.prototype.hasAudio=function(){return!1!==this.options.audio&&void 0!==this.options.audio},Ye.prototype.hasMedia=function(){return this.options.video||this.options.audio},Ye.prototype.play=function(t){kt.debug("stream: "+this.id+" begin play"),this.player&&(kt.debug("One Stream only play in one player. removing old player. streamId:",this.id),this.stop()),this.player=new Ge,this.player.play(t,this)},Ye.prototype.stop=function(){kt.debug("stream: "+this.id+" stop play"),this.player&&(this.player.destroy(),this.player=null)},Ye.prototype.destroy=function(){this.stop(),this.local&&this.stream&&this.stream.getTracks().forEach(function(t){t.onended=null,kt.debug("stream destroy",t.onended),t.stop()}),this.stream=null},Ye.prototype.switchAudio=function(t){this.audioMuted=t,this.switchStreamStatus()},Ye.prototype.switchVideo=function(t){this.videoMuted=t,this.switchStreamStatus()},Ye.prototype.setMediaStream=function(t){var e,n,r,i,o;0<(this.stream=t).getAudioTracks().length&&(e=t.getAudioTracks()[0],this.options.audio=!0,this.audioMuted=e.muted),0<t.getVideoTracks().length&&(this.options.video=!0,r={width:0,height:0,frameRate:0},"function"==typeof(n=t.getVideoTracks()[0]).getSettings&&(r=n.getSettings()),this.videoSize=[120,120,r.width,r.height],o=void 0===(i=r.frameRate)?0:i,this.videoFrameRate=[15<o?15:10,o],this.videoMuted=n.muted)},Ye.prototype.getMediaStream=function(){return this.stream},Ye.prototype.isLocal=function(){return this.local},Ye.prototype.switchStreamStatus=function(){var e=this;this.stream&&(this.stream.getAudioTracks().forEach(function(t){kt.debug("switchStreamStatus::",e.audioMuted),t.enabled=!e.audioMuted}),this.stream.getVideoTracks().forEach(function(t){t.enabled=!e.videoMuted})),this.local&&this.setAttributes({videostream:!this.videoMuted,audiostream:!this.audioMuted})},Ye),$e=30;function Ze(t,e){var n=this;if(this.mergePeerStats=function(t){var e=function(t){return t.mediatype===n.mediatype&&t.googTrackId===n.trackId};t.results.forEach(function(t){e(t)&&("video"===n.mediaType&&"up"===n.direction?(n.googAvgEncodeMs=t.googAvgEncodeMs,n.googFrameRateInput=t.googFrameRateInput,n.googFrameWidthInput=t.googFrameWidthInput,n.googFrameHeightInput=t.googFrameHeightInput,"ssrc"===t.type&&(n.packets=t.packetsSent||0,n.packetsLost=t.packetsLost||0,n.videoNetworkElapse=t.googRtt||0)):"video"===n.mediaType&&"down"===n.direction||("audio"===n.mediaType&&"up"===n.direction?"ssrc"===t.type&&(n.packets=t.packetsSent||0,n.packetsLost=t.packetsLost||0,n.audioNetworkElapse=t.googRtt||0):"audio"===n.mediaType&&n.direction))})},this.processCandidatePairReport=function(t){n.iceConsentRequestsSent=t.consentRequestsSent,n.iceRequestsSent=t.requestsSent,n.iceResponsesSent=t.responsesSent,n.iceRequestsReceived=t.requestsReceived,n.iceResponsesReceived=t.responsesReceived,n.iceCurrentRoundTripTime=t.currentRoundTripTime,n.iceTotalRoundTripTime=t.totalRoundTripTime,n.iceBytesReceived=t.bytesReceived,n.iceBytesSent=t.bytesSent,n.iceState=t.state,n.iceNominated=t.nominated,n.iceAvailableIncomingBitrate=t.availableIncomingBitrate,n.iceAvailableOutgoingBitrate=t.availableOutgoingBitrate},this.processLocalCandidate=function(t){n.localCandidateType=t.candidateType,n.localIp=t.ip,n.localPort=t.port,n.localNetworkType=t.networkType,n.protocol=t.protocol},this.processRemoteCandidate=function(t){n.remoteCandidateType=t.candidateType,n.remoteIp=t.ip,n.remotePort=t.port},this.processInboundReport=function(t){n.bytes=t.bytesReceived,n.fractionLost=t.fractionLost,n.kind=t.kind,n.ssrc=t.ssrc,n.packets=t.packetsReceived,n.packetsLost=t.packetsLost,"audio"===n.kind&&(n.jitter=t.jitter),"video"===n.kind&&(n.nackCount=t.nackCount,n.pliCount=t.pliCount,n.firCount=t.firCount)},this.processOutboundReport=function(t){n.bytes=t.bytesSent,n.kind=t.kind,n.ssrc=t.ssrc,"video"===n.kind&&(n.framesEncoded=t.framesEncoded,n.nackCount=t.nackCount,n.pliCount=t.pliCount,n.qpSum=t.qpSum)},this.processSendTrackReport=function(t){switch(t.kind){case"audio":n.audioLevel=t.audioLevel,n.totalAudioEnergy=t.totalAudioEnergy,n.totalSamplesDuration=t.totalSamplesDuration;break;case"video":n.frameHeight=t.frameHeight,n.frameWidth=t.frameWidth,n.framesSent=t.framesSent}n.trackId=t.trackIdentifier},this.processReceiveTrackReport=function(t){switch(t.kind){case"audio":n.audioLevel=t.audioLevel,n.totalAudioEnergy=t.totalAudioEnergy,n.totalSamplesDuration=t.totalSamplesDuration;break;case"video":n.frameHeight=t.frameHeight,n.frameWidth=t.frameWidth,n.framesReceived=t.framesReceived,n.framesDecoded=t.framesDecoded}n.trackId=t.trackIdentifier},this.processCodec=function(t){n.codec=t.mimeType.split("/")[1],n.clockRate=t.clockRate},"video"!==t&&"audio"!==t)throw new Error("mediaType must be audio or video");if("up"!==e&&"down"!==e)throw new Error("direction must be up or down");this.mediaType=t,this.direction=e,this.initMediaComputedProperties(),"video"===this.mediaType&&this.initVideoOnlyCoumputedProperties(),"video"===t&&(this.frameRateDecoded=0,this.frameRateEncoded=0,this.frameRateSent=0,this.frameRateReceived=0)}var tn=(Ze.prototype.processStatisticReports=function(t){var e=this;t.forEach(function(t){switch(e.timestamp!=t.timestamp&&e.updateTimestamp(t),t.type){case"candidate-pair":e.processCandidatePairReport(t);break;case"inbound-rtp":e.processInboundReport(t);break;case"outbound-rtp":e.processOutboundReport(t);break;case"local-candidate":e.processLocalCandidate(t);break;case"remote-candidate":e.processRemoteCandidate(t);break;case"track":"up"===e.direction?e.processSendTrackReport(t):e.processReceiveTrackReport(t);break;case"codec":e.processCodec(t)}})},Ze.prototype.updateTimestamp=function(t){this.timestamp&&(this.timestampInterval=(t.timestamp-this.timestamp)/1e3),this.timestamp=t.timestamp},Ze.prototype.initMediaComputedProperties=function(){var r=this;this.timestampInterval=1/0,this.packetsHistory=[],this.packetsLostHistory=[];var e=0;Object.defineProperty(this,"bytes",{enumerable:!0,get:function(){return e},set:function(t){r.bitrate=Math.round(8*(t-r.bytes)/r.timestampInterval),r.bandwidth=Math.round(r.bitrate/1024),e=t}});var n=0;Object.defineProperty(this,"packets",{enumerable:!0,get:function(){return n},set:function(t){for(r.packetsHistory.push(t-n);r.packetsHistory.length>$e;)r.packetsHistory.shift();n=t}});var i=0;Object.defineProperty(this,"packetsLost",{enumerable:!0,get:function(){return i},set:function(t){for(r.packetsLostHistory.push(t-i);r.packetsLostHistory.length>$e;)r.packetsLostHistory.shift();i=t}}),Object.defineProperty(this,"packetsLostRate",{enumerable:!0,get:function(){if(r.packetsHistory.length!==r.packetsLostHistory.length)return 0;if(!(r.packetsHistory.length<5)){if(r.packetsHistory<5)return 0;for(var t=0,e=r.packetsHistory.length,n=0;n<e;n++)0===r.packetsHistory[n]?t+=100:t+=100*r.packetsLostHistory[n]/r.packetsHistory[n];return t/=e,Math.round(t)/100}}})},Ze.prototype.initVideoOnlyCoumputedProperties=function(){var e=this,n=0;Object.defineProperty(this,"framesSent",{enumerable:!0,get:function(){return n},set:function(t){e.frameRateSent=Math.round((t-n)/e.timestampInterval),n=t}});var r=0;Object.defineProperty(this,"framesReceived",{enumerable:!0,get:function(){return r},set:function(t){e.frameRateReceived=Math.round((t-r)/e.timestampInterval),r=t}});var i=0;Object.defineProperty(this,"framesDecoded",{enumerable:!0,get:function(){return i},set:function(t){e.frameRateDecoded=Math.round((t-i)/e.timestampInterval),i=t}});var o=0;Object.defineProperty(this,"framesEncoded",{enumerable:!0,get:function(){return o},set:function(t){e.frameRateEncoded=Math.round((t-o)/e.timestampInterval),o=t}})},Ze.prototype.getServerReportStats=function(){var t=this.getSharedServerReportStats();return"video"===this.mediaType&&"up"===this.direction?Object.assign(t,this.getSentVideoOnlyServerReportStats()):"video"===this.mediaType&&"down"===this.direction?Object.assign(t,this.getReceivedVideoOnlyServerReportStats()):"audio"===this.mediaType&&"up"===this.direction?Object.assign(t,this.getSentAudioOnlyServerReportStats()):"audio"===this.mediaType&&"down"===this.direction&&Object.assign(t,this.getReceivedAudioOnlyServerReportStats()),t},Ze.prototype.getSharedServerReportStats=function(){return{bandwidth:this.bandwidth,bitrate:this.bitrate,bytes:this.bytes,direction:this.direction,mediaType:this.mediaType,packets:this.packets,rtt:1e3*this.iceCurrentRoundTripTime,sentPingRequestsBeforeFirstResponse:this.iceConsentRequestsSent,sentPingRequestsTotal:this.iceRequestsSent,sentPingResponses:this.iceResponsesSent,recvPingRequests:this.iceRequestsReceived,recvPingResponses:this.iceResponsesReceived,ssrc:this.ssrc,codec:this.codec,iceBytesReceived:this.iceBytesReceived,iceBytesSent:this.iceBytesSent,iceState:this.iceState,iceNominated:this.iceNominated,localIp:this.localIp,localPort:this.localPort,localCandidateType:this.localCandidateType,localNetworkType:this.localNetworkType,protocol:this.protocol,remoteIp:this.remoteIp,remotePort:this.remotePort,remoteCandidateType:this.remoteCandidateType,iceAvailableIncomingBitrate:this.iceAvailableIncomingBitrate,iceAvailableOutgoingBitrate:this.iceAvailableOutgoingBitrate}},Ze.prototype.getSentVideoOnlyServerReportStats=function(){return{pliCount:this.pliCoun,firCount:this.firCount,nackCount:this.nackCount,qpSum:this.qpSum,frameSizeHeight:this.frameHeight,frameSizeWidth:this.frameWidth,frameRateSent:this.frameRateSent,frameRateInput:this.frameRateSent,frameRateEncoded:this.frameRateEncoded,fractionLost:this.packetsLostRate,videoNetworkElapse:this.videoNetworkElapse}},Ze.prototype.getReceivedVideoOnlyServerReportStats=function(){return{pliCount:this.pliCount,firCount:this.firCount,nackCount:this.nackCount,packetsLost:this.packetsLost,packetsLostRate:this.packetsLostRate,frameSizeHeight:this.frameHeight,frameSizeWidth:this.frameWidth,frameRateOutput:this.frameRateDecoded,frameRateReceived:this.frameRateReceived,frameRateDecoded:this.frameRateDecoded,fractionLost:this.fractionLost}},Ze.prototype.getSentAudioOnlyServerReportStats=function(){return{audioLevel:this.audioLevel,totalAudioEnergy:this.totalAudioEnergy,totalSamplesDuration:this.totalSamplesDuration,fractionLost:this.packetsLostRate,audioNetworkElapse:this.audioNetworkElapse}},Ze.prototype.getReceivedAudioOnlyServerReportStats=function(){return{packetsLost:this.packetsLost,packetsLostRate:this.packetsLostRate,jitter:1e3*this.jitter,audioLevel:this.audioLevel,totalAudioEnergy:this.totalAudioEnergy,totalSamplesDuration:this.totalSamplesDuration,fractionLost:this.fractionLost}},Ze.prototype.getSdkStats=function(){return"video"===this.mediaType&&"up"===this.direction?this.sentVideoStats:"video"===this.mediaType&&"down"===this.direction?this.recevedVideoStats:"audio"===this.mediaType&&"up"===this.direction?this.sentAudioStats:"audio"===this.mediaType&&"down"===this.direction?this.recevedAudioStats:void 0},Ze.prototype.getClientStats=function(){return"video"===this.mediaType&&"up"===this.direction?{CaptureFrameRate:this.googFrameRateInput,CaptureResolutionHeight:this.googFrameHeightInput,CaptureResolutionWidth:this.googFrameWidthInput,EncodeDelay:this.googAvgEncodeMs,MuteState:this.muted,SendBitrate:this.bitrate/1e3,SendFrameRate:this.frameRateSent,SendResolutionHeight:this.frameHeight,SendResolutionWidth:this.frameWidth,TargetSendBitrate:0,TotalDuration:0,TotalFreezeTime:0}:"video"===this.mediaType&&"down"===this.direction?{End2EndDelay:0,MuteState:this.muted,PacketsLossRate:this.packetsLostRate||0,RecvBitrate:this.bitrate/1e3,RecvResolutionHeight:this.frameHeight,RecvResolutionWidth:this.frameWidth,RenderFrameRate:this.frameRateDecoded,RenderResolutionHeight:this.frameHeight,RenderResolutionWidth:this.frameWidth,TotalFreezeTime:0,TotalPlayDuration:0,TransportDelay:0}:"audio"===this.mediaType&&"up"===this.direction?{CodecType:this.codec,MuteState:this.muted,RecordingLevel:this.audioLevel,SamplingRate:this.clockRate,SendBitrate:this.bitrate/1e3,SendLevel:this.totalAudioEnergy}:"audio"===this.mediaType&&"down"===this.direction?{CodecType:this.codec,End2EndDelay:0,MuteState:this.muted,PacketsLossRate:this.packetsLostRate||0,RecvBitrate:this.bitrate/1e3,RecvLevel:this.totalAudioEnergy,TotalFreezeTime:0,TotalPlayDuration:0,TransportDelay:0}:void 0},Object.defineProperty(Ze.prototype,"sentVideoStats",{get:function(){return{accessDelay:Math.round(1e3*this.iceCurrentRoundTripTime),videoSentBitrate:this.bitrate,videoSentBytes:this.bytes,videoSentPackets:this.packets,videoSentPacketsLost:this.packetsLost,videoSentPacketsLostRate:this.packetsLostRate,videoSentFrameRate:this.frameRateSent,videoSentEncodedFrameRate:this.frameRateEncoded,videoSentResolutionWidth:this.frameWidth,videoSentResolutionHeight:this.frameHeight}},enumerable:!0,configurable:!0}),Object.defineProperty(Ze.prototype,"recevedVideoStats",{get:function(){return{accessDelay:Math.round(1e3*this.iceCurrentRoundTripTime),videoReceivedBitrate:this.bitrate,videoReceivedBytes:this.bytes,videoReceivedPackets:this.packets,videoReceivedPacketsLost:this.packetsLost,videoReceivedPacketsLostRate:this.packetsLostRate,videoReceivedFrameRate:this.framesReceived,videoReceivedDecodeFrameRate:this.frameRateDecoded,videoReceivedResolutionWidth:this.frameWidth,videoReceivedResolutionHeight:this.frameHeight}},enumerable:!0,configurable:!0}),Object.defineProperty(Ze.prototype,"sentAudioStats",{get:function(){return{accessDelay:Math.round(1e3*this.iceCurrentRoundTripTime),audioSentBitrate:this.bitrate,audioSentBytes:this.bytes,audioSentPackets:this.packets,audioSentPacketsLost:this.packetsLost,audioSentPacketsLostRate:this.packetsLostRate}},enumerable:!0,configurable:!0}),Object.defineProperty(Ze.prototype,"recevedAudioStats",{get:function(){return{accessDelay:Math.round(1e3*this.iceCurrentRoundTripTime),audioReceivedBitrate:this.bitrate,audioReceivedBytes:this.bytes,audioReceivedPackets:this.packets,audioReceivedPacketsLost:this.packetsLost,audioReceivedPacketsLostRate:this.packetsLostRate}},enumerable:!0,configurable:!0}),Ze),en=n("SCLy"),nn=n.n(en),rn=function(){return(rn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},on=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},sn=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},an=4e3,cn=3e3,un=(dn.prototype.startRecord=function(t){var e=this;this.stream&&this.stopRecord(),this.stream=t,this.collectTimer=window.setInterval(function(){return on(e,void 0,void 0,function(){var e,n,r,i,o=this;return sn(this,function(t){switch(t.label){case 0:return(t.trys.push([0,3,,4]),e=null===(i=this.stream)||void 0===i?void 0:i.getPeerConnection())?[4,(n=this).extractStreamStats()]:[3,2];case 1:n.rawStatistics=t.sent(),nn()(e.getRTCConnection(),function(n){Object.keys(o.reportStatisticsMap).forEach(function(t){var e=o.reportStatisticsMap[t];e.mergePeerStats(n),e.muted=t.muted})}),t.label=2;case 2:return[3,4];case 3:return r=t.sent(),kt.error(r),this.rawStatistics=[],[3,4];case 4:return[2]}})})},an),this.sendTimer=window.setInterval(function(){return on(e,void 0,void 0,function(){var e,n=this;return sn(this,function(t){return this.rawStatistics.length<=0||(null===(e=this.stream)||void 0===e||e.isLocal(),this.rawStatistics.forEach(function(t){var e;n.stream&&(e=rn(rn({},n.stream.getCommonLogParams()),{stats_interval:an,mime_type:t.codec,ssrc:t.ssrc,lark_stats:JSON.stringify({bandwidth:t.bandwidth,audio_network_elapse:t.audioNetworkElapse,bitrate:t.bitrate,fraction_lost:t.fractionLost,packets:t.packets,rtt:t.rtt})}),kt.logEvent(J.RTC_LARK_MEDIA_STATISTICS,e,!1),kt.logEvent(J.RTC_TRANSPORT_STATISTICS,rn(rn({},n.stream.getCommonLogParams()),{recv_ping_requests:t.recvPingRequests,recv_ping_responses:t.recvPingResponses,sent_ping_requests_before_first_response:t.sentPingRequestsBeforeFirstResponse,sent_ping_requests_total:t.sentPingRequestsTotal,sent_ping_responses:t.sentPingResponses}),!1),n.hasSendIceEvent||(n.hasSendIceEvent=!0,kt.logEvent(J.RTC_ICE_INFO,rn(rn({},n.stream.getCommonLogParams()),{local_ip:t.localIp,local_network_type:t.localNetworkType,protocol:t.protocol,remote_candidate_type:t.remoteCandidateType,remote_ip:t.remoteIp,remote_port:t.remotePort,ice_state:t.iceState}))))})),[2]})})},cn)},dn.prototype.stopRecord=function(){window.clearInterval(this.collectTimer),window.clearInterval(this.sendTimer)},dn.prototype.processRenderedFramesEvent=function(t){var e=0,n=0,r=0;if("video"!==t&&"audio"!==t)throw new Error("Unknow mediaType: "+t);return{stall_count:e,stall_duration:n,play_time:r}},dn.prototype.extractStreamStats=function(){return on(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return sn(this,function(t){switch(t.label){case 0:return this.stream?this.stream.state===I.IDLE||this.stream.state===I.CLOSED?[2,[]]:(e=this.stream.getPeerConnection())?(n=e.getSenders(),r=n.map(function(t){return s.processSender(t)}),i=e.getReceivers(),o=i.map(function(t){return s.processReceiver(t)}),[4,Promise.all(r.concat(o))]):[2]:[2,[]];case 1:return[2,t.sent().filter(function(t){return t})]}})})},dn.prototype.processSender=function(t){return this.processHandler(t,"up")},dn.prototype.processReceiver=function(t){return this.processHandler(t,"down")},dn.prototype.processHandler=function(r,i){return on(this,void 0,void 0,function(){var e,n;return sn(this,function(t){switch(t.label){case 0:return!r.getStats||!r.track||"video"!==r.track.kind&&"audio"!==r.track.kind?[3,2]:[4,r.getStats()];case 1:return 0===(e=t.sent()).size?[2]:((n=(n=this.reportStatisticsMap[r.track])||new tn(r.track.kind,i)).processStatisticReports(e),[2,(this.reportStatisticsMap[r.track]=n).getServerReportStats()]);case 2:return[2]}})})},dn);function dn(){this.collectTimer=0,this.sendTimer=0,this.rawStatistics=[],this.stream=null,this.reportStatisticsMap={},this.hasSendIceEvent=!1}var pn,ln,hn=(pn=function(t,e){return(pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}pn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),fn=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},mn=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},yn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};function gn(t){var e=t&&ot[t],n=e[0],r=e[1],i=e[2];return e?{videoSize:yn(["120","120"],(""+n).split("x")).map(function(t){return parseInt(t,10)}),videoFrameRate:[15<r?15:10,r],minVideoBW:i/5,maxVideoBW:i}:{}}function vn(t){var r=ln.call(this,t)||this;return r.audioContext=null,r.audioSource=null,r.analyserNode=null,r.videoProfile=C.V480P_1,r.videoBitrate=null,r.connection=null,r.reporter=new un,r.attempts=0,r.pubOrSubStartTime=0,r.createRemoteStreamConnection=function(t){return kt.debug("createRemoteStreamConnection. streamId: "+r.id),r.connection&&r.connection.close&&r.connection.close(),r.connection=Be.createConnection(r.getConnectionOptions(t,!0)),r.connection.open(),r.connection.onaddstream=r.onSubscribed,r.connection.oniceconnectionstatechange=r.oniceconnectionstatechange,r.connection.createOffer(!0)},r.onSubscribed=function(t){kt.logEvent(J.RTC_SDK_CALLBACK,{sdk_callback_name:rt.ON_STREAM_SUBSCRIBED,message:"stream_id: "+r.id+". uid: "+r.uid}),r.stream=t.stream,kt.debug("peerConnection.onaddstream Stream subscribed stream",r.stream),r.player?(kt.warn("重置播放器中的音/视频流..."),r.player.updateSrcObject(r)):r.emit(M.SUBSCRIED),r.switchStreamStatus()},r.oniceconnectionstatechange=function(t){var e=t.toUpperCase(),n={pc_session_id:r.getConnectionId(),stream_id:r.id,stream_user_id:r.uid,direction:r.isLocal()?"up":"down",ice_state:t};switch(kt.logEvent(J.RTC_ICE,n),e){case a.COMPLETED:case a.CONNECTED:r.state=I.SUCCESS,kt.logEvent(r.isLocal()?J.RTC_PUBLISH:J.RTC_SUBSCRIBE,n);break;case a.CLOSED:r.state===I.SUCCESS&&(r.state=I.FAILED);break;case a.FAILED:case a.DISCONNECTED:kt.error("stream ice failed. state:",t,"streamId:",r.id)}},Wt()!==U.FIREFOX&&(r.videoProfile=C.V480P_1),r}var bn=(hn(vn,ln=Qe),vn.prototype.init=function(){return fn(this,void 0,void 0,function(){var e,n,r,i,o;return mn(this,function(t){switch(t.label){case 0:return e=gn(this.videoProfile),n=e.videoSize,r=void 0===n?[]:n,i=e.videoFrameRate,o=void 0===i?[]:i,[4,ln.prototype.createLocalStream.call(this,r,o)];case 1:return t.sent(),[2]}})})},vn.prototype.getConnectionId=function(){var t;return null===(t=this.connection)||void 0===t?void 0:t.sessionId},vn.prototype.getAudioLevel=function(){var t=this.getCurrentTimeDomainData(),e=0;return t.forEach(function(t){e=Math.max(e,Math.abs(t-128))}),e/128},vn.prototype.setVideoProfile=function(t){if(!ot[t])throw new Error(t+" 不支持");this.videoProfile=t},vn.prototype.getVideoProfile=function(){return this.videoProfile},vn.prototype.publish=function(i){return fn(this,void 0,void 0,function(){var e,n,r;return mn(this,function(t){switch(t.label){case 0:return e=this.createSdpConstraints("relay",i),[4,this.createLocalStreamConnection(e)];case 1:return n=t.sent(),r=this.addFakeCandidateIfNone(this.addPliRelay(n)),e.sdpInfo=r,e.streamId=this.id,e.eventSessionId=this.connection.sessionId,e.pc_session_id=this.connection.sessionId,[2,e]}})})},vn.prototype.subscribe=function(i){return fn(this,void 0,void 0,function(){var e,n,r;return mn(this,function(t){switch(t.label){case 0:return e={streamId:this.id,audio:this.hasAudio(),video:this.hasVideo(),browser:Wt(),metadata:i.metadata,muteStream:i.muteStream,transportType:i.transportType||void 0,config:{enableMediaType:this.getEnableMediaType()}},[4,this.createRemoteStreamConnection(e)];case 1:return n=t.sent(),r=this.addFakeCandidateIfNone(n),e.sdpInfo=r,e.eventSessionId=this.connection.sessionId,e.pc_session_id=this.connection.sessionId,e.streamUserId=this.uid,[2,e]}})})},vn.prototype.addFakeCandidateIfNone=function(t){if(t.sdp.includes("a=candidate"))return t;var e="a=candidate:0 1 udp 0 0.0.0.0 9 typ host",n=t.sdp.replace(/(a=rtcp:9.*\r\n)/,"$1"+e+"\r\n");return new RTCSessionDescription({sdp:n,type:t.type})},vn.prototype.addPliRelay=function(t){var e=t.sdp.split("\r\n");e.splice(4,0,"a=pli-relay");var n=e.join("\r\n");return new RTCSessionDescription({sdp:n,type:t.type})},vn.prototype.createLocalStreamConnection=function(r){return fn(this,void 0,void 0,function(){var e,n;return mn(this,function(t){switch(t.label){case 0:return this.connection&&this.connection.close&&this.connection.close(),this.connection=Be.createConnection(this.getConnectionOptions(r)),this.connection.open(),this.connection.addStream(this.stream),this.connection.oniceconnectionstatechange=this.oniceconnectionstatechange,e=Date.now(),[4,this.connection.createOffer()];case 1:return n=t.sent(),kt.logEvent(J.RTC_CREATE_OFFER,{pc_session_id:this.getConnectionId(),stream_id:this.id,stream_user_id:this.uid,direction:this.isLocal()?"up":"down",elapse:Date.now()-e}),[2,n]}})})},vn.prototype.getConnectionOptions=function(t,e){return void 0===e&&(e=!1),{audio:t.audio&&this.hasAudio(),video:t.video&&this.hasVideo(),maxAudioBW:t.maxAudioBW,maxVideoBW:t.maxVideoBW,limitMaxAudioBW:t.maxAudioBW,limitMaxVideoBW:t.maxVideoBW,iceServers:t.iceServers,forceTurn:t.forceTurn}},vn.prototype.createSdpConstraints=function(t,e){return{state:t,audio:this.hasAudio(),video:this.hasVideo(),screen:!1,attributes:this.getAttributes(),metadata:e.metadata,muteStream:e.muteStream,customData:e.customData,transportType:e.transportType||void 0,minVideoBW:e.minVideoBW,scheme:e.scheme}},vn.prototype.play=function(t){ln.prototype.play.call(this,t),this.reporter.startRecord(this)},vn.prototype.stop=function(){ln.prototype.stop.call(this),this.reporter.stopRecord()},vn.prototype.destroy=function(){ln.prototype.destroy.call(this),this.connection&&(this.connection.close(),this.connection=null)},vn.prototype.processAnswer=function(e){var n;return fn(this,void 0,void 0,function(){return mn(this,function(t){switch(t.label){case 0:return kt.logEvent(J.RTC_RECV_ANSWER,{stream_id:this.id,stream_user_id:this.uid,direction:this.isLocal()?"up":"down",pc_session_id:this.getConnectionId()}),[4,null===(n=this.connection)||void 0===n?void 0:n.processAnswer(e)];case 1:return t.sent(),[2]}})})},vn.prototype.getPeerConnection=function(){return this.connection},vn.prototype.getCurrentTimeDomainData=function(){this.setMediaStreamSource();var t=new Uint8Array(2048);return this.analyserNode&&this.analyserNode.getByteTimeDomainData(t),t},vn.prototype.setMediaStreamSource=function(){this.analyserNode||(this.stream?(this.audioContext=new AudioContext,this.audioSource=this.audioContext.createMediaStreamSource(this.stream),this.analyserNode=this.audioContext.createAnalyser(),this.audioSource.connect(this.analyserNode)):kt.warn("no has stream",this.id))},vn.prototype.getCommonLogParams=function(){return{stream_id:this.id||"",stream_user_id:this.uid||"",media_from:"microphone",media_type:"audio",direction:this.isLocal()?"up":"down",session_id:this.sessionId,stream_attempts:this.attempts||0,pc_session_id:this.getConnectionId()}},vn);function En(){this.speakRecord={},this.curCount=0,this.round=60,this.volumeBenchmark=10,this.speakTimes={}}var Sn,wn=new(En.prototype.sortUserVolume=function(t){var e=this;t.forEach(function(t){return{volume:t.volume>=e.volumeBenchmark?t.volume:0,userId:t.userId}}),t.sort(function(t,e){return e.volume-t.volume});var n=t[0].volume,r=1;t.forEach(function(t){t.volume<n&&(r++,n=t.volume),t.rank=r})},En.prototype.setVolumeBenchmark=function(t){this.volumeBenchmark=t},En.prototype.sort=function(t){var s=this,a=this.curCount,c=!1;if(t.forEach(function(t){var e=t.userId,n=t.volume;s.speakRecord[e]=s.speakRecord[e]||[];var r=s.speakRecord[e],i=n>=s.volumeBenchmark;i&&(c=!0),r[a]=i;var o=r.reduce(function(t,e){return e?t+1:t},0);s.speakTimes[e]=o}),this.curCount=++a%this.round,!c)return[];this.sortUserVolume(t);var e=[];return t.forEach(function(t){e.push({userId:t.userId,weight:Math.log(s.speakTimes[t.userId]||1)/Math.log(2)+2/(t.rank||1)})}),e.sort(function(t,e){return e.weight-t.weight}),e},En),In=(Sn=function(t,e){return(Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Sn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Tn=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Cn=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},_n=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};function Rn(t,e){return Date.now()-t<e}function An(t){t.state!==I.IDLE&&t.state!==I.SUCCESS&&t.state!==I.CLOSED&&(t.pubOrSubStartTime&&Rn(t.pubOrSubStartTime,5e3)||(t.state=I.FAILED))}function Nn(t){if(t.state!==I.FAILED)return!1;var e=t.attempts||0;return!(3<e&&t.pubOrSubStartTime&&Rn(t.pubOrSubStartTime,5e3))&&(t.attempts=e+1,!0)}function On(t){return t.state===I.SUCCESS&&(!t.isAllActionsFinished()&&(!t.pubOrSubStartTime||!Rn(t.pubOrSubStartTime,2e3)))}function kn(r,i){return function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.args?r.apply(i,t.args):r.apply(i,_n([t],e))}}function Dn(t,e){return!(!e||!t||t.getConnectionId()!==e.eventSessionId)||(kt.warn("signal message is expired. cause stream:",t," response:",e),!1)}wn.setVolumeBenchmark(5);var Pn,Mn=(In(Ln,Pn=Ct),Ln.prototype.setRoomState=function(t){var e;this.state!==t&&(e=this.state,this.state=t,this.emit(f.STATE_CHANGE,{preState:e,state:this.state}))},Ln.prototype.connect=function(t,e){void 0===e&&(e={}),kt.debug("room connect::",t,e),this.socket.connect(t,e)},Ln.prototype.join=function(n,r,i){return void 0===i&&(i={}),Tn(this,void 0,void 0,function(){var e=this;return Cn(this,function(t){switch(t.label){case 0:return kt.debug("room join:",n),this.connect(r,i),this.token=n,this.sessionId=Object(ct.default)(),this.setRoomState(u.CONNECTING),window.clearInterval(this.streamCheckInterval),this.streamCheckInterval=window.setInterval(function(){return e.checkAllStreams(!0)},2e3),[4,this.sendRoomToken(y.JOIN_ROOM,n,!1)];case 1:return t.sent(),[2]}})})},Ln.prototype.rejoin=function(e){return Tn(this,void 0,void 0,function(){return Cn(this,function(t){switch(t.label){case 0:return this.token=e,[4,this.sendRoomToken(y.RECONNECTED,e,!0)];case 1:return t.sent(),[2]}})})},Ln.prototype.reconnectAndJoin=function(e,n){return void 0===n&&(n={}),Tn(this,void 0,void 0,function(){return Cn(this,function(t){switch(t.label){case 0:return this.socket.connect(e,n),[4,this.sendRoomToken(y.RECONNECTED,this.token,!0)];case 1:return t.sent(),[2]}})})},Ln.prototype.socketOnReplyMessage=function(t){var e=this.remoteStreams[t.peerStreamId||t.streamId]||this.localStreams[t.streamId];kt.debug("socketOnReplyMessage, messageType: "+(t.message&&t.message.type)+". arg::",t,"stream::",e),Dn(e,t)&&"answer"===t.message.type&&e.processAnswer(t.message)},Ln.prototype.socketOn=function(){this.socket.on(v.SIGNAL_MESSAGE_RELAY,kn(this.socketOnReplyMessage,this)),this.socket.on(v.ON_ADD_STREAM,kn(this.socketOnAddStream,this)),this.socket.on(v.ON_REMOVE_STREAM,kn(this.socketOnRemoveStream,this)),this.socket.on(v.STREAM_FAILED,kn(this.socketOnStreamFailed,this)),this.socket.on(v.ON_UPDATE_STREAM_ATTRIBUTES,kn(this.socketOnUpdateStreamAttributes,this)),this.socket.on(v.ON_UPDATE_USER_ATTRIBUTES,kn(this.socketOnUpdateUserAttributes,this)),this.socket.on(v.ON_CUSTOM_MESSAGE,kn(this.socketOnCustomMessage,this)),this.socket.on(v.USER_CONNECTION,kn(this.socketOnUserConnection,this)),this.socket.on(v.USER_DISCONNECTION,kn(this.socketOnUserDisconnection,this)),this.socket.on(v.TOKEN_FAILED,kn(this.socketOnTokenFailed,this)),this.socket.on(v.SIGNAL_SERVER_FAILED,kn(this.socketOnSignalServerFailed,this)),this.socket.on(v.DISCONNECT,kn(this.socketOnDisconnect,this)),this.socket.on(v.RECONNECTING,kn(this.socketOnConnecting,this)),this.socket.on(v.RECONNECTED,kn(this.socketOnReconnected,this))},Ln.prototype.sendRoomToken=function(i,o,s){return Tn(this,void 0,void 0,function(){var e,n,r=this;return Cn(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.socket.sendToken(i,o)];case 1:return e=t.sent(),kt.debug("sendRoomToken "+i+" success. response:",e),this.state=u.CONNECTED,e.iceServers&&e.iceServers[0]&&e.iceServers[0].url?this.iceServers=[]:this.iceServers=e.iceServers,s?(kt.debug("【新信令服务器】此房间原有发布流总数："+e.streams.length),this.socketOnReconnected(e)):(kt.debug("此房间原有发布流总数："+e.streams.length),this.updateRemoteUsers(e.clientsDetail),setTimeout(function(){return e.clientsDetail.forEach(function(t){return r.socketOnUserConnection(t)})},0),setTimeout(function(){return e.streams.forEach(function(t){return r.socketOnAddStream(t)})},0)),[3,3];case 2:throw n=t.sent(),kt.error("process token response error in room",n),n;case 3:return[2]}})})},Ln.prototype.socketOnConnecting=function(t){kt.debug("socketOnConnecting"),this.state===u.CONNECTED&&(this.state=u.CONNECTING)},Ln.prototype.socketOnDisconnect=function(t){kt.logEvent(J.RTC_SDK_CALLBACK,{sdk_callback_name:rt.ON_CONNECTION_INTERRUPTED}),kt.debug("socketOnDisconnect:",t),this.state!==u.DISCONNECTED&&this.leave(),t&&t.code},Ln.prototype.socketOnSignalServerFailed=function(t){kt.debug("socketOnSignalServerFailed:",t),this.emit(f.SIGNAL_SERVER_FAILED)},Ln.prototype.socketOnTokenFailed=function(t){kt.debug("socketOnTokenFailed:",t),this.emit(f.TOKEN_FAILED)},Ln.prototype.socketOnUserDisconnection=function(t){var e;return kt.debug("socketOnUserDisconnection:",t),delete this.remoteUsers[t.clientId],t.clientId===(null===(e=this.token)||void 0===e?void 0:e.params.userId)&&"userDuplicateLogin"===t.tag?this.emit(f.CLIENT_BANNED):this.userLeave(t)},Ln.prototype.socketOnCustomMessage=function(t){kt.debug("socketOnCustomMessage:",t),this.emit(f.CUSTOM_MESSAGE,{data:t})},Ln.prototype.userAudioEnabled=function(t,e,n){this.emit(f.AUDIO_ENABLE,{enable:t,streamId:e,userId:n})},Ln.prototype.socketOnUpdateUserAttributes=function(e){var n=this;kt.debug("socketOnUpdateUserAttributes:",e);var t=this.remoteUsers[e.clientId];t?(Object.assign(t.attributes,e.attributes),kt.warn("socketOnUpdateUserAttributes",e,t.attributes)):(this.socketOnUserConnection(e),kt.error("socketOnUpdateUserAttributes not found user, so add user",e)),Object.values(this.remoteStreams).forEach(function(t){t.uid===e.clientId&&("boolean"==typeof e.attributes.enableaudio&&n.userAudioEnabled(e.attributes.enableaudio,t.id,t.uid),"boolean"==typeof e.attributes.enablevideo&&n.emit(f.VIDEO_ENABLE,{enable:e.attributes.enablevideo,streamId:t.id,userId:t.uid}))})},Ln.prototype.socketOnUpdateStreamAttributes=function(t){var e=this.remoteStreams[t.streamId]||this.localStreams[t.streamId];kt.debug("socketOnUpdateStreamAttributes:",t,e),e?(e.updateAttributesByServerEnd(t.attributes),!1===t.attributes.audiostream||!1===t.attributes.localaudio?this.userAudioEnabled(!1,e.id,e.uid):!0!==t.attributes.audiostream&&!0!==t.attributes.localaudio||this.userAudioEnabled(!0,e.id,e.uid),!1===t.attributes.videostream||!1===t.attributes.localvideo?this.emit(f.VIDEO_ENABLE,{enable:!1,streamId:e.id,userId:e.uid}):!0!==t.attributes.videostream&&!0!==t.attributes.localvideo||this.emit(f.VIDEO_ENABLE,{enable:!0,streamId:e.id,userId:e.uid})):kt.warn("client has not received this stream:",t.streamId)},Ln.prototype.socketOnStreamFailed=function(t){var e;t.streamId&&(kt.error("[signal on] streamFailed",t.streamId,t.type,this.state.toString(),t),Dn(e=("publish"===t.type?this.localStreams:this.remoteStreams)[t.streamId],t)&&(t.message&&400<=t.message.code&&t.message.code<500?e.state=I.CLOSED:this.onStreamFailed(e)))},Ln.prototype.socketOnRemoveStream=function(t){kt.warn("socketOnRemoveStream. streamId: "+t.streamId+". stream:",t),kt.logEvent(J.RTC_SDK_CALLBACK,{sdk_callback_name:rt.ON_STREAM_REMOVE});var e=this.localStreams[t.streamId];e?e.state===I.SUCCESS?this.onStreamFailed(e):kt.warn("not process: local stream removed by server"):this.removeRemoteStream(t.streamId)},Ln.prototype.socketOnAddStream=function(t){var e,n;kt.debug("socketOnAddStream. streamId: "+t.streamId+". ready:"+t.isReady+". stream:",t),t.isReady&&(this.remoteStreams[t.streamId]?kt.warn("this remote stream has in remoteStreams",t.streamId):(t.clientId!==(null===(e=this.token)||void 0===e?void 0:e.params.userId)&&(n=new bn({id:t.streamId,uid:t.clientId,local:!1,audio:t.audio,video:t.video,data:t.data,screen:t.screen,attributes:t.attributes,customData:t.customData,sessionId:this.sessionId}),this.remoteStreams[t.streamId]=n),kt.logEvent(J.RTC_SDK_CALLBACK,{sdk_callback_name:rt.ON_STREAM_ADD,message:"stream_id: "+t.streamId}),this.emit(f.STREAM_ADD,{streamId:t.streamId,userId:t.clientId}),this.emit(f.VIDEO_ENABLE,{enable:t.video,streamId:t.streamId,userId:t.clientId}),this.userAudioEnabled(t.audio,t.streamId,t.clientId)))},Ln.prototype.userJoin=function(t){kt.logEvent(J.RTC_SDK_CALLBACK,{sdk_callback_name:rt.ON_USER_JOINED,message:"uid: "+t.clientId}),this.emit(f.USER_CONNECTION,{userId:t.clientId})},Ln.prototype.userLeave=function(t){kt.logEvent(J.RTC_SDK_CALLBACK,{sdk_callback_name:rt.ON_USER_OFFLINE,message:"uid: "+t.clientId}),this.emit(f.USER_DISCONNECTION,{userId:t.clientId,tag:t.tag||""})},Ln.prototype.socketOnUserConnection=function(t){kt.debug("socketOnUserConnection::",t),t.attributes=t.attributes||{},this.remoteUsers[t.clientId]=t,this.userJoin(t)},Ln.prototype.updateRemoteUsers=function(t){var n=this;void 0===t&&(t=[]),t.forEach(function(t){n.remoteUsers[t.clientId]||(n.remoteUsers[t.clientId]=t,n.userJoin(t))}),Object.values(this.remoteUsers).forEach(function(e){t.filter(function(t){return t.clientId===e.clientId}).length<1&&(delete n.remoteUsers[e.clientId],setTimeout(function(){n.userLeave(e)},0))})},Ln.prototype.socketOnReconnected=function(t){var n=this;kt.debug("socketOnReconnected response::",t,"remote stream ids",Object.keys(this.remoteStreams),"local stream ids:",Object.keys(this.localStreams)),this.updateRemoteUsers(t.clientsDetail),this.setRoomState(u.CONNECTED);var e=[],r=[],i=t.streams||[];i.forEach(function(t){n.remoteStreams[t.streamId]||e.push(t)}),Object.values(this.remoteStreams).forEach(function(e){i.filter(function(t){return t.streamId===e.id}).length<1&&r.push(e)}),kt.debug("new stream add",e),kt.debug("stream remove",r),r.forEach(function(t){return n.removeRemoteStream(t.id)}),e.forEach(function(t){return n.socketOnAddStream(t)});var o=this.socket.clientId,s=i.filter(function(t){return t.clientId===o});kt.debug("responsePublishStreams",s);var a=s.filter(function(t){return!n.localStreams[t.id]});kt.debug("【需要unpublish】unknownPublishStreams",a);var c=Object.keys(this.localStreams).filter(function(e){return!s.find(function(t){return t.streamId===e})});kt.debug("【需要重新publish】needPublishStreamIds",c),a.forEach(function(t){return n.socket.sendMessage(y.UNPUBLISH,{streamId:t.streamId})}),c.forEach(function(t){var e=n.localStreams[t];n.publishStream(e,e.getLocalOptions())})},Ln.prototype.removeRemoteStream=function(t){var e=this.remoteStreams[t];delete this.remoteStreams[t],e&&(e.state=I.CLOSED,e.destroy(),this.emit(f.STREAM_REMOVE,{streamId:t,userId:e.uid}))},Ln.prototype.onStreamFailed=function(t){var e=this;t&&(t.state=I.FAILED,kt.error("onStreamFailed",t.id),setTimeout(function(){return e.checkAllStreams()}))},Ln.prototype.caculateActiveSpeakers=function(t){var n=[];t.forEach(function(t){var e=~~(1e3*(t.getVolumes().instant||0));n.push({userId:t.uid,volume:e})});var e=wn.sort(n);if(e.length<1)return this.activeUserId="",void this.emit(f.ACTIVE_USER_CHANGE,{userId:this.activeUserId});e[0]&&e[0].userId!==this.activeUserId&&(this.activeUserId=e[0].userId,this.emit(f.ACTIVE_USER_CHANGE,{userId:this.activeUserId}))},Ln.prototype.checkAllStreams=function(t){var e=this;void 0===t&&(t=!1);var n=Object.values(this.localStreams),r=Object.values(this.remoteStreams);t&&(n.forEach(An),r.forEach(An),this.caculateActiveSpeakers(_n(n,r))),this.socket&&this.socket.getState()===E.CONNECTED?(n.forEach(function(r){return Tn(e,void 0,void 0,function(){var e,n;return Cn(this,function(t){switch(t.label){case 0:if(!Nn(r))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),e=r.id,[4,this.publishStream(r,r.getLocalOptions())];case 2:return t.sent(),this.emit(f.STREAM_REMOVE,{userId:r.uid,streamId:e}),[3,4];case 3:return n=t.sent(),kt.logError("publishStream retry failed",{code:n.code,message:n.message}),[3,4];case 4:return[2]}})})}),r.forEach(function(t){Nn(t)&&e.subscribeStream(t,t.getRemoteOptions())}),r.forEach(function(t){On(t)&&e.updateSubscribe(t,t.getEnableMediaType())})):kt.debug("skip checkAllStreams. websocket state:",this.socket.getState())},Ln.prototype.updateSubscribe=function(n,r){return Tn(this,void 0,void 0,function(){var e;return Cn(this,function(t){switch(t.label){case 0:return n.setEnableMediaType(r),n.pubOrSubStartTime=Date.now(),kt.debug("[API INNER] call updateSubscribe..."),e={streamList:[n.id],config:{enableMediaType:{video:r.video,audio:r.audio}}},n.setUpdateSubscribeState(x.COMMITING),[4,this.socket.sendMessage(y.UPDATE_SUBSCRIBE,e)];case 1:return t.sent(),n.setUpdateSubscribeState(x.FINISHED),[2]}})})},Ln.prototype.updateLocalStream=function(t,e){var n=t.streamId;n||kt.error("Error when publishing the stream",t,e),delete this.localStreams[e.id],e.id=n,this.localStreams[n]=e,kt.debug("Stream published. old stream id: "+e.id+". new stream id: "+n,t,this.localStreams)},Ln.prototype.publish=function(s,a){return Tn(this,void 0,void 0,function(){var e,n,r,i,o;return Cn(this,function(t){switch(t.label){case 0:return s.uid=this.socket.clientId,e=this.options,n=e.defaultVideoBW,r=e.maxVideoBW,a.maxVideoBW=a.maxVideoBW||n,r&&a.maxVideoBW>r&&(a.maxVideoBW=r),void 0===a.minVideoBW&&(a.minVideoBW=0),n&&a.minVideoBW>n&&(a.minVideoBW=n),s&&s.isLocal()?[4,s.publish(a)]:[3,3];case 1:return i=t.sent(),[4,this.socket.sendMessage(y.PUBLISH,i)];case 2:return(o=t.sent()).eventSessionId!==s.getConnectionId()?(kt.warn("publish signal message is expired",o,s),[2]):(this.updateLocalStream(o,s),[3,4]);case 3:throw new Error("publishing stream is not local ");case 4:return[2]}})})},Ln.prototype.publishStream=function(i,o){return Tn(this,void 0,void 0,function(){var e,n,r=this;return Cn(this,function(t){switch(t.label){case 0:return(kt.debug("publish stream in room: "+this.roomId+", streamId: "+i.id),i.getMediaStream())?(kt.logEvent(J.RTC_SDK_API_CALL,{sdk_api_name:et.PUBLISH}),e=Date.now(),[4,new Promise(function(t,e){i.state=I.CONNECTING,i.pubOrSubStartTime=Date.now(),setTimeout(function(){i.state===I.SUCCESS?t():e(new Error("publish timeout"))},r.streamTimeout),r.publish(i,o).then(t,e)})]):[2,Promise.reject(new Error("can not publish null stream"))];case 1:return n=t.sent(),kt.logEvent(J.RTC_SDK_CALLBACK,{sdk_callback_name:rt.ON_STREAM_PUBLISH_SUCCEED,elapse:Date.now()-e}),[2,n]}})})},Ln.prototype.subscribe=function(s,a){return Tn(this,void 0,void 0,function(){var e,n,r,i,o=this;return Cn(this,function(t){switch(t.label){case 0:if(!s||s.isLocal())return[3,8];if(!s.hasMedia())return[3,6];s.hasVideo()||(a.video=!1),s.hasAudio()||(a.audio=!1),t.label=1;case 1:return t.trys.push([1,4,,5]),s.off(M.SUBSCRIED),s.on(M.SUBSCRIED,function(){o.emit(f.STREAM_SUBSCRIBED,{streamId:s.id,userId:s.uid})}),[4,s.subscribe(a)];case 2:return e=t.sent(),[4,this.socket.sendMessage(y.SUBSCRIBE,e)];case 3:return n=t.sent(),Dn(s,n)?[3,5]:[2];case 4:return r=t.sent(),kt.error("[inner subscribe error]",r),this.socket.getState()===E.CONNECTED&&400<=r.code&&r.code<500?s.state=I.CLOSED:(s.state=I.FAILED,kt.error("stream failed because subscribe error",r)),[3,5];case 5:return[3,7];case 6:throw kt.warn("There's nothing to subscribe to",s),new Error("Nothing to subscribe to");case 7:return kt.debug("Subscribing to: "+s.id),[3,9];case 8:throw i="Error on subscribe",s?s.isLocal()&&(i="Cannot subscribe to local stream, you should subscribe to the remote version of your local stream: "+s.id):i="Cannot subscribe to invalid stream",new Error(i);case 9:return[2]}})})},Ln.prototype.subscribeStream=function(r,i){return Tn(this,void 0,void 0,function(){var n=this;return Cn(this,function(t){return kt.logEvent(J.RTC_SDK_API_CALL,{sdk_api_name:et.SUBSCRIBE_STREAM,stream_id:r.id,stream_user_id:r.uid}),[2,new Promise(function(t,e){r.setRemoteOptions(i),kt.debug("[API INNER] call subscribe..."),r.state=I.CONNECTING,r.pubOrSubStartTime=Date.now(),setTimeout(function(){r.state===I.SUCCESS?t():e(new Error("subscribe timeout"))},5e3),n.subscribe(r,i).then(t,e)})]})})},Ln.prototype.unpublishStream=function(n,t){return void 0===t&&(t=Kt),Tn(this,void 0,void 0,function(){var e;return Cn(this,function(t){switch(t.label){case 0:if(kt.logEvent(J.RTC_SDK_API_CALL,{sdk_api_name:et.UNPUBLISH,stream_id:n.id,stream_user_id:n.uid}),!n)throw new Error("can not unpublish null stream");return(n.state=I.CLOSED,n&&n.isLocal())?(e=n.id,kt.debug("unpublish",e),delete this.localStreams[n.id],n.destroy(),!e||e.startsWith(this.TEMP_STREAM_ID_PREFIX)?[3,2]:[4,this.socket.sendMessage(y.UNPUBLISH,{streamId:e})]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,4];case 3:throw new Error("Cannot unpublish, stream does not exist or is not local");case 4:return[2]}})})},Ln.prototype.unsubscribeStream=function(n){return Tn(this,void 0,void 0,function(){var e;return Cn(this,function(t){switch(t.label){case 0:if(!n)throw new Error("can not unsubscribe null stream");return(kt.logEvent(J.RTC_SDK_API_CALL,{sdk_api_name:et.UNSUBSCRIBE_STREAM,stream_id:n.id,stream_user_id:n.uid}),n.state=I.CLOSED,!n||n.isLocal())?[3,2]:(e=n.id,kt.debug("unsubscribe",e),n.destroy(),[4,this.socket.sendMessage(y.UNSUBSCRIBE,{streamId:e})]);case 1:return t.sent(),[3,3];case 2:throw new Error("Cannot unsubscribe, stream does not exist or is local");case 3:return[2]}})})},Ln.prototype.leave=function(){return Tn(this,void 0,void 0,function(){var e,n=this;return Cn(this,function(t){switch(t.label){case 0:kt.debug("leave room"),this.state=u.DISCONNECTED,clearInterval(this.streamCheckInterval),Object.values(this.localStreams).forEach(function(t){n.unpublishStream(t),n.emit(f.STREAM_REMOVE,{streamId:t.id,userId:t.uid})}),this.localStreams={},Object.values(this.remoteStreams).forEach(function(t){t&&(n.emit(f.STREAM_REMOVE,{streamId:t.id,userId:t.uid}),t.destroy())}),this.remoteStreams={},this.remoteUsers={},t.label=1;case 1:return t.trys.push([1,3,,4]),kt.logEvent(J.RTC_LEAVE_ROOM,{}),[4,this.socket.sendMessage(y.LEAVE_ROOM,{sessionId:this.token.sessionId,Authorization:this.token.Authorization})];case 2:return t.sent(),this.socket.disconnect(),[3,4];case 3:return e=t.sent(),kt.error("socket.disconnect() error",e),[3,4];case 4:return this.sessionId="",[2]}})})},Ln);function Ln(t){var e=Pn.call(this)||this;return e.localStreams={},e.remoteStreams={},e.remoteUsers={},e.iceServers=[],e.state=u.DISCONNECTED,e.socket=new fe,e.streamTimeout=5e3,e.options={},e.streamCheckInterval=0,e.roomId="",e.token=null,e.TEMP_STREAM_ID_PREFIX="__temp_stream_id__",e.sessionId="",e.activeUserId="",e.options=t,e.socketOn(),e}var xn,Bn,Un=(xn=function(t,e){return(xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}xn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Fn=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Vn=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}};function Gn(){var t=null!==Bn&&Bn.apply(this,arguments)||this;return t.timer=0,t.localStream=null,t}var jn=(Un(Gn,Bn=Mn),Gn.prototype.createStream=function(t){return new bn(t)},Gn.prototype.getLocalStream=function(n){return Fn(this,void 0,void 0,function(){var e;return Vn(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=Date.now(),kt.debug("getLocalStream.",n),this.localStream=this.createStream({audio:n.audio||!1,video:!1,uid:n.uid,customData:{},attributes:{},local:!0,screen:!1,data:{},sessionId:this.sessionId}),[4,this.localStream.init()];case 1:return t.sent(),kt.logEvent(J.RTC_CREATE_MEDIA,{media_type:n.video?"video":"audio",elapse:Date.now()-e}),[2,this.localStream];case 2:throw t.sent(),this.localStream=null,this.emit(f.ACCESS_DENIED),$t(d.ACCESS_DENIED,"access denied");case 3:return[2]}})})},Gn.prototype.freeLocalStream=function(){var t;null!==(t=this.localStream)&&void 0!==t&&t.destroy(),this.localStream=null},Gn.prototype.join=function(n,r,i){return void 0===i&&(i={}),Fn(this,void 0,void 0,function(){var e;return Vn(this,function(t){switch(t.label){case 0:if(kt.logEvent(J.RTC_SDK_API_CALL,{sdk_api_name:et.JOIN_ROOM}),!this.localStream)throw $t(d.NO_LOCAL_STREAM,"need getLocalStream first");return e=Date.now(),[4,Bn.prototype.join.call(this,n,r,i)];case 1:return t.sent(),kt.logEvent(J.RTC_JOIN_ROOM,{elapse:Date.now()-e}),[4,this.publishStream(this.localStream,{audio:n.userAttributes.enableaudio,video:n.userAttributes.enablevideo})];case 2:return t.sent(),[2]}})})},Gn.prototype.attach=function(n,r){return Fn(this,void 0,void 0,function(){var e;return Vn(this,function(t){return kt.debug("attach streamId:"+n+". elementId:"+r,this.localStreams,this.remoteStreams),(e=this.localStreams[n])||(e=this.remoteStreams[n]).getMediaStream()?e.play(r):(this.subscribeStream(e,{audio:!0,video:!1}),e.on(M.SUBSCRIED,function(){e.play(r)})),[2]})})},Gn.prototype.detach=function(n){return Fn(this,void 0,void 0,function(){var e;return Vn(this,function(t){switch(t.label){case 0:return kt.debug("detach streamId:"+n+"."),(e=this.localStreams[n])&&e.stop(),(e=this.remoteStreams[n])&&e.getMediaStream()?[4,this.unsubscribeStream(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Gn.prototype.updateStreamAttributes=function(n,r){return Fn(this,void 0,void 0,function(){var e;return Vn(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.socket.sendMessage(y.UPDATE_STREAM_ATTRIBUTES,{streamId:n,attributes:r})];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),kt.error("updateStreamAttributes error::",e),[3,3];case 3:return[2]}})})},Gn.prototype.enableAudio=function(){var t=this;kt.logEvent(J.RTC_SDK_API_CALL,{sdk_api_name:et.ENABLE_AUDIO}),Object.values(this.localStreams).forEach(function(e){return Fn(t,void 0,void 0,function(){return Vn(this,function(t){switch(t.label){case 0:return[4,this.updateStreamAttributes(e.id,{audiostream:!0})];case 1:return t.sent(),kt.debug("enableAudio"),e.switchAudio(!1),[2]}})})})},Gn.prototype.disableAudio=function(){var t=this;kt.logEvent(J.RTC_SDK_API_CALL,{sdk_api_name:et.DISABLE_AUDIO}),Object.values(this.localStreams).forEach(function(e){return Fn(t,void 0,void 0,function(){return Vn(this,function(t){switch(t.label){case 0:return[4,this.updateStreamAttributes(e.id,{audiostream:!1})];case 1:return t.sent(),kt.debug("disableAudio"),e.switchAudio(!0),[2]}})})})},Gn.prototype.leave=function(){return Fn(this,void 0,void 0,function(){return Vn(this,function(t){switch(t.label){case 0:return kt.logEvent(J.RTC_SDK_API_CALL,{sdk_api_name:et.LEAVE_ROOM}),this.localStream=null,[4,Bn.prototype.leave.call(this)];case 1:return t.sent(),[2]}})})},Gn);function Hn(){if(window.navigator.userAgent.match(/ edge\//i))return!1;var t=Wn(),e=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket,i=!!e&&!!n&&!!r,o=!1;return kt.warn("checkSystemRequirements. isAPISupport:"+i+". BrowserInfo:",t.getBrowserInfo()),t.isChrome()&&58<=t.getBrowserVersion()&&"iOS"!==t.getBrowserOS()&&(o=!0),t.isFireFox()&&56<=t.getBrowserVersion()&&(o=!0),t.isOpera()&&45<=t.getBrowserVersion()&&(o=!0),t.isSafari()&&11<=t.getBrowserVersion()&&(o=!0),t.isSupportedPC()||t.isSupportedMobile()||(o=!1),i&&o}function Wn(){var t,e={},n=function(){var t=l();return t.name&&"Chrome"===t.name},r=function(){var t=l();return t.name&&"Safari"===t.name},i=function(){var t=l();return t.name&&"Firefox"===t.name},o=function(){var t=l();return t.name&&"OPR"===t.name},s=function(){var t=l();return t.name&&"MQQBrowser"===t.name},a=function(){var t=l();return t.name&&"MicroMessenger"===t.name},c=function(){var t=p();return"Linux"===t||"Mac OS X"===t||"Mac OS"===t||-1!==(t||[]).indexOf("Windows")},u=function(){var t=p();return"Android"===t||"iOS"===t},d=function(){return l().version},p=function(){return l().os},l=(t=function(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return{name:"IE",version:(t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""};"Chrome"===n[1]&&null!=(t=e.match(/(OPR(?=\/))\/?(\d+)/i))&&(n=t),"Chrome"===n[1]&&null!=(t=e.match(/(mqqbrowser(?=\/))\/?(\d+)/i))&&(n=t),"Chrome"===n[1]&&null!=(t=e.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(n=t),"Safari"===n[1]&&null!=(t=e.match(/version\/(\d+)/i))&&(n[2]=t[1]);var r,i=void 0,o=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(r in o){var s=o[r];if(s.r.test(navigator.userAgent)){i=s.s;break}}return{name:n[1],version:n[2],os:i}}(),function(){return t});return e.getBrowserInfo=l,e.getBrowserVersion=d,e.getBrowserOS=p,e.isChrome=n,e.isSafari=r,e.isFireFox=i,e.isOpera=o,e.isQQBrowser=s,e.isWeChatBrowser=a,e.isSupportedPC=c,e.isSupportedMobile=u,e}var Kn,qn,zn=new(n("K4CH").UAParser),Xn=zn.getOS(),Jn=zn.getBrowser(),Yn=(Kn=function(t,e){return(Kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Kn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Qn=function(){return(Qn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},$n=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Zn=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},tr=n("VUhV"),er=(Yn(nr,qn=Ct),nr.prototype.getTranscodeControlMessage=function(t){return{type:"transcode",action:t,transcodeMeta:this.tokenJSON&&this.tokenJSON.controlMessage&&this.tokenJSON.controlMessage.transcodeMeta||""}},nr.prototype.init=function(r){var i;return $n(this,void 0,void 0,function(){var e,n;return Zn(this,function(t){switch(t.label){case 0:switch(this.appId=r.appId,this.deviceId=r.deviceId||Object(ct.default)(),this.mode=r.mode,e=this.mode===K.PRODUCTION,n="",r.channelType){case z.CN:n=Lt.newCnLogServer;break;case z.VA:n=Lt.newVaLogServer;break;case z.CUSTOM:n=(null===(i=r.customChannelApi)||void 0===i?void 0:i.trim())||"";break;case z.NONE:}return n&&(Nt.setConfig(n,e),e&&Nt.start()),Nt.setCommonHeaders({web_os_name:Xn.name,os_version:Xn.version,browser:Jn.name,browser_version:Jn.version,rtc_sdk_version:tr.version||Lt.version,app_version:tr.version,rtc_app_id:Lt.rtc_app_id,tab_device_id:r.tabDeviceId,device_id:this.deviceId,_env_type:e?"release":"debug"}),kt.debug("init rtc client appId:"+this.appId+", deviceId:"+this.deviceId+", mode:"+this.mode),[4,this.getConfig()];case 1:return t.sent(),this.initRoom(),[2]}})})},nr.prototype.getConfig=function(){return $n(this,void 0,void 0,function(){var e,n,r;return Zn(this,function(t){switch(t.label){case 0:e={},n=Date.now(),t.label=1;case 1:return t.trys.push([1,3,,4]),r={keys:["domain","videoBandwidth"],appId:this.appId,roomId:this.roomId,userId:this.userId,deviceId:this.deviceId},kt.logEvent(J.RTC_GET_CONFIG,{type:"request",message:JSON.stringify(r)}),[4,zt(r,Jt(this.mode))];case 2:return e=t.sent(),kt.logEvent(J.RTC_GET_CONFIG,{type:"response",message:JSON.stringify(e),elapse:Date.now()-n}),[3,4];case 3:throw t.sent(),new Error("get server config error");case 4:return kt.debug("get server config success:",e),this.serverConfig=e,[2]}})})},nr.prototype.initRoom=function(){var n=this;kt.debug("initRoom"),this.room=new jn({}),Object.values(f).forEach(function(e){n.room.on(e,function(t){return e===f.STREAM_ADD&&t.userId===n.userId&&n.emit(f.STREAM_PUBLISHED,t),e===f.SIGNAL_SERVER_FAILED?n.handleSignalServerFailed(t):(e===f.CLIENT_BANNED&&n.leave(),n.emit(e,t))})})},nr.prototype.handleSignalServerFailed=function(n){return $n(this,void 0,void 0,function(){var e;return Zn(this,function(t){switch(t.label){case 0:kt.error("signalServerFailed event:",n),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,this.getConfig()];case 2:return t.sent(),[4,this.room.reconnectAndJoin({host:this.serverConfig.domain.host,path:0})];case 3:return t.sent(),[3,5];case 4:return e=t.sent(),kt.error("SIGNAL_SERVER_FAILED::",e),this.emit(f.SIGNAL_SERVER_FAILED),[3,5];case 5:return[2]}})})},nr.prototype.checkSystemRequirements=function(){return Hn()},nr.prototype.getParameterByName=function(t,e){return Xt(t,e)},nr.prototype.getLocalStream=function(e){var n;return $n(this,void 0,void 0,function(){return Zn(this,function(t){switch(t.label){case 0:return[4,null===(n=this.room)||void 0===n?void 0:n.getLocalStream(e)];case 1:return t.sent(),[2]}})})},nr.prototype.freeLocalStream=function(){var t;null!==(t=this.room)&&void 0!==t&&t.freeLocalStream()},nr.prototype.join=function(n){var r;return $n(this,void 0,void 0,function(){var e;return Zn(this,function(t){switch(t.label){case 0:if(!n||!n.roomId||!n.userId)throw new Error("roomId or userId can not empty");t.label=1;case 1:if(t.trys.push([1,3,,4]),this.roomId=n.roomId,this.userId=n.userId,!this.checkSystemRequirements())throw new Error("browser not support");if(this.hasInRoom)throw new Error("already in room");return this.hasInRoom=!0,Object.assign(this.tokenJSON,{Authorization:Yt(n.token,this.appId,n.roomId,n.userId),sessionId:this.sessionId,_userAgentIP:"",params:Qn(Qn({},this.tokenJSON.params),{appId:this.appId,roomId:n.roomId,userId:n.userId,deviceId:this.deviceId}),userAttributes:Qn(Qn({},this.tokenJSON.userAttributes),{audio:n.audio||!0})}),Nt.setCommonHeaders({room_id:n.roomId,device_id:n.userId}),[4,null===(r=this.room)||void 0===r?void 0:r.join(this.tokenJSON,{host:this.serverConfig.domain.host,path:0})];case 2:return t.sent(),[3,4];case 3:throw e=t.sent(),kt.error("join room error",e),this.hasInRoom=!1,new Error("join room error");case 4:return[2]}})})},nr.prototype.leave=function(){return $n(this,void 0,void 0,function(){var e,n;return Zn(this,function(t){switch(t.label){case 0:this.tokenJSON.controlMessage.transcodeMeta=void 0,t.label=1;case 1:return t.trys.push([1,3,,4]),this.hasInRoom=!1,[4,this.room&&this.room.leave()];case 2:return e=t.sent(),kt.debug("rtc_leave_room success",e),[3,4];case 3:throw n=t.sent(),kt.error("rtc_leave_room error",n),n;case 4:return[2]}})})},nr.prototype.attach=function(t,e){this.room.attach(t,e)},nr.prototype.detach=function(t){this.room.detach(t)},nr.prototype.enableAudio=function(){this.room.enableAudio()},nr.prototype.disableAudio=function(){this.room.disableAudio()},nr);function nr(){var t=null!==qn&&qn.apply(this,arguments)||this;return t.appId="",t.roomId="",t.userId="",t.deviceId="",t.sessionId=Object(ct.default)(),t.serverConfig={},t.room=null,t.hasInRoom=!1,t.mode=K.PRODUCTION,t.tokenJSON={controlMessage:t.getTranscodeControlMessage("started"),userAttributes:{enableaudio:!0,enablevideo:!1},sessionId:t.sessionId,Authorization:"",params:{deviceType:"web",userAgent:window.navigator.userAgent,sdkVersion:Lt.version,deviceId:t.deviceId}},t}var rr,ir,or,sr,ar,cr,ur,dr,pr,lr,hr,fr,mr,yr,gr,vr,br,Er,Sr,wr,Ir,Tr,Cr,_r,Rr,Ar,Nr,Or,kr,Dr,Pr,Mr,Lr,xr,Br,Ur,Fr,Vr,Gr,jr,Hr,Wr,Kr,qr,zr=er;(ir=rr=rr||{})[ir.UNKNOWN=0]="UNKNOWN",ir[ir.ACK_SUCCESS=1]="ACK_SUCCESS",ir[ir.TOKEN_INVALID=2]="TOKEN_INVALID",(sr=or=or||{}).USER_JOIN="USER_JOIN",sr.USER_LEAVE="USER_LEAVE",sr.VIDEO_ENABLE="VIDEO_ENABLE",sr.AUDIO_ENABLE="AUDIO_ENABLE",sr.LEAVE="LEAVE",sr.STATE_CHANGE="STATE_CHANGE",sr.HOST_MANAGE_OPERATION="HOST_MANAGE_OPERATION",sr.ACTIVE_MEETING_CHANGE="ACTIVE_MEETING_CHANGE",sr.ACCESS_DENIED="ACCESS_DENIED",sr.ACTIVE_USER_CHANGE="ACTIVE_USER_CHANGE",sr.ERROR="ERROR",sr.INNER_ERROR="INNER_ERROR",(cr=ar=ar||{})[cr.HOST_TRANSFER=0]="HOST_TRANSFER",(dr=ur=ur||{})[dr.UNKNOWN=0]="UNKNOWN",dr[dr.BUSY=1]="BUSY",dr[dr.REFUSE=2]="REFUSE",dr[dr.RING_TIMEOUT=3]="RING_TIMEOUT",dr[dr.KICK_OUT=4]="KICK_OUT",dr[dr.LEAVE=5]="LEAVE",dr[dr.END=6]="END",dr[dr.OVERTIME=7]="OVERTIME",dr[dr.SDK_EXCEPTION=8]="SDK_EXCEPTION",dr[dr.TERMINAL=9]="TERMINAL",dr[dr.HEART_BEAT_STOP=10]="HEART_BEAT_STOP",(lr=pr=pr||{}).TEST="test",lr.PRODUCTION="production",lr.DEVELOPMENT="development",(fr=hr=hr||{})[fr.UNKNOWN=0]="UNKNOWN",fr[fr.PUBLIC=1]="PUBLIC",fr[fr.PRIVATE=2]="PRIVATE",(yr=mr=mr||{})[yr.UNKNOWN=0]="UNKNOWN",yr[yr.HANG_UP=1]="HANG_UP",yr[yr.CONNECTION_FAILED=2]="CONNECTION_FAILED",yr[yr.RING_TIMEOUT=3]="RING_TIMEOUT",yr[yr.SDK_EXCEPTION=4]="SDK_EXCEPTION",yr[yr.CANCEL=5]="CANCEL",yr[yr.REFUSE=6]="REFUSE",yr[yr.ACCEPT_OTHER=7]="ACCEPT_OTHER",yr[yr.TTRIAL_TIMEOUT=8]="TTRIAL_TIMEOUT",(vr=gr=gr||{})[vr.UNKNOWN=0]="UNKNOWN",vr[vr.FROM_USER=1]="FROM_USER",vr[vr.FROM_CALENDAR=2]="FROM_CALENDAR",vr[vr.FROM_DOC=3]="FROM_DOC",(Er=br=br||{})[Er.UNKNOWN=0]="UNKNOWN",Er[Er.CALL=1]="CALL",Er[Er.MEETING=2]="MEETING",(wr=Sr=Sr||{})[wr.UNKNOWN=0]="UNKNOWN",wr[wr.RINGING_RECEIVED=1]="RINGING_RECEIVED",wr[wr.IN_MEETING_CHANGED=2]="IN_MEETING_CHANGED",(Tr=Ir=Ir||{})[Tr.UNKNOWN=0]="UNKNOWN",Tr[Tr.SETTINGS_CHANGED=1]="SETTINGS_CHANGED",Tr[Tr.PARTICIPANTS_CHANGED=2]="PARTICIPANTS_CHANGED",Tr[Tr.HOST_TRANSFERRED=3]="HOST_TRANSFERRED",Tr[Tr.ALL_MICROPHONE_MUTED=4]="ALL_MICROPHONE_MUTED",Tr[Tr.SCREEN_SHARED=5]="SCREEN_SHARED",Tr[Tr.UNMUTE_CAMERA_CONFIRMED=6]="UNMUTE_CAMERA_CONFIRMED",Tr[Tr.UPGRADE_MEETING=7]="UPGRADE_MEETING",Tr[Tr.FOLLOW_CHANGED=8]="FOLLOW_CHANGED",Tr[Tr.FOLLOW_ACTION_CHANGED=9]="FOLLOW_ACTION_CHANGED",Tr[Tr.UNMUTE_MICROPHONE_CONFIRMED=10]="UNMUTE_MICROPHONE_CONFIRMED",Tr[Tr.RECORD_MEETING=11]="RECORD_MEETING",Tr[Tr.REQUEST_FOLLOW_TOKEN=12]="REQUEST_FOLLOW_TOKEN",Tr[Tr.GRANT_FOLLOW_TOKEN=13]="GRANT_FOLLOW_TOKEN",Tr[Tr.SUBTITLE_STATUS_CONFIRMED=14]="SUBTITLE_STATUS_CONFIRMED",(_r=Cr=Cr||{})[_r.UNKNOWN=0]="UNKNOWN",_r[_r.CALLING=1]="CALLING",_r[_r.ON_THE_CALL=2]="ON_THE_CALL",_r[_r.RINGING=3]="RINGING",_r[_r.IDLE=4]="IDLE",(Ar=Rr=Rr||{})[Ar.UNKNOWN=0]="UNKNOWN",Ar[Ar.DESKTOP=1]="DESKTOP",Ar[Ar.MOBILE=2]="MOBILE",(Or=Nr=Nr||{})[Or.UNKNOWN=0]="UNKNOWN",Or[Or.BUSY=1]="BUSY",Or[Or.REFUSE=2]="REFUSE",Or[Or.RING_TIMEOUT=3]="RING_TIMEOUT",Or[Or.KICK_OUT=4]="KICK_OUT",Or[Or.LEAVE=5]="LEAVE",Or[Or.END=6]="END",Or[Or.OVERTIME=7]="OVERTIME",(Dr=kr=kr||{})[Dr.UNKNOWN=0]="UNKNOWN",Dr[Dr.LARK_USER=1]="LARK_USER",Dr[Dr.ROOM=2]="ROOM",Dr[Dr.DOC_USER=3]="DOC_USER",(Mr=Pr=Pr||{})[Mr.PLAN_UNKNOWN=0]="PLAN_UNKNOWN",Mr[Mr.PLAN_FREE=1]="PLAN_FREE",Mr[Mr.PLAN_BASIC=2]="PLAN_BASIC",Mr[Mr.PLAN_BUSINESS=3]="PLAN_BUSINESS",Mr[Mr.PLAN_ENTERPRISE=4]="PLAN_ENTERPRISE",(xr=Lr=Lr||{})[xr.MEETING_MESSAGE=0]="MEETING_MESSAGE",xr[xr.SOCKET_RECONNECTED=1]="SOCKET_RECONNECTED",(Ur=Br=Br||{})[Ur.UNKNOWN=0]="UNKNOWN",Ur[Ur.MEETING_INFO=1]="MEETING_INFO",Ur[Ur.EXTRA_INFO=2]="EXTRA_INFO",Ur[Ur.ACTIVE_MEETING_CHANGE=3]="ACTIVE_MEETING_CHANGE",(Vr=Fr=Fr||{}).CREATE_MEETING="create",Vr.JOIN_MEETING="join",Vr.UPDATE_MEETING="update",Vr.PULL_INMETTING_INFO="in_meeting_data",Vr.PULL_MEETING_CONFIG="pull_conf",Vr.PARTICIPANT_CHANGE_SETTINGS="parti_settings",Vr.PULL_ACTIVE_MEETINGS="pull_active_meetings",Vr.PUT_HEART_BEAT="heartbeat",(jr=Gr=Gr||{})[jr.UNKNOWN=0]="UNKNOWN",jr[jr.ACCEPT=1]="ACCEPT",jr[jr.REFUSE=2]="REFUSE",jr[jr.CANCEL=3]="CANCEL",jr[jr.LEAVE=4]="LEAVE",jr[jr.END_MEETING=5]="END_MEETING",jr[jr.RECEIVED_INVITATION=6]="RECEIVED_INVITATION",jr[jr.SDK_EXCEPTION=7]="SDK_EXCEPTION",jr[jr.TERMINATE=8]="TERMINATE",jr[jr.TRIAL_TIMEOUT=9]="TRIAL_TIMEOUT",(Wr=Hr=Hr||{})[Wr.Unknown=0]="Unknown",Wr[Wr.NOT_EXIST=1]="NOT_EXIST",Wr[Wr.NO_PERMISSION=2]="NO_PERMISSION",Wr[Wr.UNAVAILABLE=3]="UNAVAILABLE",Wr[Wr.NORMAL=4]="NORMAL",(qr=Kr=Kr||{})[qr.UNKNOWN=0]="UNKNOWN",qr[qr.SCROLL=1]="SCROLL",qr[qr.RESIZE=2]="RESIZE",qr[qr.NAVIGATION=3]="NAVIGATION",qr[qr.CUSTOM=61]="CUSTOM";var Xr=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Jr=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Yr=[],Qr=function(e){return Xr(this,void 0,void 0,function(){return Jr(this,function(t){return oi?Yr.push(e):Zr(this,e),[2]})})};function $r(t){for(;Yr.length;){var e=Yr.shift();e&&Zr(t,e)}}function Zr(u,t){var e,n,d=u.getData(),r=d.getMeetingInfo();(null===r||void 0===r?void 0:r.id)===(null===(e=t.inMeetingData[0])||void 0===e?void 0:e.meetingId)&&null!==(n=t.inMeetingData)&&void 0!==n&&n.forEach(function(t){if(t.type===Ir.HOST_TRANSFERRED&&t.hostTransferredData){var e=t.hostTransferredData.newHost,n=e.deviceId,r=e.absDeviceId,i=e.userId,o=d.getHostParticipant(),s=r||n,a=null===o||void 0===o?void 0:o.uuid,c=null===o||void 0===o?void 0:o.id;return d.updateHost({uuid:r||n}),void u.emit(or.HOST_MANAGE_OPERATION,{type:ar.HOST_TRANSFER,data:{newHostUserId:i,newHostUuid:s,oldHostUserId:c,oldHostUuid:a}})}t.type===Ir.PARTICIPANTS_CHANGED&&t.participantsChangedData&&t.participantsChangedData.participants.forEach(function(t){var e;t.uuid=t.absDeviceId||t.deviceId;var n=t.uuid,r=d.isSomeoneInMeeting(n);if(t.participantStatus===Cr.ON_THE_CALL&&!r)return d.updateParticipant(t),void u.tryEmitUserJoinEvent(n);if(t.participantStatus===Cr.IDLE&&r)return u.tryEmitUserLeaveEvent(n),void d.updateParticipant(t);var i=null===(e=d.getParticipantByUuid(n))||void 0===e?void 0:e.settings,o=t.settings;(null===i||void 0===i?void 0:i.isMicMuted)!==o.isMicMuted&&u.emit(or.AUDIO_ENABLE,{uuid:n,enable:!o.isMicMuted,userId:t.id}),d.updateParticipant(t)})})}var ti,ei,ni,ri=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},ii=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},oi=!1,si=function(a){var c,u,d,p;return ri(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return ii(this,function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),oi=!0,e=this.getData(),[4,this.request(Fr.PULL_INMETTING_INFO,{meetingId:a.meetingId})];case 1:return n=t.sent().inMeetingInfo,r=(null===(c=n.host)||void 0===c?void 0:c.absDeviceId)||(null===(u=n.host)||void 0===u?void 0:u.deviceId),i=this.getData().getHostParticipant(),o=this.getData().getAllInMeetingParticipants(),e.setInMeetingInfo(n),i&&i.uuid!==r&&this.emit(or.HOST_MANAGE_OPERATION,{type:ar.HOST_TRANSFER,data:{newHostUserId:(null===(d=n.host)||void 0===d?void 0:d.userId)||"",newHostUuid:r||"",oldHostUserId:i.id,oldHostUuid:i.uuid}}),null!==(p=this.getData().getAllParticipants())&&void 0!==p&&p.forEach(function(e){var t=null===o||void 0===o?void 0:o.find(function(t){return t.uuid===e.uuid});e.participantStatus===Cr.ON_THE_CALL&&(null===t||void 0===t?void 0:t.participantStatus)!==Cr.ON_THE_CALL&&s.tryEmitUserJoinEvent(e.uuid),e.participantStatus!==Cr.ON_THE_CALL&&(null===t||void 0===t?void 0:t.participantStatus)===Cr.ON_THE_CALL&&s.tryEmitUserLeaveEvent(e.uuid),t&&e.settings.isMicMuted!==(null===t||void 0===t?void 0:t.settings.isMicMuted)&&s.emit(or.AUDIO_ENABLE,{uuid:e.uuid,userId:e.id,enable:!e.settings.isMicMuted})}),[2,e.getInMeetingInfo()];case 2:return oi=!1,$r(this),[7];case 3:return[2]}})})};(ni=ei=ei||{}).CREATE_MEETING="createMeeting",ni.JOIN_MEETING="joinMeeting",ni.LEAVE_MEETING="leaveMeeting",ni.RESET="reset";var ai=((ti={})[ei.CREATE_MEETING]={from:[p.IDLE],to:p.MEETING},ti[ei.JOIN_MEETING]={from:[p.IDLE],to:p.MEETING},ti[ei.LEAVE_MEETING]={from:[p.MEETING],to:p.IDLE},ti[ei.RESET]={from:[p.IDLE,p.CALLING,p.MEETING,p.RINGING],to:p.IDLE},ti),ci=wt.createLogger("WEB-SDK"),ui=Symbol("innerModuleTag");function di(t){t.prototype.byteviewWebSdkInnerModuleTag=ui}var pi=!0;function li(t){return{uuid:t.uuid,id:t.id,deviceId:t.deviceId,absDeviceId:t.absDeviceId,participantStatus:t.participantStatus,isHost:t.isHost,settings:{isMicMuted:t.settings.isMicMuted}}}function hi(t){return{id:t.id,meetingNo:t.meetingNo,topic:t.meetingSettings.topic,startTime:t.startTime}}function fi(t,e){return{code:t,message:e}}function mi(t,e,n){var r=+n.sendTime-+n.receiveTime,i=(Date.now()-e-r)/2;return""+(+t-(+n.receiveTime-e-~~i))}var yi=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},gi=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},vi=function(a){return yi(this,void 0,void 0,function(){var e,n,r,i,o,s;return gi(this,function(t){switch(t.label){case 0:if(this.cannot(ei.CREATE_MEETING))throw e="cant create meeting",ci.warn(e),fi(d.STATE_ERROR,e);return n=this.getData(),r=n.getCurrentUserInfo(),[4,this.getRtcSdk().getLocalStream({audio:!a.isMicMuted,video:!1,uid:r.uuid})];case 1:t.sent(),n.updateCurrentUserInfo({settings:{isMicMuted:a.isMicMuted}}),t.label=2;case 2:return t.trys.push([2,6,,7]),i=Date.now(),[4,this.request(Fr.CREATE_MEETING,{docUrl:a.docUrl,meetingSettings:{visibility:a.visibility||hr.PUBLIC,topic:a.topic},hostSettings:{isMicMuted:a.isMicMuted,isCamMuted:!0},objType:a.objType,objToken:a.objToken})];case 3:return(o=t.sent().meetingInfo).ntpTime&&(o.startTime=mi(o.startTime,i,o.ntpTime)),n.setMeetingInfo(o),[4,si.apply(this,[{meetingId:o.id}])];case 4:return t.sent(),[4,this.setStateTransition(ei.CREATE_MEETING)];case 5:return t.sent(),[2,hi(o)];case 6:throw s=t.sent(),this.getRtcSdk().freeLocalStream(),ci.logError("create meeting error",{code:s.code,message:s.message,origin:s}),s;case 7:return[2]}})})},bi=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Ei=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Si=function(s){return bi(this,void 0,void 0,function(){var e,n,r,i,o;return Ei(this,function(t){switch(t.label){case 0:if(this.cannot(ei.JOIN_MEETING))throw fi(d.STATE_ERROR,"cannt join meeting");return e=this.getData(),n=e.getCurrentUserInfo(),[4,this.getRtcSdk().getLocalStream({audio:!s.isMicMuted,video:!1,uid:n.uuid})];case 1:t.sent(),e.updateCurrentUserInfo({meetingId:s.meetingId,settings:{isMicMuted:s.isMicMuted}}),t.label=2;case 2:return t.trys.push([2,6,,7]),r=Date.now(),[4,this.request(Fr.JOIN_MEETING,{meetingId:s.meetingId,participantSettings:{isMicMuted:s.isMicMuted,isCamMuted:!0}})];case 3:return(i=t.sent().meetingInfo).ntpTime&&(i.startTime=mi(i.startTime,r,i.ntpTime)),e.setMeetingInfo(i),[4,si.apply(this,[{meetingId:i.id}])];case 4:return t.sent(),[4,this.setStateTransition(ei.JOIN_MEETING)];case 5:return t.sent(),[2,hi(i)];case 6:throw o=t.sent(),this.getRtcSdk().freeLocalStream(),ci.logError("join meeting errot",{code:o.code,message:o.message,origin:o}),o;case 7:return[2]}})})},wi=function(){return(wi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ii=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Ti=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Ci=function(o){var s,a,c,u;return Ii(this,void 0,void 0,function(){var e,n,r,i;return Ti(this,function(t){switch(t.label){case 0:if(e=this.getData(),n=e.getMeetingInfo(),null===(s=n)||void 0===s||!s.id)return[2];if((r=e.getSelfParticipant())&&(null===(a=r)||void 0===a?void 0:a.settings.isMicMuted)===o.isMicMuted)return ci.debug("participant settings no change",o),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.request(Fr.PARTICIPANT_CHANGE_SETTINGS,{meetingId:n.id,participantSettings:{isMicMuted:o.isMicMuted}})];case 2:return t.sent(),r&&(r.settings.isMicMuted=o.isMicMuted,e.updateParticipant(wi({},r))),this.getRtcSdk().enableLocalAudio(!o.isMicMuted),this.emit(or.AUDIO_ENABLE,{uuid:null===(c=r)||void 0===c?void 0:c.uuid,enable:!o.isMicMuted,userId:null===(u=r)||void 0===u?void 0:u.id}),[3,4];case 3:throw i=t.sent(),ci.logError("enable media api error",{code:i.code,message:i.message,origin:i}),i;case 4:return[2]}})})},_i=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Ri=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Ai=function(){return _i(this,void 0,void 0,function(){var e,n;return Ri(this,function(t){switch(t.label){case 0:return e=this.getData(),[4,this.request(Fr.PULL_MEETING_CONFIG,{})];case 1:return n=t.sent(),e.setMeetingConfig(n.meetingConfig),[2,n.meetingConfig]}})})},Ni=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Oi=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},ki=function(e){return void 0===e&&(e={}),Ni(this,void 0,void 0,function(){return Oi(this,function(t){return[2,Di(this,{meetingId:e.meetingId,action:Gr.LEAVE})]})})};function Di(o,s){var a;return Ni(this,void 0,void 0,function(){var e,n,r,i;return Oi(this,function(t){switch(t.label){case 0:if(o.cannot(ei.LEAVE_MEETING))throw fi(d.STATE_ERROR,"cannt leave meeting");if(e=o.getData(),n=e.getMeetingInfo(),!(r=s.meetingId||(null===(a=n)||void 0===a?void 0:a.id)))return[2];t.label=1;case 1:return t.trys.push([1,4,,5]),[4,o.request(Fr.UPDATE_MEETING,{meetingId:r,action:s.action})];case 2:return t.sent(),[4,o.setStateTransition(ei.LEAVE_MEETING)];case 3:return t.sent(),s.action===Gr.SDK_EXCEPTION&&o.emit(or.LEAVE,{reason:ur.SDK_EXCEPTION}),[2];case 4:throw i=t.sent(),ci.logError("leave meeting fail. meetingId: "+s.meetingId,{code:i.code,message:i.message}),i;case 5:return[2]}})})}var Pi=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Mi=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Li=function(r){return Pi(this,void 0,void 0,function(){var e,n;return Mi(this,function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),e=Date.now(),[4,this.request(Fr.PULL_ACTIVE_MEETINGS,{docUrl:r.docUrl})];case 1:return(n=t.sent()).activeMeetings.forEach(function(t){t.ntpTime&&(t.startTime=mi(t.startTime,e,t.ntpTime))}),[2,n];case 2:return $r(this),[7];case 3:return[2]}})})},xi=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Bi=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Ui=function(){return xi(this,void 0,void 0,function(){return Bi(this,function(t){switch(t.label){case 0:return[4,Di(this,{action:Gr.END_MEETING})];case 1:return t.sent(),[2]}})})},Fi=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Vi=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Gi=(ji.prototype.getName=function(){return"BaseLfModule"},ji.prototype.onEnterIdle=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onIdle=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onLeaveIdle=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onEnterCalling=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onCalling=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onLeaveCalling=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onEnterMeeting=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onMeeting=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onLeaveMeeting=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onEnterRinging=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onRinging=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji.prototype.onLeaveRinging=function(t){return Fi(this,void 0,void 0,function(){return Vi(this,function(t){return[2]})})},ji);function ji(){}var Hi=Gi,Wi=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s};function Ki(){}var qi,zi,Xi=(Ki.prototype.getName=function(){return"BaseUIModule"},Ki.prototype.openCalling=function(t){ci.debug("UIModule:: openCalling")},Ki.prototype.closeCalling=function(t){ci.debug("UIModule:: closeCalling")},Ki.prototype.openMeeting=function(t){ci.debug("UIModule:: openMeeting")},Ki.prototype.closeMeeting=function(t){ci.debug("UIModule:: closeMeeting")},Ki.prototype.openRinging=function(t){ci.debug("UIModule:: openRinging")},Ki.prototype.closeRinging=function(t){ci.debug("UIModule:: closeRinging")},Ki.prototype.closeAll=function(t){ci.debug("UIModule:: closeAll")},Ki=Wi([di],Ki)),Ji=(qi=function(t,e){return(qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}qi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Yi=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Qi=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}};function $i(){var t=zi.call(this)||this;return t.state=p.IDLE,t.modules={},t.transitionConfig={},t.use(l.LF,new Hi),t.use(l.UI,new Xi),t}var Zi,to,eo=(Ji($i,zi=Ct),$i.prototype.setTransitionConfig=function(t){this.transitionConfig=t},$i.prototype.getState=function(){return this.state},$i.prototype.getNet=function(){return this.modules[l.NET]},$i.prototype.getRtcSdk=function(){return this.modules[l.RTCSDK]},$i.prototype.getUI=function(){return this.modules[l.UI]},$i.prototype.isToStateSameWithCurrent=function(t){return this.transitionConfig[t].to===this.state},$i.prototype.isFromStateIncludeCurrent=function(t){return-1<this.transitionConfig[t].from.indexOf(this.state)},$i.prototype.cannot=function(t){return!this.isFromStateIncludeCurrent(t)||this.isToStateSameWithCurrent(t)},$i.prototype.setStateTransition=function(i,o){return Yi(this,void 0,void 0,function(){var e,n,r;return Qi(this,function(t){switch(t.label){case 0:if(e=this.transitionConfig[i].to,!this.isFromStateIncludeCurrent(i))throw n="cannt transition from state: "+this.state+" in "+i+" transition name",fi(d.STATE_ERROR,n);if(this.isToStateSameWithCurrent(i))throw n="no state change from: "+this.state+" to:"+e+" in "+i+" transition name",fi(d.STATE_ERROR,n);t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.setState(this.transitionConfig[i].to,o)];case 2:return t.sent(),[3,4];case 3:throw fi((r=t.sent()).code||d.STATE_ERROR,r.message||"setState error");case 4:return[2]}})})},$i.prototype.setState=function(c,u){return Yi(this,void 0,void 0,function(){var e,n,r,i,o,s,a=this;return Qi(this,function(t){switch(t.label){case 0:if(c===this.state)return ci.warn("set state with the same val"),[2];e=this.modules[l.LF]||[],ci.debug("state change from "+this.state+" to "+c),n=["onLeave"+this.state,"onEnter"+c,"on"+c],r=0,t.label=1;case 1:if(!(r<n.length))return[3,6];r===n.length-1&&(this.state=c),i=0,t.label=2;case 2:return i<e.length?(o=e[i],s=o.byteviewWebSdkInnerModuleTag===ui,ci.debug("lfModule Name: "+o.getName()+", isInnerModule: "+s),[4,o[n[r]](s?this:void 0,u)]):[3,5];case 3:t.sent(),t.label=4;case 4:return i++,[3,2];case 5:return r++,[3,1];case 6:return this.getUI().forEach(function(t){var e=t.byteviewWebSdkInnerModuleTag===ui;t.closeAll(e?a:void 0),a.state!==p.IDLE&&t["open"+a.state](e?a:void 0)}),[2]}})})},$i.prototype.use=function(t,e){switch(t){case l.NET:var n=this.getNet();n&&n.offAll(),this.modules[t]=e,this.addNetPushListeners();break;case l.LOG:wt.addInterceptor(e);break;case l.RTCSDK:this.modules[t]=e;break;default:this.modules[t]=this.modules[t]||[],this.modules[t].push(e)}},$i.prototype.unuse=function(t,e){var n=this.modules[t],r=n.indexOf(e);-1<r&&n.splice(r,1)},$i),no=(Zi=function(t,e){return(Zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Zi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ro=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s},io=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},oo=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},so=(no(ao,to=Hi),ao.prototype.getName=function(){return"StateLfModule"},ao.prototype.onIdle=function(e){return io(this,void 0,void 0,function(){return oo(this,function(t){return e.getData().reset(),[2]})})},ao.prototype.onEnterMeeting=function(t){return io(this,void 0,void 0,function(){return oo(this,function(t){return[2]})})},ao.prototype.onMeeting=function(u){return io(this,void 0,void 0,function(){var e,n,r,i,o,s,a,c;return oo(this,function(t){switch(t.label){case 0:if(e=u.getData(),n=e.getCurrentUserInfo(),r=n.uuid,i=n.meetingId,o=n.deviceId,s=n.token,a=n.settings,!(r&&i&&o&&s&&a))throw fi(d.DATA_ERROR,"currentUserInfo isnt integrated");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.getRtcSdk().join({userId:""+r,roomId:i,deviceId:o,token:s,audio:a.isMicMuted})];case 2:return t.sent(),[3,4];case 3:throw c=t.sent(),ci.logError("rtc sdk join meeting error",{code:c.code,message:c.message,origin:c}),u.hangup(i,ur.SDK_EXCEPTION),fi(d.RTC_JOIN_ERROR,c.message);case 4:return[2]}})})},ao.prototype.onLeaveMeeting=function(n){return io(this,void 0,void 0,function(){var e;return oo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,n.getRtcSdk().leave()];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),ci.logError("rtc sdk leave meeting error",{code:e.code,message:e.message,origin:e}),[3,3];case 3:return[2]}})})},ao=ro([di],ao));function ao(){return null!==to&&to.apply(this,arguments)||this}var co,uo,po=(co=function(t,e){return(co=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}co(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),lo=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s},ho=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},fo=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}};function mo(){var t=null!==uo&&uo.apply(this,arguments)||this;return t.isBeating=!1,t.lastBeatSuccess=0,t.timeoutId=0,t.successCount=0,t.failCount=0,t}var yo=(po(mo,uo=Hi),mo.prototype.getName=function(){return"MutexLfModule"},mo.prototype.putHeartBeatRequest=function(n,r){return ho(this,void 0,void 0,function(){var e;return fo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,n.putHeartBeatRequest(r)];case 1:return e=t.sent(),this.successCount++,this.lastBeatSuccess=Date.now(),e.heartbeatStatus===rr.TOKEN_INVALID?(n.hangup(r,ur.HEART_BEAT_STOP),ci.logError("heartbeat fail",{code:d.HEART_BEAT_FAIL,message:"heart beat fail by token_invalid. count: "+this.failCount}),[2]):[3,3];case 2:return t.sent(),this.failCount++,ci.logError("heartbeat fail",{code:0,message:"heart beat fail. count: "+this.failCount}),[3,3];case 3:return[2]}})})},mo.prototype.isTimeout=function(t){return 1e3*(t.getData().getMeetingConfig().meetingHeartbeatExpireTime||73)<=Date.now()-this.lastBeatSuccess},mo.prototype.putHeartBeat=function(i,o){return ho(this,void 0,void 0,function(){var e,n,r=this;return fo(this,function(t){return this.isBeating&&(this.isTimeout(i)?i.hangup(o,ur.HEART_BEAT_STOP):(e=i.getData().getMeetingConfig(),n=e.heartbeatCycle,this.putHeartBeatRequest(i,o),this.timeoutId=window.setTimeout(function(){r.putHeartBeat(i,o)},1e3*(n||12)))),[2]})})},mo.prototype.start=function(t){var e=t.getData().getMeetingId();e&&(this.isBeating=!0,this.lastBeatSuccess=Date.now(),this.putHeartBeat(t,e))},mo.prototype.resetDta=function(){this.isBeating=!1,this.lastBeatSuccess=0,this.failCount=0,this.successCount=0},mo.prototype.stop=function(t){this.isBeating&&(this.resetDta(),window.clearTimeout(this.timeoutId))},mo.prototype.onEnterMeeting=function(e){return ho(this,void 0,void 0,function(){return fo(this,function(t){return this.start(e),[2]})})},mo.prototype.onLeaveMeeting=function(e){return ho(this,void 0,void 0,function(){return fo(this,function(t){return this.stop(e),[2]})})},mo=lo([di],mo)),go=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},vo=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},bo=(Eo.prototype.init=function(t){return go(this,void 0,void 0,function(){return vo(this,function(t){return[2]})})},Eo.prototype.getLocalStream=function(t){return go(this,void 0,void 0,function(){return vo(this,function(t){return[2]})})},Eo.prototype.freeLocalStream=function(){},Eo.prototype.join=function(t){return go(this,void 0,void 0,function(){return vo(this,function(t){return[2]})})},Eo.prototype.leave=function(){return go(this,void 0,void 0,function(){return vo(this,function(t){return[2]})})},Eo.prototype.attach=function(t,e){return go(this,void 0,void 0,function(){return vo(this,function(t){return[2]})})},Eo.prototype.detach=function(t){return go(this,void 0,void 0,function(){return vo(this,function(t){return[2]})})},Eo.prototype.enableLocalAudio=function(t){},Eo.prototype.on=function(t,e){},Eo.prototype.off=function(t,e){},Eo.prototype.checkSystemRequired=function(){return!1},Eo);function Eo(){}var So,wo,Io=(So=function(t,e){return(So=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}So(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),To=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Co=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}};function _o(){var t=null!==wo&&wo.apply(this,arguments)||this;return t.sdk=new zr,t}var Ro,Ao,No=(Io(_o,wo=bo),_o.prototype.init=function(e){return To(this,void 0,void 0,function(){return Co(this,function(t){return[2,this.sdk.init(e)]})})},_o.prototype.getLocalStream=function(e){return To(this,void 0,void 0,function(){return Co(this,function(t){switch(t.label){case 0:return[4,this.sdk.getLocalStream(e)];case 1:return t.sent(),[2]}})})},_o.prototype.freeLocalStream=function(){this.sdk.freeLocalStream()},_o.prototype.join=function(e){return To(this,void 0,void 0,function(){return Co(this,function(t){return[2,this.sdk.join(e)]})})},_o.prototype.leave=function(){return To(this,void 0,void 0,function(){return Co(this,function(t){return[2,this.sdk.leave()]})})},_o.prototype.attach=function(e,n){return To(this,void 0,void 0,function(){return Co(this,function(t){return[2,this.sdk.attach(e,n)]})})},_o.prototype.detach=function(e){return To(this,void 0,void 0,function(){return Co(this,function(t){return[2,this.sdk.detach(e)]})})},_o.prototype.enableLocalAudio=function(t){ci.logEvent("enableLocalAudio on:"+t),t?this.sdk.enableAudio():this.sdk.disableAudio()},_o.prototype.on=function(t,e){this.sdk.on(t,e)},_o.prototype.off=function(t,e){this.sdk.off(t,e)},_o.prototype.checkSystemRequired=function(){return this.sdk.checkSystemRequirements()},_o),Oo={proAppId:"5b978bab09b27c0034d252c0",testAppId:"5a7451222679214f668e7085",testGetSocketTicketUrl:"",testSocketUrl:"",testDeviceId:"",testAbsDeviceId:"",testUserId:"",testTenantId:"",testDocUrl:"",testDocToken:"",testFetchBaseUrl:"",stagingDocFakeCookie:""},ko=(Ro=function(t,e){return(Ro=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ro(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Do=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Po=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Mo=(ko(Lo,Ao=eo),Lo.prototype.init=function(n){return Do(this,void 0,void 0,function(){var e;return Po(this,function(t){switch(t.label){case 0:return this.inited?(ci.warn("cannt init sdk more than once"),[2]):(this.inited=!0,this.mode=n.mode||this.mode,e={deviceId:n.deviceId,absDeviceId:n.asbDeviceId,id:n.userId,tenantId:n.tenantId},this.getData().updateCurrentUserInfo(e),[4,this.initRTCSDK(n)]);case 1:return t.sent(),ci.logEvent("init websdk success. mode: "+this.mode),[2]}})})},Lo.prototype.getMode=function(){return this.mode},Lo.prototype.getData=function(){return this.data},Lo.prototype.setCurrentUserInfo=function(t){this.data.updateCurrentUserInfo(t)},Lo.prototype.initRTCSDK=function(n){return Do(this,void 0,void 0,function(){var e,r=this;return Po(this,function(t){switch(t.label){case 0:return[4,(e=this.getRtcSdk()).init({appId:this.mode===pr.PRODUCTION?Oo.proAppId:Oo.testAppId,tabDeviceId:n.deviceId,deviceId:n.asbDeviceId,mode:n.mode!==pr.PRODUCTION?K.DEVELOPMENT:K.PRODUCTION,channelType:n.channelType,customChannelApi:n.customChannelApi})];case 1:return t.sent(),e.on(f.STREAM_ADD,function(t){var e=t.streamId,n=t.userId;r.getData().addUserStream(n,e),r.tryEmitUserJoinEvent(n)}),e.on(f.STREAM_REMOVE,function(t){var e=t.streamId,n=t.userId;r.tryEmitUserLeaveEvent(n),r.getData().removeUserStream(n,e)}),e.on(f.ACCESS_DENIED,function(){r.emit(or.ACCESS_DENIED)}),e.on(f.ACTIVE_USER_CHANGE,function(t){var e={uuid:"",userId:""},n=r.getData().getInMeetingParticipantByUuid(t.userId);n&&(e.userId=n.id,e.uuid=n.uuid),r.emit(or.ACTIVE_USER_CHANGE,e)}),[2]}})})},Lo.prototype.checkSystemRequired=function(){return this.getRtcSdk().checkSystemRequired()},Lo.prototype.tryEmitUserJoinEvent=function(t){var e=this.getData(),n=e.getUserStreams()[t],r=e.getInMeetingParticipantByUuid(t);ci.debug("tryEmitUserJoinEvent uuid:"+t,{extra:{streams:n,participant:r}}),n&&r&&this.emit(or.USER_JOIN,{uuid:t,streamId:n.streamId,audio:!r.settings.isMicMuted,userId:r.id})},Lo.prototype.tryEmitUserLeaveEvent=function(t){var e=this.getData(),n=e.getUserStreams()[t],r=e.getInMeetingParticipantByUuid(t);ci.debug("tryEmitUserLeaveEvent uuid:"+t,{extra:{streams:n,participant:r}}),n&&r&&this.emit(or.USER_LEAVE,{uuid:t,streamId:n.streamId,userId:r.id})},Lo.prototype.attach=function(t,e){this.getRtcSdk().attach(t,e)},Lo.prototype.detach=function(t){this.getRtcSdk().detach(t)},Lo.prototype.enableLocalAudio=function(t){this.getRtcSdk().enableLocalAudio(t)},Lo);function Lo(){var t=Ao.call(this)||this;return t.inited=!1,t.data={},t.mode=pr.PRODUCTION,t.use(l.LF,new so),t.use(l.LF,new yo),t.use(l.RTCSDK,new No),t}var xo,Bo,Uo=(Fo.prototype.getCurrentUserInfo=function(){return this.currenrUserInfo},Fo.prototype.updateCurrentUserInfo=function(t){var e=this.currenrUserInfo.uuid;t&&(this.currenrUserInfo.uuid=t.absDeviceId||e,Object.assign(this.currenrUserInfo,t))},Fo.prototype.setMeetingConfig=function(t){this.meetingConfig=t},Fo.prototype.getMeetingConfig=function(){return this.meetingConfig},Fo.prototype.getUserStreams=function(){return this.userStreams},Fo.prototype.addUserStream=function(t,e,n){void 0===n&&(n=!1),this.userStreams[t]=this.userStreams[t]||{},n?this.userStreams[t].shareScreenStreamId=e:this.userStreams[t].streamId=e},Fo.prototype.removeUserStream=function(t,e){var n=this.userStreams[t];n&&(n.streamId===e&&delete n.streamId,n.shareScreenStreamId===e&&delete n.shareScreenStreamId,n.streamId||n.shareScreenStreamId||delete this.userStreams[t])},Fo.prototype.reset=function(){this.userStreams={}},Fo);function Fo(){this.currenrUserInfo={},this.meetingConfig={},this.userStreams={}}function Vo(){return null!==Bo&&Bo.apply(this,arguments)||this}var Go,jo,Ho=((xo=function(t,e){return(xo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}xo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(Vo,Bo=Uo),Vo.prototype.generateParticipantUUID=function(t){return t.absDeviceId||t.deviceId},Vo.prototype.getMeetingId=function(){var t;return(null===(t=this.meetingInfo)||void 0===t?void 0:t.id)||this.getCurrentUserInfo().meetingId},Vo.prototype.setInMeetingInfo=function(t){var e=this;t.participants.forEach(function(t){t.uuid=e.generateParticipantUUID(t)}),this.inMeetingInfo=t,this.updateCurrentUserInfo(),this.updateInMeetingParticipant()},Vo.prototype.getInMeetingInfo=function(){return this.inMeetingInfo},Vo.prototype.setMeetingInfo=function(t){var e=this;t.participants.forEach(function(t){t.uuid=e.generateParticipantUUID(t)}),this.meetingInfo=t,this.updateCurrentUserInfo({token:t.token})},Vo.prototype.updateCurrentUserInfo=function(t){var e,n;Bo.prototype.updateCurrentUserInfo.call(this,t);var r=this.getCurrentUserInfo();r.uuid&&Object.assign(r,{settings:(null===(e=this.getParticipantByUuid(r.uuid))||void 0===e?void 0:e.settings)||r.settings,meetingId:(null===(n=this.getMeetingInfo())||void 0===n?void 0:n.id)||r.meetingId})},Vo.prototype.getMeetingInfo=function(){return this.meetingInfo},Vo.prototype.getAllParticipants=function(){var t,e;return(null===(t=this.inMeetingInfo)||void 0===t?void 0:t.participants)||(null===(e=this.meetingInfo)||void 0===e?void 0:e.participants)},Vo.prototype.getParticipantByUuid=function(e){var t;return null===(t=this.getAllParticipants())||void 0===t?void 0:t.find(function(t){return t.uuid===e})},Vo.prototype.getAllInMeetingParticipants=function(){var t,e;return(null===(t=this.inMeetingInfo)||void 0===t?void 0:t.inMeetingParticipants)||(null===(e=this.meetingInfo)||void 0===e?void 0:e.participants.filter(function(t){return t.participantStatus===Cr.ON_THE_CALL}))},Vo.prototype.getSelfParticipant=function(){var e=this,t=this.getAllParticipants();return null===t||void 0===t?void 0:t.find(function(t){return t.uuid===e.getCurrentUserInfo().uuid})},Vo.prototype.getInMeetingParticipantByUuid=function(e){var t=this.getAllInMeetingParticipants();return null===t||void 0===t?void 0:t.find(function(t){return t.uuid===e})},Vo.prototype.isSomeoneInMeeting=function(t){var e=this.getInMeetingParticipantByUuid(t);return e&&e.participantStatus===Cr.ON_THE_CALL},Vo.prototype.getHostParticipant=function(){var t,e;return null===(e=null===(t=this.inMeetingInfo)||void 0===t?void 0:t.participants)||void 0===e?void 0:e.find(function(t){return t.isHost})},Vo.prototype.updateHost=function(t){var e=this.getHostParticipant(),n=this.getParticipantByUuid(t.uuid);n&&this.inMeetingInfo&&e&&(e.isHost=!1,n.isHost=!0,this.updateInMeetingParticipant(),this.inMeetingInfo.host={userId:n.id,deviceId:n.deviceId,absDeviceId:n.absDeviceId,type:n.type})},Vo.prototype.updateParticipant=function(t){var e,n=this.getParticipantByUuid(t.uuid);n?Object.assign(n,t):null!==(e=this.getAllParticipants())&&void 0!==e&&e.push(t),this.updateInMeetingParticipant(),this.updateCurrentUserInfo()},Vo.prototype.updateInMeetingParticipant=function(){this.inMeetingInfo&&(this.inMeetingInfo.inMeetingParticipants=this.inMeetingInfo.participants.filter(function(t){return t.participantStatus===Cr.ON_THE_CALL}),this.inMeetingInfo.othersParticipants=this.inMeetingInfo.participants.filter(function(t){return t.participantStatus!==Cr.ON_THE_CALL}))},Vo.prototype.getParticipantInMeetingInfo=function(t){var e=this;return t.participants.find(function(t){return t.absDeviceId===e.getCurrentUserInfo().absDeviceId})},Vo.prototype.reset=function(){Bo.prototype.reset.call(this),this.meetingInfo=void 0,this.inMeetingInfo=void 0},Vo),Wo=function(t){var e,n,r=this.getData(),i=r.getMeetingInfo();(null===i||void 0===i?void 0:i.id)===t.id&&(e=this.getState(),n=r.getParticipantInMeetingInfo(t),e===p.MEETING&&(null===n||void 0===n?void 0:n.participantStatus)===Cr.IDLE&&(this.emit(or.LEAVE,{reason:ur[Nr[n.offlineReason]]||ur.TERMINAL}),this.setStateTransition(ei.LEAVE_MEETING)))},Ko=(Go=function(t,e){return(Go=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Go(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),qo=function(){return(qo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},zo=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},Xo=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},Jo=(Ko(Yo,jo=Mo),Yo.prototype.addNetPushListeners=function(){var e=this;ci.debug("addNetPushListeners");var t=this.getNet();t.on(Lr.MEETING_MESSAGE,function(t){switch(ci.debug("receive net push meesage::",{extra:t}),t.pushMessageType){case Br.EXTRA_INFO:t.meetingExtraInfo&&e.handleMeetingExtraInfo(t.meetingExtraInfo);break;case Br.MEETING_INFO:t.meetingInfo&&e.handleMeetingInfo(t.meetingInfo);break;case Br.ACTIVE_MEETING_CHANGE:t.meetingInfoFacades&&e.handleActiveMeetingInfo(t.meetingInfoFacades)}}),t.on(Lr.SOCKET_RECONNECTED,function(){var t=e.getData().getMeetingId();t&&si.call(e,{meetingId:t})})},Yo.prototype.handleActiveMeetingInfo=function(t){this.emit(or.ACTIVE_MEETING_CHANGE,{activeMeetingInfos:t})},Yo.prototype.handleMeetingExtraInfo=function(t){Qr.call(this,t)},Yo.prototype.handleMeetingInfo=function(t){Wo.call(this,t)},Yo.prototype.getData=function(){return this.data},Yo.prototype.getRequestBaseUrl=function(){return this.getMode()===pr.TEST?Oo.testFetchBaseUrl:"/video_conf"},Yo.prototype.request=function(s,a,c){return void 0===c&&(c=!0),zo(this,void 0,void 0,function(){var e,n,r,i,o;return Xo(this,function(t){switch(t.label){case 0:e=this.getData().getCurrentUserInfo(),a.omitLog||ci.debug("request command:"+s,{extra:a}),t.label=1;case 1:return t.trys.push([1,3,,4]),n=c?qo({deviceId:e.deviceId,absDeviceId:e.absDeviceId,tenantId:e.tenantId},a):a,r={body:JSON.stringify(n),method:"post",credentials:pi?"same-origin":"include"},[4,this.getNet().fetch(this.getRequestBaseUrl()+"/"+s,r)];case 2:if(2e3===(i=t.sent()).code)return a.omitLog||ci.debug("request command:"+s+" success.",{extra:i}),[2,i.data];throw fi(i.code,i.msg);case 3:throw o=t.sent(),a.omitLog||ci.error("request command:"+s+" error.",o),this.emit(or.ERROR,{code:o.code,message:o.msg||o.message}),o;case 4:return[2]}})})},Yo.prototype.putHeartBeatRequest=function(n){return zo(this,void 0,void 0,function(){var e;return Xo(this,function(t){switch(t.label){case 0:return e=this.getData().getMeetingConfig(),[4,this.request(Fr.PUT_HEART_BEAT,{timeoutDuration:e.meetingHeartbeatExpireTime,token:n,omitLog:!0})];case 1:return[2,t.sent()]}})})},Yo.prototype.hangup=function(r,i){return zo(this,void 0,void 0,function(){var e,n;return Xo(this,function(t){if(e=this.getData().getMeetingId(),n="hangup meeting. meetingId: "+r+". action: "+i,ci.logError(n,{code:0,message:n,origin:{}}),r!==e)return[2];switch(i){case ur.SDK_EXCEPTION:Di(this,{meetingId:r,action:Gr.SDK_EXCEPTION});break;case ur.HEART_BEAT_STOP:this.setStateTransition(ei.LEAVE_MEETING),this.emit(or.LEAVE,{reason:ur.HEART_BEAT_STOP})}return[2]})})},Yo);function Yo(){var t=jo.call(this)||this;return t.data=new Ho,t.transitionConfig=ai,t}var Qo,$o,Zo=((Qo=function(t,e){return(Qo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Qo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(ts,$o=Ct),ts.prototype.send=function(t,e){},ts);function ts(){return null!==$o&&$o.apply(this,arguments)||this}var es,ns,rs=((es=function(t,e){return(es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}es(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(is,ns=Zo),is);function is(){return null!==ns&&ns.apply(this,arguments)||this}var os=ss;function ss(){}n.d(e,"DocMeetingSdkProxy",function(){return us}),n.d(e,"IMeetingState",function(){return p}),n.d(e,"IMeetingVisibility",function(){return hr}),n.d(e,"IMeetingSdkMode",function(){return pr}),n.d(e,"ISDKEventName",function(){return or}),n.d(e,"IPushEvent",function(){return Lr}),n.d(e,"ISDKModule",function(){return l}),n.d(e,"IParticipantType",function(){return kr}),n.d(e,"ILeaveMeetingReason",function(){return ur}),n.d(e,"IRtcEvent",function(){return f}),n.d(e,"ChannelType",function(){return z}),n.d(e,"ISDKErrorNumber",function(){return d}),n.d(e,"IDocNetModule",function(){return rs}),n.d(e,"IRtcModule",function(){return bo}),n.d(e,"ILfModule",function(){return Gi}),n.d(e,"ILogModule",function(){return os});var as=function(t,s,n,a){function c(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{o(a.next(t))}catch(t){n(t)}}function i(t){try{o(a.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):c(t.value).then(r,i)}o((a=a.apply(t,s||[])).next())})},cs=function(t,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function a(e){return function(t){return c([e,t])}}function c(e){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(t,s)}catch(t){e=[6,t],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},us=(ds.prototype.init=function(e){return as(this,void 0,void 0,function(){return cs(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.webSdkInstance.init(e),this.pullMeetingConfig()])];case 1:return t.sent(),[2]}})})},ds.prototype.checkSystemRequired=function(){return this.webSdkInstance.checkSystemRequired()},ds.prototype.getCurrentActiveMeetingsInDoc=function(e){return as(this,void 0,void 0,function(){return cs(this,function(t){return[2,Li.apply(this.webSdkInstance,[e])]})})},ds.prototype.getState=function(){return this.webSdkInstance.getState()},ds.prototype.getAllInMeetingParticipants=function(){var t;return(null===(t=this.webSdkInstance.getData().getAllInMeetingParticipants())||void 0===t?void 0:t.map(function(t){return li(t)}))||[]},ds.prototype.findInMeetingParticipant=function(t){var e=this.webSdkInstance.getData().getInMeetingParticipantByUuid(t.uuid);return e&&li(e)},ds.prototype.getSelfParticipant=function(){var t=this.webSdkInstance.getData().getSelfParticipant();return t&&li(t)},ds.prototype.getCurrentUserInfo=function(){return this.webSdkInstance.getData().getCurrentUserInfo()},ds.prototype.getMeetingInfo=function(){var t=this.webSdkInstance.getData().getMeetingInfo();return{id:null===t||void 0===t?void 0:t.id,meetingNo:null===t||void 0===t?void 0:t.meetingNo,topic:null===t||void 0===t?void 0:t.topic,startTime:null===t||void 0===t?void 0:t.startTime}},ds.prototype.attach=function(t,e){this.webSdkInstance.attach(t,e)},ds.prototype.detach=function(t){this.webSdkInstance.detach(t)},ds.prototype.use=function(t,e){this.webSdkInstance.use(t,e)},ds.prototype.unuse=function(t,e){this.webSdkInstance.unuse(t,e)},ds.prototype.enableLocalAudio=function(e){return as(this,void 0,void 0,function(){return cs(this,function(t){switch(t.label){case 0:return[4,P(Ci.bind(this.webSdkInstance))({isMicMuted:!e})];case 1:return t.sent(),[2]}})})},ds);function ds(){this.webSdkInstance=new Jo,this.setCurrentUserInfo=this.webSdkInstance.setCurrentUserInfo.bind(this.webSdkInstance),this.on=this.webSdkInstance.on.bind(this.webSdkInstance),this.off=this.webSdkInstance.off.bind(this.webSdkInstance),this.pullMeetingConfig=Ai.bind(this.webSdkInstance),this.createMeeting=P(vi.bind(this.webSdkInstance)),this.joinMeeting=P(Si.bind(this.webSdkInstance)),this.leaveMeeting=P(ki.bind(this.webSdkInstance)),this.endMeeting=P(Ui.bind(this.webSdkInstance))}e.default=new us},"0z79":function(d,t,p){(function(i){var o=p("AdPF"),r=p("CUme"),t=p("cpc2"),e=p("Yvos"),s=p("mfRe")("engine.io-client:polling-xhr");function n(){}function a(t){var e,n;r.call(this,t),this.requestTimeout=t.requestTimeout,i.location?(e="https:"===location.protocol,n=(n=location.port)||(e?443:80),this.xd=t.hostname!==i.location.hostname||n!==t.port,this.xs=t.secure!==e):this.extraHeaders=t.extraHeaders}function c(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function u(){for(var t in c.requests)c.requests.hasOwnProperty(t)&&c.requests[t].abort()}d.exports=a,d.exports.Request=c,e(a,r),a.prototype.supportsBinary=!0,a.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new c(t)},a.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},a.prototype.doPoll=function(){s("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},t(c.prototype),c.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new o(t),n=this;try{s("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.extraHeaders[r])}catch(t){}if(this.supportsBinary&&(e.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=!0),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout(function(){n.onError(e.status)},0))},s("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout(function(){n.onError(t)},0)}i.document&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},c.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},c.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,t)try{this.xhr.abort()}catch(t){}i.document&&delete c.requests[this.index],this.xhr=null}},c.prototype.onLoad=function(){var e,t;try{try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),r=[],i=0,o=n.length;i<o;i++)r.push(n[i]);e=String.fromCharCode.apply(null,r)}else e=this.xhr.responseText}catch(t){this.onError(t)}null!=e&&this.onData(e)},c.prototype.hasXDR=function(){return void 0!==i.XDomainRequest&&!this.xs&&this.enablesXDR},c.prototype.abort=function(){this.cleanup()},c.requestsCount=0,c.requests={},i.document&&(i.attachEvent?i.attachEvent("onunload",u):i.addEventListener&&i.addEventListener("beforeunload",u,!1))}).call(this,p("yLpj"))},"14A5":function(t,e){var r=void 0!==r?r:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),i=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),o=r&&r.prototype.append&&r.prototype.getBlob;function s(t){return t.map(function(t){if(t.buffer instanceof ArrayBuffer){var e,n=t.buffer;return t.byteLength!==n.byteLength&&((e=new Uint8Array(t.byteLength)).set(new Uint8Array(n,t.byteOffset,t.byteLength)),n=e.buffer),n}return t})}function a(t,e){e=e||{};var n=new r;return s(t).forEach(function(t){n.append(t)}),e.type?n.getBlob(e.type):n.getBlob()}function c(t,e){return new Blob(s(t),e||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),t.exports=n?i?Blob:c:o?a:void 0},"2Dig":function(t,e){function n(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}t.exports=n},"2pII":function(e,t,d){(function(r){var n=d("akSB"),t=d("cpc2"),p=d("mfRe")("engine.io-client:socket"),i=d("7jRU"),o=d("Wm4p"),s=d("Uxeu"),a=d("JsDy"),c=d("TypT");function l(t,e){if(!(this instanceof l))return new l(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=s(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=s(e.host).host),this.secure=null!=e.secure?e.secure:r.location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(r.location?location.hostname:"localhost"),this.port=e.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized?null:e.rejectUnauthorized,this.forceNode=!!e.forceNode;var n="object"==typeof r&&r;n.global===n&&(e.extraHeaders&&0<Object.keys(e.extraHeaders).length&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function u(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e.exports=l).priorWebsocketSuccess=!1,t(l.prototype),l.protocol=o.protocol,(l.Socket=l).Transport=d("Gbct"),l.transports=d("akSB"),l.parser=d("Wm4p"),l.prototype.createTransport=function(t){p('creating transport "%s"',t);var e=u(this.query);return e.EIO=o.protocol,e.transport=t,this.id&&(e.sid=this.id),new n[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},l.prototype.open=function(){var t;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},l.prototype.setTransport=function(t){p("setting transport %s",t.name);var e=this;this.transport&&(p("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=t).on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},l.prototype.probe=function(n){p('probing transport "%s"',n);var r=this.createTransport(n,{probe:1}),i=!1,o=this;function t(){var t;o.onlyBinaryUpgrades&&(t=!this.supportsBinary&&o.transport.supportsBinary,i=i||t),i||(p('probe transport "%s" opened',n),r.send([{type:"ping",data:"probe"}]),r.once("packet",function(t){var e;i||("pong"===t.type&&"probe"===t.data?(p('probe transport "%s" pong',n),o.upgrading=!0,o.emit("upgrading",r),r&&(l.priorWebsocketSuccess="websocket"===r.name,p('pausing current transport "%s"',o.transport.name),o.transport.pause(function(){i||"closed"!==o.readyState&&(p("changing transport and sending upgrade packet"),d(),o.setTransport(r),r.send([{type:"upgrade"}]),o.emit("upgrade",r),r=null,o.upgrading=!1,o.flush())}))):(p('probe transport "%s" failed',n),(e=new Error("probe error")).transport=r.name,o.emit("upgradeError",e)))}))}function s(){i||(i=!0,d(),r.close(),r=null)}function e(t){var e=new Error("probe error: "+t);e.transport=r.name,s(),p('probe transport "%s" failed because of error: %s',n,t),o.emit("upgradeError",e)}function a(){e("transport closed")}function c(){e("socket closed")}function u(t){r&&t.name!==r.name&&(p('"%s" works - aborting "%s"',t.name,r.name),s())}function d(){r.removeListener("open",t),r.removeListener("error",e),r.removeListener("close",a),o.removeListener("close",c),o.removeListener("upgrading",u)}l.priorWebsocketSuccess=!1,r.once("open",t),r.once("error",e),r.once("close",a),this.once("close",c),this.once("upgrading",u),r.open()},l.prototype.onOpen=function(){if(p("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){p("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},l.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(p('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(a(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else p('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},l.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){p("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},l.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(p("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},l.prototype.sendPacket=function(t,e,n,r){var i;"function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((n=n||{}).compress=!1!==n.compress,i={type:t,data:e,options:n},this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush())},l.prototype.close=function(){var t;function e(){t.onClose("forced close"),p("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",(t=this).writeBuffer.length?this.once("drain",function(){(this.upgrading?r:e)()}):(this.upgrading?r:e)()),this},l.prototype.onError=function(t){p("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},l.prototype.onClose=function(t,e){var n;"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(p('socket close with reason: "%s"',t),n=this,clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0)},l.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~i(this.transports,t[n])&&e.push(t[n]);return e}}).call(this,d("yLpj"))},"49sm":function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},"7jRU":function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},"8Lyy":function(t,e,n){var o=n("O6qx"),s=/%[sdv%]/g,a=function(t){var n=1,r=arguments,i=r.length;return t.replace(s,function(t){if(i<=n)return t;var e=r[n];switch(n+=1,t){case"%%":return"%";case"%s":return String(e);case"%d":return Number(e);case"%v":return""}})},c=function(t,e,n){var r=[t+"="+(e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format)];if(e.names)for(var i=0;i<e.names.length;i+=1){var o=e.names[i];e.name?r.push(n[e.name][o]):r.push(n[e.names[i]])}else r.push(n[e.name]);return a.apply(null,r)},u=["v","o","s","i","u","e","p","c","b","t","r","z","a"],d=["i","c","b","a"];t.exports=function(t,e){e=e||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach(function(t){null==t.payloads&&(t.payloads="")});var n=e.outerOrder||u,r=e.innerOrder||d,i=[];return n.forEach(function(n){o[n].forEach(function(e){e.name in t&&null!=t[e.name]?i.push(c(n,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach(function(t){i.push(c(n,e,t))})})}),t.media.forEach(function(t){i.push(c("m",o.m[0],t)),r.forEach(function(n){o[n].forEach(function(e){e.name in t&&null!=t[e.name]?i.push(c(n,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach(function(t){i.push(c(n,e,t))})})})}),i.join("\r\n")+"\r\n"}},"A/9J":function(t,e,n){var r=n("cDf5"),i=1e3,o=60*i,s=60*o,a=24*s,c=365.25*a;function u(t){if(!(100<(t=String(t)).length)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function d(t){return a<=t?Math.round(t/a)+"d":s<=t?Math.round(t/s)+"h":o<=t?Math.round(t/o)+"m":i<=t?Math.round(t/i)+"s":t+"ms"}function p(t){return l(t,a,"day")||l(t,s,"hour")||l(t,o,"minute")||l(t,i,"second")||t+" ms"}function l(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var n=r(t);if("string"===n&&0<t.length)return u(t);if("number"===n&&!1===isNaN(t))return(e.long?p:d)(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},AdPF:function(t,e,n){(function(i){var o=n("yeub");t.exports=function(t){var e=t.xdomain,n=t.xscheme,r=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||o))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(t){}if(!e)try{return new i[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(t){}}}).call(this,n("yLpj"))},Aplp:function(t,e,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,c=0;function u(t){for(var e="";e=i[t%o]+e,t=Math.floor(t/o),0<t;);return e}function d(t){var e=0;for(c=0;c<t.length;c++)e=e*o+s[t.charAt(c)];return e}function p(){var t=u(+new Date);return t!==r?(a=0,r=t):t+"."+u(a++)}for(;c<o;c++)s[i[c]]=c;p.encode=u,p.decode=d,t.exports=p},C2QD:function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}(t.exports=n).prototype.duration=function(){var t,e,n=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(t=Math.random(),e=Math.floor(t*this.jitter*n),n=0==(1&Math.floor(10*t))?n-e:n+e),0|Math.min(n,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},CIKq:function(p,t,l){(function(s){var e,n=l("Gbct"),a=l("Wm4p"),r=l("TypT"),t=l("Yvos"),i=l("Aplp"),c=l("mfRe")("engine.io-client:websocket"),o=s.WebSocket||s.MozWebSocket;if("undefined"==typeof window)try{e=l(13)}catch(t){}var u=o;function d(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=o&&!t.forceNode,this.usingBrowserWebSocket||(u=e),n.call(this,t)}u||"undefined"!=typeof window||(u=e),t(p.exports=d,n),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new u(t):new u(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},d.prototype.write=function(t){var r=this;this.writable=!1;for(var i=t.length,e=0,n=i;e<n;e++)!function(n){a.encodePacket(n,r.supportsBinary,function(t){var e;r.usingBrowserWebSocket||(e={},n.options&&(e.compress=n.options.compress),r.perMessageDeflate&&("string"==typeof t?s.Buffer.byteLength(t):t.length)<r.perMessageDeflate.threshold&&(e.compress=!1));try{r.usingBrowserWebSocket?r.ws.send(t):r.ws.send(t,e)}catch(t){c("websocket closed before onclose event")}--i||o()})}(t[e]);function o(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}},d.prototype.onClose=function(){n.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=i()),this.supportsBinary||(t.b64=1),(t=r.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},d.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===d.prototype.name)}}).call(this,l("yLpj"))},CUme:function(t,e,n){var r=n("Gbct"),i=n("TypT"),o=n("Wm4p"),s=n("Yvos"),a=n("Aplp"),c=n("mfRe")("engine.io-client:polling");t.exports=d;var u=null!=new(n("AdPF"))({xdomain:!1}).responseType;function d(t){var e=t&&t.forceBase64;u&&!e||(this.supportsBinary=!1),r.call(this,t)}s(d,r),d.prototype.name="polling",d.prototype.doOpen=function(){this.poll()},d.prototype.pause=function(t){var e,n=this;function r(){c("paused"),n.readyState="paused",t()}this.readyState="pausing",this.polling||!this.writable?(e=0,this.polling&&(c("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){c("pre-pause polling complete"),--e||r()})),this.writable||(c("we are currently writing - waiting to pause"),e++,this.once("drain",function(){c("pre-pause writing complete"),--e||r()}))):r()},d.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},d.prototype.onData=function(t){var r=this;c("polling got data %s",t);var e=function(t,e,n){if("opening"===r.readyState&&r.onOpen(),"close"===t.type)return r.onClose(),!1;r.onPacket(t)};o.decodePayload(t,this.socket.binaryType,e),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},d.prototype.doClose=function(){var t=this;function e(){c("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},d.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};o.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},d.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},Cl5A:function(s,t,a){(function(n){var r=a("CUme"),t=a("Yvos");s.exports=e;var i,u=/\n/g,d=/\\n/g;function o(){}function e(t){r.call(this,t),this.query=this.query||{},i||(n.___eio||(n.___eio=[]),i=n.___eio),this.index=i.length;var e=this;i.push(function(t){e.onData(t)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=o)},!1)}t(e,r),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},e.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},e.prototype.doWrite=function(t,e){var n,r,i,o,s=this;function a(){c(),e()}function c(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(t){s.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+s.iframeId+'">';o=document.createElement(t)}catch(t){(o=document.createElement("iframe")).name=s.iframeId,o.src="javascript:0"}o.id=s.iframeId,s.form.appendChild(o),s.iframe=o}this.form||(n=document.createElement("form"),r=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index,n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=i,n.method="POST",n.setAttribute("accept-charset","utf-8"),r.name="d",n.appendChild(r),document.body.appendChild(n),this.form=n,this.area=r),this.form.action=this.uri(),c(),t=t.replace(d,"\\\n"),this.area.value=t.replace(u,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===s.iframe.readyState&&a()}:this.iframe.onload=a}}).call(this,a("yLpj"))},Gbct:function(t,e,n){var r=n("Wm4p");function i(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}n("cpc2")((t.exports=i).prototype),i.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},i.prototype.onPacket=function(t){this.emit("packet",t)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},H7XF:function(t,e,n){"use strict";e.byteLength=s,e.toByteArray=a,e.fromByteArray=m;for(var c=[],u=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)c[i]=r[i],u[r.charCodeAt(i)]=i;function p(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function s(t){var e=p(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function l(t,e,n){return 3*(e+n)/4-n}function a(t){for(var e,n=p(t),r=n[0],i=n[1],o=new d(l(t,r,i)),s=0,a=0<i?r-4:r,c=0;c<a;c+=4)e=u[t.charCodeAt(c)]<<18|u[t.charCodeAt(c+1)]<<12|u[t.charCodeAt(c+2)]<<6|u[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=255&e;return 2===i&&(e=u[t.charCodeAt(c)]<<2|u[t.charCodeAt(c+1)]>>4,o[s++]=255&e),1===i&&(e=u[t.charCodeAt(c)]<<10|u[t.charCodeAt(c+1)]<<4|u[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=255&e),o}function h(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function f(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(h(r));return i.join("")}function m(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(f(t,s,a<s+o?a:s+o));return 1===r?(e=t[n-1],i.push(c[e>>2]+c[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(c[e>>10]+c[e>>4&63]+c[e<<2&63]+"=")),i.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},HDXh:function(t,nt,rt){"use strict";(function(t){var r=rt("H7XF"),o=rt("kVK+"),s=rt("49sm");function e(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function n(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=p.prototype:(null===t&&(t=new p(e)),t.length=e),t}function p(t,e,n){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(t,e,n);if("number"!=typeof t)return i(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}function i(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?f(t,e,n,r):"string"==typeof e?l(t,e,n):m(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n,r){return c(e),!(e<=0)&&void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}function d(t,e){if(c(e),t=a(t,e<0?0:0|y(e)),!p.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!p.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(e,n),i=(t=a(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}function h(t,e){var n=e.length<0?0:0|y(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),p.TYPED_ARRAY_SUPPORT?(t=e).__proto__=p.prototype:t=h(t,e),t}function m(t,e){if(p.isBuffer(e)){var n=0|y(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||et(e.length)?a(t,0):h(t,e);if("Buffer"===e.type&&s(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function g(t){return+t!=t&&(t=0),p.alloc(+t)}function v(t,e){if(p.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(t).length;default:if(r)return Y(t).length;e=(""+e).toLowerCase(),r=!0}}function b(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return x(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return M(this,e,n);case"latin1":case"binary":return L(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function E(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function S(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=p.from(e,r)),p.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,i);if("number"==typeof e)return e&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,n):w(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,i){var o=1,s=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s/=o=2,a/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var u=-1,d=n;d<s;d++)if(c(t,d)===c(e,-1===u?0:d-u)){if(-1===u&&(u=d),d-u+1===a)return u*o}else-1!==u&&(d-=d-u),u=-1;else for(s<n+a&&(n=s-a),d=n;0<=d;d--){for(var p=!0,l=0;l<a;l++)if(c(t,d+l)!==c(e,l)){p=!1;break}if(p)return d}return-1}function I(t,e,n,r){n=Number(n)||0;var i=t.length-n;(!r||i<(r=Number(r)))&&(r=i);var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function T(t,e,n,r){return tt(Y(e,t.length-n),t,n,r)}function C(t,e,n,r){return tt(Q(e),t,n,r)}function _(t,e,n,r){return C(t,e,n,r)}function R(t,e,n,r){return tt(Z(e),t,n,r)}function N(t,e,n,r){return tt($(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,c,u=t[i],d=null,p=239<u?4:223<u?3:191<u?2:1;if(i+p<=n)switch(p){case 1:u<128&&(d=u);break;case 2:128==(192&(o=t[i+1]))&&127<(c=(31&u)<<6|63&o)&&(d=c);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(c=(15&u)<<12|(63&o)<<6|63&s)&&(c<55296||57343<c)&&(d=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)&&c<1114112&&(d=c)}null===d?(d=65533,p=1):65535<d&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=p}return P(r)}nt.Buffer=p,nt.SlowBuffer=g,nt.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:e(),nt.kMaxLength=n(),p.poolSize=8192,p._augment=function(t){return t.__proto__=p.prototype,t},p.from=function(t,e,n){return i(null,t,e,n)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(t,e,n){return u(null,t,e,n)},p.allocUnsafe=function(t){return d(null,t)},p.allocUnsafeSlow=function(t){return d(null,t)},p.isBuffer=function(t){return!(null==t||!t._isBuffer)},p.compare=function(t,e){if(!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var n=p.allocUnsafe(e),r=0,i=0;i<t.length;++i){var o=t[i];if(!p.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},p.byteLength=v,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)E(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)E(this,e,e+3),E(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)E(this,e,e+7),E(this,e+1,e+6),E(this,e+2,e+5),E(this,e+3,e+4);return this},p.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):b.apply(this,arguments)},p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",e=nt.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},p.prototype.compare=function(t,e,n,r,i){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(r,i),u=t.slice(e,n),d=0;d<a;++d)if(c[d]!==u[d]){o=c[d],s=u[d];break}return o<s?-1:s<o?1:0},p.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},p.prototype.indexOf=function(t,e,n){return S(this,t,e,n,!0)},p.prototype.lastIndexOf=function(t,e,n){return S(this,t,e,n,!1)},p.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o=!1;;)switch(r){case"hex":return I(this,t,e,n);case"utf8":case"utf-8":return T(this,t,e,n);case"ascii":return C(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return R(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function P(t){var e=t.length;if(e<=D)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=D));return n}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function L(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function x(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;++o)i+=J(t[o]);return i}function B(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function U(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,n,r,i,o){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function V(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function H(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(t,e,n,r,i){return i||H(t,e,n,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,n,r,23,4),n+4}function K(t,e,n,r,i){return i||H(t,e,n,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,n,r,52,8),n+8}p.prototype.slice=function(t,e){var n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),p.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=p.prototype;else for(var r=e-t,i=new p(r,void 0),o=0;o<r;++o)i[o]=this[o+t];return i},p.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},p.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},p.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},p.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},p.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},p.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),o.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),o.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),o.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),o.read(this,t,!1,52,8)},p.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||F(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},p.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||F(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},p.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||F(this,t,e,1,255,0),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},p.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||F(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):V(this,t,e,!0),e+2},p.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||F(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):V(this,t,e,!1),e+2},p.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||F(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},p.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||F(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},p.prototype.writeIntLE=function(t,e,n,r){var i;t=+t,e|=0,r||F(this,t,e,n,(i=Math.pow(2,8*n-1))-1,-i);var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},p.prototype.writeIntBE=function(t,e,n,r){var i;t=+t,e|=0,r||F(this,t,e,n,(i=Math.pow(2,8*n-1))-1,-i);var o=n-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},p.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||F(this,t,e,1,127,-128),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},p.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||F(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):V(this,t,e,!0),e+2},p.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||F(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):V(this,t,e,!1),e+2},p.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||F(this,t,e,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},p.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||F(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},p.prototype.writeFloatLE=function(t,e,n){return W(this,t,e,!0,n)},p.prototype.writeFloatBE=function(t,e,n){return W(this,t,e,!1,n)},p.prototype.writeDoubleLE=function(t,e,n){return K(this,t,e,!0,n)},p.prototype.writeDoubleBE=function(t,e,n){return K(this,t,e,!1,n)},p.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),e=e||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;0<=i;--i)t[i+e]=this[i+n];else if(o<1e3||!p.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},p.prototype.fill=function(t,e,n,r){if("string"==typeof t){var i;if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==t.length||(i=t.charCodeAt(0))<256&&(t=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(a=e;a<n;++a)this[a]=t;else for(var o=p.isBuffer(t)?t:Y(new p(t,r).toString()),s=o.length,a=0;a<n-e;++a)this[a+e]=o[a%s];return this};var q=/[^+\/0-9A-Za-z-_]/g;function z(t){if((t=X(t).replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function X(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function J(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if(--e<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Q(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function $(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}function Z(t){return r.toByteArray(z(t))}function tt(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function et(t){return t!=t}}).call(this,rt("yLpj"))},IxNO:function(t,e,n){"use strict";var r=(i.prototype.clone=function(){var t=new i(this.ssrc);t.setCName(this.cname),t.setStreamId(this.streamId),this.setTrackId(this.trackId)},i.prototype.plain=function(){var t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.label&&(t.label=this.label),this.mslabel&&(t.mslabel=this.mslabel),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackid=this.trackId),t},i.prototype.getCName=function(){return this.cname},i.prototype.setCName=function(t){this.cname=t},i.prototype.getStreamId=function(){return this.streamId},i.prototype.setStreamId=function(t){this.streamId=t},i.prototype.getTrackId=function(){return this.trackId},i.prototype.setTrackId=function(t){this.trackId=t},i.prototype.getMSLabel=function(){return this.mslabel},i.prototype.setMSLabel=function(t){this.mslabel=t},i.prototype.getLabel=function(){return this.label},i.prototype.setLabel=function(t){this.label=t},i.prototype.getSSRC=function(){return this.ssrc},i);function i(t){this.ssrc=t}t.exports=r},JRJ6:function(t,e,n){"use strict";function r(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!(this instanceof r))return new(Function.prototype.bind.apply(r,[null].concat(Array.prototype.slice.call(t))));Array.from(t).forEach(function(t){e[t]=Symbol.for("LICODE_SEMANTIC_SDP_"+t)})}t.exports=r},JsDy:function(t,e,n){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,n("yLpj"))},K4CH:function(O,k,D){var P;!function(i,p){"use strict";var t="0.7.19",o="",s="?",l="function",e="undefined",h="object",n="string",r="major",a="model",c="name",u="type",d="vendor",f="version",m="architecture",y="console",g="mobile",v="tablet",b="smarttv",E="wearable",S="embedded",w={extend:function(t,e){var n,r={};for(n in t)e[n]&&e[n].length%2==0?r[n]=e[n].concat(t[n]):r[n]=t[n];return r},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return typeof t===n?t.replace(/[^\d\.]/g,"").split(".")[0]:p},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},I={rgx:function(t,e){for(var n,r,i,o,s,a=0;a<e.length&&!o;){for(var c=e[a],u=e[a+1],d=n=0;d<c.length&&!o;)if(o=c[d++].exec(t))for(r=0;r<u.length;r++)s=o[++n],typeof(i=u[r])===h&&0<i.length?2==i.length?typeof i[1]==l?this[i[0]]=i[1].call(this,s):this[i[0]]=i[1]:3==i.length?typeof i[1]!==l||i[1].exec&&i[1].test?this[i[0]]=s?s.replace(i[1],i[2]):p:this[i[0]]=s?i[1].call(this,s,i[2]):p:4==i.length&&(this[i[0]]=s?i[3].call(this,s.replace(i[1],i[2])):p):this[i]=s||p;a+=2}},str:function(t,e){for(var n in e)if(typeof e[n]===h&&0<e[n].length){for(var r=0;r<e[n].length;r++)if(w.has(e[n][r],t))return n===s?p:n}else if(w.has(e[n],t))return n===s?p:n;return t}},T={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},C={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[c,f],[/(opios)[\/\s]+([\w\.]+)/i],[[c,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[c,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[c,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[c,"IE"],f],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[c,"Edge"],f],[/(yabrowser)\/([\w\.]+)/i],[[c,"Yandex"],f],[/(puffin)\/([\w\.]+)/i],[[c,"Puffin"],f],[/(focus)\/([\w\.]+)/i],[[c,"Firefox Focus"],f],[/(opt)\/([\w\.]+)/i],[[c,"Opera Touch"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[c,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[c,"WeChat"],f],[/(brave)\/([\w\.]+)/i],[[c,"Brave"],f],[/(qqbrowserlite)\/([\w\.]+)/i],[c,f],[/(QQ)\/([\d\.]+)/i],[c,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[c,f],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[c,f],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[c,f],[/(MetaSr)[\/\s]?([\w\.]+)/i],[c],[/(LBBROWSER)/i],[c],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[c,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[c,f],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[c,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[c,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[c,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[c,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[c,f],[/(dolfin)\/([\w\.]+)/i],[[c,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[c,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[c,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[c,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,c],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[c,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[f,I.str,T.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,w.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",w.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[m,w.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,d,[u,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[d,"Apple"],[u,v]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[d,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[d,a,[u,v]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[d,"Amazon"],[u,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,I.str,T.device.amazon.model],[d,"Amazon"],[u,g]],[/android.+aft([bms])\sbuild/i],[a,[d,"Amazon"],[u,b]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,d,[u,g]],[/\((ip[honed|\s\w*]+);/i],[a,[d,"Apple"],[u,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[d,a,[u,g]],[/\(bb10;\s(\w+)/i],[a,[d,"BlackBerry"],[u,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[a,[d,"Asus"],[u,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[d,"Sony"],[a,"Xperia Tablet"],[u,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[a,[d,"Sony"],[u,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[d,a,[u,y]],[/android.+;\s(shield)\sbuild/i],[a,[d,"Nvidia"],[u,y]],[/(playstation\s[34portablevi]+)/i],[a,[d,"Sony"],[u,y]],[/(sprint\s(\w+))/i],[[d,I.str,T.device.sprint.vendor],[a,I.str,T.device.sprint.model],[u,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[d,a,[u,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[d,[a,/_/g," "],[u,g]],[/(nexus\s9)/i],[a,[d,"HTC"],[u,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[a,[d,"Huawei"],[u,g]],[/(microsoft);\s(lumia[\s\w]+)/i],[d,a,[u,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[d,"Microsoft"],[u,y]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[d,"Microsoft"],[u,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[d,"Motorola"],[u,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[d,"Motorola"],[u,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[d,w.trim],[a,w.trim],[u,b]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[d,"Samsung"],[u,b]],[/\(dtv[\);].+(aquos)/i],[a,[d,"Sharp"],[u,b]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[d,"Samsung"],a,[u,v]],[/smart-tv.+(samsung)/i],[d,[u,b],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[d,"Samsung"],a,[u,g]],[/sie-(\w*)/i],[a,[d,"Siemens"],[u,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[d,"Nokia"],a,[u,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[a,[d,"Acer"],[u,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[d,"LG"],[u,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[d,"LG"],a,[u,v]],[/(lg) netcast\.tv/i],[d,a,[u,b]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[d,"LG"],[u,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[d,"Lenovo"],[u,v]],[/linux;.+((jolla));/i],[d,a,[u,g]],[/((pebble))app\/[\d\.]+\s/i],[d,a,[u,E]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[d,a,[u,g]],[/crkey/i],[[a,"Chromecast"],[d,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[d,"Google"],[u,E]],[/android.+;\s(pixel c)[\s)]/i],[a,[d,"Google"],[u,v]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[a,[d,"Google"],[u,g]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[d,"Xiaomi"],[u,g]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[d,"Xiaomi"],[u,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[d,"Meizu"],[u,v]],[/(mz)-([\w-]{2,})/i],[[d,"Meizu"],a,[u,g]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[a,[d,"OnePlus"],[u,g]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[d,"RCA"],[u,v]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[d,"Dell"],[u,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[d,"Verizon"],[u,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[d,"Barnes & Noble"],a,[u,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[d,"NuVision"],[u,v]],[/android.+;\s(k88)\sbuild/i],[a,[d,"ZTE"],[u,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[d,"Swiss"],[u,g]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[d,"Swiss"],[u,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[d,"Zeki"],[u,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[d,"Dragon Touch"],a,[u,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[d,"Insignia"],[u,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[d,"NextBook"],[u,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[d,"Voice"],a,[u,g]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[d,"LvTel"],a,[u,g]],[/android.+;\s(PH-1)\s/i],[a,[d,"Essential"],[u,g]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[d,"Envizen"],[u,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[d,a,[u,v]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[d,"MachSpeed"],[u,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[d,a,[u,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[d,"Rotor"],[u,v]],[/android.+(KS(.+))\s+build/i],[a,[d,"Amazon"],[u,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[d,a,[u,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,w.lowerize],d,a],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[d,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,f],[/rv\:([\w\.]{1,9}).+(gecko)/i],[f,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[c,[f,I.str,T.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[f,I.str,T.os.windows.version]],[/\((bb)(10);/i],[[c,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[c,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[c,"Symbian"],f],[/\((series40);/i],[c],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[c,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],f],[/(sunos)\s?([\w\.\d]*)/i],[[c,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[c,f],[/(haiku)\s(\w+)/i],[c,f],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[c,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[c,f]]},_=function(t,e){if("object"==typeof t&&(e=t,t=p),!(this instanceof _))return new _(t,e).getResult();var n=t||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:o),r=e?w.extend(C,e):C;return this.getBrowser=function(){var t={name:p,version:p};return I.rgx.call(t,n,r.browser),t.major=w.major(t.version),t},this.getCPU=function(){var t={architecture:p};return I.rgx.call(t,n,r.cpu),t},this.getDevice=function(){var t={vendor:p,model:p,type:p};return I.rgx.call(t,n,r.device),t},this.getEngine=function(){var t={name:p,version:p};return I.rgx.call(t,n,r.engine),t},this.getOS=function(){var t={name:p,version:p};return I.rgx.call(t,n,r.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(t){return n=t,this},this};_.VERSION=t,_.BROWSER={NAME:c,MAJOR:r,VERSION:f},_.CPU={ARCHITECTURE:m},_.DEVICE={MODEL:a,VENDOR:d,TYPE:u,CONSOLE:y,MOBILE:g,SMARTTV:b,TABLET:v,WEARABLE:E,EMBEDDED:S},_.ENGINE={NAME:c,VERSION:f},_.OS={NAME:c,VERSION:f},typeof k!==e?(typeof O!==e&&O.exports&&(k=O.exports=_),k.UAParser=_):"function"===l&&D("PDX0")?(P=function(){return _}.call(k,D,k,O))===p||(O.exports=P):i&&(i.UAParser=_);var R,N=i&&(i.jQuery||i.Zepto);typeof N===e||N.ua||(R=new _,N.ua=R.getResult(),N.ua.get=function(){return R.getUA()},N.ua.set=function(t){R.setUA(t);var e,n=R.getResult();for(e in n)N.ua[e]=n[e]})}("object"==typeof window?window:this)},KFGy:function(t,e,n){var o=n("Vo14"),r=n("cpc2"),s=n("kSER"),i=n("2Dig"),a=n("QN7Q"),c=n("mfRe")("socket.io-client:socket"),u=n("+pgx");t.exports=l;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=r.prototype.emit;function l(t,e,n){this.io=t,this.nsp=e,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(l.prototype),l.prototype.subEvents=function(){var t;this.subs||(t=this.io,this.subs=[i(t,"open",a(this,"onopen")),i(t,"packet",a(this,"onpacket")),i(t,"close",a(this,"onclose"))])},l.prototype.open=l.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},l.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},l.prototype.emit=function(t){if(d.hasOwnProperty(t))return p.apply(this,arguments),this;var e=s(arguments),n=o.EVENT;u(e)&&(n=o.BINARY_EVENT);var r={type:n,data:e,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},l.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},l.prototype.onopen=function(){c("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:o.CONNECT,query:this.query}):this.packet({type:o.CONNECT}))},l.prototype.onclose=function(t){c("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},l.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",t.data)}},l.prototype.onevent=function(t){var e=t.data||[];c("emitting event %j",e),null!=t.id&&(c("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},l.prototype.ack=function(n){var r=this,i=!1;return function(){var t,e;i||(i=!0,t=s(arguments),c("sending ack %j",t),e=u(t)?o.BINARY_ACK:o.ACK,r.packet({type:e,id:n,data:t}))}},l.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(c("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):c("bad ack %s",t.id)},l.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},l.prototype.emitBuffered=function(){for(var t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},l.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},l.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},l.prototype.close=l.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},l.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},N824:function(t,e,n){"use strict";var o=n("Tkys"),s=n("adIa"),a=n("ftoZ"),r=(c.prototype.clone=function(){var n=new c(this.id,this.port,this.type);return n.setDirection(this.direction),n.setBitrate(this.bitrate),n.setConnection(this.connection),this.codecs.forEach(function(t){n.addCodec(t.clone())}),this.extensions.forEach(function(t,e){n.addExtension(e,t)}),this.rids.forEach(function(t,e){n.addRID(e,t.clone())}),this.simulcast&&n.setSimulcast(this.simulcast.clone()),this.xGoogleFlag&&n.setXGoogleFlag(this.xGoogleFlag),this.ice&&n.setICE(this.ice.clone()),this.dtls&&n.setDTLS(this.dtls.clone()),this.candidates.forEach(function(t){n.addCandidate(t.clone())}),this.setup&&n.setSetup(this.setup),n},c.prototype.plain=function(){var e={id:this.id,port:this.port,type:this.type,connection:this.connection,direction:s.toString(this.direction),xGoogleFlag:this.xGoogleFlag,extensions:{},rids:[],codecs:[],candidates:[]};return this.bitrate&&(e.bitrate=this.bitrate),this.codecs.forEach(function(t){e.codecs.push(t.plain())}),this.extensions.forEach(function(t){e.extensions.push(t.plain())}),this.rids.forEach(function(t){e.rids.push(t.plain())}),this.simulcast&&(e.simulcast=this.simulcast.plain()),this.candidates.forEach(function(t){e.candidates.push(t.plain())}),e.ice=this.ice&&this.ice.plain(),e.dtls=this.dtls&&this.dtls.plain(),e},c.prototype.getType=function(){return this.type},c.prototype.getPort=function(){return this.port},c.prototype.getId=function(){return this.id},c.prototype.addExtension=function(t,e){this.extensions.set(t,e)},c.prototype.addRID=function(t){this.rids.set(t.getId(),t)},c.prototype.addCodec=function(t){this.codecs.set(t.getType(),t)},c.prototype.getCodecForType=function(t){return this.codecs.get(t)},c.prototype.getCodec=function(e){var n;return this.codecs.forEach(function(t){t.getCodec().toLowerCase()===e.toLowerCase()&&(n=t)}),n},c.prototype.hasCodec=function(t){return null!==this.getCodec(t)},c.prototype.getCodecs=function(){return this.codecs},c.prototype.getExtensions=function(){return this.extensions},c.prototype.getRIDs=function(){return this.rids},c.prototype.getRID=function(t){return this.rids.get(t)},c.prototype.getBitrate=function(){return this.bitrate},c.prototype.setBitrate=function(t){this.bitrate=t},c.prototype.getDirection=function(){return this.direction},c.prototype.setDirection=function(t){this.direction=t},c.prototype.getDTLS=function(){return this.dtls},c.prototype.setDTLS=function(t){this.dtls=t},c.prototype.getICE=function(){return this.ice},c.prototype.setICE=function(t){this.ice=t},c.prototype.addCandidate=function(t){this.candidates.push(t)},c.prototype.addCandidates=function(t){var e=this;t.forEach(function(t){e.addCandidate(t)})},c.prototype.getCandidates=function(){return this.candidates},c.prototype.setXGoogleFlag=function(t){this.xGoogleFlag=t},c.prototype.getXGoogleFlag=function(){return this.xGoogleFlag},c.prototype.getConnection=function(){return this.connection},c.prototype.setConnection=function(t){this.connection=t},c.prototype.answer=function(n){var r,t,e,i=new c(this.id,this.port,this.type);return i.setDirection(s.reverse(this.direction)),n.codecs&&this.codecs.forEach(function(t){var e;n.codecs.has(t.getCodec().toLowerCase())&&((e=n.codecs.get(t.getCodec().toLowerCase()).clone()).setType(t.getType()),e.hasRTX()&&e.setRTX(t.getRTX()),i.addCodec(e))}),this.extensions.forEach(function(t,e){n.extensions.has(e)&&i.addExtension(e,t)}),n.simulcast&&this.simulcast&&(r=new o,(t=this.simulcast.getSimulcastStreams(a.SEND))&&t.forEach(function(t){var e=[];t.forEach(function(t){e.push(t.clone())}),r.addSimulcastAlternativeStreams(a.RECV,e)}),(e=this.simulcast.getSimulcastStreams(a.RECV))&&e.forEach(function(t){var e=[];t.forEach(function(t){e.push(t.clone())}),r.addSimulcastAlternativeStreams(a.SEND,e)}),this.rids.forEach(function(t){var e=t.clone();e.setDirection(a.reverse(t.getDirection())),i.addRID(e)}),i.setSimulcast(r)),i},c.prototype.getSimulcast=function(){return this.simulcast},c.prototype.setSimulcast=function(t){this.simulcast=t},c.prototype.getSimulcast03=function(){return this.simulcast_03},c.prototype.setSimulcast03=function(t){this.simulcast_03=t},c.prototype.getSetup=function(){return this.setup},c.prototype.setSetup=function(t){this.setup=t},c);function c(t,e,n){this.id=t,this.type=n,this.port=e,this.direction=s.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.simulcast_03=null,this.bitrate=0,this.ice=null,this.dtls=null,this.connection=null,this.candidates=[]}t.exports=r},O6qx:function(t,e){var n=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=null!=t.raddr?" raddr %s rport %d":"%v%v",e+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(e+=" generation %d"),e+=null!=t["network-id"]?" network-id %d":"%v",e+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return null!=t.attribute&&(e+=" %s",null!=t.value&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=null!=t.id?"id=%s %s":"%v%s",e+=null!=t.mediaClockValue?"=%s":"",e+=null!=t.rateNumerator?" rate=%s":"",e+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(t){n[t].forEach(function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")})})},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},Pu7W:function(t,e,n){"use strict";window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,window.RTCIceCandidate=window.RTCIceCandidate||window.mozRTCIceCandidate,window.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription,navigator.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia,window.AudioContext=window.AudioContext||window.webkitAudioContext,void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(n){var r=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return r?new Promise(function(t,e){r.call(navigator,n,t,e)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))})},QN7Q:function(t,e){var r=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},QbUa:function(t,e,n){"use strict";var r=(i.prototype.clone=function(){return new i(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.generation,this.relAddr,this.relPort)},i.prototype.plain=function(){var t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type,generation:this.generation};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t},i.prototype.getFoundation=function(){return this.foundation},i.prototype.getComponentId=function(){return this.componentId},i.prototype.getTransport=function(){return this.transport},i.prototype.getPriority=function(){return this.priority},i.prototype.getAddress=function(){return this.address},i.prototype.getPort=function(){return this.port},i.prototype.getType=function(){return this.type},i.prototype.getGeneration=function(){return this.generation},i.prototype.getRelAddr=function(){return this.relAddr},i.prototype.getRelPort=function(){return this.relPort},i);function i(t,e,n,r,i,o,s,a,c,u){this.foundation=t,this.componentId=e,this.transport=n,this.priority=r,this.address=i,this.port=o,this.type=s,this.generation=a,this.relAddr=c,this.relPort=u}t.exports=r},SCLy:function(n,r,t){"use strict";(function(w){var t,e=function(t,e,n){var r,i="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(r=void 0!==w?w:null)&&"undefined"==typeof window&&void 0!==w&&(w.navigator={userAgent:i,getUserMedia:function(){}},w.console||(w.console={}),void 0!==w.console.log&&void 0!==w.console.error||(w.console.error=w.console.log=w.console.log||function(){}),"undefined"==typeof document&&(r.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var t={getContext:function(){return t},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return t},r.HTMLVideoElement=function(){}),"undefined"==typeof location&&(r.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(r.screen={width:0,height:0}),"undefined"==typeof URL&&(r.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),"undefined"==typeof MediaStreamTrack&&(r.MediaStreamTrack=function(){}),void 0===o&&(r.RTCPeerConnection=function(){}),r.window=w);var o=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;"undefined"==typeof MediaStreamTrack&&(MediaStreamTrack={});var s={encryption:"sha-256",audio:{send:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},recv:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},bytesSent:0,bytesReceived:0,latency:0,packetsLost:0},video:{send:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},recv:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},bytesSent:0,bytesReceived:0,latency:0,packetsLost:0},bandwidth:{systemBandwidth:0,sentPerSecond:0,encodedPerSecond:0,helper:{audioBytesSent:0,videoBytestSent:0},speed:0},results:{},connectionType:{systemNetworkType:((navigator.connection||{}).type||"unknown").toString().toLowerCase(),systemIpAddress:"192.168.1.2",local:{candidateType:[],transport:[],ipAddress:[],networkType:[]},remote:{candidateType:[],transport:[],ipAddress:[],networkType:[]}},resolutions:{send:{width:0,height:0},recv:{width:0,height:0}},internal:{audio:{send:{},recv:{}},video:{send:{},recv:{}},candidates:{}},nomore:function(){d=!0}},a={checkIfOfferer:function(t){"googLibjingleSession"===t.type&&(s.isOfferer=t.googInitiator)}},c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),u=this;if(!(arguments[0]instanceof o))throw"1st argument is not instance of RTCPeerConnection.";u=arguments[0],arguments[1]instanceof MediaStreamTrack&&(e=arguments[2],n=arguments[3]);var d=!1;function p(){l(function(t){if(t&&t.forEach){t.forEach(function(e){Object.keys(a).forEach(function(t){if("function"==typeof a[t])try{a[t](e)}catch(t){console.error(t.message,t.stack,t)}})});try{-1!==u.iceConnectionState.search(/failed|closed|disconnected/gi)&&(d=!0)}catch(t){d=!0}!0===d&&(s.datachannel&&(s.datachannel.state="close"),s.ended=!0),s.results=t,s.audio&&s.video&&(s.bandwidth.speed=s.audio.bytesSent-s.bandwidth.helper.audioBytesSent+(s.video.bytesSent-s.bandwidth.helper.videoBytesSent),s.bandwidth.helper.audioBytesSent=s.audio.bytesSent,s.bandwidth.helper.videoBytesSent=s.video.bytesSent),e(s),d||null!=typeof n&&n&&setTimeout(p,n||1e3)}})}function l(n){void 0!==window.InstallTrigger||c?u.getStats(window.mediaStreamTrack||null).then(function(t){var e=[];t.forEach(function(t){e.push(t)}),n(e)}).catch(n):u.getStats(function(t){var r=[];t.result().forEach(function(e){var n={};e.names().forEach(function(t){n[t]=e.stat(t)}),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(n)}),n(r)})}a.datachannel=function(t){"datachannel"===t.type&&(s.datachannel={state:t.state})},a.googCertificate=function(t){"googCertificate"==t.type&&(s.encryption=t.googFingerprintAlgorithm),"certificate"==t.type&&(s.encryption=t.fingerprintAlgorithm)},a.checkAudioTracks=function(t){var e,n,r;"audio"===t.mediaType&&(e=t.id.split("_").pop(),!0===t.isRemote&&(e="recv"),!1===t.isRemote&&(e="send"),e&&(-1===s.audio[e].codecs.indexOf(t.googCodecName||"opus")&&s.audio[e].codecs.push(t.googCodecName||"opus"),t.bytesSent&&(n=0,s.internal.audio[e].prevBytesSent||(s.internal.audio[e].prevBytesSent=t.bytesSent),r=t.bytesSent-s.internal.audio[e].prevBytesSent,s.internal.audio[e].prevBytesSent=t.bytesSent,n=r/1024,s.audio[e].availableBandwidth=n.toFixed(1),s.audio.bytesSent=n.toFixed(1)),t.bytesReceived&&(n=0,s.internal.audio[e].prevBytesReceived||(s.internal.audio[e].prevBytesReceived=t.bytesReceived),r=t.bytesReceived-s.internal.audio[e].prevBytesReceived,s.internal.audio[e].prevBytesReceived=t.bytesReceived,n=r/1024,s.audio.bytesReceived=n.toFixed(1)),t.googTrackId&&-1===s.audio[e].tracks.indexOf(t.googTrackId)&&s.audio[e].tracks.push(t.googTrackId),t.googCurrentDelayMs&&(n=0,s.internal.audio.prevGoogCurrentDelayMs||(s.internal.audio.prevGoogCurrentDelayMs=t.googCurrentDelayMs),r=t.googCurrentDelayMs-s.internal.audio.prevGoogCurrentDelayMs,s.internal.audio.prevGoogCurrentDelayMs=t.googCurrentDelayMs,s.audio.latency=r.toFixed(1),s.audio.latency<0&&(s.audio.latency=0)),t.packetsLost&&(n=0,s.internal.audio.prevPacketsLost||(s.internal.audio.prevPacketsLost=t.packetsLost),r=t.packetsLost-s.internal.audio.prevPacketsLost,s.internal.audio.prevPacketsLost=t.packetsLost,s.audio.packetsLost=r.toFixed(1),s.audio.packetsLost<0&&(s.audio.packetsLost=0))))},a.checkVideoTracks=function(t){var e,n,r;"video"===t.mediaType&&(e=t.id.split("_").pop(),!0===t.isRemote&&(e="recv"),!1===t.isRemote&&(e="send"),e&&(-1===s.video[e].codecs.indexOf(t.googCodecName||"VP8")&&s.video[e].codecs.push(t.googCodecName||"VP8"),t.bytesSent&&(n=0,s.internal.video[e].prevBytesSent||(s.internal.video[e].prevBytesSent=t.bytesSent),r=t.bytesSent-s.internal.video[e].prevBytesSent,s.internal.video[e].prevBytesSent=t.bytesSent,n=r/1024,s.video[e].availableBandwidth=n.toFixed(1),s.video.bytesSent=n.toFixed(1)),t.bytesReceived&&(n=0,s.internal.video[e].prevBytesReceived||(s.internal.video[e].prevBytesReceived=t.bytesReceived),r=t.bytesReceived-s.internal.video[e].prevBytesReceived,s.internal.video[e].prevBytesReceived=t.bytesReceived,n=r/1024,s.video.bytesReceived=n.toFixed(1)),t.googFrameHeightReceived&&t.googFrameWidthReceived&&(s.resolutions[e].width=t.googFrameWidthReceived,s.resolutions[e].height=t.googFrameHeightReceived),t.googFrameHeightSent&&t.googFrameWidthSent&&(s.resolutions[e].width=t.googFrameWidthSent,s.resolutions[e].height=t.googFrameHeightSent),t.googTrackId&&-1===s.video[e].tracks.indexOf(t.googTrackId)&&s.video[e].tracks.push(t.googTrackId),t.framerateMean&&(s.bandwidth.framerateMean=t.framerateMean,n=0,s.internal.video[e].prevFramerateMean||(s.internal.video[e].prevFramerateMean=t.bitrateMean),r=t.bytesSent-s.internal.video[e].prevFramerateMean,s.internal.video[e].prevFramerateMean=t.framerateMean,n=r/1024,s.video[e].framerateMean=r.toFixed(1)),t.bitrateMean&&(s.bandwidth.bitrateMean=t.bitrateMean,n=0,s.internal.video[e].prevBitrateMean||(s.internal.video[e].prevBitrateMean=t.bitrateMean),r=t.bytesSent-s.internal.video[e].prevBitrateMean,s.internal.video[e].prevBitrateMean=t.bitrateMean,n=r/1024,s.video[e].bitrateMean=r.toFixed(1)),t.googCurrentDelayMs&&(n=0,s.internal.video.prevGoogCurrentDelayMs||(s.internal.video.prevGoogCurrentDelayMs=t.googCurrentDelayMs),r=t.googCurrentDelayMs-s.internal.video.prevGoogCurrentDelayMs,s.internal.video.prevGoogCurrentDelayMs=t.googCurrentDelayMs,s.video.latency=r.toFixed(1),s.video.latency<0&&(s.video.latency=0)),t.packetsLost&&(n=0,s.internal.video.prevPacketsLost||(s.internal.video.prevPacketsLost=t.packetsLost),r=t.packetsLost-s.internal.video.prevPacketsLost,s.internal.video.prevPacketsLost=t.packetsLost,s.video.packetsLost=r.toFixed(1),s.video.packetsLost<0&&(s.video.packetsLost=0))))},a.bweforvideo=function(t){"VideoBwe"===t.type&&(s.bandwidth.availableSendBandwidth=t.googAvailableSendBandwidth,s.bandwidth.googActualEncBitrate=t.googActualEncBitrate,s.bandwidth.googAvailableSendBandwidth=t.googAvailableSendBandwidth,s.bandwidth.googAvailableReceiveBandwidth=t.googAvailableReceiveBandwidth,s.bandwidth.googRetransmitBitrate=t.googRetransmitBitrate,s.bandwidth.googTargetEncBitrate=t.googTargetEncBitrate,s.bandwidth.googBucketDelay=t.googBucketDelay,s.bandwidth.googTransmitBitrate=t.googTransmitBitrate)},a.candidatePair=function(n){var t,e,r,i,o;"googCandidatePair"!==n.type&&"candidate-pair"!==n.type&&"local-candidate"!==n.type&&"remote-candidate"!==n.type||("true"==n.googActiveConnection&&(Object.keys(s.internal.candidates).forEach(function(t){var e=s.internal.candidates[t];-1!==e.ipAddress.indexOf(n.googLocalAddress)&&(s.connectionType.local.candidateType=e.candidateType,s.connectionType.local.ipAddress=e.ipAddress,s.connectionType.local.networkType=e.networkType,s.connectionType.local.transport=e.transport),-1!==e.ipAddress.indexOf(n.googRemoteAddress)&&(s.connectionType.remote.candidateType=e.candidateType,s.connectionType.remote.ipAddress=e.ipAddress,s.connectionType.remote.networkType=e.networkType,s.connectionType.remote.transport=e.transport)}),s.connectionType.transport=n.googTransportType,(t=s.internal.candidates[n.localCandidateId])&&t.ipAddress&&(s.connectionType.systemIpAddress=t.ipAddress),(e=s.internal.candidates[n.remoteCandidateId])&&e.ipAddress&&(s.connectionType.systemIpAddress=e.ipAddress)),"candidate-pair"===n.type&&!0===n.selected&&!0===n.nominated&&"succeeded"===n.state&&(t=s.internal.candidates[n.remoteCandidateId],e=s.internal.candidates[n.remoteCandidateId]),"local-candidate"===n.type&&(s.connectionType.local.candidateType=n.candidateType,s.connectionType.local.ipAddress=n.ipAddress,s.connectionType.local.networkType=n.networkType,s.connectionType.local.transport=n.mozLocalTransport||n.transport),"remote-candidate"===n.type&&(s.connectionType.remote.candidateType=n.candidateType,s.connectionType.remote.ipAddress=n.ipAddress,s.connectionType.remote.networkType=n.networkType,s.connectionType.remote.transport=n.mozRemoteTransport||n.transport),!c||(r=n.localCandidateId?"send":"recv")&&(n.bytesSent&&(i=0,s.internal.video[r].prevBytesSent||(s.internal.video[r].prevBytesSent=n.bytesSent),o=n.bytesSent-s.internal.video[r].prevBytesSent,s.internal.video[r].prevBytesSent=n.bytesSent,i=o/1024,s.video[r].availableBandwidth=i.toFixed(1),s.video.bytesSent=i.toFixed(1)),n.bytesReceived&&(i=0,s.internal.video[r].prevBytesReceived||(s.internal.video[r].prevBytesReceived=n.bytesReceived),o=n.bytesReceived-s.internal.video[r].prevBytesReceived,s.internal.video[r].prevBytesReceived=n.bytesReceived,i=o/1024,s.video.bytesReceived=i.toFixed(1)),n.availableOutgoingBitrate&&(i=0,s.internal.video[r].prevAvailableOutgoingBitrate||(s.internal.video[r].prevAvailableOutgoingBitrate=n.availableOutgoingBitrate),o=n.availableOutgoingBitrate-s.internal.video[r].prevAvailableOutgoingBitrate,s.internal.video[r].prevAvailableOutgoingBitrate=n.availableOutgoingBitrate,i=o/1024,s.video.availableOutgoingBitrate=i.toFixed(1)),n.availableIncomingBitrate&&(i=0,s.internal.video[r].prevAvailableIncomingBitrate||(s.internal.video[r].prevAvailableIncomingBitrate=n.availableIncomingBitrate),o=n.availableIncomingBitrate-s.internal.video[r].prevAvailableIncomingBitrate,s.internal.video[r].prevAvailableIncomingBitrate=n.availableIncomingBitrate,i=o/1024,s.video.availableIncomingBitrate=i.toFixed(1))))};var h={},f={},m={},y={};a.localcandidate=function(t){"localcandidate"!==t.type&&"local-candidate"!==t.type||t.id&&(h[t.id]||(h[t.id]=[]),f[t.id]||(f[t.id]=[]),m[t.id]||(m[t.id]=[]),y[t.id]||(y[t.id]=[]),t.candidateType&&-1===h[t.id].indexOf(t.candidateType)&&h[t.id].push(t.candidateType),t.transport&&-1===f[t.id].indexOf(t.transport)&&f[t.id].push(t.transport),t.ipAddress&&-1===m[t.id].indexOf(t.ipAddress+":"+t.portNumber)&&m[t.id].push(t.ipAddress+":"+t.portNumber),t.networkType&&-1===y[t.id].indexOf(t.networkType)&&y[t.id].push(t.networkType),s.internal.candidates[t.id]={candidateType:h[t.id],ipAddress:m[t.id],portNumber:t.portNumber,networkType:y[t.id],priority:t.priority,transport:f[t.id],timestamp:t.timestamp,id:t.id,type:t.type},s.connectionType.local.candidateType=h[t.id],s.connectionType.local.ipAddress=m[t.id],s.connectionType.local.networkType=y[t.id],s.connectionType.local.transport=f[t.id])};var g={},v={},b={},E={};a.remotecandidate=function(t){"remotecandidate"!==t.type&&"remote-candidate"!==t.type||t.id&&(g[t.id]||(g[t.id]=[]),v[t.id]||(v[t.id]=[]),b[t.id]||(b[t.id]=[]),E[t.id]||(E[t.id]=[]),t.candidateType&&-1===g[t.id].indexOf(t.candidateType)&&g[t.id].push(t.candidateType),t.transport&&-1===v[t.id].indexOf(t.transport)&&v[t.id].push(t.transport),t.ipAddress&&-1===b[t.id].indexOf(t.ipAddress+":"+t.portNumber)&&b[t.id].push(t.ipAddress+":"+t.portNumber),t.networkType&&-1===E[t.id].indexOf(t.networkType)&&E[t.id].push(t.networkType),s.internal.candidates[t.id]={candidateType:g[t.id],ipAddress:b[t.id],portNumber:t.portNumber,networkType:E[t.id],priority:t.priority,transport:v[t.id],timestamp:t.timestamp,id:t.id,type:t.type},s.connectionType.remote.candidateType=g[t.id],s.connectionType.remote.ipAddress=b[t.id],s.connectionType.remote.networkType=E[t.id],s.connectionType.remote.transport=v[t.id])},a.dataSentReceived=function(t){!t.googCodecName||"video"!==t.mediaType&&"audio"!==t.mediaType||(t.bytesSent&&(s[t.mediaType].bytesSent=parseInt(t.bytesSent)),t.bytesReceived&&(s[t.mediaType].bytesReceived=parseInt(t.bytesReceived)))},a.inboundrtp=function(t){var e,n,r,i;c&&"inbound-rtp"===t.type&&(e=t.mediaType||"audio",(n=t.isRemote?"recv":"send")&&(t.bytesSent&&(r=0,s.internal[e][n].prevBytesSent||(s.internal[e][n].prevBytesSent=t.bytesSent),i=t.bytesSent-s.internal[e][n].prevBytesSent,s.internal[e][n].prevBytesSent=t.bytesSent,r=i/1024,s[e][n].availableBandwidth=r.toFixed(1),s[e].bytesSent=r.toFixed(1)),t.bytesReceived&&(r=0,s.internal[e][n].prevBytesReceived||(s.internal[e][n].prevBytesReceived=t.bytesReceived),i=t.bytesReceived-s.internal[e][n].prevBytesReceived,s.internal[e][n].prevBytesReceived=t.bytesReceived,r=i/1024,s[e].bytesReceived=r.toFixed(1))))},a.outboundrtp=function(t){var e,n,r,i;c&&"outbound-rtp"===t.type&&(e=t.mediaType||"audio",(n=t.isRemote?"recv":"send")&&(t.bytesSent&&(r=0,s.internal[e][n].prevBytesSent||(s.internal[e][n].prevBytesSent=t.bytesSent),i=t.bytesSent-s.internal[e][n].prevBytesSent,s.internal[e][n].prevBytesSent=t.bytesSent,r=i/1024,s[e][n].availableBandwidth=r.toFixed(1),s[e].bytesSent=r.toFixed(1)),t.bytesReceived&&(r=0,s.internal[e][n].prevBytesReceived||(s.internal[e][n].prevBytesReceived=t.bytesReceived),i=t.bytesReceived-s.internal[e][n].prevBytesReceived,s.internal[e][n].prevBytesReceived=t.bytesReceived,r=i/1024,s[e].bytesReceived=r.toFixed(1))))},a.track=function(t){var e;c&&"track"===t.type&&(e=!0===t.remoteSource?"send":"recv",t.frameWidth&&t.frameHeight&&(s.resolutions[e].width=t.frameWidth,s.resolutions[e].height=t.frameHeight))};var S={audio:{send:[],recv:[]},video:{send:[],recv:[]}};a.ssrc=function(t){var e;!t.googCodecName||"video"!==t.mediaType&&"audio"!==t.mediaType||"ssrc"===t.type&&(e=t.id.split("_").pop(),-1===S[t.mediaType][e].indexOf(t.ssrc)&&S[t.mediaType][e].push(t.ssrc),s[t.mediaType][e].streams=S[t.mediaType][e].length)},p()};n.exports=e,void 0===(t=function(){return e}.apply(r,[]))||(n.exports=t)}).call(this,t("yLpj"))},Tkys:function(t,e,n){"use strict";var r=n("ftoZ"),i=(o.prototype.clone=function(){var n=new o;return this.send.forEach(function(t){var e=[];t.forEach(function(t){e.push(t.clone())}),n.addSimulcastAlternativeStreams(e)}),this.recv.forEach(function(t){var e=[];t.forEach(function(t){e.push(t.clone())}),n.addSimulcastAlternativeStreams(e)}),n},o.prototype.plain=function(){var n={send:[],recv:[]};return this.send.forEach(function(t){var e=[];t.forEach(function(t){e.push(t.plain())}),n.send.push(e)}),this.recv.forEach(function(t){var e=[];t.forEach(function(t){e.push(t.plain())}),n.recv.push(e)}),n},o.prototype.addSimulcastAlternativeStreams=function(t,e){return(t===r.SEND?this.send:this.recv).push(e)},o.prototype.addSimulcastStream=function(t,e){return(t===r.SEND?this.send:this.recv).push([e])},o.prototype.getSimulcastStreams=function(t){return t===r.SEND?this.send:this.recv},o.prototype.setSimulcastPlainString=function(t){this.plainString=t},o.prototype.getSimulcastPlainString=function(){return this.plainString},o);function o(){this.send=[],this.recv=[],this.plainString=null}t.exports=i},TypT:function(t,e){e.encode=function(t){var e,n="";for(e in t)t.hasOwnProperty(e)&&(n.length&&(n+="&"),n+=encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},Uxeu:function(t,e){var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));for(var i=a.exec(t||""),o={},s=14;s--;)o[c[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o}},VUhV:function(t){t.exports=JSON.parse('{"name":"@byteview/web-rtcsdk","version":"0.0.43","description":"","main":"es/index.js","scripts":{"publish":"npm run build-es","watch-es":"rm -rf es && tsc -b -w tsconfig.prod.json","build-es":"rm -rf es && tsc -b tsconfig.prod.json","watch":"rm -rf lib && cross-env NODE_ENV=development webpack --config webpack/webpack.config.js --progress --watch","build":"rm -rf lib && cross-env NODE_ENV=production webpack --config webpack/webpack.config.js","cp":"cp ./lib/index.js ../../examples/demo/","test":"echo \\"Error: no test specified\\" && exit 1"},"author":"","license":"ISC","devDependencies":{"@types/node":"^12.12.6","@types/ua-parser-js":"^0.7.33","cross-env":"^6.0.3","ts-loader":"^6.2.1","typescript":"^3.7.3","webpack":"^4.41.2","webpack-cli":"^3.3.10"},"dependencies":{"@byteview/web-util":"^0.0.43","sdp-transform":"^2.3.0","socket.io-client":"^2.3.0","ua-parser-js":"^0.7.21","uuid":"^3.3.3"},"gitHead":"258908198b54a86e6aafcd4fe7617c6ece28331a"}')},Vo14:function(t,a,e){var c=e("mfRe")("socket.io-parser"),n=e("cpc2"),o=e("cD5x"),u=e("49sm"),r=e("+SKG");function i(){}a.protocol=4,a.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],a.CONNECT=0,a.DISCONNECT=1,a.EVENT=2,a.ACK=3,a.ERROR=4,a.BINARY_EVENT=5,a.BINARY_ACK=6,a.Encoder=i,a.Decoder=h;var s=a.ERROR+'"encode error"';function d(t){var e=""+t.type;if(a.BINARY_EVENT!==t.type&&a.BINARY_ACK!==t.type||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data){var n=p(t.data);if(!1===n)return s;e+=n}return c("encoded %j as %s",t,e),e}function p(t){try{return JSON.stringify(t)}catch(t){return!1}}function l(t,i){function e(t){var e=o.deconstructPacket(t),n=d(e.packet),r=e.buffers;r.unshift(n),i(r)}o.removeBlobs(t,e)}function h(){this.reconstructor=null}function f(t){var e=0,n={type:Number(t.charAt(0))};if(null==a.types[n.type])return g("unknown packet type "+n.type);if(a.BINARY_EVENT===n.type||a.BINARY_ACK===n.type){for(var r="";"-"!==t.charAt(++e)&&(r+=t.charAt(e),e!=t.length););if(r!=Number(r)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===t.charAt(e+1))for(n.nsp="";++e;){if(","===(i=t.charAt(e)))break;if(n.nsp+=i,e===t.length)break}else n.nsp="/";var i,o=t.charAt(e+1);if(""!==o&&Number(o)==o){for(n.id="";++e;){if(null==(i=t.charAt(e))||Number(i)!=i){--e;break}if(n.id+=t.charAt(e),e===t.length)break}n.id=Number(n.id)}if(t.charAt(++e)){var s=m(t.substr(e));if(!(!1!==s&&(n.type===a.ERROR||u(s))))return g("invalid payload");n.data=s}return c("decoded %s as %j",t,n),n}function m(t){try{return JSON.parse(t)}catch(t){return!1}}function y(t){this.reconPack=t,this.buffers=[]}function g(t){return{type:a.ERROR,data:"parser error: "+t}}i.prototype.encode=function(t,e){c("encoding packet %j",t),a.BINARY_EVENT===t.type||a.BINARY_ACK===t.type?l(t,e):e([d(t)])},n(h.prototype),h.prototype.add=function(t){var e;if("string"==typeof t)e=f(t),a.BINARY_EVENT===e.type||a.BINARY_ACK===e.type?(this.reconstructor=new y(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!r(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",e))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},y.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length!==this.reconPack.attachments)return null;var e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e},y.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},WLGk:function(e,t,n){(function(i){var o=n("49sm"),t=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===t.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===t.call(File);function c(t){if(!t||"object"!=typeof t)return!1;if(o(t)){for(var e=0,n=t.length;e<n;e++)if(c(t[e]))return!0;return!1}if("function"==typeof i&&i.isBuffer&&i.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||a&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return c(t.toJSON(),!0);for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&c(t[r]))return!0;return!1}e.exports=c}).call(this,n("HDXh").Buffer)},Wm4p:function(t,l,e){var i,n=e("dkv/"),s=e("WLGk"),h=e("ypnn"),a=e("zMFY"),c=e("oIG/");"undefined"!=typeof ArrayBuffer&&(i=e("g5Dd"));var r="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),o="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),u=r||o;l.protocol=3;var d=l.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=n(d),f={type:"error",data:"parser error"},m=e("14A5");function y(t,e){return e("b"+l.packets[t.type]+t.data.data)}function g(t,e,n){if(!e)return l.encodeBase64Packet(t,n);var r=t.data,i=new Uint8Array(r),o=new Uint8Array(1+r.byteLength);o[0]=d[t.type];for(var s=0;s<i.length;s++)o[s+1]=i[s];return n(o.buffer)}function v(t,e,n){if(!e)return l.encodeBase64Packet(t,n);var r=new FileReader;return r.onload=function(){l.encodePacket({type:t.type,data:r.result},e,!0,n)},r.readAsArrayBuffer(t.data)}function b(t,e,n){if(!e)return l.encodeBase64Packet(t,n);if(u)return v(t,e,n);var r=new Uint8Array(1);return r[0]=d[t.type],n(new m([r.buffer,t.data]))}function E(t){try{t=c.decode(t,{strict:!1})}catch(t){return!1}return t}function S(t,e,n){for(var i=new Array(t.length),r=a(t.length,n),o=function(n,t,r){e(t,function(t,e){i[n]=e,r(t,i)})},s=0;s<t.length;s++)o(s,t[s],r)}l.encodePacket=function(t,e,n,r){"function"==typeof e&&(r=e,e=!1),"function"==typeof n&&(r=n,n=null);var i=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer)return g(t,e,r);if(void 0!==m&&i instanceof m)return b(t,e,r);if(i&&i.base64)return y(t,r);var o=d[t.type];return void 0!==t.data&&(o+=n?c.encode(String(t.data),{strict:!1}):String(t.data)),r(""+o)},l.encodeBase64Packet=function(e,n){var r,i="b"+l.packets[e.type];if(void 0!==m&&e.data instanceof m){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];n(i+t)},o.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];r=String.fromCharCode.apply(null,a)}return i+=btoa(r),n(i)},l.decodePacket=function(t,e,n){if(void 0===t)return f;if("string"==typeof t){if("b"===t.charAt(0))return l.decodeBase64Packet(t.substr(1),e);if(n&&!1===(t=E(t)))return f;var r=t.charAt(0);return Number(r)==r&&p[r]?1<t.length?{type:p[r],data:t.substring(1)}:{type:p[r]}:f}var r=new Uint8Array(t)[0],i=h(t,1);return m&&"blob"===e&&(i=new m([i])),{type:p[r],data:i}},l.decodeBase64Packet=function(t,e){var n=p[t.charAt(0)];if(!i)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=i.decode(t.substr(1));return"blob"===e&&m&&(r=new m([r])),{type:n,data:r}},l.encodePayload=function(t,n,r){"function"==typeof n&&(r=n,n=null);var i=s(t);return n&&i?m&&!u?l.encodePayloadAsBlob(t,r):l.encodePayloadAsArrayBuffer(t,r):t.length?void S(t,e,function(t,e){return r(e.join(""))}):r("0:");function o(t){return t.length+":"+t}function e(t,e){l.encodePacket(t,!!i&&n,!1,function(t){e(null,o(t))})}},l.decodePayload=function(t,e,n){if("string"!=typeof t)return l.decodePayloadAsBinary(t,e,n);var r;if("function"==typeof e&&(n=e,e=null),""===t)return n(f,0,1);for(var i,o,s="",a=0,c=t.length;a<c;a++){var u=t.charAt(a);if(":"===u){if(""===s||s!=(i=Number(s)))return n(f,0,1);if(s!=(o=t.substr(a+1,i)).length)return n(f,0,1);if(o.length){if(r=l.decodePacket(o,e,!1),f.type===r.type&&f.data===r.data)return n(f,0,1);if(!1===n(r,a+i,c))return}a+=i,s=""}else s+=u}return""!==s?n(f,0,1):void 0},l.encodePayloadAsArrayBuffer=function(t,r){if(!t.length)return r(new ArrayBuffer(0));function e(t,e){l.encodePacket(t,!0,!0,function(t){return e(null,t)})}S(t,e,function(t,e){var n=e.reduce(function(t,e){var n="string"==typeof e?e.length:e.byteLength;return t+n.toString().length+n+2},0),s=new Uint8Array(n),a=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);n=r.buffer}s[a++]=e?0:1;for(var o=n.byteLength.toString(),i=0;i<o.length;i++)s[a++]=parseInt(o[i]);s[a++]=255;for(r=new Uint8Array(n),i=0;i<r.length;i++)s[a++]=r[i]}),r(s.buffer)})},l.encodePayloadAsBlob=function(t,n){function e(t,a){l.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);t=n.buffer,e[0]=0}for(var i,o=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(o.length+1),r=0;r<o.length;r++)s[r]=parseInt(o[r]);s[o.length]=255,m&&(i=new m([e.buffer,s.buffer,t]),a(null,i))})}S(t,e,function(t,e){return n(new m(e))})},l.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var e=t,i=[];0<e.byteLength;){for(var o=new Uint8Array(e),s=0===o[0],a="",c=1;255!==o[c];c++){if(310<a.length)return r(f,0,1);a+=o[c]}e=h(e,2+a.length),a=parseInt(a);var u=h(e,0,a);if(s)try{u=String.fromCharCode.apply(null,new Uint8Array(u))}catch(t){for(var d=new Uint8Array(u),u="",c=0;c<d.length;c++)u+=String.fromCharCode(d[c])}i.push(u),e=h(e,a)}var p=i.length;i.forEach(function(t,e){r(l.decodePacket(t,n,!0),e,p)})}},Yvos:function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},Zd4P:function(t,e,n){"use strict";var r=(i.prototype.clone=function(){var e=new i(this.id,this.paused);return this.codecs.forEach(function(t){e.addCodec(t.cloned())}),e.setParams(this.params),e},i.prototype.plain=function(){var e=this,n={id:this.id,paused:this.paused,codecs:{},params:{}};return this.codecs.keys().forEach(function(t){n.codecs[t]=e.codecs.get(t).plain()}),this.params.keys().forEach(function(t){n.params[t]=e.params.get(t).param}),n},i.prototype.getId=function(){return this.id},i.prototype.getCodecs=function(){return this.codecs},i.prototype.addCodec=function(t){this.codecs.set(t.getType(),t)},i.prototype.getParams=function(){return this.params},i.prototype.setParams=function(t){this.params=new Map(t)},i.prototype.isPaused=function(){return this.paused},i);function i(t,e){this.id=t,this.paused=e,this.codecs=new Map,this.params=new Map}t.exports=r},adIa:function(t,e,n){"use strict";var r=n("JRJ6")("SENDRECV","SENDONLY","RECVONLY","INACTIVE");r.byValue=function(t){return r[t.toUpperCase()]},r.toString=function(t){switch(t){case r.SENDRECV:return"sendrecv";case r.SENDONLY:return"sendonly";case r.RECVONLY:return"recvonly";case r.INACTIVE:return"inactive";default:return"unknown"}},r.reverse=function(t){switch(t){case r.SENDRECV:return r.SENDRECV;case r.SENDONLY:return r.RECVONLY;case r.RECVONLY:return r.SENDONLY;case r.INACTIVE:return r.INACTIVE;default:return r.SENDRECV}},t.exports=r},akSB:function(t,n,r){(function(s){var a=r("AdPF"),c=r("0z79"),u=r("Cl5A"),t=r("CIKq");function e(t){var e,n,r=!1,i=!1,o=!1!==t.jsonp;if(s.location&&(e="https:"===location.protocol,n=(n=location.port)||(e?443:80),r=t.hostname!==location.hostname||n!==t.port,i=t.secure!==e),t.xdomain=r,t.xscheme=i,"open"in new a(t)&&!t.forceJSONP)return new c(t);if(!o)throw new Error("JSONP disabled");return new u(t)}n.polling=e,n.websocket=t}).call(this,r("yLpj"))},aqwp:function(t,e,n){"use strict";var s=n("k76L"),y=n("QbUa"),d=n("qamT"),g=n("jod6"),v=n("nDzp"),b=n("N824"),E=n("gGne"),S=n("adIa"),f=n("ftoZ"),m=n("m23k"),w=n("IxNO"),I=n("uwB8"),T=n("qTDZ"),o=n("Zd4P"),r=n("Tkys"),a=n("yrL3"),c=n("cdGv"),i=(u.prototype.clone=function(){var e=new u(this.version);return e.name=this.name,e.setConnection(this.connection),this.medias.forEach(function(t){e.addMedia(t.clone())}),this.streams.forEach(function(t){e.addStream(t.clone())}),this.candidates.forEach(function(t){e.addCandidate(t.clone())}),e.setICE(this.ice.clone()),e.setDTLS(this.dtls.clone()),e},u.prototype.plain=function(){var e={version:this.version,name:this.name,streams:[],medias:[],candidates:[],connection:this.connection};return this.medias.forEach(function(t){e.medias.push(t.plain())}),this.streams.forEach(function(t){e.streams.push(t.plain())}),this.candidates.forEach(function(t){e.candidates.push(t.plain())}),e.ice=this.ice&&this.ice.plain(),e.dtls=this.dtls&&this.dtls.plain(),e},u.prototype.setVersion=function(t){this.version=t},u.prototype.setOrigin=function(t){this.origin=t},u.prototype.setName=function(t){this.name=t},u.prototype.getConnection=function(){return this.connection},u.prototype.setConnection=function(t){this.connection=t},u.prototype.setTiming=function(t){this.timing=t},u.prototype.addMedia=function(t){this.medias.push(t)},u.prototype.getMedia=function(e){var n;return this.medias.forEach(function(t){t.getType().toLowerCase()===e.toLowerCase()&&(n=t)}),n},u.prototype.getMedias=function(e){if(!e)return this.medias;var n=[];return this.medias.forEach(function(t){t.getType().toLowerCase()===e.toLowerCase()&&n.push(t)}),n},u.prototype.getMediaById=function(e){var n;return this.medias.forEach(function(t){t.getId().toLowerCase()===e.toLowerCase()&&(n=t)}),n},u.prototype.getVersion=function(){return this.version},u.prototype.getDTLS=function(){return this.dtls},u.prototype.setDTLS=function(t){this.dtls=t},u.prototype.getICE=function(){return this.ice},u.prototype.setICE=function(t){this.ice=t},u.prototype.addCandidate=function(t){this.candidates.push(t)},u.prototype.addCandidates=function(t){var e=this;t.forEach(function(t){e.addCandidate(t)})},u.prototype.getCandidates=function(){return this.candidates},u.prototype.getStream=function(t){return this.streams.get(t)},u.prototype.getStreams=function(){return this.streams},u.prototype.getFirstStream=function(){return 0<this.streams.values().length?this.streams.values()[0]:null},u.prototype.addStream=function(t){this.streams.set(t.getId(),t)},u.prototype.removeStream=function(t){this.streams.delete(t.getId())},u.prototype.toJSON=function(){var d={version:0,media:[]};d.version=this.version||0,d.origin=this.origin||{username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},d.name=this.name||"semantic-sdp",d.connection=this.getConnection(),d.timing=this.timing||{start:0,stop:0};var p=this.getICE();p&&(p.isLite()&&(d.icelite="ice-lite"),d.iceOptions=p.getOpts(),d.iceUfrag=p.getUfrag(),d.icePwd=p.getPwd()),d.msidSemantic=this.msidSemantic||{semantic:"WMS",token:"*"},d.groups=[];var l={type:"BUNDLE",mids:[]},h=this.getDTLS();return h&&(d.fingerprint={type:h.getHash(),hash:h.getFingerprint()},d.setup=E.toString(h.getSetup())),this.medias.forEach(function(t){var i={type:t.getType(),port:t.getPort(),protocol:"UDP/TLS/RTP/SAVPF",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};i.direction=S.toString(t.getDirection()),i.rtcpMux="rtcp-mux",i.connection=t.getConnection(),i.xGoogleFlag=t.getXGoogleFlag(),i.mid=t.getId(),l.mids.push(t.getId()),i.rtcp=t.rtcp,0<t.getBitrate()&&i.bandwidth.push({type:"AS",limit:t.getBitrate()}),t.getCandidates().forEach(function(t){i.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),relAddr:t.getRelAddr(),relPort:t.getRelPort(),generation:t.getGeneration()})}),(p=t.getICE())&&(p.isLite()&&(i.icelite="ice-lite"),i.iceOptions=p.getOpts(),i.iceUfrag=p.getUfrag(),i.icePwd=p.getPwd()),(h=t.getDTLS())&&(i.fingerprint={type:h.getHash(),hash:h.getFingerprint()},i.setup=E.toString(h.getSetup())),t.setup&&(i.setup=E.toString(t.setup)),t.getCodecs().forEach(function(e){i.rtp.push({payload:e.getType(),codec:e.getCodec(),rate:e.getRate(),encoding:e.getEncoding()});var n=e.getParams();0<Object.keys(n).length&&i.fmtp.push({payload:e.getType(),config:Object.keys(n).map(function(t){return t+(n[t]?"="+n[t]:"")}).join(";")}),e.getFeedback().forEach(function(t){i.rtcpFb.push({payload:e.getType(),type:t.type,subtype:t.subtype})}),e.hasRTX()&&(i.rtp.push({payload:e.getRTX(),codec:"rtx",rate:e.getRate(),encoding:e.getEncoding()}),i.fmtp.push({payload:e.getRTX(),config:"apt="+e.getType()}))});var e=[];i.rtp.forEach(function(t){e.push(t.payload)}),i.payloads=e.join(" "),t.getExtensions().forEach(function(t,e){i.ext.push({value:e,uri:t})}),t.getRIDs().forEach(function(t){var r={id:t.getId(),direction:f.toString(t.getDirection()),params:""};t.getFormats().length&&(r.params="pt="+t.getFormats().join(",")),t.getParams().forEach(function(t,e){var n=r.params.length?";":"";r.params+=""+n+e+"="+t}),i.rids.push(r)});var n,r,o,s,a,c=t.getSimulcast(),u=t.getSimulcast03();c&&(n=1,i.simulcast={},r=c.getSimulcastStreams(f.SEND),o=c.getSimulcastStreams(f.RECV),r&&r.length&&(s="",r.forEach(function(t){var e="";t.forEach(function(t){e+=(e.length?",":"")+(t.isPaused()?"~":"")+t.getId()}),s+=(s.length?";":"")+e}),i.simulcast["dir"+n]="send",i.simulcast["list"+n]=s,n+=1),o&&o.length&&(a=[],o.forEach(function(t){var e="";t.forEach(function(t){e+=(e.length?",":"")+(t.isPaused()?"~":"")+t.getId()}),a+=(a.length?";":"")+e}),i.simulcast["dir"+n]="recv",i.simulcast["list"+n]=a,n+=1)),u&&(i.simulcast_03={value:u.getSimulcastPlainString()}),d.media.push(i)}),this.streams.forEach(function(i){i.getTracks().forEach(function(t){for(var e=function(e){if(t.getMediaId()){if(t.getMediaId()===e.mid)return t.getSourceGroups().forEach(function(t){e.ssrcGroups.push({semantics:t.getSemantics(),ssrcs:t.getSSRCs().join(" ")})}),t.getSSRCs().forEach(function(t){e.ssrcs.push({id:t.ssrc,attribute:"cname",value:t.getCName()})}),i.getId()&&t.getId()&&(e.msid=i.getId()+" "+t.getId()),"break"}else if(e.type.toLowerCase()===t.getMedia().toLowerCase())return t.getSourceGroups().forEach(function(t){e.ssrcGroups.push({semantics:t.getSemantics(),ssrcs:t.getSSRCs().join(" ")})}),t.getSSRCs().forEach(function(t){e.ssrcs.push({id:t.ssrc,attribute:"cname",value:t.getCName()}),t.getStreamId()&&t.getTrackId()&&e.ssrcs.push({id:t.ssrc,attribute:"msid",value:t.getStreamId()+" "+t.getTrackId()}),t.getMSLabel()&&e.ssrcs.push({id:t.ssrc,attribute:"mslabel",value:t.getMSLabel()}),t.getLabel()&&e.ssrcs.push({id:t.ssrc,attribute:"label",value:t.getLabel()})}),"break"},n=0,r=d.media;n<r.length;n++)if("break"===e(r[n]))break})}),l.mids=l.mids.join(" "),d.groups.push(l),d},u.prototype.toString=function(){var t=this.toJSON();return s.write(t)},u);function u(t){this.version=t||1,this.name="sdp-semantic",this.streams=new Map,this.medias=[],this.candidates=[],this.connection=null,this.ice=null,this.dtls=null}function C(a,c){var u=new Map;c.rtp.forEach(function(t){var e=t.payload,n=t.codec,r=t.rate,i=t.encoding,o={},s=[];c.fmtp.forEach(function(t){t.payload===e&&t.config.split(";").forEach(function(t){var e=t.split("=");o[e[0].trim()]=(e[1]||"").trim()})}),c.rtcpFb&&c.rtcpFb.forEach(function(t){t.payload===e&&s.push({type:t.type,subtype:t.subtype})}),"RTX"===n.toUpperCase()?u.set(parseInt(o.apt,10),e):a.addCodec(new d(n,e,r,i,o,s))}),u.forEach(function(t,e){var n=a.getCodecForType(e);n&&n.setRTX(t)})}function _(o,t){var e=t.rids;e&&e.forEach(function(t){var e,n=new c(t.id,f.byValue(t.direction)),r=[],i=new Map;t.params&&(e=s.parseParams(t.params),Object.keys(e).forEach(function(t){"pt"===t?r=e[t].split(","):i.set(t,e[t])}),n.setFormats(r),n.setParams(i)),o.addRID(n)})}function p(t,e,n){var r,i=e.simulcast["dir"+t],o=e.simulcast["list"+t];i&&(r=f.byValue(i),s.parseSimulcastStreamList(o).forEach(function(t){var e=[];t.forEach(function(t){e.push(new a(t.scid,t.paused))}),n.addSimulcastAlternativeStreams(r,e)}))}function l(t,e){e.setSimulcastPlainString(t.simulcast_03.value)}function R(i,t){var e,n=[];return t.simulcast&&(p("1",t,e=new r),p("2",t,e),e.getSimulcastStreams(f.SEND).forEach(function(t){var r=[];t.forEach(function(t){var n=new o(t.getId(),t.isPaused()),e=i.getRID(n.getId());e&&(e.getFormats().forEach(function(t){var e=i.getCodecForType(t);e&&n.addCodec(e)}),n.setParams(e.getParams()),r.push(n))}),r.length&&n.push(r)}),i.setSimulcast(e)),t.simulcast_03&&(l(t,e=new r),i.setSimulcast03(e)),n}function N(a,c,t){var u,d,p,e,r,i,n,o,l=new Map,h=t.type;t.ssrcs&&t.ssrcs.forEach(function(t){var e,n,r,i=t.id,o=t.attribute,s=t.value;(p=l.get(i))||(p=new w(i),l.set(p.getSSRC(),p)),"cname"===o.toLowerCase()?p.setCName(s):"mslabel"===o.toLowerCase()?p.setMSLabel(s):"label"===o.toLowerCase()?p.setLabel(s):"msid"===o.toLowerCase()&&(n=(e=s.split(" "))[0],r=e[1],p.setStreamId(n),p.setTrackId(r),(d=c.getStream(n))||(d=new I(n),c.addStream(d)),(u=d.getTrack(r))||((u=new T(h,r)).setEncodings(a),d.addTrack(u)),u.addSSRC(p))}),t.msid&&(e=t.msid.split(" "),r=e[0],i=e[1],(n=c.getStream(r))||(n=new I(r),c.addStream(n)),(o=n.getTrack(i))||((o=new T(h,i)).setMediaId(t.mid),o.setEncodings(a),n.addTrack(o)),l.forEach(function(t,e){var n=l.get(e);n.getStreamId()||(n.setStreamId(r),n.setTrackId(i),o.addSSRC(n))})),t.ssrcGroups&&t.ssrcGroups.forEach(function(t){var e=t.ssrcs.split(" "),n=new m(t.semantics,e),r=l.get(parseInt(e[0],10));c.getStream(r.getStreamId()).getTrack(r.getTrackId()).addSourceGroup(n)})}i.processString=function(t){var e=s.parse(t);return i.process(e)},i.process=function(t){var p=new i;p.setVersion(t.version),p.setTiming(t.timing),p.setConnection(t.connection),p.setOrigin(t.origin),p.msidSemantic=t.msidSemantic,p.name=t.name;var l=t.iceUfrag,h=t.icePwd,f=t.iceOptions;(l||h||f)&&p.setICE(new v(l,h,f));var e,n,r,m=t.fingerprint;return m&&(e=m.type,n=m.hash,r=null,t.setup&&(r=E.byValue(t.setup)),p.setDTLS(new g(r,e,n))),t.media.forEach(function(t){var e,n,r,i=t.type,o=t.mid,s=t.port,a=new b(o,s,i);a.setXGoogleFlag(t.xGoogleFlag),a.rtcp=t.rtcp,a.setConnection(t.connection),t.bandwidth&&0<t.bandwidth.length&&t.bandwidth.forEach(function(t){"AS"===t.type&&a.setBitrate(t.limit)}),l=t.iceUfrag,h=t.icePwd,f=t.iceOptions,(l||h||f)&&a.setICE(new v(l,h,f)),(m=t.fingerprint)&&(e=m.type,n=m.hash,r=E.ACTPASS,t.setup&&(r=E.byValue(t.setup)),a.setDTLS(new g(r,e,n))),t.setup&&a.setSetup(E.byValue(t.setup));var c=S.SENDRECV;t.direction&&(c=S.byValue(t.direction.toUpperCase())),a.setDirection(c);var u=t.candidates;u&&u.forEach(function(t){a.addCandidate(new y(t.foundation,t.component,t.transport,t.priority,t.ip,t.port,t.type,t.generation,t.relAddr,t.relPort))}),C(a,t);var d=t.ext;d&&d.forEach(function(t){a.addExtension(t.value,t.uri)}),_(a,t),N(R(a,t),p,t),p.addMedia(a)}),p},t.exports=i},cD5x:function(t,e,n){var d=n("49sm"),p=n("+SKG"),r=Object.prototype.toString,l="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),h="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function s(t,e){if(!t)return t;if(p(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(d(t)){for(var r=new Array(t.length),i=0;i<t.length;i++)r[i]=s(t[i],e);return r}if("object"!=typeof t||t instanceof Date)return t;var o,r={};for(o in t)r[o]=s(t[o],e);return r}function i(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(d(t))for(var n=0;n<t.length;n++)t[n]=i(t[n],e);else if("object"==typeof t)for(var r in t)t[r]=i(t[r],e);return t}e.deconstructPacket=function(t){var e=[],n=t.data,r=t;return r.data=s(n,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=i(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,s){function a(t,e,n){if(!t)return t;if(l&&t instanceof Blob||h&&t instanceof File){c++;var r=new FileReader;r.onload=function(){n?n[e]=this.result:u=this.result,--c||s(u)},r.readAsArrayBuffer(t)}else if(d(t))for(var i=0;i<t.length;i++)a(t[i],i,t);else if("object"==typeof t&&!p(t))for(var o in t)a(t[o],o,t)}var c=0,u=t;a(u),c||s(u)}},cdGv:function(t,e,n){"use strict";var r=n("ftoZ"),i=(o.prototype.clone=function(){var t=new o(this.id,this.direction);return t.setFormats(this.formats),t.setParams(this.params),t},o.prototype.plain=function(){var n={id:this.id,direction:r.toString(this.direction),formats:this.formats,params:{}};return this.params.forEach(function(t,e){n.params[e]=t}),n},o.prototype.getId=function(){return this.id},o.prototype.getDirection=function(){return this.direction},o.prototype.setDirection=function(t){this.direction=t},o.prototype.getFormats=function(){return this.formats},o.prototype.setFormats=function(t){var e=this;this.formats=[],t.forEach(function(t){e.formats.push(parseInt(t,10))})},o.prototype.getParams=function(){return this.params},o.prototype.setParams=function(t){this.params=new Map(t)},o);function o(t,e){this.id=t,this.direction=e,this.formats=[],this.params=new Map}t.exports=i},cpc2:function(t,e,n){function r(t){if(t)return i(t)}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t.exports=r).prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},"dkv/":function(t,e){t.exports=Object.keys||function(t){var e,n=[],r=Object.prototype.hasOwnProperty;for(e in t)r.call(t,e)&&n.push(e);return n}},eOtv:function(t,e,n){var c=n("fA2z"),o=n("KFGy"),r=n("cpc2"),i=n("Vo14"),u=n("2Dig"),s=n("QN7Q"),d=n("mfRe")("socket.io-client:manager"),a=n("7jRU"),p=n("C2QD"),l=Object.prototype.hasOwnProperty;function h(t,e){if(!(this instanceof h))return new h(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new i.Encoder,this.decoder=new i.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}(t.exports=h).prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)l.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},h.prototype.updateSocketIds=function(){for(var t in this.nsps)l.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},r(h.prototype),h.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},h.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},h.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(n,t){if(d("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=c(this.uri,this.opts);var e=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var i,o,s=u(e,"open",function(){r.onopen(),n&&n()}),a=u(e,"error",function(t){var e;d("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),n?((e=new Error("Connection error")).data=t,n(e)):r.maybeReconnectOnOpen()});return!1!==this._timeout&&(i=this._timeout,d("connect attempt will timeout after %d",i),o=setTimeout(function(){d("connect attempt timed out after %d",i),s.destroy(),e.close(),e.emit("error","timeout"),r.emitAll("connect_timeout",i)},i),this.subs.push({destroy:function(){clearTimeout(o)}})),this.subs.push(s),this.subs.push(a),this},h.prototype.onopen=function(){d("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(u(t,"data",s(this,"ondata"))),this.subs.push(u(t,"ping",s(this,"onping"))),this.subs.push(u(t,"pong",s(this,"onpong"))),this.subs.push(u(t,"error",s(this,"onerror"))),this.subs.push(u(t,"close",s(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",s(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(t){this.decoder.add(t)},h.prototype.ondecoded=function(t){this.emit("packet",t)},h.prototype.onerror=function(t){d("error",t),this.emitAll("error",t)},h.prototype.socket=function(t,e){var n,r=this.nsps[t];function i(){~a(n.connecting,r)||n.connecting.push(r)}return r||(r=new o(this,t,e),this.nsps[t]=r,n=this,r.on("connecting",i),r.on("connect",function(){r.id=n.engine.id}),this.autoConnect&&i()),r},h.prototype.destroy=function(t){var e=a(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},h.prototype.packet=function(n){d("writing packet %j",n);var r=this;n.query&&0===n.type&&(n.nsp+="?"+n.query),r.encoding?r.packetBuffer.push(n):(r.encoding=!0,this.encoder.encode(n,function(t){for(var e=0;e<t.length;e++)r.engine.write(t[e],n.options);r.encoding=!1,r.processPacketQueue()}))},h.prototype.processPacketQueue=function(){var t;0<this.packetBuffer.length&&!this.encoding&&(t=this.packetBuffer.shift(),this.packet(t))},h.prototype.cleanup=function(){d("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){d("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(t){d("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t,e,n=this;this.backoff.attempts>=this._reconnectionAttempts?(d("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(t=this.backoff.duration(),d("will wait %dms before reconnect attempt",t),this.reconnecting=!0,e=setTimeout(function(){n.skipReconnect||(d("attempting reconnect"),n.emitAll("reconnect_attempt",n.backoff.attempts),n.emitAll("reconnecting",n.backoff.attempts),n.skipReconnect||n.open(function(t){t?(d("reconnect attempt error"),n.reconnecting=!1,n.reconnect(),n.emitAll("reconnect_error",t.data)):(d("reconnect success"),n.onreconnect())}))},t),this.subs.push({destroy:function(){clearTimeout(e)}}))},h.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},fA2z:function(t,e,n){t.exports=n("lKxJ")},fEvf:function(t,e,n){},ftoZ:function(t,e,n){"use strict";var r=n("JRJ6")("SEND","RECV");r.byValue=function(t){return r[t.toUpperCase()]},r.toString=function(t){switch(t){case r.SEND:return"send";case r.RECV:return"recv";default:return"unknown"}},r.reverse=function(t){switch(t){case r.SEND:return r.RECV;case r.RECV:default:return r.SEND}},t.exports=r},g5Dd:function(t,e){!function(){"use strict";for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=new Uint8Array(256),t=0;t<o.length;t++)p[o.charCodeAt(t)]=t;e.encode=function(t){for(var e=new Uint8Array(t),n=e.length,r="",i=0;i<n;i+=3)r+=o[e[i]>>2],r+=o[(3&e[i])<<4|e[i+1]>>4],r+=o[(15&e[i+1])<<2|e[i+2]>>6],r+=o[63&e[i+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r},e.decode=function(t){var e,n,r,i,o=.75*t.length,s=t.length,a=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);for(var c=new ArrayBuffer(o),u=new Uint8Array(c),d=0;d<s;d+=4)e=p[t.charCodeAt(d)],n=p[t.charCodeAt(d+1)],r=p[t.charCodeAt(d+2)],i=p[t.charCodeAt(d+3)],u[a++]=e<<2|n>>4,u[a++]=(15&n)<<4|r>>2,u[a++]=(3&r)<<6|63&i;return c}}()},gFX4:function(t,e,n){var c=n("zJ60"),r=n("Vo14"),u=n("eOtv"),d=n("mfRe")("socket.io-client");t.exports=e=i;var p=e.managers={};function i(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n=c(t),r=n.source,i=n.id,o=n.path,s=p[i]&&o in p[i].nsps,a=e.forceNew||e["force new connection"]||!1===e.multiplex||s?(d("ignoring socket cache for %s",r),u(r,e)):(p[i]||(d("new io instance for %s",r),p[i]=u(r,e)),p[i]);return n.query&&!e.query?e.query=n.query:e&&"object"==typeof e.query&&(e.query=l(e.query)),a.socket(n.path,e)}function l(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&")}e.protocol=r.protocol,e.connect=i,e.Manager=n("eOtv"),e.Socket=n("KFGy")},gGne:function(t,e,n){"use strict";var r=n("JRJ6")("ACTIVE","PASSIVE","ACTPASS","INACTIVE");r.byValue=function(t){return r[t.toUpperCase()]},r.toString=function(t){switch(t){case r.ACTIVE:return"active";case r.PASSIVE:return"passive";case r.ACTPASS:return"actpass";case r.INACTIVE:return"inactive";default:return null}},r.reverse=function(t){switch(t){case r.ACTIVE:return r.PASSIVE;case r.PASSIVE:return r.ACTIVE;case r.ACTPASS:return r.PASSIVE;case r.INACTIVE:return r.INACTIVE;default:return r.ACTIVE}},t.exports=r},jod6:function(t,e,n){"use strict";var r=n("gGne"),i=(o.prototype.clone=function(){return new o(this.setup,this.hash,this.fingerprint)},o.prototype.plain=function(){return{setup:r.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}},o.prototype.getFingerprint=function(){return this.fingerprint},o.prototype.getHash=function(){return this.hash},o.prototype.getSetup=function(){return this.setup},o.prototype.setSetup=function(t){this.setup=t},o);function o(t,e,n){this.setup=t,this.hash=e,this.fingerprint=n}t.exports=i},k76L:function(t,e,n){var r=n("leix"),i=n("8Lyy");e.write=i,e.parse=r.parse,e.parseFmtpConfig=r.parseFmtpConfig,e.parseParams=r.parseParams,e.parsePayloads=r.parsePayloads,e.parseRemoteCandidates=r.parseRemoteCandidates,e.parseImageAttributes=r.parseImageAttributes,e.parseSimulcastStreamList=r.parseSimulcastStreamList},kSER:function(t,e){function n(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}t.exports=n},"kVK+":function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,d=-7,p=n?i-1:0,l=n?-1:1,h=t[e+p];for(p+=l,o=h&(1<<-d)-1,h>>=-d,d+=a;0<d;o=256*o+t[e+p],p+=l,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=r;0<d;s=256*s+t[e+p],p+=l,d-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=u}return(h?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,c,u=8*o-i-1,d=(1<<u)-1,p=d>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=d):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),2<=(e+=1<=s+p?l/c:l*Math.pow(2,1-p))*c&&(s++,c/=2),d<=s+p?(a=0,s=d):1<=s+p?(a=(e*c-1)*Math.pow(2,i),s+=p):(a=e*Math.pow(2,p-1)*Math.pow(2,i),s=0));8<=i;t[n+h]=255&a,h+=f,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;t[n+h]=255&s,h+=f,s/=256,u-=8);t[n+h-f]|=128*m}},lKxJ:function(t,e,n){t.exports=n("2pII"),t.exports.parser=n("Wm4p")},leix:function(t,e,n){var o=function(t){return String(Number(t))===t?Number(t):t},s=function(t,e,n,r){if(r&&!n)e[r]=o(t[1]);else for(var i=0;i<n.length;i+=1)null!=t[i+1]&&(e[n[i]]=o(t[i+1]))},a=function(t,e,n){var r=t.name&&t.names;t.push&&!e[t.push]?e[t.push]=[]:r&&!e[t.name]&&(e[t.name]={});var i=t.push?{}:r?e[t.name]:e;s(n.match(t.reg),i,t.names,t.name),t.push&&e[t.push].push(i)},c=n("O6qx"),r=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(t){var e={},o=[],s=e;return t.split(/(\r\n|\r|\n)/).filter(r).forEach(function(t){var e=t[0],n=t.slice(2);"m"===e&&(o.push({rtp:[],fmtp:[]}),s=o[o.length-1]);for(var r=0;r<(c[e]||[]).length;r+=1){var i=c[e][r];if(i.reg.test(n))return a(i,s,n)}}),e.media=o,e};var i=function(t,e){var n=e.split(/=(.+)/,2);return 2===n.length?t[n[0]]=o(n[1]):1===n.length&&1<e.length&&(t[n[0]]=void 0),t};e.parseParams=function(t){return t.split(/;\s?/).reduce(i,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(t){return t.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(t){for(var e=[],n=t.split(" ").map(o),r=0;r<n.length;r+=3)e.push({component:n[r],ip:n[r+1],port:n[r+2]});return e},e.parseImageAttributes=function(t){return t.split(" ").map(function(t){return t.substring(1,t.length-1).split(",").reduce(i,{})})},e.parseSimulcastStreamList=function(t){return t.split(";").map(function(t){return t.split(",").map(function(t){var e,n=!1;return"~"!==t[0]?e=o(t):(e=o(t.substring(1,t.length)),n=!0),{scid:e,paused:n}})})}},m23k:function(t,e,n){"use strict";var r=(i.prototype.clone=function(){return new i(this.semantics,this.ssrcs)},i.prototype.plain=function(){var t={semantics:this.semantics,ssrcs:[]};return t.ssrcs=this.ssrcs,t},i.prototype.getSemantics=function(){return this.semantics},i.prototype.getSSRCs=function(){return this.ssrcs},i);function i(t,e){var n=this;this.semantics=t,this.ssrcs=[],e.forEach(function(t){n.ssrcs.push(parseInt(t,10))})}t.exports=r},mSTY:function(t,e,n){"use strict";var r=n("aqwp"),i=n("QbUa"),o=n("qamT"),s=n("jod6"),a=n("nDzp"),c=n("N824"),u=n("gGne"),d=n("m23k"),p=n("IxNO"),l=n("uwB8"),h=n("qTDZ"),f=n("adIa");t.exports={SDPInfo:r,CandidateInfo:i,CodecInfo:o,DTLSInfo:s,ICEInfo:a,MediaInfo:c,Setup:u,SourceGroupInfo:d,SourceInfo:p,StreamInfo:l,TrackInfo:h,Direction:f}},mUXZ:function(t,e,n){"use strict";n.d(e,"a",function(){return C});var u,r,c,i,d,p=n("i+co"),l=n("SyrE"),o=n("QKZB"),s=10;(r=u=u||{}).HANDSHAKE="handshake",r.INVOKE="invoke",r.CALLBACK="callback",r.EVENT="event",(i=c=c||{})[i.SUCCESS=0]="SUCCESS",i[i.FAIL=-1]="FAIL",i[i.ERROR=-2]="ERROR";var a=null,h=!1,f=0;function m(t){var e=t.contextId,n=t.type,r=t.payload;window&&window.parent.postMessage({contextId:e||o.a.v4(),timestamp:Date.now(),source:"ccm",type:n,payload:r},"*")}function y(t){h||m({contextId:t,type:u.HANDSHAKE,payload:{proactive:!t,info:window.scm,provideMethods:["startRecord","stopRecord","startFollow","stopFollow","startReplay","stopReplay","getState","setState","getCurrentStatus","replayActions","on"],provideEvents:["FOLLOW_LOG","NEW_ACTIONS","FOLLOW_STATE_APPLY_TRACK"]}}),l.b.collect({event:p.c.HAND_SHAKE,level:p.d.INFO,type:p.f.SDK,timestamp:Date.now(),message:"handshake proactive["+!t+"]"},d.id)}function g(t,e,n,r){m({contextId:t,type:u.CALLBACK,payload:{method:e,code:n,data:r}})}function v(t,e){m({type:u.EVENT,payload:{event:t,data:e}})}var b=function(t,e){var n=e.proactive,r=e.dependentEvents;n||(T(),h=!0),y(t),r.length&&r.forEach(function(e){return d.on(e,function(t){return v(e,t)})})},E=function(s,a){return Object(l.e)(void 0,void 0,void 0,function(){var e,n,r,i,o;return Object(l.f)(this,function(t){switch(t.label){case 0:if(e=a.method,n=a.params,!d)return[3,5];if(r=c.FAIL,i=void 0,!d[e])return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),r=c.SUCCESS,[4,d[e].apply(d,n)];case 2:return i=t.sent(),[3,4];case 3:return o=t.sent(),r=c.ERROR,i="invoke error: "+o,l.b.collect({event:p.c.VC_API_ERROR,level:p.d.ERROR,type:p.f.SDK,timestamp:Date.now(),message:"vc api["+e+"] error: "+o},d.id),[3,4];case 4:g(s,e,r,i),t.label=5;case 5:return[2]}})})},S=function(t){var e,n,r=t.data,i=r.contextId,o=r.timestamp,s=r.source,a=r.type,c=r.payload;"vc"===s&&(console.log("[VCFollowSDK postMessage]: get vc "+a+" "+{payload:c,timestamp:o}),(e={})[u.HANDSHAKE]=b,e[u.INVOKE]=E,(n=e)[a]&&n[a](i,c))},w=function(){window.addEventListener("message",S)},I=function(){window.removeEventListener("message",S)};function T(){a&&clearInterval(a),a=null}var C=function(t){return d=t,a=setInterval(function(){y(),s<=++f&&T()},500),w(),I}},mfRe:function(c,u,d){(function(e){var t=d("cDf5");function n(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(t){var e,n,r,i=this.useColors;t[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+t[0]+(i?"%c ":" ")+"+"+u.humanize(this.diff),i&&(e="color: "+this.color,t.splice(1,0,e,"color: inherit"),t[r=n=0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(n++,"%c"===t&&(r=n))}),t.splice(r,0,e))}function i(){return"object"===("undefined"==typeof console?"undefined":t(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(t){try{null==t?u.storage.removeItem("debug"):u.storage.debug=t}catch(t){}}function s(){var t;try{t=u.storage.debug}catch(t){}return!t&&void 0!==e&&"env"in e&&(t=Object({NODE_ENV:"production",CDN_URL:navigator.cdn_host+"/ccm/pc/web/resource/bear",FASTER_TEST:void 0,LARK_ENV:"web",LARK:!0}).DEBUG),t}function a(){try{return window.localStorage}catch(t){}}(u=c.exports=d("y8rv")).log=i,u.formatArgs=r,u.save=o,u.load=s,u.useColors=n,u.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:a(),u.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],u.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},u.enable(s())}).call(this,d("8oxB"))},nDzp:function(t,e,n){"use strict";function r(t,e){var n=e-t+1,r=Math.random()*n;return Math.floor(r+t)}function i(t){for(var e=new Uint8Array(t),n=0;n<e.length;n+=1)e[n]=r(0,255);return e}function o(t){return Array.prototype.map.call(new Uint8Array(t),function(t){return("00"+t.toString(16)).slice(-2)}).join("")}var s=(a.prototype.clone=function(){var t=new a(this.ufrag,this.pwd,this.opts);return t.setLite(this.lite),t.setEndOfCandidates(this.endOfCandidates),t},a.prototype.plain=function(){var t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t},a.prototype.getUfrag=function(){return this.ufrag},a.prototype.getPwd=function(){return this.pwd},a.prototype.isLite=function(){return this.lite},a.prototype.getOpts=function(){return this.opts},a.prototype.setLite=function(t){this.lite=t},a.prototype.isEndOfCandidates=function(){return this.endOfCandidates},a.prototype.setEndOfCandidates=function(t){this.endOfCandidates=t},a);function a(t,e,n){this.ufrag=t,this.pwd=e,this.opts=n,this.lite=!1,this.endOfCandidates=!1}s.generate=function(){var t=new s,e=i(8),n=i(24);return t.ufrag=o(e),t.pwd=o(n),t},t.exports=s},"oIG/":function(t,e){var o,s,a,c=String.fromCharCode;function u(t){for(var e,n,r=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function d(t){for(var e,n=t.length,r=-1,i="";++r<n;)65535<(e=t[r])&&(i+=c((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=c(e);return i}function r(t,e){if(55296<=t&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function i(t,e){return c(t>>e&63|128)}function p(t,e){if(0==(4294967168&t))return c(t);var n="";return 0==(4294965248&t)?n=c(t>>6&31|192):0==(4294901760&t)?(r(t,e)||(t=65533),n=c(t>>12&15|224),n+=i(t,6)):0==(4292870144&t)&&(n=c(t>>18&7|240),n+=i(t,12),n+=i(t,6)),n+=c(63&t|128)}function n(t,e){for(var n=!1!==(e=e||{}).strict,r=u(t),i=r.length,o=-1,s="";++o<i;)s+=p(r[o],n);return s}function l(){if(s<=a)throw Error("Invalid byte index");var t=255&o[a];if(a++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function h(t){var e,n;if(s<a)throw Error("Invalid byte index");if(a==s)return!1;if(e=255&o[a],a++,0==(128&e))return e;if(192==(224&e)){if(128<=(n=(31&e)<<6|l()))return n;throw Error("Invalid continuation byte")}if(224==(240&e)){if(2048<=(n=(15&e)<<12|l()<<6|l()))return r(n,t)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&65536<=(n=(7&e)<<18|l()<<12|l()<<6|l())&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}function f(t,e){var n=!1!==(e=e||{}).strict;o=u(t),s=o.length,a=0;for(var r,i=[];!1!==(r=h(n));)i.push(r);return d(i)}t.exports={version:"2.1.2",encode:n,decode:f}},qTDZ:function(t,e,n){"use strict";var r=(i.prototype.clone=function(){var n=new i(this.media,this.id);return this.mediaId&&n.setMediaId(this.mediaId),this.ssrcs.forEach(function(t){n.addSSRC(t)}),this.groups.forEach(function(t){n.addSourceGroup(t.clone())}),this.encodings.forEach(function(t){var e=[];t.forEach(function(t){e.push(t.cloned())}),n.addAlternativeEncoding(e)}),n},i.prototype.plain=function(){var n={media:this.media,id:this.id,ssrcs:[],groups:[],encodings:[]};return this.mediaId&&(n.mediaId=this.mediaId),this.ssrcs.forEach(function(t){n.ssrcs.push(t)}),this.groups.forEach(function(t){n.groups.push(t.plain())}),this.encodings.forEach(function(t){var e=[];t.forEach(function(t){e.push(t.plain())}),n.encodings.push(e)}),n},i.prototype.getMedia=function(){return this.media},i.prototype.setMediaId=function(t){this.mediaId=t},i.prototype.getMediaId=function(){return this.mediaId},i.prototype.getId=function(){return this.id},i.prototype.addSSRC=function(t){this.ssrcs.push(t)},i.prototype.getSSRCs=function(){return this.ssrcs},i.prototype.addSourceGroup=function(t){this.groups.push(t)},i.prototype.getSourceGroup=function(e){var n;return this.groups.forEach(function(t){t.getSemantics().toLowerCase()===e.toLowerCase()&&(n=t)}),n},i.prototype.getSourceGroups=function(){return this.groups},i.prototype.hasSourceGroup=function(e){var n=!1;return this.groups.forEach(function(t){t.getSemantics().toLowerCase()===e.toLowerCase()&&(n=!0)}),n},i.prototype.getEncodings=function(){return this.encodings},i.prototype.addAlternaticeEncodings=function(t){this.encodings.push(t)},i.prototype.setEncodings=function(t){this.encodings=t},i);function i(t,e){this.media=t,this.id=e,this.ssrcs=[],this.groups=[],this.encodings=[]}t.exports=r},qamT:function(t,e,n){"use strict";var a=(r.prototype.clone=function(){var t=new r(this.codec,this.type,this.rate,this.encoding,this.params,this.feedback);return this.rtx&&t.setRTX(this.rtx),t},r.prototype.plain=function(){return{codec:this.codec,type:this.type,rate:this.rate,encoding:this.encoding,params:this.params,feedback:this.feedback}},r.prototype.setRTX=function(t){this.rtx=t},r.prototype.getType=function(){return this.type},r.prototype.setType=function(t){this.type=t},r.prototype.getCodec=function(){return this.codec},r.prototype.getParams=function(){return this.params},r.prototype.hasRTX=function(){return this.rtx},r.prototype.getRTX=function(){return this.rtx},r.prototype.getRate=function(){return this.rate},r.prototype.getEncoding=function(){return this.encoding},r.prototype.getFeedback=function(){return this.feedback},r);function r(t,e,n,r,i,o){this.codec=t,this.type=e,this.rate=n,this.encoding=r,this.params=i||{},this.feedback=o||[]}a.mapFromNames=function(t,i){var o=new Map,s=96;return t.forEach(function(t){var e=t.toLowerCase(),n="pcmu"===e?0:"pcma"===e?8:s+=1,r=new a(e,n);i&&"ulpfec"!==e&&"flexfec-03"!==e&&"red"!==e&&(s+=1,r.setRTX(s)),o.set(r.getCodec().toLowerCase(),r)}),o},t.exports=a},uwB8:function(t,e,n){"use strict";var r=(i.prototype.clone=function(){var e=new i(this.id);return this.tracks.forEach(function(t){e.addTrack(t.clone())}),e},i.prototype.plain=function(){var e={id:this.id,tracks:[]};return this.tracks.forEach(function(t){e.tracks.push(t.plain())}),e},i.prototype.getId=function(){return this.id},i.prototype.addTrack=function(t){this.tracks.set(t.getId(),t)},i.prototype.getFirstTrack=function(e){var n;return this.tracks.forEach(function(t){t.getMedia().toLowerCase()===e.toLowerCase()&&(n=t)}),n},i.prototype.getTracks=function(){return this.tracks},i.prototype.removeAllTracks=function(){this.tracks.clear()},i.prototype.getTrack=function(t){return this.tracks.get(t)},i);function i(t){this.id=t,this.tracks=new Map}t.exports=r},y8rv:function(t,c,e){function n(t){var e,n=0;for(e in t)n=(n<<5)-n+t.charCodeAt(e),n|=0;return c.colors[Math.abs(n)%c.colors.length]}function r(t){var r;function a(){if(a.enabled){var i=a,t=+new Date,e=t-(r||t);i.diff=e,i.prev=r,i.curr=t,r=t;for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=c.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,e){if("%%"===t)return t;s++;var n,r=c.formatters[e];return"function"==typeof r&&(n=o[s],t=r.call(i,n),o.splice(s,1),s--),t}),c.formatArgs.call(i,o),(a.log||c.log||console.log.bind(console)).apply(i,o)}}return a.namespace=t,a.enabled=c.enabled(t),a.useColors=c.useColors(),a.color=n(t),a.destroy=i,"function"==typeof c.init&&c.init(a),c.instances.push(a),a}function i(){var t=c.instances.indexOf(this);return-1!==t&&(c.instances.splice(t,1),!0)}function o(t){c.save(t),c.names=[],c.skips=[];for(var e=("string"==typeof t?t:"").split(/[\s,]+/),n=e.length,r=0;r<n;r++)e[r]&&("-"===(t=e[r].replace(/\*/g,".*?"))[0]?c.skips.push(new RegExp("^"+t.substr(1)+"$")):c.names.push(new RegExp("^"+t+"$")));for(r=0;r<c.instances.length;r++){var i=c.instances[r];i.enabled=c.enabled(i.namespace)}}function s(){c.enable("")}function a(t){if("*"===t[t.length-1])return!0;for(var e=0,n=c.skips.length;e<n;e++)if(c.skips[e].test(t))return!1;for(e=0,n=c.names.length;e<n;e++)if(c.names[e].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}(c=t.exports=r.debug=r.default=r).coerce=u,c.disable=s,c.enable=o,c.enabled=a,c.humanize=e("A/9J"),c.instances=[],c.names=[],c.skips=[],c.formatters={}},yeub:function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},ypnn:function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),r<n&&(n=r),r<=e||n<=e||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},yrL3:function(t,e,n){"use strict";var r=(i.prototype.clone=function(){return new i(this.id,this.paused)},i.prototype.plain=function(){return{id:this.id,paused:this.paused}},i.prototype.isPaused=function(){return this.paused},i.prototype.getId=function(){return this.id},i);function i(t,e){this.paused=e,this.id=t}t.exports=r},zJ60:function(e,t,n){(function(i){var o=n("Uxeu"),s=n("mfRe")("socket.io-client:url");function t(t,e){var n=t;e=e||i.location,null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(s("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),s("parse %s",t),n=o(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var r=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port,n.href=n.protocol+"://"+r+(e&&e.port===n.port?"":":"+n.port),n}e.exports=t}).call(this,n("yLpj"))},zMFY:function(t,e){function n(t,n,r){var i=!1;return r=r||s,0===(o.count=t)?n():o;function o(t,e){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,n(t),n=r):0!==o.count||i||n(null,e)}}function s(){}t.exports=n}}]);
//# sourceMappingURL=vendors--embed_video_chat.0b959f89b166e6297ec9.js.map