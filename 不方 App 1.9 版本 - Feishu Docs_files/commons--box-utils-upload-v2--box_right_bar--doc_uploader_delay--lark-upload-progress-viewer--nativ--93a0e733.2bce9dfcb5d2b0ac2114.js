(this.webpackJsonp=this.webpackJsonp||[]).push([["commons--box-utils-upload-v2--box_right_bar--doc_uploader_delay--lark-upload-progress-viewer--nativ--93a0e733"],{D15H:function(e,xn,Dn){"use strict";(function(e){Dn.d(xn,"a",function(){return h}),Dn.d(xn,"b",function(){return We}),Dn.d(xn,"c",function(){return Ge}),Dn.d(xn,"d",function(){return U}),Dn.d(xn,"e",function(){return x}),Dn.d(xn,"f",function(){return ce}),Dn.d(xn,"g",function(){return fe}),Dn.d(xn,"h",function(){return it}),Dn.d(xn,"i",function(){return B}),Dn.d(xn,"j",function(){return Y}),Dn.d(xn,"k",function(){return te}),Dn.d(xn,"l",function(){return k}),Dn.d(xn,"m",function(){return L}),Dn.d(xn,"n",function(){return Ce}),Dn.d(xn,"o",function(){return W}),Dn.d(xn,"p",function(){return gt}),Dn.d(xn,"q",function(){return He}),Dn.d(xn,"r",function(){return ft}),Dn.d(xn,"s",function(){return K}),Dn.d(xn,"t",function(){return ae}),Dn.d(xn,"u",function(){return je}),Dn.d(xn,"v",function(){return Yt}),Dn.d(xn,"w",function(){return Gt}),Dn.d(xn,"x",function(){return Kt}),Dn.d(xn,"y",function(){return nr}),Dn.d(xn,"z",function(){return pt}),Dn.d(xn,"A",function(){return ze}),Dn.d(xn,"B",function(){return Se}),Dn.d(xn,"C",function(){return E}),Dn.d(xn,"D",function(){return Nt}),Dn.d(xn,"E",function(){return Mt}),Dn.d(xn,"F",function(){return jt}),Dn.d(xn,"G",function(){return Bt}),Dn.d(xn,"H",function(){return d}),Dn.d(xn,"I",function(){return _}),Dn.d(xn,"J",function(){return vt}),Dn.d(xn,"K",function(){return y}),Dn.d(xn,"L",function(){return bt}),Dn.d(xn,"M",function(){return r}),Dn.d(xn,"N",function(){return De}),Dn.d(xn,"O",function(){return me}),Dn.d(xn,"P",function(){return jn}),Dn.d(xn,"Q",function(){return Qe}),Dn.d(xn,"R",function(){return P}),Dn.d(xn,"S",function(){return Qt}),Dn.d(xn,"T",function(){return m}),Dn.d(xn,"U",function(){return Ne}),Dn.d(xn,"V",function(){return Un}),Dn.d(xn,"W",function(){return oe}),Dn.d(xn,"X",function(){return Br}),Dn.d(xn,"Y",function(){return tt}),Dn.d(xn,"Z",function(){return Wr}),Dn.d(xn,"ab",function(){return O}),Dn.d(xn,"bb",function(){return ue}),Dn.d(xn,"cb",function(){return Te}),Dn.d(xn,"db",function(){return Ie}),Dn.d(xn,"eb",function(){return qe}),Dn.d(xn,"fb",function(){return C}),Dn.d(xn,"gb",function(){return Pe}),Dn.d(xn,"hb",function(){return T}),Dn.d(xn,"ib",function(){return ke}),Dn.d(xn,"jb",function(){return Ye});var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}var n,a,i,o,s,u,c,l,f=Math.ceil,p=Math.floor,h=function(e){return isNaN(e=+e)?0:(0<e?p:f)(e)},d=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},v=function(s){return function(e,t){var r,n,a=String(d(e)),i=h(t),o=a.length;return i<0||o<=i?s?"":void 0:(r=a.charCodeAt(i))<55296||56319<r||i+1===o||(n=a.charCodeAt(i+1))<56320||57343<n?s?a.charAt(i):r:s?a.slice(i,i+2):n-56320+(r-55296<<10)+65536}},y={codeAt:v(!1),charAt:v(!0)},b="object",g=function(e){return e&&e.Math==Math&&e},k=g(typeof globalThis==b&&globalThis)||g(typeof window==b&&window)||g(typeof self==b&&self)||g(typeof t==b&&t)||Function("return this")(),m=function(e){try{return!!e()}catch(e){return!0}},T=!m(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),O=function(e){return"object"==typeof e?null!==e:"function"==typeof e},w=k.document,S=O(w)&&O(w.createElement),I=function(e){return S?w.createElement(e):{}},j=!T&&!m(function(){return 7!=Object.defineProperty(I("div"),"a",{get:function(){return 7}}).a}),U=function(e){if(!O(e))throw TypeError(String(e)+" is not an object");return e},x=function(e,t){if(!O(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!O(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!O(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!O(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},D=Object.defineProperty,C={f:T?D:function(e,t,r){if(U(e),t=x(t,!0),U(r),j)try{return D(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},E=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},P=T?function(e,t,r){return C.f(e,t,E(1,r))}:function(e,t,r){return e[t]=r,e},R=function(t,r){try{P(k,t,r)}catch(e){k[t]=r}return r},_=!0,L=r(function(e){var t="__core-js_shared__",r=k[t]||R(t,{});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.1.3",mode:"pure",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),q=L("native-function-to-string",Function.toString),F=k.WeakMap,M="function"==typeof F&&/native code/.test(q.call(F)),z={}.hasOwnProperty,B=function(e,t){return z.call(e,t)},N=0,V=Math.random(),W=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++N+V).toString(36)},H=L("keys"),Y=function(e){return H[e]||(H[e]=W(e))},K={},Q=k.WeakMap,X=function(e){return c(e)?u(e):s(e,{})},J=function(r){return function(e){var t;if(!O(e)||(t=u(e)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return t}};c=M?(n=new Q,a=n.get,i=n.has,o=n.set,s=function(e,t){return o.call(n,e,t),t},u=function(e){return a.call(n,e)||{}},function(e){return i.call(n,e)}):(l=Y("state"),K[l]=!0,s=function(e,t){return P(e,l,t),t},u=function(e){return B(e,l)?e[l]:{}},function(e){return B(e,l)});var $,Z,ee,te={set:s,get:u,has:c,enforce:X,getterFor:J},re={}.propertyIsEnumerable,ne=Object.getOwnPropertyDescriptor,ae={f:ne&&!re.call({1:2},1)?function(e){var t=ne(this,e);return!!t&&t.enumerable}:re},ie={}.toString,oe=function(e){return ie.call(e).slice(8,-1)},se="".split,ue=m(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==oe(e)?se.call(e,""):Object(e)}:Object,ce=function(e){return ue(d(e))},le=Object.getOwnPropertyDescriptor,fe={f:T?le:function(e,t){if(e=ce(e),t=x(t,!0),j)try{return le(e,t)}catch(e){}if(B(e,t))return E(!ae.f.call(e,t),e[t])}},pe=/#|\.prototype\./,he=function(e,t){var r=ve[de(e)];return r==be||r!=ye&&("function"==typeof t?m(t):!!t)},de=he.normalize=function(e){return String(e).replace(pe,".").toLowerCase()},ve=he.data={},ye=he.NATIVE="N",be=he.POLYFILL="P",ge=he,ke={},me=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Te=function(n,a,e){if(me(n),void 0===a)return n;switch(e){case 0:return function(){return n.call(a)};case 1:return function(e){return n.call(a,e)};case 2:return function(e,t){return n.call(a,e,t)};case 3:return function(e,t,r){return n.call(a,e,t,r)}}return function(){return n.apply(a,arguments)}},Oe=fe.f,we=function(n){var e=function(e,t,r){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(e);case 2:return new n(e,t)}return new n(e,t,r)}return n.apply(this,arguments)};return e.prototype=n.prototype,e},Se=function(e,t){var r,n,a,i,o,s,u,c,l=e.target,f=e.global,p=e.stat,h=e.proto,d=f?k:p?k[l]:(k[l]||{}).prototype,v=f?ke:ke[l]||(ke[l]={}),y=v.prototype;for(a in t)r=!ge(f?a:l+(p?".":"#")+a,e.forced)&&d&&B(d,a),o=v[a],r&&(s=e.noTargetGet?(c=Oe(d,a))&&c.value:d[a]),i=r&&s?s:t[a],r&&typeof o==typeof i||(u=e.bind&&r?Te(i,k):e.wrap&&r?we(i):h&&"function"==typeof i?Te(Function.call,i):i,(e.sham||i&&i.sham||o&&o.sham)&&P(u,"sham",!0),v[a]=u,h&&(B(ke,n=l+"Prototype")||P(ke,n,{}),ke[n][a]=i,e.real&&y&&!y[a]&&P(y,a,i)))},Ie=function(e){return Object(d(e))},je=!m(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Ue=Y("IE_PROTO"),xe=Object.prototype,De=je?Object.getPrototypeOf:function(e){return e=Ie(e),B(e,Ue)?e[Ue]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?xe:null},Ce=!!Object.getOwnPropertySymbols&&!m(function(){return!String(Symbol())}),Ee=k.Symbol,Ae=L("wks"),Pe=function(e){return Ae[e]||(Ae[e]=Ce&&Ee[e]||(Ce?Ee:W)("Symbol."+e))},Re=(Pe("iterator"),!1);[].keys&&("next"in(ee=[].keys())?(Z=De(De(ee)))!==Object.prototype&&($=Z):Re=!0),null==$&&($={});var _e={IteratorPrototype:$,BUGGY_SAFARI_ITERATORS:Re},Le=Math.min,qe=function(e){return 0<e?Le(h(e),9007199254740991):0},Fe=Math.max,Me=Math.min,ze=function(e,t){var r=h(e);return r<0?Fe(r+t,0):Me(r,t)},Be=function(s){return function(e,t,r){var n,a=ce(e),i=qe(a.length),o=ze(r,i);if(s&&t!=t){for(;o<i;)if((n=a[o++])!=n)return!0}else for(;o<i;o++)if((s||o in a)&&a[o]===t)return s||o||0;return!s&&-1}},Ne={includes:Be(!0),indexOf:Be(!1)},Ve=Ne.indexOf,We=function(e,t){var r,n=ce(e),a=0,i=[];for(r in n)!B(K,r)&&B(n,r)&&i.push(r);for(;t.length>a;)B(n,r=t[a++])&&(~Ve(i,r)||i.push(r));return i},Ge=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],He=Object.keys||function(e){return We(e,Ge)},Ye=T?Object.defineProperties:function(e,t){U(e);for(var r,n=He(t),a=n.length,i=0;i<a;)C.f(e,r=n[i++],t[r]);return e},Ke=function(e){return"function"==typeof e?e:void 0},Qe=function(e,t){return arguments.length<2?Ke(ke[e])||Ke(k[e]):ke[e]&&ke[e][t]||k[e]&&k[e][t]},Xe=Qe("document","documentElement"),Je=Y("IE_PROTO"),$e="prototype",Ze=function(){},et=function(){var e,t=I("iframe"),r=Ge.length,n="<",a="script",i=">",o="java"+a+":";for(t.style.display="none",Xe.appendChild(t),t.src=String(o),(e=t.contentWindow.document).open(),e.write(n+a+i+"document.F=Object"+n+"/"+a+i),e.close(),et=e.F;r--;)delete et[$e][Ge[r]];return et()},tt=Object.create||function(e,t){var r;return null!==e?(Ze[$e]=U(e),r=new Ze,Ze[$e]=null,r[Je]=e):r=et(),void 0===t?r:Ye(r,t)};K[Je]=!0;var rt=Pe("toStringTag"),nt="Arguments"==oe(function(){return arguments}()),at=function(e,t){try{return e[t]}catch(e){}},it=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=at(t=Object(e),rt))?r:nt?oe(t):"Object"==(n=oe(t))&&"function"==typeof t.callee?"Arguments":n},ot={};ot[Pe("toStringTag")]="z";var st="[object z]"!==String(ot)?function(){return"[object "+it(this)+"]"}:ot.toString,ut=C.f,ct=Pe("toStringTag"),lt=st!=={}.toString,ft=function(e,t,r,n){var a;e&&(a=r?e:e.prototype,B(a,ct)||ut(a,ct,{configurable:!0,value:t}),n&&lt&&P(a,"toString",st))},pt={},ht=_e.IteratorPrototype,dt=function(){return this},vt=function(e,t,r){var n=t+" Iterator";return e.prototype=tt(ht,{next:E(1,r)}),ft(e,n,!1,!0),pt[n]=dt,e},yt=function(e){if(!O(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e},bt=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,e={};try{(r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),n=e instanceof Array}catch(e){}return function(e,t){return U(e),yt(t),n?r.call(e,t):e.__proto__=t,e}}():void 0),gt=function(e,t,r,n){n&&n.enumerable?e[t]=r:P(e,t,r)},kt=_e.IteratorPrototype,mt=_e.BUGGY_SAFARI_ITERATORS,Tt=Pe("iterator"),Ot="keys",wt="values",St="entries",It=function(){return this},jt=function(e,t,r,n,a,i,o){vt(r,t,n);var s,u,c,l=function(e){if(e===a&&v)return v;if(!mt&&e in h)return h[e];switch(e){case Ot:case wt:case St:return function(){return new r(this,e)}}return function(){return new r(this)}},f=t+" Iterator",p=!1,h=e.prototype,d=h[Tt]||h["@@iterator"]||a&&h[a],v=!mt&&d||l(a),y="Array"==t&&h.entries||d;if(y&&(s=De(y.call(new e)),kt!==Object.prototype&&s.next&&(ft(s,f,!0,!0),pt[f]=It)),a==wt&&d&&d.name!==wt&&(p=!0,v=function(){return d.call(this)}),o&&h[Tt]!==v&&P(h,Tt,v),pt[t]=v,a)if(u={values:l(wt),keys:i?v:l(Ot),entries:l(St)},o)for(c in u)!mt&&!p&&c in h||gt(h,c,u[c]);else Se({target:t,proto:!0,forced:mt||p},u);return u},Ut=y.charAt,xt="String Iterator",Dt=te.set,Ct=te.getterFor(xt);jt(String,"String",function(e){Dt(this,{type:xt,string:String(e),index:0})},function(){var e,t=Ct(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=Ut(r,n),t.index+=e.length,{value:e,done:!1})});var Et="Array Iterator",At=te.set,Pt=te.getterFor(Et);jt(Array,"Array",function(e,t){At(this,{type:Et,target:ce(e),index:0,kind:t})},function(){var e=Pt(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?{value:e.target=void 0,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values");pt.Arguments=pt.Array;var Rt,_t={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Lt=Pe("toStringTag");for(Rt in _t){var qt=k[Rt],Ft=qt&&qt.prototype;Ft&&!Ft[Lt]&&P(Ft,Lt,Rt),pt[Rt]=pt.Array}var Mt=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:gt(e,n,t[n],r);return e},zt=Pe("species"),Bt=function(e){var t=Qe(e),r=C.f;T&&t&&!t[zt]&&r(t,zt,{configurable:!0,get:function(){return this}})},Nt=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},Vt=Pe("iterator"),Wt=Array.prototype,Gt=function(e){return void 0!==e&&(pt.Array===e||Wt[Vt]===e)},Ht=Pe("iterator"),Yt=function(e){if(null!=e)return e[Ht]||e["@@iterator"]||pt[it(e)]},Kt=function(t,e,r,n){try{return n?e(U(r)[0],r[1]):e(r)}catch(e){var a=t.return;throw void 0!==a&&U(a.call(t)),e}},Qt=r(function(e){var p=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,r,n,a){var i,o,s,u,c,l,f=Te(t,r,n?2:1);if(a)i=e;else{if("function"!=typeof(o=Yt(e)))throw TypeError("Target is not iterable");if(Gt(o)){for(s=0,u=qe(e.length);s<u;s++)if((c=n?f(U(l=e[s])[0],l[1]):f(e[s]))&&c instanceof p)return c;return new p(!1)}i=o.call(e)}for(;!(l=i.next()).done;)if((c=Kt(i,f,l.value,n))&&c instanceof p)return c;return new p(!1)}).stop=function(e){return new p(!0,e)}}),Xt=Pe("iterator"),Jt=!1;try{var $t=0,Zt={next:function(){return{done:!!$t++}},return:function(){Jt=!0}};Zt[Xt]=function(){return this},Array.from(Zt,function(){throw 2})}catch(e){}var er,tr,rr,nr=function(e,t){if(!t&&!Jt)return!1;var r=!1;try{var n={};n[Xt]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},ar=Pe("species"),ir=function(e,t){var r,n=U(e).constructor;return void 0===n||null==(r=U(n)[ar])?t:me(r)},or=k.location,sr=k.setImmediate,ur=k.clearImmediate,cr=k.process,lr=k.MessageChannel,fr=k.Dispatch,pr=0,hr={},dr="onreadystatechange",vr=function(e){var t;hr.hasOwnProperty(e)&&(t=hr[e],delete hr[e],t())},yr=function(e){return function(){vr(e)}},br=function(e){vr(e.data)},gr=function(e){k.postMessage(e+"",or.protocol+"//"+or.host)};sr&&ur||(sr=function(e){for(var t=[],r=1;r<arguments.length;)t.push(arguments[r++]);return hr[++pr]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},er(pr),pr},ur=function(e){delete hr[e]},"process"==oe(cr)?er=function(e){cr.nextTick(yr(e))}:fr&&fr.now?er=function(e){fr.now(yr(e))}:lr?(rr=(tr=new lr).port2,tr.port1.onmessage=br,er=Te(rr.postMessage,rr,1)):!k.addEventListener||"function"!=typeof postMessage||k.importScripts||m(gr)?er=dr in I("script")?function(e){Xe.appendChild(I("script"))[dr]=function(){Xe.removeChild(this),vr(e)}}:function(e){setTimeout(yr(e),0)}:(er=gr,k.addEventListener("message",br,!1)));var kr,mr,Tr,Or,wr,Sr,Ir,jr={set:sr,clear:ur},Ur=Qe("navigator","userAgent")||"",xr=fe.f,Dr=jr.set,Cr=k.MutationObserver||k.WebKitMutationObserver,Er=k.process,Ar=k.Promise,Pr="process"==oe(Er),Rr=xr(k,"queueMicrotask"),_r=Rr&&Rr.value;_r||(kr=function(){var e,t;for(Pr&&(e=Er.domain)&&e.exit();mr;){t=mr.fn,mr=mr.next;try{t()}catch(e){throw mr?Or():Tr=void 0,e}}Tr=void 0,e&&e.enter()},Or=Pr?function(){Er.nextTick(kr)}:Cr&&!/(iphone|ipod|ipad).*applewebkit/i.test(Ur)?(wr=!0,Sr=document.createTextNode(""),new Cr(kr).observe(Sr,{characterData:!0}),function(){Sr.data=wr=!wr}):Ar&&Ar.resolve?(Ir=Ar.resolve(void 0),function(){Ir.then(kr)}):function(){Dr.call(k,kr)});var Lr,qr,Fr,Mr=_r||function(e){var t={fn:e,next:void 0};Tr&&(Tr.next=t),mr||(mr=t,Or()),Tr=t},zr=function(e){var r,n;this.promise=new e(function(e,t){if(void 0!==r||void 0!==n)throw TypeError("Bad Promise constructor");r=e,n=t}),this.resolve=me(r),this.reject=me(n)},Br={f:function(e){return new zr(e)}},Nr=function(e,t){if(U(e),O(t)&&t.constructor===e)return t;var r=Br.f(e);return(0,r.resolve)(t),r.promise},Vr=function(e,t){var r=k.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))},Wr=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Gr=jr.set,Hr=Pe("species"),Yr="Promise",Kr=te.get,Qr=te.set,Xr=te.getterFor(Yr),Jr=k[Yr],$r=k.TypeError,Zr=k.document,en=k.process,tn=(k.fetch,en&&en.versions),rn=tn&&tn.v8||"",nn=Br.f,an=nn,on="process"==oe(en),sn=!!(Zr&&Zr.createEvent&&k.dispatchEvent),un="unhandledrejection",cn="rejectionhandled",ln=0,fn=1,pn=2,hn=1,dn=2,vn=ge(Yr,function(){var e=Jr.resolve(1),t=function(){},r=(e.constructor={})[Hr]=function(e){e(t,t)};return!((on||"function"==typeof PromiseRejectionEvent)&&e.finally&&e.then(t)instanceof r&&0!==rn.indexOf("6.6")&&-1===Ur.indexOf("Chrome/66"))}),yn=vn||!nr(function(e){Jr.all(e).catch(function(){})}),bn=function(e){var t;return!(!O(e)||"function"!=typeof(t=e.then))&&t},gn=function(f,p,h){var d;p.notified||(p.notified=!0,d=p.reactions,Mr(function(){for(var e=p.value,t=p.state==fn,r=0;d.length>r;){var n,a,i,o=d[r++],s=t?o.ok:o.fail,u=o.resolve,c=o.reject,l=o.domain;try{s?(t||(p.rejection===dn&&On(f,p),p.rejection=hn),!0===s?n=e:(l&&l.enter(),n=s(e),l&&(l.exit(),i=!0)),n===o.promise?c($r("Promise-chain cycle")):(a=bn(n))?a.call(n,u,c):u(n)):c(e)}catch(e){l&&!i&&l.exit(),c(e)}}p.reactions=[],p.notified=!1,h&&!p.rejection&&mn(f,p)}))},kn=function(e,t,r){var n,a;sn?((n=Zr.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),k.dispatchEvent(n)):n={promise:t,reason:r},(a=k["on"+e])?a(n):e===un&&Vr("Unhandled promise rejection",r)},mn=function(n,a){Gr.call(k,function(){var e,t=a.value,r=Tn(a);if(r&&(e=Wr(function(){on?en.emit("unhandledRejection",t,n):kn(un,n,t)}),a.rejection=on||Tn(a)?dn:hn,e.error))throw e.value})},Tn=function(e){return e.rejection!==hn&&!e.parent},On=function(e,t){Gr.call(k,function(){on?en.emit("rejectionHandled",e):kn(cn,e,t.value)})},wn=function(t,r,n,a){return function(e){t(r,n,e,a)}},Sn=function(e,t,r,n){t.done||(t.done=!0,n&&(t=n),t.value=r,t.state=pn,gn(e,t,!0))},In=function(r,n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(r===e)throw $r("Promise can't be resolved itself");var a=bn(e);a?Mr(function(){var t={done:!1};try{a.call(e,wn(In,r,t,n),wn(Sn,r,t,n))}catch(e){Sn(r,t,e,n)}}):(n.value=e,n.state=fn,gn(r,n,!1))}catch(e){Sn(r,{done:!1},e,n)}}};vn&&(Jr=function(e){Nt(this,Jr,Yr),me(e),Lr.call(this);var t=Kr(this);try{e(wn(In,this,t),wn(Sn,this,t))}catch(e){Sn(this,t,e)}},(Lr=function(e){Qr(this,{type:Yr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:ln,value:void 0})}).prototype=Mt(Jr.prototype,{then:function(e,t){var r=Xr(this),n=nn(ir(this,Jr));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=on?en.domain:void 0,r.parent=!0,r.reactions.push(n),r.state!=ln&&gn(this,r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),qr=function(){var e=new Lr,t=Kr(e);this.promise=e,this.resolve=wn(In,e,t),this.reject=wn(Sn,e,t)},Br.f=nn=function(e){return e===Jr||e===Fr?new qr(e):an(e)}),Se({global:!0,wrap:!0,forced:vn},{Promise:Jr}),ft(Jr,Yr,!1,!0),Bt(Yr),Fr=ke[Yr],Se({target:Yr,stat:!0,forced:vn},{reject:function(e){var t=nn(this);return t.reject.call(void 0,e),t.promise}}),Se({target:Yr,stat:!0,forced:_},{resolve:function(e){return Nr(this===Fr?Jr:this,e)}}),Se({target:Yr,stat:!0,forced:yn},{all:function(e){var s=this,t=nn(s),u=t.resolve,c=t.reject,r=Wr(function(){var n=me(s.resolve),a=[],i=0,o=1;Qt(e,function(e){var t=i++,r=!1;a.push(void 0),o++,n.call(s,e).then(function(e){r||(r=!0,a[t]=e,--o||u(a))},c)}),--o||u(a)});return r.error&&c(r.value),t.promise},race:function(e){var r=this,n=nn(r),a=n.reject,t=Wr(function(){var t=me(r.resolve);Qt(e,function(e){t.call(r,e).then(n.resolve,a)})});return t.error&&a(t.value),n.promise}}),Se({target:"Promise",proto:!0,real:!0},{finally:function(t){var r=ir(this,Qe("Promise")),e="function"==typeof t;return this.then(e?function(e){return Nr(r,t()).then(function(){return e})}:t,e?function(e){return Nr(r,t()).then(function(){throw e})}:t)}});var jn=ke.Promise,Un=function(e){return ke[e+"Prototype"]}}).call(this,Dn("yLpj"))},EWn2:function(e,t,r){"use strict";var U,n,l,a,f,i,x,o,D,s,u,c,T,p;(n=U=U||{})[n.Upload=1]="Upload",n[n.Import=2]="Import",(a=l=l||{})[a.File=1]="File",a[a.Directory=2]="Directory",(i=f=f||{})[i.Pending=1]="Pending",i[i.Inflight=2]="Inflight",i[i.Success=3]="Success",i[i.Error=4]="Error",i[i.Paused=5]="Paused",(o=x=x||{}).FolderEmpty="folder_empty",o.FolderHasFileTooLargeToUpload="folder_has_file_too_large_to_upload",o.FolderAllFilesTooLargeToUpload="folder_all_files_too_large_to_upload",o.FileTooLargeToUpload="file_too_large_to_upload",o.FolderHasFileNotImportable="folder_has_file_not_importable",o.FolderAllFilesNotImportable="folder_all_files_not_importable",o.FileTooLargeToImport="file_too_large_to_import",o.FileNotImportable="file_not_importable",(s=D=D||{}).SubtaskParentTokenMissing="RT_0001",s.UploadUnexpected="RT_1001",s.UploadChunkRetryTooManyTimes="RT_1002",s.CreateDirectoryUnexpected="RT_2001",s.ImportUnexpected="RT_3001",s.ImportPollTooManyTimes="RT_3002",(c=u=u||{})[c.Folder=0]="Folder",c[c.Docs=2]="Docs",c[c.Sheets=3]="Sheets",c[c.Mindnotes=11]="Mindnotes",c[c.File=12]="File",(p=T=T||{}).Normal="normal",p.NewSharedFolder="new_shared_folder",p.V3Folder="v3_folder";var m=r("D15H"),C=Object(m.M)(function(e){var t=function(o){var u,e=Object.prototype,l=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function s(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),o=new x(n||[]);return i._invoke=S(e,r,o),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}o.wrap=s;var c="suspendedStart",p="suspendedYield",h="executing",d="completed",v={};function y(){}function i(){}function b(){}var g={};g[a]=function(){return this};var k=Object.getPrototypeOf,m=k&&k(k(D([])));m&&m!==e&&l.call(m,a)&&(g=m);var T=b.prototype=y.prototype=Object.create(g);function O(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function w(s,u){function c(e,t,r,n){var a=f(s[e],s,t);if("throw"!==a.type){var i=a.arg,o=i.value;return o&&"object"==typeof o&&l.call(o,"__await")?u.resolve(o.__await).then(function(e){c("next",e,r,n)},function(e){c("throw",e,r,n)}):u.resolve(o).then(function(e){i.value=e,r(i)},function(e){return c("throw",e,r,n)})}n(a.arg)}var t;function e(r,n){function e(){return new u(function(e,t){c(r,n,e,t)})}return t=t?t.then(e,e):e()}this._invoke=e}function S(i,o,s){var u=c;return function(e,t){if(u===h)throw new Error("Generator is already running");if(u===d){if("throw"===e)throw t;return C()}for(s.method=e,s.arg=t;;){var r=s.delegate;if(r){var n=I(r,s);if(n){if(n===v)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(u===c)throw u=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=h;var a=f(i,o,s);if("normal"===a.type){if(u=s.done?d:p,a.arg!==v)return{value:a.arg,done:s.done}}else"throw"===a.type&&(u=d,s.method="throw",s.arg=a.arg)}}}function I(e,t){var r=e.iterator[t.method];if(r===u){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=u,I(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,v;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=u),t.delegate=null,v):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function U(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function D(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=u,e.done=!0,e};return n.next=n}}return{next:C}}function C(){return{value:u,done:!0}}return(i.prototype=T.constructor=b).constructor=i,b[n]=i.displayName="GeneratorFunction",o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,n in e||(e[n]="GeneratorFunction")),e.prototype=Object.create(T),e},o.awrap=function(e){return{__await:e}},O(w.prototype),w.prototype[r]=function(){return this},o.AsyncIterator=w,o.async=function(e,t,r,n,a){void 0===a&&(a=Promise);var i=new w(s(e,t,r,n),a);return o.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},O(T),T[n]="Generator",T[a]=function(){return this},T.toString=function(){return"[object Generator]"},o.keys=function(r){var e,n=[];for(e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=D,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(U),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return i.type="throw",i.arg=r,n.next=e,t&&(n.method="next",n.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var a=this.tryEntries[t],i=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var o=l.call(a,"catchLoc"),s=l.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),U(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n,a=r.completion;return"throw"===a.type&&(n=a.arg,U(r)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:D(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=u),v}},o}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}),h=function(e,t){var r=this;if(!(r instanceof h))return new h(e,t);m.L&&(r=Object(m.L)(new Error(t),Object(m.N)(r)));var n=[];return Object(m.S)(e,n.push,n),r.errors=n,void 0!==t&&Object(m.R)(r,"message",String(t)),r};h.prototype=Object(m.Y)(Error.prototype,{constructor:Object(m.C)(5,h),name:Object(m.C)(5,"AggregateError")}),Object(m.B)({global:!0},{AggregateError:h}),Object(m.B)({target:"Promise",stat:!0},{allSettled:function(e){var s=this,t=m.X.f(s),u=t.resolve,r=t.reject,n=Object(m.Z)(function(){var n=Object(m.O)(s.resolve),a=[],i=0,o=1;Object(m.S)(e,function(e){var t=i++,r=!1;a.push(void 0),o++,n.call(s,e).then(function(e){r||(r=!0,a[t]={status:"fulfilled",value:e},--o||u(a))},function(e){r||(r=!0,a[t]={status:"rejected",reason:e},--o||u(a))})}),--o||u(a)});return n.error&&r(n.value),t.promise}}),Object(m.B)({target:"Promise",stat:!0},{try:function(e){var t=m.X.f(this),r=Object(m.Z)(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}});var d="No one promise resolved";Object(m.B)({target:"Promise",stat:!0},{any:function(e){var u=this,t=m.X.f(u),c=t.resolve,l=t.reject,r=Object(m.Z)(function(){var n=Object(m.O)(u.resolve),a=[],i=0,o=1,s=!1;Object(m.S)(e,function(e){var t=i++,r=!1;a.push(void 0),o++,n.call(u,e).then(function(e){r||s||(s=!0,c(e))},function(e){r||s||(r=!0,a[t]=e,--o||l(new(Object(m.Q)("AggregateError"))(a,d)))})}),--o||l(new(Object(m.Q)("AggregateError"))(a,d))});return r.error&&l(r.value),t.promise}});var v=m.P;function y(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void r(e)}s.done?t(u):v.resolve(u).then(n,a)}function b(s){return function(){var e=this,o=arguments;return new v(function(t,r){var n=s.apply(e,o);function a(e){y(n,t,r,a,i,"next",e)}function i(e){y(n,t,r,a,i,"throw",e)}a(void 0)})}}var O=b,g=function(e,t){var r=[][e];return!r||!Object(m.T)(function(){r.call(null,t||function(){throw 1},1)})},k=m.U.indexOf,w=[].indexOf,S=!!w&&1/[1].indexOf(1,-0)<0,I=g("indexOf");Object(m.B)({target:"Array",proto:!0,forced:S||I},{indexOf:function(e){return S?w.apply(this,arguments)||0:k(this,e,1<arguments.length?arguments[1]:void 0)}});var j=Object(m.V)("Array").indexOf,E=Array.prototype,P=function(e){var t=e.indexOf;return e===E||e instanceof Array&&t===E.indexOf?j:t},R=P;function _(e,t){var n=t.setDragging,o=t.handleDrop;function r(e){var t;e.preventDefault();var r=e.dataTransfer;r&&(R(r.types)&&0<=R(t=r.types).call(t,"Files")?(e.stopPropagation(),r.dropEffect="copy",r.effectAllowed="copy",n(e,!0)):(r.dropEffect="none",r.effectAllowed="none"))}function a(e){e.preventDefault(),n(e,!1)}function i(e){e.preventDefault(),n(e,!1),s(e)}function s(e){return u.apply(this,arguments)}function u(){return(u=O(C.mark(function e(t){var r,n,a,i;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.dataTransfer){e.next=6;break}if(r=t.dataTransfer,n=r.items,a=r.files,n&&n[0]&&"string"===n[0].kind)return e.abrupt("return");e.next=4;break;case 4:(i=n||a)&&o({list:i,event:t});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return e.addEventListener("dragenter",r),e.addEventListener("dragover",r),e.addEventListener("dragleave",a),e.addEventListener("drop",i),function(){e.removeEventListener("dragenter",r),e.removeEventListener("dragover",r),e.removeEventListener("dragleave",a),e.removeEventListener("drop",i)}}var L=r("gSGL"),q=Array.isArray||function(e){return"Array"==Object(m.W)(e)},F=Object(m.gb)("species"),M=function(e,t){var r;return q(e)&&("function"==typeof(r=e.constructor)&&(r===Array||q(r.prototype))||Object(m.ab)(r)&&null===(r=r[F]))&&(r=void 0),new(void 0===r?Array:r)(0===t?0:t)},z=[].push,B=function(h){var d=1==h,v=2==h,y=3==h,b=4==h,g=6==h,k=5==h||g;return function(e,t,r,n){for(var a,i,o=Object(m.db)(e),s=Object(m.bb)(o),u=Object(m.cb)(t,r,3),c=Object(m.eb)(s.length),l=0,f=n||M,p=d?f(e,c):v?f(e,0):void 0;l<c;l++)if((k||l in s)&&(i=u(a=s[l],l,o),h))if(d)p[l]=i;else if(i)switch(h){case 3:return!0;case 5:return a;case 6:return l;case 2:z.call(p,a)}else if(b)return!1;return g?-1:y||b?b:p}},N={forEach:B(0),map:B(1),filter:B(2),some:B(3),every:B(4),find:B(5),findIndex:B(6)},V=Object(m.gb)("species"),W=function(t){return!Object(m.T)(function(){var e=[];return(e.constructor={})[V]=function(){return{foo:1}},1!==e[t](Boolean).foo})},H=N.map;Object(m.B)({target:"Array",proto:!0,forced:!W("map")},{map:function(e){return H(this,e,1<arguments.length?arguments[1]:void 0)}});var Y,K=Object(m.V)("Array").map,Q=Array.prototype,X=function(e){var t=e.map;return e===Q||e instanceof Array&&t===Q.map?K:t},J=m.P;function $(e){return new J(function(n,a){Z(function(e){var t=e.target,r=t&&t.files;r?n({event:e,files:r}):a()},e)})}function Z(t,e){Y&&(Y.remove(),Y=void 0);var r,n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("style","display: block; position: fixed; width: 1px; height: 1px; left: -1px; top: -1px; opacity: 0; overflow: hidden;"),e&&e.allowMultiple&&n.setAttribute("multiple","multiple"),e&&e.isDirectory&&n.setAttribute("webkitdirectory","webkitdirectory"),e&&e.fileTypes&&e.fileTypes.length&&(r=e.fileTypes,n.setAttribute("accept",Object(L.a)(r)?r:X(r).call(r,function(e){var t=e.replace(/\s/g,"").toLowerCase();return t.match(/^[^.][^/]+$/)&&(t=".".concat(t)),t}).join(","))),n.addEventListener("change",function(e){t(e),n.remove(),Y=void 0}),document.body.appendChild(n),(Y=n).focus(),n.click()}var ee=r("3Hq1"),te=r("u3oV"),re=r("7EGn"),ne=r("fujP"),ae=r("4O8T"),ie=r.n(ae),oe=r("vYB2"),se=r.n(oe),ue=r("Qyje"),ce=r.n(ue),le=r("9+78"),fe=r.n(le),pe=r("3tWU"),he=r("3y9D"),de=r.n(he);r.d(t,"d",function(){return Xu}),r.d(t,"b",function(){return U}),r.d(t,"c",function(){return x}),r.d(t,"e",function(){return f}),r.d(t,"a",function(){return T}),r.d(t,"f",function(){return _}),r.d(t,"g",function(){return $});var ve=N.every;Object(m.B)({target:"Array",proto:!0,forced:g("every")},{every:function(e){return ve(this,e,1<arguments.length?arguments[1]:void 0)}});var ye=Object(m.V)("Array").every,be=Array.prototype,ge=function(e){var t=e.every;return e===be||e instanceof Array&&t===be.every?ye:t},ke=20971520,me=10737418240;function Te(e,t){return new RegExp(".+.".concat(t,"$")).test(e)}function Oe(t,e){return ge(e).call(e,function(e){return!Te(t,e)})}function we(e,t,r,n){return r<t||!(!n||!Oe(e,n))}function Se(e,t){return"number"==typeof t?t:e===U.Import?ke:me}Object(m.B)({target:"Object",stat:!0,forced:!m.hb,sham:!m.hb},{defineProperty:m.fb.f});var Ie=Object(m.M)(function(e){var n=m.ib.Object,t=e.exports=function(e,t,r){return n.defineProperty(e,t,r)};n.defineProperty.sham&&(t.sham=!0)}),je=Ie;Object(m.B)({target:"Object",stat:!0,forced:!m.hb,sham:!m.hb},{defineProperties:m.jb});var Ue=Object(m.M)(function(e){var r=m.ib.Object,t=e.exports=function(e,t){return r.defineProperties(e,t)};r.defineProperties.sham&&(t.sham=!0)}),xe=m.c.concat("length","prototype"),De={f:Object.getOwnPropertyNames||function(e){return Object(m.b)(e,xe)}},Ce={f:Object.getOwnPropertySymbols},Ee=Object(m.Q)("Reflect","ownKeys")||function(e){var t=De.f(Object(m.d)(e)),r=Ce.f;return r?t.concat(r(e)):t},Ae=function(e,t,r){var n=Object(m.e)(t);n in e?m.fb.f(e,n,Object(m.C)(0,r)):e[n]=r};Object(m.B)({target:"Object",stat:!0,sham:!m.hb},{getOwnPropertyDescriptors:function(e){for(var t,r,n=Object(m.f)(e),a=m.g.f,i=Ee(n),o={},s=0;i.length>s;)void 0!==(r=a(n,t=i[s++]))&&Ae(o,t,r);return o}});var Pe=m.ib.Object.getOwnPropertyDescriptors,Re=N.forEach,_e=g("forEach")?function(e){return Re(this,e,1<arguments.length?arguments[1]:void 0)}:[].forEach;Object(m.B)({target:"Array",proto:!0,forced:[].forEach!=_e},{forEach:_e});var Le=Object(m.V)("Array").forEach,qe=Array.prototype,Fe={DOMTokenList:!0,NodeList:!0},Me=function(e){var t=e.forEach;return e===qe||e instanceof Array&&t===qe.forEach||Fe.hasOwnProperty(Object(m.h)(e))?Le:t},ze=m.g.f,Be=Object(m.T)(function(){ze(1)}),Ne=!m.hb||Be;Object(m.B)({target:"Object",stat:!0,forced:Ne,sham:!m.hb},{getOwnPropertyDescriptor:function(e,t){return ze(Object(m.f)(e),t)}});var Ve=Object(m.M)(function(e){var r=m.ib.Object,t=e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)};r.getOwnPropertyDescriptor.sham&&(t.sham=!0)}),We=N.filter;Object(m.B)({target:"Array",proto:!0,forced:!W("filter")},{filter:function(e){return We(this,e,1<arguments.length?arguments[1]:void 0)}});var Ge=Object(m.V)("Array").filter,He=Array.prototype,Ye=function(e){var t=e.filter;return e===He||e instanceof Array&&t===He.filter?Ge:t},Ke=De.f,Qe={}.toString,Xe="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Je=function(e){try{return Ke(e)}catch(e){return Xe.slice()}},$e={f:function(e){return Xe&&"[object Window]"==Qe.call(e)?Je(e):Ke(Object(m.f)(e))}},Ze={f:m.gb},et=m.fb.f,tt=function(e){var Symbol=m.ib.Symbol||(m.ib.Symbol={});Object(m.i)(Symbol,e)||et(Symbol,e,{value:Ze.f(e)})},rt=N.forEach,nt=Object(m.j)("hidden"),at="Symbol",it="prototype",ot=Object(m.gb)("toPrimitive"),st=m.k.set,ut=m.k.getterFor(at),ct=Object[it],lt=m.l.Symbol,ft=m.l.JSON,pt=ft&&ft.stringify,ht=m.g.f,dt=m.fb.f,vt=$e.f,yt=m.t.f,bt=Object(m.m)("symbols"),gt=Object(m.m)("op-symbols"),kt=Object(m.m)("string-to-symbol-registry"),mt=Object(m.m)("symbol-to-string-registry"),Tt=Object(m.m)("wks"),Ot=m.l.QObject,wt=!Ot||!Ot[it]||!Ot[it].findChild,St=m.hb&&Object(m.T)(function(){return 7!=Object(m.Y)(dt({},"a",{get:function(){return dt(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=ht(ct,t);n&&delete ct[t],dt(e,t,r),n&&e!==ct&&dt(ct,t,n)}:dt,It=function(e,t){var r=bt[e]=Object(m.Y)(lt[it]);return st(r,{type:at,tag:e,description:t}),m.hb||(r.description=t),r},jt=m.n&&"symbol"==typeof lt.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof lt},Ut=function(e,t,r){e===ct&&Ut(gt,t,r),Object(m.d)(e);var n=Object(m.e)(t,!0);return Object(m.d)(r),Object(m.i)(bt,n)?(r.enumerable?(Object(m.i)(e,nt)&&e[nt][n]&&(e[nt][n]=!1),r=Object(m.Y)(r,{enumerable:Object(m.C)(0,!1)})):(Object(m.i)(e,nt)||dt(e,nt,Object(m.C)(1,{})),e[nt][n]=!0),St(e,n,r)):dt(e,n,r)},xt=function(t,e){Object(m.d)(t);var r=Object(m.f)(e),n=Object(m.q)(r).concat(Pt(r));return rt(n,function(e){m.hb&&!Ct.call(r,e)||Ut(t,e,r[e])}),t},Dt=function(e,t){return void 0===t?Object(m.Y)(e):xt(Object(m.Y)(e),t)},Ct=function(e){var t=Object(m.e)(e,!0),r=yt.call(this,t);return!(this===ct&&Object(m.i)(bt,t)&&!Object(m.i)(gt,t))&&(!(r||!Object(m.i)(this,t)||!Object(m.i)(bt,t)||Object(m.i)(this,nt)&&this[nt][t])||r)},Et=function(e,t){var r=Object(m.f)(e),n=Object(m.e)(t,!0);if(r!==ct||!Object(m.i)(bt,n)||Object(m.i)(gt,n)){var a=ht(r,n);return!a||!Object(m.i)(bt,n)||Object(m.i)(r,nt)&&r[nt][n]||(a.enumerable=!0),a}},At=function(e){var t=vt(Object(m.f)(e)),r=[];return rt(t,function(e){Object(m.i)(bt,e)||Object(m.i)(m.s,e)||r.push(e)}),r},Pt=function(e){var t=e===ct,r=vt(t?gt:Object(m.f)(e)),n=[];return rt(r,function(e){!Object(m.i)(bt,e)||t&&!Object(m.i)(ct,e)||n.push(bt[e])}),n};m.n||(lt=function(){if(this instanceof lt)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=Object(m.o)(e),r=function(e){this===ct&&r.call(gt,e),Object(m.i)(this,nt)&&Object(m.i)(this[nt],t)&&(this[nt][t]=!1),St(this,t,Object(m.C)(1,e))};return m.hb&&wt&&St(ct,t,{configurable:!0,set:r}),It(t,e)},Object(m.p)(lt[it],"toString",function(){return ut(this).tag}),m.t.f=Ct,m.fb.f=Ut,m.g.f=Et,De.f=$e.f=At,Ce.f=Pt,m.hb&&dt(lt[it],"description",{configurable:!0,get:function(){return ut(this).description}}),Ze.f=function(e){return It(Object(m.gb)(e),e)}),Object(m.B)({global:!0,wrap:!0,forced:!m.n,sham:!m.n},{Symbol:lt}),rt(Object(m.q)(Tt),function(e){tt(e)}),Object(m.B)({target:at,stat:!0,forced:!m.n},{for:function(e){var t=String(e);if(Object(m.i)(kt,t))return kt[t];var r=lt(t);return kt[t]=r,mt[r]=t,r},keyFor:function(e){if(!jt(e))throw TypeError(e+" is not a symbol");if(Object(m.i)(mt,e))return mt[e]},useSetter:function(){wt=!0},useSimple:function(){wt=!1}}),Object(m.B)({target:"Object",stat:!0,forced:!m.n,sham:!m.hb},{create:Dt,defineProperty:Ut,defineProperties:xt,getOwnPropertyDescriptor:Et}),Object(m.B)({target:"Object",stat:!0,forced:!m.n},{getOwnPropertyNames:At,getOwnPropertySymbols:Pt}),Object(m.B)({target:"Object",stat:!0,forced:Object(m.T)(function(){Ce.f(1)})},{getOwnPropertySymbols:function(e){return Ce.f(Object(m.db)(e))}}),ft&&Object(m.B)({target:"JSON",stat:!0,forced:!m.n||Object(m.T)(function(){var e=lt();return"[null]"!=pt([e])||"{}"!=pt({a:e})||"{}"!=pt(Object(e))})},{stringify:function(e){for(var t,r,n=[e],a=1;a<arguments.length;)n.push(arguments[a++]);if(r=t=n[1],(Object(m.ab)(t)||void 0!==e)&&!jt(e))return q(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!jt(t))return t}),n[1]=t,pt.apply(ft,n)}}),lt[it][ot]||Object(m.R)(lt[it],ot,lt[it].valueOf),Object(m.r)(lt,at),m.s[nt]=!0;var Rt=m.ib.Object.getOwnPropertySymbols,_t=Rt,Lt=Object(m.T)(function(){Object(m.q)(1)});Object(m.B)({target:"Object",stat:!0,forced:Lt},{keys:function(e){return Object(m.q)(Object(m.db)(e))}});var qt=m.ib.Object.keys,Ft=qt,Mt=Ie;function zt(e,t,r){return t in e?Mt(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bt=zt;function Nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Vt=Nt;tt("iterator");var Wt=Ze.f("iterator"),Gt=Object(m.gb)("isConcatSpreadable"),Ht=9007199254740991,Yt="Maximum allowed index exceeded",Kt=!Object(m.T)(function(){var e=[];return e[Gt]=!1,e.concat()[0]!==e}),Qt=W("concat"),Xt=function(e){if(!Object(m.ab)(e))return!1;var t=e[Gt];return void 0!==t?!!t:q(e)},Jt=!Kt||!Qt;Object(m.B)({target:"Array",proto:!0,forced:Jt},{concat:function(e){for(var t,r,n,a=Object(m.db)(this),A=M(a,0),i=0,o=-1,s=arguments.length;o<s;o++)if(Xt(n=-1===o?a:arguments[o])){if(r=Object(m.eb)(n.length),Ht<i+r)throw TypeError(Yt);for(t=0;t<r;t++,i++)t in n&&Ae(A,i,n[t])}else{if(Ht<=i)throw TypeError(Yt);Ae(A,i++,n)}return A.length=i,A}}),tt("asyncIterator"),tt("hasInstance"),tt("isConcatSpreadable"),tt("match"),tt("matchAll"),tt("replace"),tt("search"),tt("species"),tt("split"),tt("toPrimitive"),tt("toStringTag"),tt("unscopables"),Object(m.r)(Math,"Math",!0),Object(m.r)(m.l.JSON,"JSON",!0);var $t=m.ib.Symbol;tt("dispose"),tt("observable"),tt("patternMatch"),tt("replaceAll");var Zt=$t,er=Object(m.M)(function(t){function r(e){return(r="function"==typeof Zt&&"symbol"==typeof Wt?function(e){return typeof e}:function(e){return e&&"function"==typeof Zt&&e.constructor===Zt&&e!==Zt.prototype?"symbol":typeof e})(e)}function n(e){return"function"==typeof Zt&&"symbol"===r(Wt)?t.exports=n=function(e){return r(e)}:t.exports=n=function(e){return e&&"function"==typeof Zt&&e.constructor===Zt&&e!==Zt.prototype?"symbol":r(e)},n(e)}t.exports=n});function tr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var rr=tr;function nr(e,t){return!t||"object"!==er(t)&&"function"!=typeof t?rr(e):t}var ar=nr,ir=Object(m.T)(function(){Object(m.N)(1)});Object(m.B)({target:"Object",stat:!0,forced:ir,sham:!m.u},{getPrototypeOf:function(e){return Object(m.N)(Object(m.db)(e))}});var or=m.ib.Object.getPrototypeOf;Object(m.B)({target:"Object",stat:!0},{setPrototypeOf:m.L});var sr=m.ib.Object.setPrototypeOf,ur=Object(m.M)(function(t){function r(e){return t.exports=r=sr?or:function(e){return e.__proto__||or(e)},r(e)}t.exports=r});Object(m.B)({target:"Object",stat:!0,sham:!m.hb},{create:m.Y});var cr=m.ib.Object,lr=function(e,t){return cr.create(e,t)},fr=Object(m.M)(function(r){function n(e,t){return r.exports=n=sr||function(e,t){return e.__proto__=t,e},n(e,t)}r.exports=n});function pr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=lr(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}var hr=pr;Object(m.B)({target:"Array",stat:!0},{isArray:q});var dr=m.ib.Array.isArray,vr=dr;function yr(e){if(vr(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var br=yr,gr=function(e){var t,r,n,a,i=Object(m.db)(e),o="function"==typeof this?this:Array,s=arguments.length,u=1<s?arguments[1]:void 0,c=void 0!==u,l=0,f=Object(m.v)(i);if(c&&(u=Object(m.cb)(u,2<s?arguments[2]:void 0,2)),null==f||o==Array&&Object(m.w)(f))for(r=new o(t=Object(m.eb)(i.length));l<t;l++)Ae(r,l,c?u(i[l],l):i[l]);else for(a=f.call(i),r=new o;!(n=a.next()).done;l++)Ae(r,l,c?Object(m.x)(a,u,[n.value,l],!0):n.value);return r.length=l,r},kr=!Object(m.y)(function(e){Array.from(e)});Object(m.B)({target:"Array",stat:!0,forced:kr},{from:gr});var mr=m.ib.Array.from,Tr=mr,Or=Object(m.gb)("iterator"),wr=function(e){var t=Object(e);return void 0!==t[Or]||"@@iterator"in t||m.z.hasOwnProperty(Object(m.h)(t))};function Sr(e){if(wr(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return Tr(e)}var Ir=Sr;function jr(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var Ur=jr;function xr(e){return br(e)||Ir(e)||Ur()}var Dr=xr,Cr=Object(m.V)("Array").concat,Er=Array.prototype,Ar=function(e){var t=e.concat;return e===Er||e instanceof Array&&t===Er.concat?Cr:t},Pr=dr,Rr=Math.max,_r=Math.min,Lr=9007199254740991,qr="Maximum allowed length exceeded";Object(m.B)({target:"Array",proto:!0,forced:!W("splice")},{splice:function(e,t){var r,n,A,a,i,o,s=Object(m.db)(this),u=Object(m.eb)(s.length),c=Object(m.A)(e,u),l=arguments.length;if(0===l?r=n=0:n=1===l?(r=0,u-c):(r=l-2,_r(Rr(Object(m.a)(t),0),u-c)),Lr<u+r-n)throw TypeError(qr);for(A=M(s,n),a=0;a<n;a++)(i=c+a)in s&&Ae(A,a,s[i]);if(r<(A.length=n)){for(a=c;a<u-n;a++)o=a+r,(i=a+n)in s?s[o]=s[i]:delete s[o];for(a=u;u-n+r<a;a--)delete s[a-1]}else if(n<r)for(a=u-n;c<a;a--)o=a+r-1,(i=a+n-1)in s?s[o]=s[i]:delete s[o];for(a=0;a<r;a++)s[a+c]=arguments[a+2];return s.length=u-n+r,A}});var Fr=Object(m.V)("Array").splice,Mr=Array.prototype,zr=function(e){var t=e.splice;return e===Mr||e instanceof Array&&t===Mr.splice?Fr:t},Br=N.findIndex,Nr="findIndex",Vr=!0;Nr in[]&&Array(1)[Nr](function(){Vr=!1}),Object(m.B)({target:"Array",proto:!0,forced:Vr},{findIndex:function(e){return Br(this,e,1<arguments.length?arguments[1]:void 0)}});var Wr=Object(m.V)("Array").findIndex,Gr=Array.prototype,Hr=function(e){var t=e.findIndex;return e===Gr||e instanceof Array&&t===Gr.findIndex?Wr:t},Yr=N.find,Kr="find",Qr=!0;Kr in[]&&Array(1)[Kr](function(){Qr=!1}),Object(m.B)({target:"Array",proto:!0,forced:Qr},{find:function(e){return Yr(this,e,1<arguments.length?arguments[1]:void 0)}});var Xr=Object(m.V)("Array").find,Jr=Array.prototype,$r=function(e){var t=e.find;return e===Jr||e instanceof Array&&t===Jr.find?Xr:t},Zr=function(e){var t=Object(m.v)(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return Object(m.d)(t.call(e))},en=Zr,tn=Object(m.gb)("species"),rn=[].slice,nn=Math.max;Object(m.B)({target:"Array",proto:!0,forced:!W("slice")},{slice:function(e,t){var r,n,a,i=Object(m.f)(this),o=Object(m.eb)(i.length),s=Object(m.A)(e,o),u=Object(m.A)(void 0===t?o:t,o);if(q(i)&&(("function"==typeof(r=i.constructor)&&(r===Array||q(r.prototype))||Object(m.ab)(r)&&null===(r=r[tn]))&&(r=void 0),r===Array||void 0===r))return rn.call(i,s,u);for(n=new(void 0===r?Array:r)(nn(u-s,0)),a=0;s<u;s++,a++)s in i&&Ae(n,a,i[s]);return n.length=a,n}});var an=Object(m.V)("Array").slice,on=Array.prototype,sn=function(e){var t=e.slice;return e===on||e instanceof Array&&t===on.slice?an:t},un=!Object(m.T)(function(){return Object.isExtensible(Object.preventExtensions({}))}),cn=Object(m.M)(function(e){var t=m.fb.f,r=Object(m.o)("meta"),n=0,a=Object.isExtensible||function(){return!0},i=function(e){t(e,r,{value:{objectID:"O"+ ++n,weakData:{}}})},o=function(e,t){if(!Object(m.ab)(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Object(m.i)(e,r)){if(!a(e))return"F";if(!t)return"E";i(e)}return e[r].objectID},s=function(e,t){if(!Object(m.i)(e,r)){if(!a(e))return!0;if(!t)return!1;i(e)}return e[r].weakData},u=function(e){return un&&c.REQUIRED&&a(e)&&!Object(m.i)(e,r)&&i(e),e},c=e.exports={REQUIRED:!1,fastKey:o,getWeakData:s,onFreeze:u};m.s[r]=!0}),ln=(cn.REQUIRED,cn.fastKey,cn.getWeakData,cn.onFreeze,m.fb.f),fn=N.forEach,pn=m.k.set,hn=m.k.getterFor,dn=function(r,e,t,n,o){var s,u,a=m.l[r],c=a&&a.prototype,i=n?"set":"add",l={};return m.hb&&"function"==typeof a&&(o||c.forEach&&!Object(m.T)(function(){(new a).entries().next()}))?(s=e(function(e,t){pn(Object(m.D)(e,s,r),{type:r,collection:new a}),null!=t&&Object(m.S)(t,e[i],e,n)}),u=hn(r),fn(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(a){var i="add"==a||"set"==a;a in c&&(!o||"clear"!=a)&&Object(m.R)(s.prototype,a,function(e,t){var r=u(this).collection;if(!i&&o&&!Object(m.ab)(e))return"get"==a&&void 0;var n=r[a](0===e?0:e,t);return i?this:n})}),o||ln(s.prototype,"size",{get:function(){return u(this).collection.size}})):(s=t.getConstructor(e,r,n,i),cn.REQUIRED=!0),Object(m.r)(s,r,!1,!0),l[r]=s,Object(m.B)({global:!0,forced:!0},l),o||t.setStrong(s,r,n),s},vn=m.fb.f,yn=cn.fastKey,bn=m.k.set,gn=m.k.getterFor,kn=(dn("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},{getConstructor:function(e,r,n,a){var i=e(function(e,t){Object(m.D)(e,i,r),bn(e,{type:r,index:Object(m.Y)(null),first:void 0,last:void 0,size:0}),m.hb||(e.size=0),null!=t&&Object(m.S)(t,e[a],e,n)}),s=gn(r),o=function(e,t,r){var n,a,i=s(e),o=u(e,t);return o?o.value=r:(i.last=o={index:a=yn(t,!0),key:t,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),m.hb?i.size++:e.size++,"F"!==a&&(i.index[a]=o)),e},u=function(e,t){var r,n=s(e),a=yn(t);if("F"!==a)return n.index[a];for(r=n.first;r;r=r.next)if(r.key==t)return r};return Object(m.E)(i.prototype,{clear:function(){for(var e=this,t=s(e),r=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;t.first=t.last=void 0,m.hb?t.size=0:e.size=0},delete:function(e){var t,r,n=this,a=s(n),i=u(n,e);return i&&(t=i.next,r=i.previous,delete a.index[i.index],i.removed=!0,r&&(r.next=t),t&&(t.previous=r),a.first==i&&(a.first=t),a.last==i&&(a.last=r),m.hb?a.size--:n.size--),!!i},forEach:function(e){for(var t,r=s(this),n=Object(m.cb)(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),Object(m.E)(i.prototype,n?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return o(this,0===e?0:e,t)}}:{add:function(e){return o(this,e=0===e?0:e,e)}}),m.hb&&vn(i.prototype,"size",{get:function(){return s(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",a=gn(t),i=gn(n);Object(m.F)(e,t,function(e,t){bn(this,{type:n,target:e,state:a(e),kind:t,last:void 0})},function(){for(var e=i(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:{value:e.target=void 0,done:!0}},r?"entries":"values",!r,!0),Object(m.G)(t)}},!0),m.ib.Map);function mn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Mt(e,n.key,n)}}function Tn(e,t,r){return t&&mn(e.prototype,t),r&&mn(e,r),e}var On=Tn,wn=P,Sn=Rt,In=qt;function jn(e,t){if(null==e)return{};for(var r,n={},a=In(e),i=0;i<a.length;i++)r=a[i],0<=wn(t).call(t,r)||(n[r]=e[r]);return n}var Un=jn;function xn(e,t){if(null==e)return{};var r,n=Un(e,t);if(Sn)for(var a=Sn(e),i=0;i<a.length;i++)r=a[i],0<=wn(t).call(t,r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var Dn=xn,Cn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function En(e){void 0===e&&(e=20);for(var t="",r=0;r<e;r++){var n=Math.floor(Math.random()*Cn.length);t+=Cn[n]}return t}function An(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}var Pn=function(){return An()},Rn=function e(t){var r=t.id,n=t.sourceType,a=t.name;Vt(this,e),this.id=r||Pn(),this.sourceType=n,this.name=a},_n=function(){function a(e){var t,r=e.jobType,n=Dn(e,["jobType"]);return Vt(this,a),(t=ar(this,ur(a).call(this,n))).status=f.Pending,t.jobType=r,t}return hr(a,Rn),On(a,[{key:"canPause",get:function(){return this.status===f.Pending||this.status===f.Inflight}},{key:"canRetry",get:function(){return this.status===f.Paused||this.status===f.Error}}]),a}(),Ln=function(){function i(e){var t,r=e.file,n=e.options;Vt(this,i),(t=ar(this,ur(i).call(this,{jobType:n.jobType,sourceType:l.File,name:r.name})))._uploadedSize=0,t.file=r,t.totalSize=r.size;var a=Se(n.jobType,n.sizeLimit);return we(r.name,r.size,a,n.extensions)&&(t.parseError=n.jobType===U.Import?r.size>a?x.FileTooLargeToImport:x.FileNotImportable:x.FileTooLargeToUpload,t.failedToParseFiles=[r.name],t.shouldAbort=!0),t}return hr(i,_n),On(i,[{key:"start",value:function(){this.status=f.Inflight}},{key:"finish",value:function(){this.status=this.error?f.Error:f.Success}},{key:"pause",value:function(e){this.status=f.Paused,this.pausedByOffline=Boolean(e)}},{key:"retry",value:function(){this.status=f.Pending,this.pausedByOffline=!1}},{key:"uploadedSize",set:function(e){this._uploadedSize=Math.min(Math.max(e,0),this.totalSize)},get:function(){return this._uploadedSize}},{key:"progress",get:function(){return 0===this.totalSize?0:Math.round(this.uploadedSize/this.totalSize*100)/100}}]),i}(),qn=function(){function a(e){var t,r=e.file,n=e.options;return Vt(this,a),(t=ar(this,ur(a).call(this,{file:r,options:n}))).parentToken=n.parentToken,(t.options=n).jobType===U.Upload&&(t.fileToken=n.fileToken,t.memberID=n.memberID,t.shouldAddToRecents=n.shouldAddToRecents),t}return hr(a,Ln),On(a,[{key:"mountPoint",get:function(){return this.jobType===U.Import?void 0:this.options.mountPoint||"explorer"}}]),a}(),Fn=function(){function n(e){var t=e.file,r=e.options;return Vt(this,n),ar(this,ur(n).call(this,{file:t,options:r}))}return hr(n,Ln),n}(),Mn=mr,zn=function(c){return function(e,t,r,n){Object(m.O)(t);var a=Object(m.db)(e),i=Object(m.bb)(a),o=Object(m.eb)(a.length),s=c?o-1:0,u=c?-1:1;if(r<2)for(;;){if(s in i){n=i[s],s+=u;break}if(s+=u,c?s<0:o<=s)throw TypeError("Reduce of empty array with no initial value")}for(;c?0<=s:s<o;s+=u)s in i&&(n=t(n,i[s],s,a));return n}},Bn={left:zn(!1),right:zn(!0)}.left;Object(m.B)({target:"Array",proto:!0,forced:g("reduce")},{reduce:function(e){return Bn(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Nn=Object(m.V)("Array").reduce,Vn=Array.prototype,Wn=function(e){var t=e.reduce;return e===Vn||e instanceof Array&&t===Vn.reduce?Nn:t},Gn=Math.min,Hn=[].lastIndexOf,Yn=!!Hn&&1/[1].lastIndexOf(1,-0)<0,Kn=g("lastIndexOf"),Qn=Yn||Kn?function(e){if(Yn)return Hn.apply(this,arguments)||0;var t=Object(m.f)(this),r=Object(m.eb)(t.length),n=r-1;for(1<arguments.length&&(n=Gn(n,Object(m.a)(arguments[1]))),n<0&&(n=r+n);0<=n;n--)if(n in t&&t[n]===e)return n||0;return-1}:Hn;Object(m.B)({target:"Array",proto:!0,forced:Qn!==[].lastIndexOf},{lastIndexOf:Qn});var Xn=Object(m.V)("Array").lastIndexOf,Jn=Array.prototype,$n=function(e){var t=e.lastIndexOf;return e===Jn||e instanceof Array&&t===Jn.lastIndexOf?Xn:t};function Zn(t){return new Promise(function(e){t.file(e)})}function ea(e){return e.webkitRelativePath}function ta(n){return new Promise(function(e,t){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(){t("upload read blob error")},r.readAsArrayBuffer(n)})}function ra(t,e){var r,n=Ft(t);return _t&&(r=_t(t),e&&(r=Ye(r).call(r,function(e){return Ve(t,e).enumerable})),n.push.apply(n,r)),n}function na(t){for(var e=1;e<arguments.length;e++){var r,n,a=null!=arguments[e]?arguments[e]:{};e%2?Me(r=ra(Object(a),!0)).call(r,function(e){Bt(t,e,a[e])}):Pe?Ue(t,Pe(a)):Me(n=ra(Object(a))).call(n,function(e){je(t,e,Ve(a,e))})}return t}var aa=function(){function o(e){var t,r=e.isRoot,n=e.parentId,a=e.parentToken,i=Dn(e,["isRoot","parentId","parentToken"]);return Vt(this,o),(t=ar(this,ur(o).call(this,na({},i,{sourceType:l.Directory})))).parentId=n,t.parentToken=a,t.isRoot=Boolean(r),t.children=[],t}return hr(o,Rn),On(o,[{key:"addChild",value:function(e){this.children.push(e)}}]),o}();function ia(t,e){var r,n=Ft(t);return _t&&(r=_t(t),e&&(r=Ye(r).call(r,function(e){return Ve(t,e).enumerable})),n.push.apply(n,r)),n}function oa(t){for(var e=1;e<arguments.length;e++){var r,n,a=null!=arguments[e]?arguments[e]:{};e%2?Me(r=ia(Object(a),!0)).call(r,function(e){Bt(t,e,a[e])}):Pe?Ue(t,Pe(a)):Me(n=ia(Object(a))).call(n,function(e){je(t,e,Ve(a,e))})}return t}var sa=function(){function o(e){var t,r=e.file,n=e.jobType,a=e.parentId,i=Dn(e,["file","jobType","parentId"]);return Vt(this,o),(t=ar(this,ur(o).call(this,oa({},i,{sourceType:l.File,name:r.name}))))._uploadedSize=0,t.file=r,t.jobType=n,t.parentId=a,t.totalSize=r.size,t}return hr(o,Rn),On(o,[{key:"uploadedSize",set:function(e){this._uploadedSize=Math.min(Math.max(e,0),this.totalSize)},get:function(){return this._uploadedSize}}]),o}();function ua(t,e){var r,n=Ft(t);return _t&&(r=_t(t),e&&(r=Ye(r).call(r,function(e){return Ve(t,e).enumerable})),n.push.apply(n,r)),n}function ca(t){for(var e=1;e<arguments.length;e++){var r,n,a=null!=arguments[e]?arguments[e]:{};e%2?Me(r=ua(Object(a),!0)).call(r,function(e){Bt(t,e,a[e])}):Pe?Ue(t,Pe(a)):Me(n=ua(Object(a))).call(n,function(e){je(t,e,Ve(a,e))})}return t}var la="___root___";function fa(e){return e.substring(0,$n(e).call(e,"/"))}function pa(e,t){return(Pr(e)?ha:va)(e,t)}function ha(e,t){return da.apply(this,arguments)}function da(){return(da=O(C.mark(function e(t,r){var n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,k,m,T,O,w,S,I,j;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.length)return e.abrupt("return",{subtasks:[],subtaskMap:{},totalCount:0,totalSize:0,parseError:x.FolderEmpty,shouldAbort:!0});e.next=2;break;case 2:n={},a=[],i=new kn,o=[],s=Se(r.jobType,r.sizeLimit),u=ga(t),c=new aa({name:u,isRoot:!0,parentId:la,parentToken:r.parentToken}),n[c.id]=c,a.push(c),i.set(u,c),f=!(l=!0),p=void 0,e.prev=15,h=en(t);case 17:if(l=(d=h.next()).done){e.next=48;break}if(v=d.value,y=ea(v),b=fa(y),g=i.get(b)){e.next=44;break}for(k=fa(b),m=[b],T=k;T&&!i.get(T);)m.push(T),T=fa(T);case 27:if(!(0<m.length)){e.next=40;break}if(O=m.pop(),w=i.get(fa(O))){e.next=33;break}return console.error("Unexpected error"),e.abrupt("break",40);case 33:S=new aa({isRoot:!1,parentId:w.id,name:O.substring($n(O).call(O,"/")+1)}),w.addChild(S.id),n[S.id]=S,a.push(S),i.set(O,S),e.next=27;break;case 40:if(g=i.get(b)){e.next=44;break}return console.error("Unexpected error"),e.abrupt("continue",45);case 44:we(v.name,v.size,s,r.extensions)?o.push(v.name):(I=new sa({file:v,parentId:g.id,jobType:r.jobType}),n[I.id]=I,a.push(I),g.addChild(I.id));case 45:l=!0,e.next=17;break;case 48:e.next=54;break;case 50:e.prev=50,e.t0=e.catch(15),f=!0,p=e.t0;case 54:e.prev=54,e.prev=55,l||null==h.return||h.return();case 57:if(e.prev=57,f)throw p;e.next=60;break;case 60:return e.finish(57);case 61:return e.finish(54);case 62:return j=ba(a,r.jobType===U.Import,o),e.abrupt("return",ca({subtaskMap:n,subtasks:X(a).call(a,function(e){return e.id})},j));case 64:case"end":return e.stop()}},e,null,[[15,50,54,62],[55,,57,61]])}))).apply(this,arguments)}function va(e,t){return ya.apply(this,arguments)}function ya(){return(ya=O(C.mark(function e(t,d){var v,y,b,g,k,m,s,r,n;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v={},y=[],b=[],g=[],k=Se(d.jobType,d.sizeLimit),m=0,s={id:Pn(),entry:t,parentId:la},r=C.mark(function e(){var p,t,r,n,h,a,i,o;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p=s.id,t=s.entry,r=s.parentId,h=new aa({isRoot:n=r===la,id:p,name:s.entry.name,parentId:r,parentToken:n?d.parentToken:void 0}),v[p]=h,y.push(h),a=t.createReader(),i=function(){return new J(function(f){a.readEntries(function(){var t=O(C.mark(function e(t){var r,n,a,i,o,s,u,c,l;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!(r=!0),a=void 0,e.prev=3,i=en(t);case 5:if(r=(o=i.next()).done){e.next=22;break}if(!(s=o.value).isDirectory){e.next=13;break}u=Pn(),b.push({id:u,entry:s,parentId:p}),h.addChild(u),e.next=19;break;case 13:if(s.isFile)return e.next=16,Zn(s);e.next=19;break;case 16:c=e.sent,m+=1,we(c.name,c.size,k,d.extensions)?g.push(c.name):(l=new sa({file:c,parentId:p,jobType:d.jobType}),v[l.id]=l,y.push(l),h.addChild(l.id));case 19:r=!0,e.next=5;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(3),n=!0,a=e.t0;case 28:e.prev=28,e.prev=29,r||null==i.return||i.return();case 31:if(e.prev=31,n)throw a;e.next=34;break;case 34:return e.finish(31);case 35:return e.finish(28);case 36:f(0<t.length);case 37:case"end":return e.stop()}},e,null,[[3,24,28,36],[29,,31,35]])}));return function(e){return t.apply(this,arguments)}}())})},e.next=11,i();case 11:o=e.sent;case 12:if(o)return e.next=15,i();e.next=18;break;case 15:o=e.sent,e.next=12;break;case 18:s=b.shift();case 19:case"end":return e.stop()}},e)});case 8:if(s)return e.delegateYield(r(),"t0",10);e.next=12;break;case 10:e.next=8;break;case 12:if(0===m)return e.abrupt("return",{subtasks:[],subtaskMap:{},totalCount:0,totalSize:0,parseError:x.FolderEmpty,shouldAbort:!0});e.next=14;break;case 14:return n=ba(y,d.jobType===U.Import,g),e.abrupt("return",ca({subtaskMap:v,subtasks:X(y).call(y,function(e){return e.id})},n));case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ba(e,t,r){var n,a,i,o=Ye(e).call(e,function(e){return e instanceof sa}),s=Wn(o).call(o,function(e,t){return e+t.totalSize},0),u=o.length;return 0===u?(n=t?x.FolderAllFilesNotImportable:x.FolderAllFilesTooLargeToUpload,i=r,a=!0):0<r.length&&(n=t?x.FolderHasFileNotImportable:x.FolderHasFileTooLargeToUpload,i=r,a=!1),{totalSize:s,totalCount:u,parseError:n,shouldAbort:a,failedToParseFiles:i}}function ga(e){if(Pr(e)){var t=e[0];return t?ea(t).split("/")[0]:""}return e.name}function ka(e,t){for(var r=arguments.length,n=new Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];for(var i=0,o=n;i<o.length;i++){var s=o[i],u=R(s).call(s,e);if(-1!==u)return t&&zr(s).call(s,u,1),!0}return!1}var ma=function(){function i(e){var t=e.input,r=e.options;Vt(this,i);var n,a=ga(t);return(n=ar(this,ur(i).call(this,{name:a,jobType:r.jobType,sourceType:l.Directory}))).parentToken=r.parentToken,n.input=t,n.options=r,n.initialized=!1,n.directoryType=r.directoryType,n}return hr(i,_n),On(i,[{key:"init",value:function(){var l=this;return this.initPromise||(this.initPromise=new J(function(){var t=O(C.mark(function e(t){var r,n,a,i,o,s,u,c;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa(l.input,l.options);case 2:r=e.sent,n=r.subtasks,a=r.subtaskMap,i=r.totalCount,o=r.totalSize,s=r.parseError,u=r.failedToParseFiles,c=r.shouldAbort,l.subtaskMap=a,l.subtasks=n,l.pendingList=Mn(n),l.progressList=[],l.errorList=[],l.successList=[],l._totalCount=i,l._totalSize=o,l.parseError=s,l.failedToParseFiles=u,l.shouldAbort=c,l.initialized=!0,t();case 23:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())),this.initPromise}},{key:"getNextPendingSubtask",value:function(){if(this.initialized){var e=this.pendingList[0];return this.subtaskMap[e]}}},{key:"markSubtaskStart",value:function(e){this.initialized&&(ka(e,!0,this.pendingList)?this.progressList.push(e):console.warn("Subtask ".concat(e," not found.")))}},{key:"markSubtaskProgress",value:function(e){if(this.initialized){var t=e.uuid;if(ka(t,!1,this.progressList,this.pendingList))switch(e.type){case"upload":case"import-upload":this.subtaskMap[t].uploadedSize=e.data.bytesTransferred;break;case"import-uploaded":this.subtaskMap[t].ticket=e.data.ticket}else console.warn("Subtask ".concat(t," not found."))}}},{key:"markSubtaskSuccess",value:function(e){if(this.initialized){var t=e.uuid;if(ka(t,!0,this.progressList,this.pendingList))switch(this.successList.push(t),e.type){case"create-directory":var r=this.subtaskMap[t],n=e.data.token;r.token=n,r.isRoot&&(this.token=n);var a=!0,i=!1,o=void 0;try{for(var s,u=en(r.children);!(a=(s=u.next()).done);a=!0){var c=s.value;this.subtaskMap[c].parentToken=n}}catch(e){i=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}break;case"upload":this.subtaskMap[t].token=e.data.token;break;case"import":var l=this.subtaskMap[t];l.token=e.data.token,l.suiteType=e.data.suiteType}else console.warn("Subtask ".concat(t," not found."))}}},{key:"markSubtaskFailure",value:function(e){var t;this.initialized&&(ka(t=e.uuid,!0,this.progressList,this.pendingList)?(this.errorList.push(t),this.subtaskMap[t].error=e.data.errorType):console.warn("Subtask ".concat(t," not found.")))}},{key:"getSubtask",value:function(e){if(this.initialized)return this.subtaskMap[e]}},{key:"getInProgressSubtasksCoreInfo",value:function(){if(!this.initialized)return[];var e=[],t=!0,r=!1,n=void 0;try{for(var a,i=en(this.progressList);!(t=(a=i.next()).done);t=!0){var o=a.value,s=this.subtaskMap[o];s instanceof sa&&e.push({id:s.id,jobType:s.jobType,file:s.file})}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return e}},{key:"start",value:function(){this.status=f.Inflight}},{key:"finish",value:function(){this.initialized&&(this.status=this.errorList.length?f.Error:f.Success)}},{key:"pause",value:function(e){var t;this.initialized&&((t=this.pendingList).unshift.apply(t,Dr(this.progressList)),this.progressList.length=0,this.status=f.Paused,this.pausedByOffline=Boolean(e))}},{key:"retry",value:function(){var e;this.initialized&&((e=this.pendingList).unshift.apply(e,Dr(this.errorList)),this.errorList.length=0,this.status=f.Pending,this.pausedByOffline=!1)}},{key:"totalCount",get:function(){return this.initialized?this._totalCount:0}},{key:"uploadedCount",get:function(){if(!this.initialized)return 0;var e=0,t=!0,r=!1,n=void 0;try{for(var a,i=en(this.successList);!(t=(a=i.next()).done);t=!0){var o=a.value;this.subtaskMap[o]instanceof sa&&(e+=1)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return e}},{key:"totalSize",get:function(){return this.initialized?this._totalSize:0}},{key:"uploadedSize",get:function(){if(!this.initialized)return 0;var e=0,t=!0,r=!1,n=void 0;try{for(var a,i=en(this.subtasks);!(t=(a=i.next()).done);t=!0){var o=a.value,s=this.subtaskMap[o];s instanceof sa&&(e+=s.uploadedSize)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return e}},{key:"progress",get:function(){if(!this.initialized)return 0;var e=this.progressList[0],t=this.subtaskMap[e];if(!t||t instanceof aa)return 0;var r=t.uploadedSize,n=t.totalSize;return 0===n?0:Math.round(r/n*100)/100}}]),i}();Object(m.B)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Ta=m.ib.Date.now,Oa=1e3,wa=6,Sa=function(){function r(e){var i=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:wa;Vt(this,r),this.diffSize=0,this.diffTime=0,this.slidingWindow=[],this.pSpeed=0,this.TransferredBytesMap=new kn,this.calculate=function(){i.write();var e,t=i.slidingWindow.length;if(0===t)e=0;else{for(var r=0,n=0,a=0;a<t;a++)r+=i.slidingWindow[a],0<i.slidingWindow[a]&&(n+=1);e=0===n?0:r/n}i.speed=e},this.onSpeedChanged=e,this.windowSize=t}return On(r,[{key:"updateTransferredBytes",value:function(e){var t,r,n=e.bytesTransferred||0,a=this.TransferredBytesMap.get(e.key),i=Ta();a&&(t=n-a.transferredBytes,r=i-a.timeStamp,this.add(Math.max(0,t),r)),this.TransferredBytesMap.set(e.key,{timeStamp:i,transferredBytes:n})}},{key:"clear",value:function(){this.speedTimer&&(clearInterval(this.speedTimer),this.speedTimer=void 0),this.diffSize=0,this.diffTime=0,this.slidingWindow=[],this.speed=0,this.TransferredBytesMap.clear()}},{key:"add",value:function(e,t){this.speedTimer||(this.speedTimer=window.setInterval(this.calculate,Oa)),this.diffSize+=e,this.diffTime+=t}},{key:"write",value:function(){var e=this.diffSize&&this.diffTime?Math.round(this.diffSize/this.diffTime*1e3):0;this.diffSize=0,this.diffTime=0,this.slidingWindow.push(e),this.slidingWindow.length>this.windowSize&&this.slidingWindow.shift()}},{key:"speed",set:function(e){this.pSpeed!==e&&(this.onSpeedChanged(e),this.pSpeed=e)}}]),r}();function Ia(t,e){var r,n=Ft(t);return _t&&(r=_t(t),e&&(r=Ye(r).call(r,function(e){return Ve(t,e).enumerable})),n.push.apply(n,r)),n}function ja(t){for(var e=1;e<arguments.length;e++){var r,n,a=null!=arguments[e]?arguments[e]:{};e%2?Me(r=Ia(Object(a),!0)).call(r,function(e){Bt(t,e,a[e])}):Pe?Ue(t,Pe(a)):Me(n=Ia(Object(a))).call(n,function(e){je(t,e,Ve(a,e))})}return t}function Ua(e){return e instanceof File||e.isFile}function xa(e,t,r){return Da.apply(this,arguments)}function Da(){return(Da=O(C.mark(function e(t,r,n){var a,i,o,s,u,c,l,f,p,h,d,v,y;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r&&r.isDirectory,s=Ye(a=X(i=Mn(t)).call(i,function(e){if(e instanceof DataTransferItem){var t=e.webkitGetAsEntry();return t.isFile&&e.getAsFile?e.getAsFile():t}return e})).call(a,function(e){return!("drive"===n&&(o||!Ua(e)))}),o&&1===s.length&&""===s[0].webkitRelativePath&&(o=!1),u=[],o)return e.next=7,Pa(s,r);e.next=13;break;case 7:return c=e.sent,e.next=10,c.init();case 10:u.push(c),e.next=44;break;case 13:f=!(l=!0),p=void 0,e.prev=16,h=en(s);case 18:if(l=(d=h.next()).done){e.next=30;break}return v=d.value,e.next=22,Ca(v,r,n);case 22:if((y=e.sent)instanceof ma)return e.next=26,y.init();e.next=26;break;case 26:u.push(y);case 27:l=!0,e.next=18;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(16),f=!0,p=e.t0;case 36:e.prev=36,e.prev=37,l||null==h.return||h.return();case 39:if(e.prev=39,f)throw p;e.next=42;break;case 42:return e.finish(39);case 43:return e.finish(36);case 44:return e.abrupt("return",u);case 45:case"end":return e.stop()}},e,null,[[16,32,36,44],[37,,39,43]])}))).apply(this,arguments)}function Ca(e,t,r){return Ua(e)?Ea(e,t,r):Pa(e,t)}function Ea(e,t,r){return Aa.apply(this,arguments)}function Aa(){return(Aa=O(C.mark(function e(t,r,n){var a;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof File)){e.next=4;break}e.t0=t,e.next=7;break;case 4:return e.next=6,Zn(t);case 6:e.t0=e.sent;case 7:if(a=e.t0,"drive"===n)return e.abrupt("return",new Fn({file:a,options:r}));e.next=10;break;case 10:return e.abrupt("return",new qn({file:a,options:r}));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pa(e,t){return Ra.apply(this,arguments)}function Ra(){return(Ra=O(C.mark(function e(t,r){var n;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new ma({input:t,options:r}),e.abrupt("return",n);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _a(e,i){return X(e).call(e,function(e){var t,r;e instanceof ma&&(t=e.uploadedCount,r=e.totalCount);var n={finishedCount:t,totalCount:r,errorType:e.error,file:e instanceof qn||e instanceof Fn?e.file:void 0,uuid:e.id,name:e.name,jobType:e.jobType,status:e.status,progress:e.progress,size:e.totalSize,uploadedSize:e.uploadedSize};if("drive"===i)return ja({},n,{appFileId:e.appFileId,extra:e.extra});var a=e instanceof ma?u.Folder:e.suiteType||u.File;return ja({},n,{fileTypeNum:a,parentToken:e.parentToken,token:e.token})})}function La(e){return X(e).call(e,function(e){return{name:e.name,jobType:e.jobType,parseError:e.parseError,failedToParseFiles:e.failedToParseFiles,shouldAbort:e.shouldAbort}})}var qa=function(){function u(e){var a=this;Vt(this,u),this.tasks=[],this.uploadingTasks=new kn,this.eventBus=new ie.a,this.pausedByOffline=!1,this.filesAddedWhenOffline=!1,this.isOnline=!0,this.onSpeedChanged=function(e){a.fire("speed_changed",{speed:e})},this.onOnline=function(){a.isOnline=!0,a.fire("online"),(a.pausedByOffline||a.filesAddedWhenOffline)&&(a.retryAllPausedByOffline(),a.upload(),a.pausedByOffline=!1,a.filesAddedWhenOffline=!1)},this.onOffline=function(){a.isOnline=!1,a.fire("offline"),a.isUploading&&(a.pausedByOffline=!0,a.doPauseAll(!0))},this.handleUploadStatusChanged=function(e){switch(e.type){case"uploading":a.handleUploadStatusUploading(e.data);break;case"success":a.handleUploadStatusSuccess(e.data);break;case"error":a.handleUploadStatusError(e.data)}},this.handleCreateDirectoryStatusChanged=function(e){switch(e.type){case"retry":a.handleCreateDirectoryStatusRetry(e.data);break;case"success":a.handleCreateDirectoryStatusSuccess(e.data);break;case"error":a.handleCreateDirectoryStatusError(e.data)}},this.handleImportStatusChanged=function(e){switch(e.type){case"uploading":a.handleImportStatusUploading(e.data);break;case"converting":a.handleImportStatusConverting(e.data);break;case"success":a.handleImportStatusSuccess(e.data);break;case"error":a.handleImportStatusError(e.data)}},this.handleImportErrorAlert=function(e){var t=e.errorType,r=e.name,n=e.responseData;a.reportRuntimeIncident(t,[r],n)},this.supported=Boolean(FileList&&File&&Blob&&sn(Blob.prototype)),this.opts=e||{},this.logger=e.logger,this.taskController=e.taskController;var t,r,n,i,o=e.envConfigs.teaConfig,s=Boolean(e.envConfigs.isOnlineEnv);o&&(t=o.appID,r=o.userID,n=o.tenantID,i=o.channelDomain,this.logger.kickOff({appID:t,userID:r,tenantID:n,channelDomain:i,isOnlineEnv:s,instanceName:"drive-sdk"})),this.taskController.init({onUploadStatusChanged:this.handleUploadStatusChanged,onCreateDirectoryStatusChanged:this.handleCreateDirectoryStatusChanged,onImportStatusChanged:this.handleImportStatusChanged,onImportErrorAlert:this.handleImportErrorAlert}),this.networkSpeedCalculator=new Sa(this.onSpeedChanged)}function e(e,t,r){return n.apply(this,arguments)}var n,r;function t(e,t){return r.apply(this,arguments)}return On(u,[{key:"loadFile",value:(r=O(C.mark(function e(t,r){var n,a;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof File){e.next=2;break}throw new Error("Invalid argument: argv[0] is not a File.");case 2:return this.checkLoadFileOpts(r),e.next=5,xa([t],r,this.opts.uploaderType);case 5:if(n=e.sent,(a=n[0]).shouldAbort)throw new Error("File cannot be loaded with parse error ".concat(a.parseError));e.next=9;break;case 9:return this.appendTaskQueue(n),e.abrupt("return",a.id);case 11:case"end":return e.stop()}},e,this)})),t)},{key:"loadFiles",value:(n=O(C.mark(function e(t,r,n){var a;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return this.checkLoadFileOpts(n),e.next=5,xa(t,n,this.opts.uploaderType);case 5:a=e.sent,this.appendTaskQueue(a);case 7:case"end":return e.stop()}},e,this)})),e)},{key:"on",value:function(e,t){this.eventBus.on(e,t)}},{key:"off",value:function(e,t){this.eventBus.off(e,t)}},{key:"destroy",value:function(){this.eventBus.removeAllListeners(),this.setNetworkCheck(!1),this.cancelAll()}},{key:"setNetworkCheck",value:function(e){e?(window.addEventListener("online",this.onOnline),window.addEventListener("offline",this.onOffline)):(window.removeEventListener("online",this.onOnline),window.removeEventListener("offline",this.onOffline))}},{key:"upload",value:function(){if(this.isOnline)for(var e=this.getOpt("maxSimultaneousUploads"),t=0;t<e;t++)this.uploadNextTask()}},{key:"pauseAll",value:function(){return this.doPauseAll()}},{key:"pause",value:function(t){var e,r,n=this.uploadingTasks.get(t);if(n){if(n instanceof ma){var a=n.getInProgressSubtasksCoreInfo(),i=!0,o=!1,s=void 0;try{for(var u,c=en(a);!(i=(u=c.next()).done);i=!0){var l,f=u.value;f.jobType===U.Import?(l=f.file,this.taskController.cancelImport({file:l,uuid:f.id})):this.taskController.cancelUpload(f.id)}}catch(e){o=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw s}}}else n.jobType===U.Import?(r=n.file,this.taskController.cancelImport({file:r,uuid:n.id})):this.taskController.cancelUpload(n.id);return n.pause(),this.updateTask(n),this.uploadingTasks.delete(n.id),void this.upload()}var p=$r(e=this.tasks).call(e,function(e){return e.id===t});p&&p.canPause&&(p.pause(),this.updateTask(p))}},{key:"retry",value:function(t){var e,r=$r(e=this.tasks).call(e,function(e){return e.id===t});r&&r.canRetry&&(r.retry(),this.updateTask(r),this.upload())}},{key:"retryAllPaused",value:function(){var e,t=Ye(e=this.tasks).call(e,function(e){return e.status===f.Paused});this.retryTasks(t)}},{key:"retryAllFailed",value:function(){var e,t=Ye(e=this.tasks).call(e,function(e){return e.status===f.Error});this.retryTasks(t)}},{key:"cancel",value:function(t){var e,r,n,a=Hr(e=this.tasks).call(e,function(e){return e.id===t});-1!==a&&(this.pause(t),n=zr(r=this.tasks).call(r,a,1),this.fire("tasks_removed",{list:X(n).call(n,function(e){return{uuid:e.id}})}))}},{key:"cancelAll",value:function(){var e;this.doPauseAll(),this.fire("tasks_removed",{list:X(e=this.tasks).call(e,function(e){return{uuid:e.id}})}),this.tasks.length=0}},{key:"getFolderUploadErrorDetail",value:function(t){var e,r=$r(e=this.tasks).call(e,function(e){return e.id===t&&e.sourceType===l.Directory});if(!r)throw new Error("Cannot find directory task with uuid ".concat(t));var n=r.errorList,a=r.subtaskMap;if(!n||!a)return{files:[]};for(var i=[],o=0;o<n.length;o++){var s=a[n[o]],u=s.error,c=s.name;s.sourceType===l.File&&i.push({name:c,errorType:u})}return{files:i}}},{key:"checkLoadFileOpts",value:function(e){if(Object(ee.default)(e.jobType)||this.isSuiteUploader&&Object(ee.default)(e.parentToken))throw new Error("Invalid argument: jobType or parentToken missing.")}},{key:"getOpt",value:function(e){var t=this;if(Pr(e)){var r={};return Me(e).call(e,function(e){r[e]=t.getOpt(e)}),r}return(Object(ee.default)(this.opts[e])?this.opts.defaults:this.opts)[e]}},{key:"fire",value:function(e){for(var t,r,n=arguments.length,a=new Array(1<n?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];(t=this.eventBus).emit.apply(t,Ar(r=[e]).call(r,a))}},{key:"appendTaskQueue",value:function(e){var t,r=Ye(e).call(e,function(e){return e&&!e.shouldAbort}),n=Ye(e).call(e,function(e){return!e||e.shouldAbort||e.failedToParseFiles||e.parseError});(t=this.tasks).push.apply(t,Dr(r)),0<r.length&&this.fire("tasks_added",{list:_a(r,this.opts.uploaderType)}),0<n.length&&this.fire("parse_error",{list:La(n)}),!this.isOnline&&0<r.length&&(this.filesAddedWhenOffline=!0)}},{key:"doPauseAll",value:function(e){var t,r=Ye(t=this.tasks).call(t,function(e){return e.canPause}),n=!0,a=!1,i=void 0;try{for(var o,s=en(r);!(n=(o=s.next()).done);n=!0){var u=o.value;this.uploadingTasks.has(u.id)&&this.uploadingTasks.delete(u.id),u.pause(e)}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}this.updateTasks(r),this.taskController.cancelAllUploads(),this.taskController.cancelAllImports(),this.networkSpeedCalculator&&this.networkSpeedCalculator.clear()}},{key:"retryAllPausedByOffline",value:function(){var e,t=Ye(e=this.tasks).call(e,function(e){return e.status===f.Paused&&!0===e.pausedByOffline});this.retryTasks(t)}},{key:"retryTasks",value:function(e){var t=!0,r=!1,n=void 0;try{for(var a,i=en(e);!(t=(a=i.next()).done);t=!0)a.value.retry()}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}this.updateTasks(e),this.upload()}},{key:"handleUploadStatusUploading",value:function(e){var t,r,n,a,i=e.uuid,o=e.parentUUID,s=e.bytesTransferred;this.updateSpeedCalculator(i,s),o?(r=$r(t=this.tasks).call(t,function(e){return e.id===o}))?(r.markSubtaskProgress({uuid:i,type:"upload",data:{bytesTransferred:s}}),this.updateTask(r)):console.error("Cannot find parent task with given parentUUID."):(a=$r(n=this.tasks).call(n,function(e){return e.id===i}))?(a.uploadedSize=s,this.updateTask(a)):console.error("Cannot find task with given uuid.")}},{key:"handleUploadStatusSuccess",value:function(e){this.isSuiteUploader?this.handleSuiteUploadStatusSuccess(e):this.handleDriveUploadStatusSuccess(e)}},{key:"handleSuiteUploadStatusSuccess",value:function(e){var t,r,n,a,i=e.uuid,o=e.parentUUID,s=e.token,u=e.dataVersion;o?(r=$r(t=this.tasks).call(t,function(e){return e.id===o}))?(r.markSubtaskSuccess({uuid:i,type:"upload",data:{token:s,dataVersion:u}}),this.updateTask(r),this.uploadDirectorySubtask(r)):console.error("Cannot find parent task with given parentUUID."):(a=$r(n=this.tasks).call(n,function(e){return e.id===i}))?(a.token=s,a.error=void 0,this.finishTask(a)):console.error("Cannot find task with given uuid.")}},{key:"handleDriveUploadStatusSuccess",value:function(e){var t,r=e.uuid,n=e.appFileId,a=e.extra,i=$r(t=this.tasks).call(t,function(e){return e.id===r});i?(i.appFileId=n,i.extra=a,i.error=void 0,this.finishTask(i)):console.error("Cannot find task with given uuid.")}},{key:"handleUploadStatusError",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.errorType,a=e.reqID,i="";if(r){var o,s=$r(o=this.tasks).call(o,function(e){return e.id===r});if(!s)return void console.error("Cannot find parent task with given parentUUID.");var u=s.getSubtask(t);u instanceof sa&&this.fire("subtask_failed",{reqID:a,errorType:n,name:u.name,size:u.totalSize}),s.markSubtaskFailure({uuid:t,type:"upload",data:{errorType:n}}),i=u?u.name:"",this.updateTask(s),this.uploadDirectorySubtask(s)}else{var c,l=$r(c=this.tasks).call(c,function(e){return e.id===t});if(!l)return void console.error("Cannot find task with given uuid.");i=l.name,l.error=n,this.finishTask(l)}this.reportRuntimeIncident(n,[i])}},{key:"handleCreateDirectoryStatusRetry",value:function(e){}},{key:"handleCreateDirectoryStatusSuccess",value:function(e){var t,r,n=e.uuid,a=e.parentUUID,i=e.token;a&&((r=$r(t=this.tasks).call(t,function(e){return e.id===a}))?(r.markSubtaskSuccess({uuid:n,type:"create-directory",data:{token:i}}),this.updateTask(r),this.uploadDirectorySubtask(r)):console.error("Cannot find parent task with given parentUUID."))}},{key:"handleCreateDirectoryStatusError",value:function(e){var t,r,n,a,i=e.uuid,o=e.parentUUID,s=e.errorType,u=e.reqID;o&&((r=$r(t=this.tasks).call(t,function(e){return e.id===o}))?((n=r.getSubtask(i))instanceof aa&&this.fire("subtask_failed",{reqID:u,errorType:s,name:n.name}),r.markSubtaskFailure({uuid:i,type:"create-directory",data:{errorType:s}}),this.updateTask(r),this.uploadDirectorySubtask(r),a=n?n.name:"",this.reportRuntimeIncident(s,[a])):console.error("Cannot find parent task with given parentUUID."))}},{key:"handleImportStatusUploading",value:function(e){var t,r,n,a,i=e.uuid,o=e.parentUUID,s=e.bytesTransferred;this.updateSpeedCalculator(i,s),o?(r=$r(t=this.tasks).call(t,function(e){return e.id===o}))?(r.markSubtaskProgress({uuid:i,type:"import-upload",data:{bytesTransferred:s}}),this.updateTask(r)):console.error("Cannot find parent task with given parentUUID."):(a=$r(n=this.tasks).call(n,function(e){return e.id===i}))?(a.uploadedSize=s,this.updateTask(a)):console.error("Cannot find task with given uuid.")}},{key:"handleImportStatusConverting",value:function(e){var t,r,n,a,i=e.uuid,o=e.parentUUID,s=e.ticket;o?(r=$r(t=this.tasks).call(t,function(e){return e.id===o}))?(r.markSubtaskProgress({uuid:i,type:"import-uploaded",data:{ticket:s}}),this.updateTask(r)):console.error("Cannot find parent task with given parentUUID."):(a=$r(n=this.tasks).call(n,function(e){return e.id===i}))?(a.ticket=s,this.updateTask(a)):console.error("Cannot find task with given uuid.")}},{key:"handleImportStatusSuccess",value:function(e){var t,r,n,a,i=e.uuid,o=e.parentUUID,s=e.token,u=e.suiteType;o?(r=$r(t=this.tasks).call(t,function(e){return e.id===o}))?(r.markSubtaskSuccess({uuid:i,type:"import",data:{token:s,suiteType:u}}),this.updateTask(r),this.uploadDirectorySubtask(r)):console.error("Cannot find parent task with given parentUUID."):(a=$r(n=this.tasks).call(n,function(e){return e.id===i}))?(a.token=s,a.error=void 0,a.suiteType=u,this.finishTask(a)):console.error("Cannot find task with given uuid.")}},{key:"handleImportStatusError",value:function(e){var t,r,n,a,i,o=e.uuid,s=e.parentUUID,u=e.errorType,c=e.reqID;s?(r=$r(t=this.tasks).call(t,function(e){return e.id===s}))?((n=r.getSubtask(o))instanceof sa&&this.fire("subtask_failed",{reqID:c,errorType:u,name:n.name,size:n.totalSize}),r.markSubtaskFailure({uuid:o,type:"import",data:{errorType:u}}),this.updateTask(r),this.uploadDirectorySubtask(r)):console.error("Cannot find parent task with given parentUUID."):(i=$r(a=this.tasks).call(a,function(e){return e.id===o}))?(i.error=u,this.finishTask(i)):console.error("Cannot find task with given uuid.")}},{key:"finishTask",value:function(e){e.finish(),this.updateTask(e),this.uploadingTasks.delete(e.id),this.uploadNextTask()}},{key:"uploadNextTask",value:function(){var e,t;this.uploadingTasks.size>=this.getOpt("maxSimultaneousUploads")||((t=$r(e=this.tasks).call(e,function(e){return e.status===f.Pending}))?t.sourceType===l.Directory?this.uploadDirectoryTask(t):this.uploadFileTask(t):0===this.uploadingTasks.size&&this.networkSpeedCalculator&&this.networkSpeedCalculator.clear())}},{key:"uploadDirectoryTask",value:function(e){var t=e.parentToken;Object(ee.default)(t)?console.error("task parentToken missing."):(e.start(),this.updateTask(e),this.uploadingTasks.set(e.id,e),this.uploadDirectorySubtask(e))}},{key:"uploadDirectorySubtask",value:function(e){var t=this.taskController;if(e.status!==f.Paused){var r=e.getNextPendingSubtask();if(r)if(r instanceof aa){var n=r.id,a=r.parentToken,i=r.name;if(Object(ee.default)(a))return e.markSubtaskFailure({uuid:n,type:"create-directory",data:{errorType:D.SubtaskParentTokenMissing}}),this.updateTask(e),void this.uploadDirectorySubtask(e);t.startCreateDirectory({uuid:n,parentToken:a,name:i,parentUUID:e.id,directoryType:e.directoryType}),e.markSubtaskStart(n)}else{var o=r.id,s=r.parentToken,u=r.file,c=r.jobType;if(Object(ee.default)(s))return e.markSubtaskFailure({uuid:o,type:c===U.Import?"import":"upload",data:{errorType:D.SubtaskParentTokenMissing}}),this.updateTask(e),void this.uploadDirectorySubtask(e);c===U.Import?t.startImport({uuid:o,file:u,parentToken:s,parentUUID:e.id}):t.startUpload({uuid:o,file:u,parentToken:s,parentUUID:e.id}),e.markSubtaskStart(o)}else this.finishTask(e)}}},{key:"uploadFileTask",value:function(e){this.isSuiteUploader?this.uploadSuiteFileTask(e):this.uploadDriveFileTask(e)}},{key:"updateUpcomingTaskStatus",value:function(e){e.start(),this.updateTask(e),this.uploadingTasks.set(e.id,e)}},{key:"uploadSuiteFileTask",value:function(e){var t,r=e.id,n=e.file,a=e.parentToken,i=e.fileToken,o=e.memberID,s=e.shouldAddToRecents;Object(ee.default)(a)?console.error("task parentToken missing."):(this.updateUpcomingTaskStatus(e),t=this.taskController,e.jobType===U.Import?t.startImport({uuid:r,file:n,parentToken:a}):t.startUpload({uuid:r,file:n,parentToken:a,fileToken:i,memberID:o,shouldAddToRecents:s,mountPoint:e.mountPoint}))}},{key:"uploadDriveFileTask",value:function(e){var t=e.id,r=e.file;this.updateUpcomingTaskStatus(e),this.taskController.startUpload({uuid:t,file:r})}},{key:"updateSpeedCalculator",value:function(e,t){this.networkSpeedCalculator&&this.networkSpeedCalculator.updateTransferredBytes({key:e,bytesTransferred:t})}},{key:"updateTask",value:function(e){this.updateTasks([e])}},{key:"updateTasks",value:function(e){var t=_a(e,this.opts.uploaderType);this.fire("tasks_changed",{list:t})}},{key:"reportRuntimeIncident",value:function(e,t,r){this.fire("runtime_incident_occurred",{errorType:e,fileNames:t,responseData:r})}},{key:"isUploading",get:function(){return 0<this.uploadingTasks.size}},{key:"progressInfo",get:function(){var e=0,t=0,r=!0,n=!1,a=void 0;try{for(var i,o=en(this.tasks);!(r=(i=o.next()).done);r=!0){var s=i.value;e+=s.uploadedSize,t+=s.totalSize}}catch(e){n=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return{uploadedSize:e,totalSize:t,progress:0<t?e/t:0}}},{key:"progress",get:function(){return this.progressInfo.progress}},{key:"uploadedSize",get:function(){return this.progressInfo.uploadedSize}},{key:"totalSize",get:function(){return this.progressInfo.totalSize}},{key:"isSuiteUploader",get:function(){return"suite"===this.opts.uploaderType}}]),u}(),Fa=m.t.f,Ma=function(s){return function(e){for(var t,r=Object(m.f)(e),n=Object(m.q)(r),a=n.length,i=0,o=[];i<a;)t=n[i++],m.hb&&!Fa.call(r,t)||o.push(s?[t,r[t]]:r[t]);return o}},za={entries:Ma(!0),values:Ma(!1)}.values;Object(m.B)({target:"Object",stat:!0},{values:function(e){return za(e)}});var Ba=m.ib.Object.values;function Na(e){return Object(te.a)(e,function(e){return null!=e})}function Va(t){return void 0===t&&(t=1e3),new Promise(function(e){return window.setTimeout(e,t)})}var Wa=m.U.includes;Object(m.B)({target:"Array",proto:!0},{includes:function(e){return Wa(this,e,1<arguments.length?arguments[1]:void 0)}});var Ga=Object(m.V)("Array").includes,Ha=Object(m.gb)("match"),Ya=function(e){var t;return Object(m.ab)(e)&&(void 0!==(t=e[Ha])?!!t:"RegExp"==Object(m.W)(e))},Ka=function(e){if(Ya(e))throw TypeError("The method doesn't accept regular expressions");return e},Qa=Object(m.gb)("match"),Xa=function(t){var r=/./;try{"/./"[t](r)}catch(e){try{return r[Qa]=!1,"/./"[t](r)}catch(e){}}return!1};Object(m.B)({target:"String",proto:!0,forced:!Xa("includes")},{includes:function(e){return!!~String(Object(m.H)(this)).indexOf(Ka(e),1<arguments.length?arguments[1]:void 0)}});var Ja=Object(m.V)("String").includes,$a=Array.prototype,Za=String.prototype,ei=function(e){var t=e.includes;return e===$a||e instanceof Array&&t===$a.includes?Ga:"string"==typeof e||e===Za||e instanceof String&&t===Za.includes?Ja:t},ti="".startsWith,ri=Math.min;Object(m.B)({target:"String",proto:!0,forced:!Xa("startsWith")},{startsWith:function(e){var t=String(Object(m.H)(this));Ka(e);var r=Object(m.eb)(ri(1<arguments.length?arguments[1]:void 0,t.length)),n=String(e);return ti?ti.call(t,n,r):t.slice(r,r+n.length)===n}});var ni=Object(m.V)("String").startsWith,ai=String.prototype,ii=function(e){var t=e.startsWith;return"string"==typeof e||e===ai||e instanceof String&&t===ai.startsWith?ni:t},oi=Object(m.gb)("iterator"),si=!Object(m.T)(function(){var e=new URL("b?e=1","http://a"),t=e.searchParams;return e.pathname="c%20d",m.I&&!e.toJSON||!t.sort||"http://a/c%20d?e=1"!==e.href||"1"!==t.get("e")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[oi]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash}),ui=Object.assign,ci=!ui||Object(m.T)(function(){var A={},t={},e=Symbol(),r="abcdefghijklmnopqrst";return A[e]=7,r.split("").forEach(function(e){t[e]=e}),7!=ui({},A)[e]||Object(m.q)(ui({},t)).join("")!=r})?function(e,t){for(var r=Object(m.db)(e),n=arguments.length,a=1,i=Ce.f,o=m.t.f;a<n;)for(var s,u=Object(m.bb)(arguments[a++]),c=i?Object(m.q)(u).concat(i(u)):Object(m.q)(u),l=c.length,f=0;f<l;)s=c[f++],m.hb&&!o.call(u,s)||(r[s]=u[s]);return r}:ui,li=2147483647,fi=36,pi=1,hi=26,di=38,vi=700,yi=72,bi=128,gi="-",ki=/[^\0-\u007E]/,mi=/[.\u3002\uFF0E\uFF61]/g,Ti="Overflow: input needs wider integers to process",Oi=fi-pi,wi=Math.floor,Si=String.fromCharCode,Ii=function(e){for(var t=[],r=0,n=e.length;r<n;){var a,i=e.charCodeAt(r++);55296<=i&&i<=56319&&r<n?56320==(64512&(a=e.charCodeAt(r++)))?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),r--):t.push(i)}return t},ji=function(e){return e+22+75*(e<26)},Ui=function(e,t,r){var n=0;for(e=r?wi(e/vi):e>>1,e+=wi(e/t);Oi*hi>>1<e;n+=fi)e=wi(e/Oi);return wi(n+(Oi+1)*e/(e+di))},xi=function(e){var t,r=[],n=(e=Ii(e)).length,a=bi,i=0,o=yi;for(l=0;l<e.length;l++)(t=e[l])<128&&r.push(Si(t));var s=r.length,u=s;for(s&&r.push(gi);u<n;){for(var c=li,l=0;l<e.length;l++)a<=(t=e[l])&&t<c&&(c=t);var f=u+1;if(c-a>wi((li-i)/f))throw RangeError(Ti);for(i+=(c-a)*f,a=c,l=0;l<e.length;l++){if((t=e[l])<a&&++i>li)throw RangeError(Ti);if(t==a){for(var p=i,h=fi;;h+=fi){var d=h<=o?pi:o+hi<=h?hi:h-o;if(p<d)break;var v=p-d,y=fi-d;r.push(Si(ji(d+v%y))),p=wi(v/y)}r.push(Si(ji(p))),o=Ui(i,f,u==s),i=0,++u}}++i,++a}return r.join("")},Di=function(e){for(var t,r=[],n=e.toLowerCase().replace(mi,".").split("."),a=0;a<n.length;a++)t=n[a],r.push(ki.test(t)?"xn--"+xi(t):t);return r.join(".")},Ci=Object(m.gb)("iterator"),Ei="URLSearchParams",Ai=Ei+"Iterator",Pi=m.k.set,Ri=m.k.getterFor(Ei),_i=m.k.getterFor(Ai),Li=/\+/g,qi=Array(4),Fi=function(e){return qi[e-1]||(qi[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},Mi=function(t){try{return decodeURIComponent(t)}catch(e){return t}},zi=function(e){var t=e.replace(Li," "),r=4;try{return decodeURIComponent(t)}catch(e){for(;r;)t=t.replace(Fi(r--),Mi);return t}},Bi=/[!'()~]|%20/g,Ni={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Vi=function(e){return Ni[e]},Wi=function(e){return encodeURIComponent(e).replace(Bi,Vi)},Gi=function(e,t){if(t)for(var r,n,a=t.split("&"),i=0;i<a.length;)(r=a[i++]).length&&(n=r.split("="),e.push({key:zi(n.shift()),value:zi(n.join("="))}))},Hi=function(e){this.entries.length=0,Gi(this.entries,e)},Yi=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Ki=Object(m.J)(function(e,t){Pi(this,{type:Ai,iterator:Zr(Ri(e).entries),kind:t})},"Iterator",function(){var e=_i(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r}),Qi=function(){Object(m.D)(this,Qi,Ei);var e,t,r,n,a,i,o,s=0<arguments.length?arguments[0]:void 0,u=[];if(Pi(this,{type:Ei,entries:u,updateURL:function(){},updateSearchParams:Hi}),void 0!==s)if(Object(m.ab)(s))if("function"==typeof(e=Object(m.v)(s)))for(t=e.call(s);!(r=t.next()).done;){if((a=(n=Zr(Object(m.d)(r.value))).next()).done||(i=n.next()).done||!n.next().done)throw TypeError("Expected sequence with length 2");u.push({key:a.value+"",value:i.value+""})}else for(o in s)Object(m.i)(s,o)&&u.push({key:o,value:s[o]+""});else Gi(u,"string"==typeof s?"?"===s.charAt(0)?s.slice(1):s:s+"")},Xi=Qi.prototype;Object(m.E)(Xi,{append:function(e,t){Yi(arguments.length,2);var r=Ri(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){Yi(arguments.length,1);for(var t=Ri(this),r=t.entries,n=e+"",a=0;a<r.length;)r[a].key===n?r.splice(a,1):a++;t.updateURL()},get:function(e){Yi(arguments.length,1);for(var t=Ri(this).entries,r=e+"",n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){Yi(arguments.length,1);for(var t=Ri(this).entries,r=e+"",n=[],a=0;a<t.length;a++)t[a].key===r&&n.push(t[a].value);return n},has:function(e){Yi(arguments.length,1);for(var t=Ri(this).entries,r=e+"",n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){Yi(arguments.length,1);for(var r,n=Ri(this),a=n.entries,i=!1,o=e+"",s=t+"",u=0;u<a.length;u++)(r=a[u]).key===o&&(i?a.splice(u--,1):(i=!0,r.value=s));i||a.push({key:o,value:s}),n.updateURL()},sort:function(){for(var e,t,r=Ri(this),n=r.entries,a=n.slice(),i=n.length=0;i<a.length;i++){for(e=a[i],t=0;t<i;t++)if(n[t].key>e.key){n.splice(t,0,e);break}t===i&&n.push(e)}r.updateURL()},forEach:function(e){for(var t,r=Ri(this).entries,n=Object(m.cb)(e,1<arguments.length?arguments[1]:void 0,3),a=0;a<r.length;)n((t=r[a++]).value,t.key,this)},keys:function(){return new Ki(this,"keys")},values:function(){return new Ki(this,"values")},entries:function(){return new Ki(this,"entries")}},{enumerable:!0}),Object(m.p)(Xi,Ci,Xi.entries),Object(m.p)(Xi,"toString",function(){for(var e,t=Ri(this).entries,r=[],n=0;n<t.length;)e=t[n++],r.push(Wi(e.key)+"="+Wi(e.value));return r.join("&")},{enumerable:!0}),Object(m.r)(Qi,Ei),Object(m.B)({global:!0,forced:!si},{URLSearchParams:Qi});var Ji,$i,Zi,eo={URLSearchParams:Qi,getState:Ri},to=m.K.codeAt,ro=m.l.URL,no=eo.URLSearchParams,ao=eo.getState,io=m.k.set,oo=m.k.getterFor("URL"),so=Math.floor,uo=Math.pow,co="Invalid authority",lo="Invalid scheme",fo="Invalid host",po="Invalid port",ho=/[A-Za-z]/,vo=/[\d+\-.A-Za-z]/,yo=/\d/,bo=/^(0x|0X)/,go=/^[0-7]+$/,ko=/^\d+$/,mo=/^[\dA-Fa-f]+$/,To=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,Oo=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,wo=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,So=/[\u0009\u000A\u000D]/g,Io=function(e,t){var r,n,a;if("["==t.charAt(0))return"]"==t.charAt(t.length-1)&&(r=Uo(t.slice(1,-1)))?void(e.host=r):fo;if(Lo(e))return t=Di(t),To.test(t)||null===(r=jo(t))?fo:void(e.host=r);if(Oo.test(t))return fo;for(r="",n=gr(t),a=0;a<n.length;a++)r+=Ro(n[a],Co);e.host=r},jo=function(e){var t,r,n,a,i,o,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),4<(t=u.length))return e;for(r=[],n=0;n<t;n++){if(""==(a=u[n]))return e;if(i=10,1<a.length&&"0"==a.charAt(0)&&(i=bo.test(a)?16:8,a=a.slice(8==i?1:2)),""===a)o=0;else{if(!(10==i?ko:8==i?go:mo).test(a))return e;o=parseInt(a,i)}r.push(o)}for(n=0;n<t;n++)if(o=r[n],n==t-1){if(o>=uo(256,5-t))return null}else if(255<o)return null;for(s=r.pop(),n=0;n<r.length;n++)s+=r[n]*uo(256,3-n);return s},Uo=function(e){var t,r,n,a,i,o,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,p=function(){return e.charAt(f)};if(":"==p()){if(":"!=e.charAt(1))return;f+=2,l=++c}for(;p();){if(8==c)return;if(":"!=p()){for(t=r=0;r<4&&mo.test(p());)t=16*t+parseInt(p(),16),f++,r++;if("."==p()){if(0==r)return;if(f-=r,6<c)return;for(n=0;p();){if(a=null,0<n){if(!("."==p()&&n<4))return;f++}if(!yo.test(p()))return;for(;yo.test(p());){if(i=parseInt(p(),10),null===a)a=i;else{if(0==a)return;a=10*a+i}if(255<a)return;f++}u[c]=256*u[c]+a,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==p()){if(f++,!p())return}else if(p())return;u[c++]=t}else{if(null!==l)return;f++,l=++c}}if(null!==l)for(o=c-l,c=7;0!=c&&0<o;)s=u[c],u[c--]=u[l+o-1],u[l+--o]=s;else if(8!=c)return;return u},xo=function(e){for(var t=null,r=1,n=null,a=0,i=0;i<8;i++)0!==e[i]?(r<a&&(t=n,r=a),n=null,a=0):(null===n&&(n=i),++a);return r<a&&(t=n,r=a),t},Do=function(e){var t,r,n,a;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=so(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",n=xo(e),r=0;r<8;r++)a&&0===e[r]||(a=a&&!1,n===r?(t+=r?":":"::",a=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"},Co={},Eo=ci({},Co,{" ":1,'"':1,"<":1,">":1,"`":1}),Ao=ci({},Eo,{"#":1,"?":1,"{":1,"}":1}),Po=ci({},Ao,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ro=function(e,t){var r=to(e,0);return 32<r&&r<127&&!Object(m.i)(t,e)?e:encodeURIComponent(e)},_o={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},Lo=function(e){return Object(m.i)(_o,e.scheme)},qo=function(e){return""!=e.username||""!=e.password},Fo=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Mo=function(e,t){var r;return 2==e.length&&ho.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},zo=function(e){var t;return 1<e.length&&Mo(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Bo=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&Mo(t[0],!0)||t.pop()},No=function(e){return"."===e||"%2e"===e.toLowerCase()},Vo=function(e){return".."===(e=e.toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e},Wo={},Go={},Ho={},Yo={},Ko={},Qo={},Xo={},Jo={},$o={},Zo={},es={},ts={},rs={},ns={},as={},is={},os={},ss={},us={},cs={},ls={},fs=function(e,t,r,n){var a,i,o,s,u=r||Wo,c=0,l="",f=!1,p=!1,h=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(wo,"")),t=t.replace(So,""),a=gr(t);c<=a.length;){switch(i=a[c],u){case Wo:if(!i||!ho.test(i)){if(r)return lo;u=Ho;continue}l+=i.toLowerCase(),u=Go;break;case Go:if(i&&(vo.test(i)||"+"==i||"-"==i||"."==i))l+=i.toLowerCase();else{if(":"!=i){if(r)return lo;l="",u=Ho,c=0;continue}if(r&&(Lo(e)!=Object(m.i)(_o,l)||"file"==l&&(qo(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=l,r)return void(Lo(e)&&_o[e.scheme]==e.port&&(e.port=null));l="","file"==e.scheme?u=ns:Lo(e)&&n&&n.scheme==e.scheme?u=Yo:Lo(e)?u=Jo:"/"==a[c+1]?(u=Ko,c++):(e.cannotBeABaseURL=!0,e.path.push(""),u=us)}break;case Ho:if(!n||n.cannotBeABaseURL&&"#"!=i)return lo;if(n.cannotBeABaseURL&&"#"==i){e.scheme=n.scheme,e.path=n.path.slice(),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,u=ls;break}u="file"==n.scheme?ns:Qo;continue;case Yo:if("/"!=i||"/"!=a[c+1]){u=Qo;continue}u=$o,c++;break;case Ko:if("/"==i){u=Zo;break}u=ss;continue;case Qo:if(e.scheme=n.scheme,i==Ji)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query;else if("/"==i||"\\"==i&&Lo(e))u=Xo;else if("?"==i)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query="",u=cs;else{if("#"!=i){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.path.pop(),u=ss;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query,e.fragment="",u=ls}break;case Xo:if(!Lo(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,u=ss;continue}u=Zo}else u=$o;break;case Jo:if(u=$o,"/"!=i||"/"!=l.charAt(c+1))continue;c++;break;case $o:if("/"==i||"\\"==i)break;u=Zo;continue;case Zo:if("@"==i){f&&(l="%40"+l),f=!0,o=gr(l);for(var d=0;d<o.length;d++){var v,y=o[d];":"!=y||h?(v=Ro(y,Po),h?e.password+=v:e.username+=v):h=!0}l=""}else if(i==Ji||"/"==i||"?"==i||"#"==i||"\\"==i&&Lo(e)){if(f&&""==l)return co;c-=gr(l).length+1,l="",u=es}else l+=i;break;case es:case ts:if(r&&"file"==e.scheme){u=is;continue}if(":"!=i||p){if(i==Ji||"/"==i||"?"==i||"#"==i||"\\"==i&&Lo(e)){if(Lo(e)&&""==l)return fo;if(r&&""==l&&(qo(e)||null!==e.port))return;if(s=Io(e,l))return s;if(l="",u=os,r)return;continue}"["==i?p=!0:"]"==i&&(p=!1),l+=i}else{if(""==l)return fo;if(s=Io(e,l))return s;if(l="",u=rs,r==ts)return}break;case rs:if(!yo.test(i)){if(i==Ji||"/"==i||"?"==i||"#"==i||"\\"==i&&Lo(e)||r){if(""!=l){var b=parseInt(l,10);if(65535<b)return po;e.port=Lo(e)&&b===_o[e.scheme]?null:b,l=""}if(r)return;u=os;continue}return po}l+=i;break;case ns:if(e.scheme="file","/"==i||"\\"==i)u=as;else{if(!n||"file"!=n.scheme){u=ss;continue}if(i==Ji)e.host=n.host,e.path=n.path.slice(),e.query=n.query;else if("?"==i)e.host=n.host,e.path=n.path.slice(),e.query="",u=cs;else{if("#"!=i){zo(a.slice(c).join(""))||(e.host=n.host,e.path=n.path.slice(),Bo(e)),u=ss;continue}e.host=n.host,e.path=n.path.slice(),e.query=n.query,e.fragment="",u=ls}}break;case as:if("/"==i||"\\"==i){u=is;break}n&&"file"==n.scheme&&!zo(a.slice(c).join(""))&&(Mo(n.path[0],!0)?e.path.push(n.path[0]):e.host=n.host),u=ss;continue;case is:if(i==Ji||"/"==i||"\\"==i||"?"==i||"#"==i){if(!r&&Mo(l))u=ss;else if(""==l){if(e.host="",r)return;u=os}else{if(s=Io(e,l))return s;if("localhost"==e.host&&(e.host=""),r)return;l="",u=os}continue}l+=i;break;case os:if(Lo(e)){if(u=ss,"/"!=i&&"\\"!=i)continue}else if(r||"?"!=i)if(r||"#"!=i){if(i!=Ji&&(u=ss,"/"!=i))continue}else e.fragment="",u=ls;else e.query="",u=cs;break;case ss:if(i==Ji||"/"==i||"\\"==i&&Lo(e)||!r&&("?"==i||"#"==i)){if(Vo(l)?(Bo(e),"/"==i||"\\"==i&&Lo(e)||e.path.push("")):No(l)?"/"==i||"\\"==i&&Lo(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Mo(l)&&(e.host&&(e.host=""),l=l.charAt(0)+":"),e.path.push(l)),l="","file"==e.scheme&&(i==Ji||"?"==i||"#"==i))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==i?(e.query="",u=cs):"#"==i&&(e.fragment="",u=ls)}else l+=Ro(i,Ao);break;case us:"?"==i?(e.query="",u=cs):"#"==i?(e.fragment="",u=ls):i!=Ji&&(e.path[0]+=Ro(i,Co));break;case cs:r||"#"!=i?i!=Ji&&("'"==i&&Lo(e)?e.query+="%27":e.query+="#"==i?"%23":Ro(i,Co)):(e.fragment="",u=ls);break;case ls:i!=Ji&&(e.fragment+=Ro(i,Eo))}c++}},ps=function(e){var t,r,n=Object(m.D)(this,ps,"URL"),a=1<arguments.length?arguments[1]:void 0,i=String(e),o=io(n,{type:"URL"});if(void 0!==a)if(a instanceof ps)t=oo(a);else if(r=fs(t={},String(a)))throw TypeError(r);if(r=fs(o,i,null,t))throw TypeError(r);var s=o.searchParams=new no,u=ao(s);u.updateSearchParams(o.query),u.updateURL=function(){o.query=String(s)||null},m.hb||(n.href=ds.call(n),n.origin=vs.call(n),n.protocol=ys.call(n),n.username=bs.call(n),n.password=gs.call(n),n.host=ks.call(n),n.hostname=ms.call(n),n.port=Ts.call(n),n.pathname=Os.call(n),n.search=ws.call(n),n.searchParams=Ss.call(n),n.hash=Is.call(n))},hs=ps.prototype,ds=function(){var e=oo(this),t=e.scheme,r=e.username,n=e.password,a=e.host,i=e.port,o=e.path,s=e.query,u=e.fragment,c=t+":";return null!==a?(c+="//",qo(e)&&(c+=r+(n?":"+n:"")+"@"),c+=Do(a),null!==i&&(c+=":"+i)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},vs=function(){var e=oo(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Lo(e)?t+"://"+Do(e.host)+(null!==r?":"+r:""):"null"},ys=function(){return oo(this).scheme+":"},bs=function(){return oo(this).username},gs=function(){return oo(this).password},ks=function(){var e=oo(this),t=e.host,r=e.port;return null===t?"":null===r?Do(t):Do(t)+":"+r},ms=function(){var e=oo(this).host;return null===e?"":Do(e)},Ts=function(){var e=oo(this).port;return null===e?"":String(e)},Os=function(){var e=oo(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},ws=function(){var e=oo(this).query;return e?"?"+e:""},Ss=function(){return oo(this).searchParams},Is=function(){var e=oo(this).fragment;return e?"#"+e:""},js=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};m.hb&&Object(m.jb)(hs,{href:js(ds,function(e){var t=oo(this),r=String(e),n=fs(t,r);if(n)throw TypeError(n);ao(t.searchParams).updateSearchParams(t.query)}),origin:js(vs),protocol:js(ys,function(e){var t=oo(this);fs(t,String(e)+":",Wo)}),username:js(bs,function(e){var t=oo(this),r=gr(String(e));if(!Fo(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=Ro(r[n],Po)}}),password:js(gs,function(e){var t=oo(this),r=gr(String(e));if(!Fo(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=Ro(r[n],Po)}}),host:js(ks,function(e){var t=oo(this);t.cannotBeABaseURL||fs(t,String(e),es)}),hostname:js(ms,function(e){var t=oo(this);t.cannotBeABaseURL||fs(t,String(e),ts)}),port:js(Ts,function(e){var t=oo(this);Fo(t)||(""==(e=String(e))?t.port=null:fs(t,e,rs))}),pathname:js(Os,function(e){var t=oo(this);t.cannotBeABaseURL||(t.path=[],fs(t,e+"",os))}),search:js(ws,function(e){var t=oo(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",fs(t,e,cs)),ao(t.searchParams).updateSearchParams(t.query)}),searchParams:js(Ss),hash:js(Is,function(e){var t=oo(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",fs(t,e,ls)):t.fragment=null})}),Object(m.p)(hs,"toJSON",function(){return ds.call(this)},{enumerable:!0}),Object(m.p)(hs,"toString",function(){return ds.call(this)},{enumerable:!0}),ro&&($i=ro.createObjectURL,Zi=ro.revokeObjectURL,$i&&Object(m.p)(ps,"createObjectURL",function(e){return $i.apply(ro,arguments)}),Zi&&Object(m.p)(ps,"revokeObjectURL",function(e){return Zi.apply(ro,arguments)})),Object(m.r)(ps,"URL"),Object(m.B)({global:!0,forced:!si,sham:!m.hb},{URL:ps});var Us,xs,Ds=m.ib.URL;(xs=Us=Us||{}).INCREASE="increase",xs.REDUCE="reduce";var Cs=16e3,Es=2e3,As=function(){function e(){Vt(this,e),this.sleepTimeoutMap=new kn,this.retryCountMap=new kn}return On(e,[{key:"getUrlMapKey",value:function(e){var t=e.match(/^https?\:\/\/[^\/?#]*([^?#]*).*$/);return t&&t[1]?t[1]:e}},{key:"getSleepTimeout",value:function(e){return this.sleepTimeoutMap.get(e)}},{key:"getRetryCount",value:function(e){return this.retryCountMap.get(e)}},{key:"handleTooManyRequest",value:function(e){this.addRetryCount(e),this.setSleepTimeout(e,Us.INCREASE)}},{key:"handleNotTooManyRequest",value:function(e){this.clearRetryCount(e),this.setSleepTimeout(e,Us.REDUCE)}},{key:"setSleepTimeout",value:function(e,t){var r=this.sleepTimeoutMap.get(e),n=r||0;t===Us.INCREASE?n=r?Math.min(Cs,2*r):Es:t===Us.REDUCE&&(n=r&&Es<r?r/2:0),this.sleepTimeoutMap.set(e,n)}},{key:"clearRetryCount",value:function(e){this.retryCountMap.delete(e)}},{key:"addRetryCount",value:function(e){var t=this.retryCountMap.get(e),r=t?t+1:1;this.retryCountMap.set(e,r)}}]),e}();function Ps(t,e){var r,n=Ft(t);return _t&&(r=_t(t),e&&(r=Ye(r).call(r,function(e){return Ve(t,e).enumerable})),n.push.apply(n,r)),n}function Rs(t){for(var e=1;e<arguments.length;e++){var r,n,a=null!=arguments[e]?arguments[e]:{};e%2?Me(r=Ps(Object(a),!0)).call(r,function(e){Bt(t,e,a[e])}):Pe?Ue(t,Pe(a)):Me(n=Ps(Object(a))).call(n,function(e){je(t,e,Ve(a,e))})}return t}As.MAX_RETRY_COUNT=20;se.a.CancelToken;function _s(e){var t=document.cookie.match(new RegExp("(?:^|;)\\s*".concat(e,"=([^;]+)")));return window.decodeURIComponent(t?t[1]:"")}function Ls(e){try{var t=new Ds(e).hostname.split(".")[0];return ii(t).call(t,"internal-")?t:"Unknown"}catch(e){return"Unknown"}}var qs,Fs,Ms,zs=function(){function t(e){Vt(this,t),this.nearbyDriveAPIHostLoginRequired=!1,this.timeout=6e5,this.backoffController=new As,this.axiosInstance=e.envConfigs.customRequest||se.a.create({}),this.initEnvConfigs(e.envConfigs,e.featureFlags)}function e(e){return r.apply(this,arguments)}var r,n,a,i;function o(){return n.apply(this,arguments)}function s(e,t){return a.apply(this,arguments)}function u(e){return i.apply(this,arguments)}return On(t,[{key:"post",value:function(e,t,r){return this.internalPost(e,t,r)}},{key:"postUrlEncoded",value:function(e,t,r){return this.internalPost(e,ce.a.stringify(t),Rs({},r,{headers:Rs({"Content-Type":"application/x-www-form-urlencoded"},r?r.headers:null)}))}},{key:"postFormData",value:function(e,t,r){return this.internalPost(e,t,Rs({},r,{headers:Rs({"Content-Type":"multipart/form-data"},r?r.headers:null)}))}},{key:"importRequest",value:(i=O(C.mark(function e(t){var r,n,a,i,o,s,u,c;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axiosInstance(Rs({},t,{withCredentials:!0,timeout:this.timeout,ignoreInterceptors:!0}));case 3:return r=e.sent,n=r.data,a=r.headers,i=r.request,e.abrupt("return",{data:n,reqID:a["x-request-id"],subdomain:Ls(i.responseURL)});case 8:if(e.prev=8,e.t0=e.catch(0),se.a.isCancel(e.t0))throw new Error("Cancelled");e.next=12;break;case 12:if(e.t0.response){e.next=14;break}throw new Error("Network Error");case 14:throw o=e.t0.response,s=o.data,u=o.headers,c=o.request,{data:s,reqID:u["x-request-id"],subdomain:Ls(c.responseURL)};case 16:case"end":return e.stop()}},e,this,[[0,8]])})),u)},{key:"importPostFormData",value:function(e,t,r){return this.importRequest(Rs({},r,{url:e,data:t,method:"post",headers:Rs({"Content-Type":"multipart/form-data"},r?r.headers:null)}))}},{key:"importGet",value:function(e,t,r){return this.importRequest(Rs({},r,{url:e,params:t,method:"get"}))}},{key:"getXCommand",value:function(e){return e.replace(/(?:^.*\/\/[^\/]+\/)|(?:\/*(?:\?.*)?$)/g,"").replace(/\//g,".")}},{key:"initEnvConfigs",value:(a=O(C.mark(function e(t,r){var n,a,i,o,s;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Boolean(r&&r.nearbyDriveAPIAccess),t.isLocalhost)return this.defaultSpaceAPIOrigin=window.location.origin,this.defaultDriveAPIOrigin=window.location.origin,n&&(this.defaultNearbyDriveAPIOrigin=window.location.origin),e.abrupt("return");e.next=6;break;case 6:if(a=Object(re.default)(t,"spaceAPIHosts[0]")){e.next=9;break}throw new Error("spaceAPIHosts not provided");case 9:if(this.defaultSpaceAPIOrigin="https://".concat(a),i=Object(re.default)(t,"driveAPIHosts[0]",""),o=Object(re.default)(t,"nearbyDriveAPIHosts[0]",""),!i||n&&!o){e.next=16;break}this.envConfigs=t,e.next=20;break;case 16:return e.next=18,this.fetchEnvConfigs();case 18:s=e.sent,this.envConfigs=Rs({},s,{},t);case 20:this.defaultDriveAPIOrigin="https://".concat(Object(re.default)(this.envConfigs,"driveAPIHosts[0]","")),n&&(this.defaultNearbyDriveAPIOrigin="https://".concat(Object(re.default)(this.envConfigs,"nearbyDriveAPIHosts[0]","")));case 22:case"end":return e.stop()}},e,this)})),s)},{key:"fetchEnvConfigs",value:(n=O(C.mark(function e(){return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}},e)})),o)},{key:"request",value:(r=O(C.mark(function e(t){var r,n,a,i,o,s,u,c,l,f,p,h;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.backoffController.getUrlMapKey(t.url),e.prev=1,n=this.backoffController.getSleepTimeout(r))return e.next=6,Va(n);e.next=6;break;case 6:return e.next=8,this.axiosInstance(Rs({},t,{withCredentials:!0,timeout:this.timeout,ignoreInterceptors:!0,headers:Rs({},t.headers,{"X-Request-Id":En(32),"X-CSRFToken":_s("_csrf_token")||"","X-Command":this.getXCommand(t.url||"")})}));case 8:if(a=e.sent,i=a.data,o=a.headers,s=a.request,0!==i.code)throw{response:a};e.next=12;break;case 12:return this.backoffController.handleNotTooManyRequest(r),e.abrupt("return",{data:i.data,reqID:o["x-request-id"],subdomain:Ls(s.responseURL)});case 16:if(e.prev=16,e.t0=e.catch(1),se.a.isCancel(e.t0))throw new Error("Cancelled");e.next=20;break;case 20:if(e.t0.response){e.next=22;break}throw new Error("Network Error");case 22:if(401===e.t0.response.status&&this.defaultDriveAPIOrigin&&this.shouldUseNearbyDriveAPI&&ei(u=t.url).call(u,this.defaultNearbyDriveAPIOrigin))return this.nearbyDriveAPIHostLoginRequired=!0,t.url=t.url.replace("https://".concat(this.defaultNearbyDriveAPIOrigin),this.defaultDriveAPIOrigin),e.abrupt("return",this.request(t));e.next=27;break;case 27:if(429!==e.t0.response.status){e.next=33;break}if((c=this.backoffController.getRetryCount(r))&&c>=As.MAX_RETRY_COUNT)throw e.t0.response.data;e.next=31;break;case 31:return this.backoffController.handleTooManyRequest(r),e.abrupt("return",this.request(t));case 33:throw this.backoffController.handleNotTooManyRequest(r),l=e.t0.response,f=l.data,p=l.headers,h=l.request,{data:f,reqID:p["x-request-id"],subdomain:Ls(h.responseURL)};case 36:case"end":return e.stop()}},e,this,[[1,16]])})),e)},{key:"internalPost",value:function(e,t,r){return this.request(Rs({},r,{url:e,data:t,method:"post"}))}},{key:"shouldUseNearbyDriveAPI",get:function(){return!this.nearbyDriveAPIHostLoginRequired&&this.defaultNearbyDriveAPIOrigin}},{key:"driveAPIOrigin",get:function(){return this.shouldUseNearbyDriveAPI?this.defaultNearbyDriveAPIOrigin:this.defaultDriveAPIOrigin}},{key:"spaceAPIOrigin",get:function(){return this.defaultSpaceAPIOrigin}}]),t}();(Ms=Fs=Fs||{}).manager="manager",Ms.member="member",Ms.visitor="visitor";var Bs=(Bt(qs={},Fs.manager,1),Bt(qs,Fs.member,2),Bt(qs,Fs.visitor,3),qs),Ns={PREPARE:"box/upload/prepare",MERGE_BLOCK:"box/stream/upload/merge_block",FINISH:"box/upload/finish",CREATE:"explorer/create",CREATE_FOLDER:"explorer/create/folder",CREATE_FOLDER_V2:"explorer/v2/create/folder",PARSER_UPLOAD:"parser/uploadfile",PARSER_RESULT:"parser/getresult",IMPORT_PARSER_EVERNOTE:"parser/wiki/parse_evernote_from_drive",PARSER_EVERNOTE_RESULT:"parser/wiki/getresult"},Vs=Ba(Bs),Ws=function(){function n(e){Vt(this,n);var t=e.envConfigs,r=e.featureFlags;this.envConfigs=t,this.request=new zs({envConfigs:t,featureFlags:r})}function e(e){return t.apply(this,arguments)}var t,r,a,i,o,s,u,c,l,f;function p(e){return r.apply(this,arguments)}function h(e){return a.apply(this,arguments)}function d(e){return i.apply(this,arguments)}function v(e){return o.apply(this,arguments)}function y(e){return s.apply(this,arguments)}function b(e){return u.apply(this,arguments)}function g(e){return c.apply(this,arguments)}function k(e){return l.apply(this,arguments)}function m(e){return f.apply(this,arguments)}return On(n,[{key:"getURL",value:function(e,t){var r,n=t?this.request.driveAPIOrigin:this.request.spaceAPIOrigin;return Ar(r="".concat(n,"/space/api/")).call(r,e,"/")}},{key:"createDirectory",value:function(e){switch(e.directoryType){case T.V3Folder:return this.createV3Folder(e);case T.NewSharedFolder:return this.createNewSharedFolderDirectory(e);case T.Normal:default:return this.createNormalDirectory(e)}}},{key:"createV3Folder",value:(f=O(C.mark(function e(t){var r,n,a;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.post(this.getURL(Ns.CREATE_FOLDER_V2),Na({parent_token:t.parentToken,name:t.name}),{headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,n=r.data,a=r.reqID,e.abrupt("return",{reqID:a,token:n.token});case 6:case"end":return e.stop()}},e,this)})),m)},{key:"createNewSharedFolderDirectory",value:(l=O(C.mark(function e(t){var r,n,a;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.post(this.getURL(Ns.CREATE_FOLDER),Na({parent_token:t.parentToken,name:t.name,inherit:Vs}),{headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,n=r.data,a=r.reqID,e.abrupt("return",{reqID:a,token:n.token});case 6:case"end":return e.stop()}},e,this)})),k)},{key:"createNormalDirectory",value:(c=O(C.mark(function e(t){var r,n,a;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.postUrlEncoded(this.getURL(Ns.CREATE),Na({parent_token:t.parentToken,name:t.name,type:0}));case 2:return r=e.sent,n=r.data,a=r.reqID,e.abrupt("return",{reqID:a,token:n.token});case 6:case"end":return e.stop()}},e,this)})),g)},{key:"prepareFile",value:(u=O(C.mark(function e(t){var r,n,a;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.post(this.getURL(Ns.PREPARE),Na({mount_point:t.mountPoint,mount_node_token:t.mountNodeToken,name:t.name,size:t.size,file_token:t.fileToken}));case 2:return r=e.sent,n=r.data,a=r.reqID,e.abrupt("return",{reqID:a,chunkSize:n.block_size,totalChunks:n.num_blocks,uploadID:n.upload_id,suggestedChunkSize:n.option_block_size});case 6:case"end":return e.stop()}},e,this)})),b)},{key:"uploadChunk",value:(s=O(C.mark(function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.seqList,n=t.checksums,a=t.chunkSize,i=t.uploadID,o=t.sliceData,s=t.onUploadProgress,u=t.cancelToken,c={"Content-Type":"application/octet-stream","x-seq-list":r.join(),"x-block-list-checksum":n.join(),"x-block-origin-size":a},l={upload_id:i},e.next=5,this.request.post(this.uploadChunkURL,o,{headers:c,params:l,cancelToken:u,onUploadProgress:s});case 5:return f=e.sent,p=f.data,h=f.reqID,d=f.subdomain,e.abrupt("return",{reqID:h,subdomain:d,successSeqList:p.success_seq_list});case 10:case"end":return e.stop()}},e,this)})),y)},{key:"finishFile",value:(o=O(C.mark(function e(t){var r,n,a;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.post(this.getURL(Ns.FINISH),Na({upload_id:t.uploadID,num_blocks:t.totalChunks,member_id:t.memberID,push_open_history_record:t.shouldAddToRecents?1:0}));case 2:return r=e.sent,n=r.data,a=r.reqID,e.abrupt("return",{reqID:a,fileToken:n.file_token,version:n.version,dataVersion:n.data_version,nodeToken:Object(re.default)(n,"extra.node_token")});case 6:case"end":return e.stop()}},e,this)})),v)},{key:"importUpload",value:(i=O(C.mark(function e(t){var r,n,a,i;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("name",t.name),r.append("type",t.type),r.append("size",String(t.size)),r.append("parent_token",t.parentToken),r.append("file",t.file),r.append("source",this.envConfigs.source||""),e.next=9,this.request.importPostFormData(this.getURL(Ns.PARSER_UPLOAD),r,{cancelToken:t.cancelToken,onUploadProgress:t.onUploadProgress});case 9:return n=e.sent,a=n.data,i=n.reqID,e.abrupt("return",{reqID:i,code:a.code,ticket:a.ticket});case 13:case"end":return e.stop()}},e,this)})),d)},{key:"importStatusCheck",value:(a=O(C.mark(function e(t){var r,n,a;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.importGet(this.getURL(Ns.PARSER_RESULT),{ticket:t.ticket,source:this.envConfigs.source});case 2:return r=e.sent,n=r.data,a=r.reqID,e.abrupt("return",{reqID:a,code:n.code,fileToken:Object(re.default)(n,"tokens[0]"),warningCode:n.warningCode,responseData:n});case 6:case"end":return e.stop()}},e,this)})),h)},{key:"importParseEvernote",value:(r=O(C.mark(function e(t){var r,n,a,i,o;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request.post(this.getURL(Ns.IMPORT_PARSER_EVERNOTE),{file_token:t.fileToken},{cancelToken:t.cancelToken});case 3:return r=e.sent,n=r.data,a=r.reqID,e.abrupt("return",{reqID:a,ticket:n.ticket});case 9:if(e.prev=9,e.t0=e.catch(0),i=e.t0.data,o=e.t0.reqID,i)return e.abrupt("return",{reqID:o,ticket:i.ticket});e.next=14;break;case 14:throw e.t0;case 15:case"end":return e.stop()}},e,this,[[0,9]])})),p)},{key:"importEvernoteStatusCheck",value:(t=O(C.mark(function e(t){var r,n,a;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.importGet(this.getURL(Ns.PARSER_EVERNOTE_RESULT),{ticket:t.ticket,source:this.envConfigs.source});case 2:return r=e.sent,n=r.data,a=r.reqID,e.abrupt("return",{reqID:a,code:n.code,fileToken:Object(re.default)(n,"tokens[0]"),warningCode:n.warningCode,responseData:n});case 6:case"end":return e.stop()}},e,this)})),e)},{key:"uploadChunkURL",get:function(){return this.getURL(Ns.MERGE_BLOCK,!0)}}]),n}();function Gs(t,e){var r,n=Ft(t);return _t&&(r=_t(t),e&&(r=Ye(r).call(r,function(e){return Ve(t,e).enumerable})),n.push.apply(n,r)),n}function Hs(t){for(var e=1;e<arguments.length;e++){var r,n,a=null!=arguments[e]?arguments[e]:{};e%2?Me(r=Gs(Object(a),!0)).call(r,function(e){Bt(t,e,a[e])}):Pe?Ue(t,Pe(a)):Me(n=Gs(Object(a))).call(n,function(e){je(t,e,Ve(a,e))})}return t}var Ys="08a441",Ks="42b91e";function Qs(e){return de()(Ys+fe()(e+Ks)).toString()}var Xs=function(){function n(e){var t=e.scenario,r=e.driveSDKAppID;Vt(this,n),this.pendingEvents=[],this.isUnavailable=!1,this.driveSDKAppID=r,this.scenario=t}return On(n,[{key:"kickOff",value:function(e){var t,r=this,n=e.appID,a=e.channelDomain,i=e.instanceName,o=e.isOnlineEnv,s=e.userID,u=e.tenantID;this.instanceName=i,this.tenantID=Object(L.a)(u)?Qs(u):u,this.tracker=new pe.a(this.instanceName),this.tracker.init({channel_domain:a,app_id:n,log:!1,disable_session:!0,disable_sdk_monitor:!0}),this.tracker.config({_staging_flag:o?0:1,user_unique_id:s?Qs(s):"",disable_auto_pv:!0}),this.tracker.start(),this.isUnavailable=!1,0<this.pendingEvents.length&&(Me(t=this.pendingEvents).call(t,function(e){r.collectEvent(e.eventName,e.options)}),this.clearPendingEvents())}},{key:"clearPendingEvents",value:function(){this.pendingEvents=[]}},{key:"setIsUnavailable",value:function(){this.clearPendingEvents(),this.isUnavailable=!0}},{key:"collectEvent",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.isUnavailable)if(this.tracker)try{var r=Hs({},t,{instance:this.instanceName,tenant_id:this.tenantID,scenario:this.scenario,drive_sdk_app_id:this.driveSDKAppID});this.tracker(e,r)}catch(e){console.error("collect event error",e)}else this.pendingEvents.push({eventName:e,options:t})}},{key:"collectFileSuccessEvent",value:function(e){var t=e.mountType,r=e.size,n=e.duration,a=0<n?Math.round(r/n*1e3):0;this.collectEvent("dev_upload_file_success",{duration:n,size:r,speed:a,mount_type:t})}},{key:"collectFileErrorEvent",value:function(e){var t=e.mountType,r=e.size,n=e.reqID,a=e.errorType,i=e.errorMsg;this.collectEvent("dev_upload_file_error",{size:r,mount_type:t,request_id:n,error_type:a,error_msg:i})}},{key:"collectChunkSuccessEvent",value:function(e){var t=e.mountType,r=e.offset,n=e.size,a=e.duration,i=e.subdomain,o=0<a?Math.round(n/a*1e3):0;this.collectEvent("dev_upload_chunk_success",{offset:r,size:n,duration:a,speed:o,subdomain:i,mount_type:t})}},{key:"collectChunkErrorEvent",value:function(e){var t=e.mountType,r=e.offset,n=e.size,a=e.reqID,i=e.subdomain,o=e.errorType,s=e.errorMsg;this.collectEvent("dev_upload_chunk_error",{offset:r,size:n,subdomain:i,mount_type:t,request_id:a,error_type:o,error_msg:s})}},{key:"collectCreateDirectoryErrorEvent",value:function(e){var t=e.reqID,r=e.errorType,n=e.errorMsg;this.collectEvent("dev_upload_create_directory_error",{request_id:t,error_type:r,error_msg:n})}}]),n}(),Js=3,$s="Create directory task not found";function Zs(e){return"pending"===e||"creating"===e||"retrying"===e}function eu(e){return"pending"===e||"paused"===e||"error"===e||"success"===e}var tu=function(){function a(e){var t=e.requestService,r=e.onStatusChanged,n=e.logger;Vt(this,a),this.createDirectoryTaskMap=new kn,this.requestService=t,this.onStatusChanged=r,this.logger=n}function e(e){return t.apply(this,arguments)}var t;return On(a,[{key:"startCreateDirectory",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.parentToken,a=e.name,i=e.directoryType,o=this.createDirectoryTaskMap.get(t);o?eu(o.status)?"success"===o.status&&o.token?this.onCreateDirectorySuccess({uuid:t,parentUUID:o.parentUUID,token:o.token}):this.doCreateDirectory(t):console.warn("Cannot start a task that is already in progress."):(this.createDirectoryTaskMap.set(t,{uuid:t,parentUUID:r,parentToken:n,name:a,directoryType:i,status:"pending"}),this.doCreateDirectory(t))}},{key:"cancelCreateDirectory",value:function(e){var t=this.createDirectoryTaskMap.get(e);t?Zs(t.status)&&(t.status="paused"):console.warn($s)}},{key:"doCreateDirectory",value:(t=O(C.mark(function e(t){var r,n,a,i,o,s,u,c,l,f,p;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.createDirectoryTaskMap.get(t)){e.next=4;break}return console.warn($s),e.abrupt("return");case 4:return n=r.parentUUID,a=r.parentToken,i=r.name,o=r.retryCount,s=r.directoryType,r.status=o?"creating":"retrying",e.prev=6,e.next=9,this.requestService.createDirectory({name:i,parentToken:a,directoryType:s});case 9:u=e.sent,c=u.token,r.token=c,r.status="success",this.onCreateDirectorySuccess({uuid:t,parentUUID:n,token:c}),e.next=36;break;case 16:if(e.prev=16,e.t0=e.catch(6),e.t0){e.next=22;break}return r.status="error",this.onCreateDirectoryError({uuid:t,parentUUID:n,reqID:"",errorType:D.CreateDirectoryUnexpected}),e.abrupt("return");case 22:if(l=e.t0.reqID||"",f=e.t0.data?e.t0.data.code:e.t0.message,this.logger.collectCreateDirectoryErrorEvent({errorType:f,reqID:l}),!(o&&Js<=o)){e.next=30;break}r.status="error",this.onCreateDirectoryError({uuid:t,parentUUID:n,reqID:l,errorType:f}),e.next=36;break;case 30:return e.next=32,Va(1e3);case 32:p=o?o+1:1,r.retryCount=p,this.onCreateDirectoryRetry({uuid:t,parentUUID:n,reqID:l,errorType:f,retry:p}),this.doCreateDirectory(t);case 36:case"end":return e.stop()}},e,this,[[6,16]])})),e)},{key:"onCreateDirectoryRetry",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.retry,a=e.reqID,i=e.errorType;this.onStatusChanged({type:"retry",data:{uuid:t,parentUUID:r,retry:n,reqID:a,errorType:i}})}},{key:"onCreateDirectorySuccess",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.token;this.onStatusChanged({type:"success",data:{uuid:t,parentUUID:r,token:n}})}},{key:"onCreateDirectoryError",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.reqID,a=e.errorType;this.onStatusChanged({type:"error",data:{uuid:t,parentUUID:r,reqID:n,errorType:a}})}}]),a}();function ru(e){var t=String(e).split(".").pop();return t&&t!==e?t.toLowerCase():""}var nu=3e3,au=66,iu="Import task not found";function ou(e){switch(ru(e)){case"doc":case"docx":case"md":case"markdown":case"mark":case"txt":return u.Docs;case"xls":case"xlsx":case"csv":return u.Sheets;case"xmind":case"mm":case"opml":return u.Mindnotes;default:return}}function su(e,t){var r;return Ar(r="".concat(t?"WARNING-":"ERROR-")).call(r,e)}function uu(e){return"pending"===e||"paused"===e||"error"===e||"success"===e}function cu(e){return"pending"===e||"uploading"===e||"converting"===e}var lu=function(){function a(e){var t=e.requestService,r=e.onStatusChanged,n=e.onErrorAlert;Vt(this,a),this.importTaskMap=new kn,this.requestService=t,this.onStatusChanged=r,this.onErrorAlert=n}function e(e){return t.apply(this,arguments)}var t,r;function n(e){return r.apply(this,arguments)}return On(a,[{key:"startImport",value:function(e){var t,r,n,a=e.uuid,i=e.parentUUID,o=e.file,s=e.parentToken,u=this.importTaskMap.get(a);u?uu(u.status)?(t=u.ticket,r=u.token,n=u.suiteType,"success"===u.status&&n&&r?this.onImportSuccess({uuid:a,parentUUID:i,token:r,suiteType:n}):t?this.pollImportTaskTicketStatus(a):this.uploadImportTask(a)):console.warn("Cannot start a task that is already in progress."):(this.importTaskMap.set(a,{uuid:a,parentUUID:i,file:o,parentToken:s,status:"pending"}),this.uploadImportTask(a))}},{key:"cancelImport",value:function(e){var t,r,n=this.importTaskMap.get(e);n?cu(n.status)&&(n.status="paused",t=n.cancelUploadSource,r=n.pollTicketStatusTimer,t&&(t.cancel(),n.cancelUploadSource=void 0),r&&(window.clearTimeout(r),n.pollTicketStatusTimer=void 0)):console.warn(iu)}},{key:"cancelAllImports",value:function(){var e,r=this;Me(e=this.importTaskMap).call(e,function(e,t){cu(e.status)&&r.cancelImport(t)})}},{key:"uploadImportTask",value:(r=O(C.mark(function e(r){var t,n,a,i,o,s,u,c,l,f,p,h=this;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.importTaskMap.get(r)){e.next=4;break}return console.warn(iu),e.abrupt("return");case 4:return n=t.parentUUID,a=t.file,i=t.parentToken,o=a.size,e.prev=6,this.onImportUploading({uuid:r,parentUUID:n,bytesTransferred:0,bytesTotal:o}),s=se.a.CancelToken.source(),t.cancelUploadSource=s,t.status="uploading",e.next=13,this.requestService.importUpload({file:a,parentToken:i,name:a.name,type:a.type,size:o,cancelToken:s.token,onUploadProgress:function(e){var t=e.loaded;h.onImportUploading({uuid:r,parentUUID:n,bytesTransferred:Math.min(t,o),bytesTotal:o})}});case 13:if(u=e.sent,c=u.code,l=u.ticket,f=u.reqID,l){e.next=23;break}return p=su(c),t.status="error",this.onImportError({uuid:r,parentUUID:n,errorType:p,reqID:f}),this.onErrorAlert({uuid:r,parentUUID:n,errorType:p,name:a.name}),e.abrupt("return");case 23:t.ticket=l,this.pollImportTaskTicketStatus(r),e.next=37;break;case 27:if(e.prev=27,e.t0=e.catch(6),e.t0){e.next=33;break}return t.status="error",this.onImportError({uuid:r,parentUUID:n,reqID:"",errorType:D.ImportUnexpected}),e.abrupt("return");case 33:if("Cancelled"===e.t0.message)return e.abrupt("return");e.next=35;break;case 35:t.status="error",this.onImportError({uuid:r,parentUUID:n,errorType:e.t0.data?su(e.t0.data.code):e.t0.message,reqID:e.t0.reqID||""});case 37:return e.prev=37,t.cancelUploadSource=void 0,e.finish(37);case 40:case"end":return e.stop()}},e,this,[[6,27,37,40]])})),n)},{key:"pollImportTaskTicketStatus",value:(t=O(C.mark(function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b=this;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.importTaskMap.get(t)){e.next=4;break}return console.warn(iu),e.abrupt("return");case 4:if(n=r.parentUUID,a=r.file,i=r.ticket,o=r.pollTicketStatusCount,i){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,r.status="converting",this.onImportConverting({uuid:t,parentUUID:n,ticket:i}),e.next=12,this.requestService.importStatusCheck({ticket:i});case 12:if(s=e.sent,u=s.code,c=s.fileToken,l=s.warningCode,f=s.reqID,p=s.responseData,void 0!==u)return h=a.name,d=ou(h),0===u&&c&&d?(r.token=c,r.suiteType=d,r.status="success",this.onImportSuccess({uuid:t,parentUUID:n,token:c,suiteType:d}),!l&&Object(ne.default)(p.warningExtra)||(v=su(l,!0),this.onErrorAlert({uuid:t,name:h,errorType:v,responseData:p}))):(y=su(u),r.status="error",this.onImportError({uuid:t,parentUUID:n,errorType:y,reqID:f}),this.onErrorAlert({uuid:t,parentUUID:n,name:h,errorType:y,responseData:p})),e.abrupt("return");e.next=23;break;case 23:r.pollTicketStatusCount=o?o+1:1,r.pollTicketStatusCount<au?r.pollTicketStatusTimer=window.setTimeout(function(){b.pollImportTaskTicketStatus(t)},nu):(r.status="error",this.onImportError({uuid:t,parentUUID:n,reqID:f,errorType:su(D.ImportPollTooManyTimes)})),e.next=35;break;case 27:if(e.prev=27,e.t0=e.catch(7),e.t0){e.next=33;break}return r.status="error",this.onImportError({uuid:t,parentUUID:n,reqID:"",errorType:D.ImportUnexpected}),e.abrupt("return");case 33:r.status="error",this.onImportError({uuid:t,parentUUID:n,errorType:e.t0.data?su(e.t0.data.code):e.t0.message,reqID:e.t0.reqID||""});case 35:case"end":return e.stop()}},e,this,[[7,27]])})),e)},{key:"onImportUploading",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.bytesTransferred,a=e.bytesTotal,i=0===a?1:n/a;this.onStatusChanged({type:"uploading",data:{uuid:t,parentUUID:r,bytesTransferred:n,bytesTotal:a,progress:i}})}},{key:"onImportConverting",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.ticket;this.onStatusChanged({type:"converting",data:{uuid:t,parentUUID:r,ticket:n}})}},{key:"onImportSuccess",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.token,a=e.suiteType;this.onStatusChanged({type:"success",data:{uuid:t,parentUUID:r,token:n,suiteType:a}})}},{key:"onImportError",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.errorType,a=e.reqID;this.onStatusChanged({type:"error",data:{uuid:t,parentUUID:r,errorType:n,reqID:a}})}}]),a}(),fu=[].slice,pu={},hu=function(e,t,r){if(!(t in pu)){for(var n=[],a=0;a<t;a++)n[a]="a["+a+"]";pu[t]=Function("C,a","return new C("+n.join(",")+")")}return pu[t](e,r)},du=Function.bind||function(t){var r=Object(m.O)(this),n=fu.call(arguments,1),a=function(){var e=n.concat(fu.call(arguments));return this instanceof a?hu(r,e.length,e):r.apply(t,e)};return Object(m.ab)(r.prototype)&&(a.prototype=r.prototype),a};Object(m.B)({target:"Function",proto:!0},{bind:du});var vu=Object(m.V)("Function").bind,yu=Function.prototype,bu=function(e){var t=e.bind;return e===yu||e instanceof Function&&t===yu.bind?vu:t},gu=3e3,ku=66,mu="Import task not found",Tu="enex";function Ou(e,t){var r;return Ar(r="".concat(t?"WARNING-":"ERROR-")).call(r,e)}function wu(e){return"pending"===e||"paused"===e||"error"===e||"success"===e}function Su(e){return"pending"===e||"uploading"===e||"converting"===e}function Iu(e){return ru(e)!==Tu?void 0:u.Docs}function ju(e){if(vr(e))return e}var Uu=ju;function xu(e,t){if(wr(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=en(e);!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}}var Du=xu;function Cu(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var Eu=Cu;function Au(e,t){return Uu(e)||Du(e,t)||Eu()}var Pu=Au;function Ru(e){return Lu(new Uint8Array(e)).toString()}function _u(e){for(var t=new Uint8Array(e.length),r=0,n=e.length;r<n;r++)t[r]=255&e.charCodeAt(r);return t}function Lu(e){e="string"==typeof e?_u(e):e;for(var t=new Uint32Array([1,0,e.length,0,0,65521,5552,0]),r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6];0<a;){for(o=u<a?u:a,a-=o;n+=r+=e[i++],--o;);r%=s,n%=s}return(n<<16|r)>>>0}var qu=3,Fu="Upload task not found";function Mu(e){return"pending"===e||"uploading"===e}function zu(e){return"pending"===e||"paused"===e||"error"===e||"success"===e}function Bu(e){var t=e.file,r=e.prepareResult,n=e.chunkOffset,a=e.actualTotalChunks,i=0===t.size,o=!Object(ee.default)(n)&&!Object(ee.default)(a)&&a<=n;return r&&(i||o)}var Nu=function(){function r(e){var t=e.logger;Vt(this,r),this.logger=t}function e(e,t,r,n){return a.apply(this,arguments)}var a,t,n,i;function o(e){return t.apply(this,arguments)}function s(e){return n.apply(this,arguments)}function u(e){return i.apply(this,arguments)}return On(r,[{key:"startUpload",value:function(e){var t,r,n=e.uuid,a=e.parentUUID,i=this.getUploadTaskMap().get(n);i?zu(i.status)?(t=i.prepareResult,r=i.finishResult,"success"===i.status&&r?this.onUploadSuccess({uuid:n,parentUUID:a}):Bu(i)?this.finishFileTask(n):t?this.uploadChunkOfUploadTask(n):this.prepareUploadTask(n)):console.warn("Cannot start a task that is already in progress."):(this.setNewTask(e),this.prepareUploadTask(n))}},{key:"cancelUpload",value:function(e){var t,r=this.getUploadTaskMap().get(e);r?Mu(r.status)&&(r.status="paused",this.markDuration(r),(t=r.cancelUploadSource)&&(t.cancel(),r.cancelUploadSource=void 0)):console.warn(Fu)}},{key:"cancelAllUploads",value:function(){var e,r=this;Me(e=this.getUploadTaskMap()).call(e,function(e,t){Mu(e.status)&&r.cancelUpload(t)})}},{key:"prepareUploadTask",value:(i=O(C.mark(function e(t){var r,n,a,i,o,s,u;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getUploadTaskMap().get(t)){e.next=4;break}return console.warn(Fu),e.abrupt("return");case 4:return this.triggerUploadStart({task:r}),e.prev=5,e.next=8,this.prepareFile(r);case 8:n=e.sent,r.prepareResult=n,a=n.chunkSize,i=n.suggestedChunkSize,o=n.totalChunks,s=i/a,u=Math.ceil(o/s),r.actualTotalChunks=u,r.chunkOffset=0,r.chunkRetryCount=0,Bu(r)?this.finishFileTask(t):"paused"!==r.status&&this.uploadChunkOfUploadTask(t),e.next=25;break;case 19:if(e.prev=19,e.t0=e.catch(5),e.t0){e.next=24;break}return this.triggerUploadError({task:r,reqID:"",errorType:D.UploadUnexpected}),e.abrupt("return");case 24:this.triggerUploadError({task:r,reqID:e.t0.reqID||"",errorType:e.t0.data?e.t0.data.code||e.t0.data:e.t0.message});case 25:case"end":return e.stop()}},e,this,[[5,19]])})),u)},{key:"uploadChunkOfUploadTask",value:(n=O(C.mark(function e(r){var t,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b,g,k,m,T,O,w,S,I,j,U,x=this;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getUploadTaskMap().get(r)){e.next=4;break}return console.warn(Fu),e.abrupt("return");case 4:if(n=this.getMountType(t),a=t.parentUUID,i=t.file,o=t.prepareResult,s=t.chunkOffset,u=t.chunkRetryCount,c=t.actualTotalChunks,!o||Object(ee.default)(s)||Object(ee.default)(c)||Object(ee.default)(u))return console.error("Upload chunk for unprepared task is illegal."),e.abrupt("return");e.next=9;break;case 9:return l=0,e.prev=10,f=o.uploadID,p=o.suggestedChunkSize,h=o.chunkSize,d=p/h,v=s*p,y=Math.min(i.size,(s+1)*p),b=y-v,g=Math.ceil(b/h),k=s*d,m=Mn({length:g},function(e,t){return k+t}),e.next=21,this.getPendingSliceData(i,m,h,y);case 21:return T=e.sent,O=T.sliceData,w=T.checksums,l=O.size,this.triggerUploadStart({task:t}),S=Ta(),this.onUploadUploading({uuid:r,parentUUID:a,bytesTransferred:v,bytesTotal:i.size}),I=se.a.CancelToken.source(),t.cancelUploadSource=I,e.next=32,this.uploadChunk(t,{size:b,checksums:w,seqList:m,uploadID:f,chunkSize:h,sliceData:O,offset:s,onUploadProgress:function(e){var t=v+e.loaded;x.onUploadUploading({uuid:r,parentUUID:a,bytesTransferred:t,bytesTotal:i.size})},cancelToken:I.token});case 32:if((j=e.sent).successSeqList&&j.successSeqList.length===g){e.next=35;break}throw j;case 35:this.onUploadUploading({uuid:r,parentUUID:a,bytesTransferred:y,bytesTotal:i.size}),this.logger.collectChunkSuccessEvent({mountType:n,offset:s,size:l,duration:Ta()-S,subdomain:j.subdomain}),t.chunkOffset=s+1,t.chunkRetryCount=0,Bu(t)?this.finishFileTask(r):this.uploadChunkOfUploadTask(r),e.next=52;break;case 42:if(e.prev=42,e.t0=e.catch(10),e.t0){e.next=47;break}return this.triggerUploadError({task:t,reqID:"",errorType:D.UploadUnexpected}),e.abrupt("return");case 47:if("Cancelled"===e.t0.message)return e.abrupt("return");e.next=49;break;case 49:U=e.t0.successSeqList?"PartialFailure":e.t0.message||Object(re.default)(e.t0,"data.code","Unknown"),this.logger.collectChunkErrorEvent({errorType:U,mountType:n,offset:s,size:l,reqID:e.t0.reqID||"",subdomain:e.t0.subdomain||"Unknown"}),u<qu?(t.chunkRetryCount=u+1,this.uploadChunkOfUploadTask(r)):this.triggerUploadError({task:t,reqID:e.t0.reqID||"",errorType:D.UploadChunkRetryTooManyTimes});case 52:return e.prev=52,t.cancelUploadSource=void 0,e.finish(52);case 55:case"end":return e.stop()}},e,this,[[10,42,52,55]])})),s)},{key:"finishFileTask",value:(t=O(C.mark(function e(t){var r,n;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getUploadTaskMap().get(t)){e.next=4;break}return console.warn(Fu),e.abrupt("return");case 4:if(r.prepareResult){e.next=7;break}return e.abrupt("return");case 7:return this.triggerUploadStart({task:r}),e.prev=8,e.next=11,this.finishFile(r);case 11:n=e.sent,r.finishResult=n,this.triggerUploadSuccess({task:r}),e.next=22;break;case 16:if(e.prev=16,e.t0=e.catch(8),e.t0){e.next=21;break}return this.triggerUploadError({task:r,reqID:"",errorType:D.UploadUnexpected}),e.abrupt("return");case 21:this.triggerUploadError({task:r,reqID:e.t0.reqID||"",errorType:e.t0.data?e.t0.data.code:e.t0.message});case 22:case"end":return e.stop()}},e,this,[[8,16]])})),o)},{key:"getPendingSliceData",value:(a=O(C.mark(function e(a,t,r,n){var i,o,s,u,c,l,f;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.getByteRanges(t,r,n),o=X(i).call(i,function(e){var t=Pu(e,2),r=t[0],n=t[1];return sn(a).call(a,r,n)}),e.next=4,J.all(X(o).call(o,ta));case 4:return s=e.sent,e.next=7,J.all(X(s).call(s,Ru));case 7:if(u=e.sent,1===o.length)return e.abrupt("return",{checksums:u,sliceData:o[0]});e.next=10;break;case 10:return c=i[0][0],l=i[i.length-1][1],f=sn(a).call(a,c,l),e.abrupt("return",{checksums:u,sliceData:f});case 14:case"end":return e.stop()}},e,this)})),e)},{key:"getByteRanges",value:function(e,t,r){return X(e).call(e,function(e){return[e*t,Math.min(r,(e+1)*t)]})}},{key:"markDuration",value:function(e){var t,r=e.startTime,n=e.duration;r&&(t=Ta()-r,e.startTime=void 0,e.duration=(n||0)+t)}},{key:"triggerUploadStart",value:function(e){var t=e.task;t.startTime||(t.startTime=Ta()),t.status="uploading"}},{key:"triggerUploadSuccess",value:function(e){var t=e.task,r=t.uuid,n=t.parentUUID,a=t.file,i=this.getMountType(t);t.status="success",this.markDuration(t),this.onUploadSuccess({uuid:r,parentUUID:n}),t.duration?this.logger.collectFileSuccessEvent({mountType:i,size:a.size,duration:t.duration}):console.warn("Duration data is unavailable.")}},{key:"triggerUploadError",value:function(e){var t=e.task,r=e.errorType,n=e.reqID,a=t.uuid,i=t.parentUUID,o=t.file,s=this.getMountType(t);t.status="error",this.markDuration(t),this.onUploadError({uuid:a,parentUUID:i,reqID:n,errorType:r}),this.logger.collectFileErrorEvent({errorType:r,reqID:n,mountType:s,size:o.size})}}]),r}();function Vu(t,e){var r,n=Ft(t);return _t&&(r=_t(t),e&&(r=Ye(r).call(r,function(e){return Ve(t,e).enumerable})),n.push.apply(n,r)),n}function Wu(t){for(var e=1;e<arguments.length;e++){var r,n,a=null!=arguments[e]?arguments[e]:{};e%2?Me(r=Vu(Object(a),!0)).call(r,function(e){Bt(t,e,a[e])}):Pe?Ue(t,Pe(a)):Me(n=Vu(Object(a))).call(n,function(e){je(t,e,Ve(a,e))})}return t}var Gu=function(){function i(e){var t,r=e.requestService,n=e.onStatusChanged,a=e.logger;return Vt(this,i),(t=ar(this,ur(i).call(this,{logger:a}))).uploadTaskMap=new kn,t.requestService=r,t.onStatusChanged=n,t}function e(e){return t.apply(this,arguments)}var t,r,n;function a(e,t){return r.apply(this,arguments)}function o(e){return n.apply(this,arguments)}return hr(i,Nu),On(i,[{key:"getMountType",value:function(e){return e.mountPoint||""}},{key:"getUploadTaskMap",value:function(){return this.uploadTaskMap}},{key:"onUploadUploading",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.bytesTransferred,a=e.bytesTotal,i=0===a?1:n/a;this.onStatusChanged({type:"uploading",data:{uuid:t,parentUUID:r,bytesTransferred:n,bytesTotal:a,progress:i}})}},{key:"onUploadSuccess",value:function(e){var t,r,n,a=e.uuid,i=e.parentUUID,o=this.uploadTaskMap.get(a);!o||(t=o.finishResult)&&(r=t.fileToken,n=t.dataVersion,this.onStatusChanged({type:"success",data:{uuid:a,parentUUID:i,dataVersion:n,token:r}}))}},{key:"onUploadError",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.errorType,a=e.reqID;this.onStatusChanged({type:"error",data:{uuid:t,parentUUID:r,errorType:n,reqID:a}})}},{key:"setNewTask",value:function(e){this.uploadTaskMap.set(e.uuid,Wu({},e,{status:"pending"}))}},{key:"prepareFile",value:(n=O(C.mark(function e(t){var r,n,a,i,o;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.file,n=t.parentToken,a=t.mountPoint,i=t.fileToken,o={fileToken:i,name:r.name,size:r.size,mountNodeToken:n,mountPoint:a||"explorer"},e.abrupt("return",this.requestService.prepareFile(o));case 3:case"end":return e.stop()}},e,this)})),o)},{key:"uploadChunk",value:(r=O(C.mark(function e(t,r){return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.requestService.uploadChunk(r));case 1:case"end":return e.stop()}},e,this)})),a)},{key:"finishFile",value:(t=O(C.mark(function e(t){var r,n,a,i,o,s;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.prepareResult,n=t.memberID,a=t.shouldAddToRecents,i=r.totalChunks,o=r.uploadID,s={uploadID:o,totalChunks:i,memberID:n,shouldAddToRecents:a},e.abrupt("return",this.requestService.finishFile(s));case 4:case"end":return e.stop()}},e,this)})),e)}]),i}(),Hu=function(){function o(e){var t,r=e.logger,n=e.requestService,a=e.onStatusChanged,i=e.onErrorAlert;Vt(this,o),this.importTaskMap=new kn,this.requestService=n,this.onStatusChanged=a,this.onErrorAlert=i,this.uploaderController=new Gu({logger:r,requestService:this.requestService,onStatusChanged:bu(t=this.onUploadStatusChanged).call(t,this)})}function e(e){return t.apply(this,arguments)}var t,r,n;function a(e){return r.apply(this,arguments)}function i(e){return n.apply(this,arguments)}return On(o,[{key:"startImport",value:function(e){var t,r,n,a=e.uuid,i=e.parentUUID,o=e.file,s=e.parentToken,u=this.importTaskMap.get(a);u?wu(u.status)?(t=u.ticket,r=u.token,n=u.suiteType,"success"===u.status&&n&&r?this.onImportEnexSuccess({uuid:a,parentUUID:i,token:r,suiteType:n}):t?this.pollImportTaskTicketStatus(a):this.uploadImportTask(a)):console.warn("Cannot start a task that is already in progress."):(this.importTaskMap.set(a,{uuid:a,parentUUID:i,file:o,parentToken:s,status:"pending"}),this.uploadImportTask(a))}},{key:"cancelImport",value:function(e){var t,r,n=this.importTaskMap.get(e);n?Su(n.status)&&("pending"!==n.status&&"uploading"!==n.status||this.uploaderController.cancelUpload(n.uuid),n.status="paused",t=n.cancelUploadSource,r=n.pollTicketStatusTimer,t&&(t.cancel(),n.cancelUploadSource=void 0),r&&(window.clearTimeout(r),n.pollTicketStatusTimer=void 0)):console.warn(mu)}},{key:"cancelAllImports",value:function(){var e,r=this;Me(e=this.importTaskMap).call(e,function(e,t){Su(e.status)&&r.cancelImport(t)})}},{key:"uploadImportTask",value:(n=O(C.mark(function e(t){var r,n,a,i,o;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.importTaskMap.get(t)){e.next=4;break}return console.warn(mu),e.abrupt("return");case 4:n=r.parentUUID,a=r.file,i=r.parentToken,o=a.size,r.status="uploading",this.onImportEnexUploading({uuid:t,parentUUID:n,bytesTransferred:0,bytesTotal:o}),this.uploaderController.startUpload({uuid:t,file:a,parentUUID:n,parentToken:i});case 9:case"end":return e.stop()}},e,this)})),i)},{key:"parseFileTask",value:(r=O(C.mark(function e(t){var r,n,a,i,o,s,u,c;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.uuid,n=t.token,a=this.importTaskMap.get(r)){e.next=5;break}return console.warn(mu),e.abrupt("return");case 5:if(n){e.next=7;break}return e.abrupt("return");case 7:if("paused"===a.status)return e.abrupt("return");e.next=9;break;case 9:return i=se.a.CancelToken.source(),a.cancelUploadSource=i,a.status="converting",e.prev=12,e.next=15,this.requestService.importParseEvernote({fileToken:n,cancelToken:i.token});case 15:if(o=e.sent,s=o.ticket,u=o.reqID,s){e.next=23;break}return c=Ou(),a.status="error",this.onImportEnexError({uuid:r,errorType:c,reqID:u,parentUUID:""}),e.abrupt("return");case 23:a.ticket=s,this.pollImportTaskTicketStatus(r),e.next=35;break;case 27:if(e.prev=27,e.t0=e.catch(12),e.t0){e.next=33;break}return a.status="error",this.onImportEnexError({uuid:r,reqID:"",errorType:D.ImportUnexpected}),e.abrupt("return");case 33:a.status="error",this.onImportEnexError({uuid:r,reqID:e.t0.reqID||"",errorType:e.t0.data?e.t0.data.code:e.t0.message});case 35:return e.prev=35,a.cancelUploadSource=void 0,e.finish(35);case 38:case"end":return e.stop()}},e,this,[[12,27,35,38]])})),a)},{key:"pollImportTaskTicketStatus",value:(t=O(C.mark(function e(t){var r,n,a,i,o,s,u,c,l,f,p,h,d,v,y,b=this;return C.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.importTaskMap.get(t)){e.next=4;break}return console.warn(mu),e.abrupt("return");case 4:if(n=r.parentUUID,a=r.file,i=r.ticket,o=r.pollTicketStatusCount,i){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,r.status="converting",this.onImportEnexConverting({uuid:t,parentUUID:n,ticket:i}),e.next=12,this.requestService.importEvernoteStatusCheck({ticket:i});case 12:if(s=e.sent,u=s.code,c=s.fileToken,l=s.warningCode,f=s.reqID,p=s.responseData,void 0!==u)return h=a.name,d=Iu(h),0===u&&c&&d?(r.token=c,r.suiteType=d,r.status="success",this.onImportEnexSuccess({uuid:t,parentUUID:n,token:c,suiteType:d}),!l&&Object(ne.default)(p.warningExtra)||(v=Ou(l,!0),this.onErrorAlert({uuid:t,name:h,errorType:v,responseData:p}))):(y=Ou(u),r.status="error",this.onImportEnexError({uuid:t,parentUUID:n,errorType:y,reqID:f}),this.onErrorAlert({uuid:t,parentUUID:n,name:h,errorType:y,responseData:p})),e.abrupt("return");e.next=23;break;case 23:r.pollTicketStatusCount=o?o+1:1,r.pollTicketStatusCount<ku?r.pollTicketStatusTimer=window.setTimeout(function(){b.pollImportTaskTicketStatus(t)},gu):(r.status="error",this.onImportEnexError({uuid:t,parentUUID:n,reqID:f,errorType:Ou(D.ImportPollTooManyTimes)})),e.next=35;break;case 27:if(e.prev=27,e.t0=e.catch(7),e.t0){e.next=33;break}return r.status="error",this.onImportEnexError({uuid:t,parentUUID:n,reqID:"",errorType:D.ImportUnexpected}),e.abrupt("return");case 33:r.status="error",this.onImportEnexError({uuid:t,parentUUID:n,errorType:e.t0.data?Ou(e.t0.data.code):e.t0.message,reqID:e.t0.reqID||""});case 35:case"end":return e.stop()}},e,this,[[7,27]])})),e)},{key:"onUploadStatusChanged",value:function(e){var t=e.type,r=e.data;"success"!==t?"uploading"!==t?"error"===t&&this.onImportEnexError(r):this.onImportEnexUploading(r):this.parseFileTask(r)}},{key:"onImportEnexUploading",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.bytesTransferred,a=e.bytesTotal,i=0===a?1:n/a;this.onStatusChanged({type:"uploading",data:{uuid:t,parentUUID:r,bytesTransferred:n,bytesTotal:a,progress:i}})}},{key:"onImportEnexConverting",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.ticket;this.onStatusChanged({type:"converting",data:{uuid:t,parentUUID:r,ticket:n}})}},{key:"onImportEnexSuccess",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.token,a=e.suiteType;this.onStatusChanged({type:"success",data:{uuid:t,parentUUID:r,token:n,suiteType:a}})}},{key:"onImportEnexError",value:function(e){var t=e.uuid,r=e.parentUUID,n=e.errorType,a=e.reqID;this.onStatusChanged({type:"error",data:{uuid:t,parentUUID:r,errorType:n,reqID:a}})}}]),o}(),Yu=function(){function n(e){var t=e.requestService,r=e.logger;Vt(this,n),this.requestService=t,this.logger=r}return On(n,[{key:"init",value:function(e){var t=e.onUploadStatusChanged,r=e.onCreateDirectoryStatusChanged,n=e.onImportStatusChanged,a=e.onImportErrorAlert,i=this.requestService;this.uploadController=new Gu({logger:this.logger,requestService:i,onStatusChanged:t}),this.importController=new lu({logger:this.logger,requestService:i,onStatusChanged:n,onErrorAlert:a}),this.importEnexController=new Hu({logger:this.logger,requestService:i,onStatusChanged:n,onErrorAlert:a}),this.createDirectoryController=new tu({logger:this.logger,requestService:i,onStatusChanged:r})}},{key:"startUpload",value:function(e){this.uploadController&&this.uploadController.startUpload(e)}},{key:"cancelUpload",value:function(e){this.uploadController&&this.uploadController.cancelUpload(e)}},{key:"cancelAllUploads",value:function(){this.uploadController&&this.uploadController.cancelAllUploads()}},{key:"startCreateDirectory",value:function(e){this.createDirectoryController&&this.createDirectoryController.startCreateDirectory(e)}},{key:"cancelCreateDirectory",value:function(e){this.createDirectoryController&&this.createDirectoryController.cancelCreateDirectory(e)}},{key:"startImport",value:function(e){ru(e.file.name)===Tu?this.importEnexController&&this.importEnexController.startImport(e):this.importController&&this.importController.startImport(e)}},{key:"cancelImport",value:function(e){var t=e.uuid;ru(e.file.name)===Tu?this.importEnexController&&this.importEnexController.cancelImport(t):this.importController&&this.importController.cancelImport(t)}},{key:"cancelAllImports",value:function(){this.importController&&this.importController.cancelAllImports(),this.importEnexController&&this.importEnexController.cancelAllImports()}}]),n}();function Ku(t,e){var r,n=Ft(t);return _t&&(r=_t(t),e&&(r=Ye(r).call(r,function(e){return Ve(t,e).enumerable})),n.push.apply(n,r)),n}function Qu(t){for(var e=1;e<arguments.length;e++){var r,n,a=null!=arguments[e]?arguments[e]:{};e%2?Me(r=Ku(Object(a),!0)).call(r,function(e){Bt(t,e,a[e])}):Pe?Ue(t,Pe(a)):Me(n=Ku(Object(a))).call(n,function(e){je(t,e,Ve(a,e))})}return t}var Xu=function(){function i(e){Vt(this,i);var t=new Ws({envConfigs:e.envConfigs,featureFlags:e.featureFlags}),r={envConfigs:{spaceAPIHosts:[],source:""},featureFlags:{nearbyDriveAPIAccess:!1},maxSimultaneousUploads:1,fastModeEnabled:!1},n=new Xs({scenario:"suite"}),a=new Yu({requestService:t,logger:n});return ar(this,ur(i).call(this,Qu({},e,{defaults:r,logger:n,taskController:a,uploaderType:"suite"})))}return hr(i,qa),i}()}}]);
//# sourceMappingURL=commons--box-utils-upload-v2--box_right_bar--doc_uploader_delay--lark-upload-progress-viewer--nativ--93a0e733.1f88f3627ad90aeec9a7.js.map