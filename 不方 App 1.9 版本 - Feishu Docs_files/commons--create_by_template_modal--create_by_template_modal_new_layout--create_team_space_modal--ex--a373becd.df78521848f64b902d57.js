(this.webpackJsonp=this.webpackJsonp||[]).push([["commons--create_by_template_modal--create_by_template_modal_new_layout--create_team_space_modal--ex--a373becd"],{"/Rq9":function(t,Ct,bt){"use strict";(function(t){bt.d(Ct,"m",function(){return O}),bt.d(Ct,"n",function(){return P}),bt.d(Ct,"g",function(){return D}),bt.d(Ct,"k",function(){return m}),bt.d(Ct,"f",function(){return x}),bt.d(Ct,"j",function(){return M}),bt.d(Ct,"r",function(){return W}),bt.d(Ct,"e",function(){return Y}),bt.d(Ct,"o",function(){return q}),bt.d(Ct,"l",function(){return V}),bt.d(Ct,"x",function(){return z}),bt.d(Ct,"p",function(){return X}),bt.d(Ct,"c",function(){return Q}),bt.d(Ct,"t",function(){return $}),bt.d(Ct,"i",function(){return et}),bt.d(Ct,"b",function(){return rt}),bt.d(Ct,"w",function(){return at}),bt.d(Ct,"h",function(){return ot}),bt.d(Ct,"d",function(){return it}),bt.d(Ct,"q",function(){return ct}),bt.d(Ct,"s",function(){return pt}),bt.d(Ct,"a",function(){return ht}),bt.d(Ct,"u",function(){return ft}),bt.d(Ct,"v",function(){return vt});var e,n=bt("o0o1"),o=bt.n(n),r=bt("lSNA"),s=bt.n(r),a=bt("yXPU"),i=bt.n(a),u=bt("7EGn"),c=bt("/DSa"),l=bt("eoP6"),p=bt("vfWA"),d=bt("EyGs"),h=bt("rAc3"),f=bt("D7h9"),y=bt("IBHi"),v=bt("U6jp"),S=bt("nyid"),C=bt("f8Ac"),b=bt("hMnB"),N=bt.n(b),k=bt("+mgp"),T=bt("Z/YB"),E=6e4,_={},w=[];function O(t){return g.apply(this,arguments)}function g(){return(g=i()(o.a.mark(function t(e){var n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=_[e])return t.abrupt("return",n);t.next=3;break;case 3:return t.prev=3,t.next=6,c.b.getInstance().postMessage({type:c.c.LookupNativeApps,data:{ext:e}});case 6:if((r=t.sent)&&r.data)return _[e]=r.data,setTimeout(function(){_[e]=null},E),t.abrupt("return",r.data);t.next=11;break;case 11:return t.abrupt("return",[]);case 14:return t.prev=14,t.t0=t.catch(3),t.abrupt("return",[]);case 17:case"end":return t.stop()}},t,null,[[3,14]])}))).apply(this,arguments)}function P(t,e,n,r){return I.apply(this,arguments)}function I(){return(I=i()(o.a.mark(function t(e,n,r,s){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.b.getInstance().postMessage({type:c.c.OpenFileByNativeApp,data:{token:e,parentId:n,filename:r,appPath:s}});case 3:return a=t.sent,t.abrupt("return",a&&a.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",!1);case 10:case"end":return t.stop()}},t,null,[[0,7]])}))).apply(this,arguments)}var R=(e={},s()(e,l.k.NOT_READY,t("syncdisk.sync_to_local")),s()(e,l.k.NOT_SYNCED,t("syncdisk.sync_to_local")),s()(e,l.k.SYNCING,t("syncdisk.cancel_sync_to_local")),s()(e,l.k.SYNCED,t("syncdisk.cancel_sync_to_local")),s()(e,l.k.SYNC_PENDING,t("syncdisk.cancel_sync_to_local")),s()(e,l.k.SYNC_ERROR,t("syncdisk.cancel_sync_to_local")),s()(e,l.k.REMOVED,t("syncdisk.cancel_sync_to_local")),s()(e,l.k.OFFLINE,t("syncdisk.cancel_sync_to_local")),e),D=function(t){return R[t]};function m(){return L.apply(this,arguments)}function L(){return(L=i()(o.a.mark(function t(){var e,n,r,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e="",!v.r){t.next=6;break}(n=Object(S.g)(f.default.getState()))&&(e=n.shortVersioin),t.next=10;break;case 6:return t.next=8,c.b.getInstance().postMessage({type:c.c.GetSyncCoreVersionInfo});case 8:(r=t.sent)&&r.data&&(s=r.data,e="".concat(s.major,".").concat(s.minor,".").concat(s.patch));case 10:return t.abrupt("return",e);case 11:case"end":return t.stop()}},t)}))).apply(this,arguments)}function x(){return F.apply(this,arguments)}function F(){return(F=i()(o.a.mark(function t(){var e,n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(v.r)return e=Object(S.g)(f.default.getState()),n=l.b.UNKNOW,e&&(n=e.valid?l.b.INSTALLED:l.b.UNINSTALL),t.abrupt("return",n);t.next=7;break;case 7:return t.next=9,c.b.getInstance().postMessage({type:c.c.GetIsSyncdiskInstalled});case 9:if(r=t.sent)return t.abrupt("return",r.data);t.next=12;break;case 12:return t.abrupt("return",l.b.UNKNOW);case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}function M(){return U.apply(this,arguments)}function U(){return(U=i()(o.a.mark(function t(){var e,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(v.r)return e=Object(S.h)(f.default.getState()),t.abrupt("return",e);t.next=5;break;case 5:return t.next=7,c.b.getInstance().postMessage({type:c.c.GetSyncdiskStatus});case 7:if((n=t.sent)&&void 0!==n.data)return t.abrupt("return",n.data);t.next=10;break;case 10:return t.abrupt("return",l.j.UNKNOW);case 11:case"end":return t.stop()}},t)}))).apply(this,arguments)}function W(t,e,n){return j.apply(this,arguments)}function j(){return(j=i()(o.a.mark(function t(e,n,r){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:if(!t.sent){t.next=14;break}if(n===p.SyncOption.SYNC)return t.next=6,p.syncDiskConnection.setFolderSync(e,r);t.next=9;break;case 6:return t.abrupt("return",t.sent);case 9:return t.next=11,p.syncDiskConnection.cancelFolderSync(e);case 11:return t.abrupt("return",t.sent);case 12:t.next=24;break;case 14:return t.prev=14,t.next=17,c.b.getInstance().postMessage({type:c.c.SetFolderSync,data:{token:e,syncOption:n,spaceType:r}});case 17:return s=t.sent,t.abrupt("return",s.data);case 21:return t.prev=21,t.t0=t.catch(14),t.abrupt("return",Promise.reject({errCode:t.t0&&t.t0.errType}));case 24:case"end":return t.stop()}},t,null,[[14,21]])}))).apply(this,arguments)}function Y(t,e){return H.apply(this,arguments)}function H(){return(H=i()(o.a.mark(function t(e,n){var r,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:if(t.sent)return t.next=5,p.syncDiskConnection.getFolderSyncStatus(e,n);t.next=8;break;case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.next=11,c.b.getInstance().postMessage({type:c.c.GetFolderSyncStatus,data:{token:e,type:n}});case 11:return r=t.sent,(s=r.data).childrenStatus=s.childrenStatusList,s.token=Object(u.default)(s,"nodeStatus.token"),s.syncStatus=Object(u.default)(s,"nodeStatus.syncStatus"),t.abrupt("return",s);case 19:return t.prev=19,t.t0=t.catch(8),t.abrupt("return",Promise.reject({errCode:t.t0&&t.t0.errType}));case 22:case"end":return t.stop()}},t,null,[[8,19]])}))).apply(this,arguments)}function q(t,e){return K.apply(this,arguments)}function K(){return(K=i()(o.a.mark(function t(e,n){var r,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:if(t.sent)return t.next=5,p.syncDiskConnection.openFolder(e,n);t.next=8;break;case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.next=11,c.b.getInstance().postMessage({type:c.c.OpenLocalFolder,data:{token:n,type:e}});case 11:return r=t.sent,s=r&&r.data,t.abrupt("return",!!s);case 16:return t.prev=16,t.t0=t.catch(8),t.abrupt("return",Promise.reject({errCode:t.t0&&t.t0.errType}));case 19:case"end":return t.stop()}},t,null,[[8,16]])}))).apply(this,arguments)}var B,V=(B=null,i()(o.a.mark(function t(){var e,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(v.r)return t.abrupt("return",!0);t.next=2;break;case 2:if(null!==B)return t.abrupt("return",B);t.next=4;break;case 4:return t.next=6,m();case 6:if(e=t.sent,n=Object(d.a)(e,"0.10.0"),e){t.next=10;break}return t.abrupt("return",!1);case 10:return B=n,t.abrupt("return",n);case 12:case"end":return t.stop()}},t)})));function z(){return J.apply(this,arguments)}function J(){return(J=i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:if(t.sent)return t.next=5,p.syncDiskConnection.waitForLaunch();t.next=8;break;case 5:return t.abrupt("return",t.sent);case 8:return t.next=10,M();case 10:if(t.sent===l.j.READY)return t.abrupt("return",!0);t.next=15;break;case 15:return t.next=17,new Promise(function(e){w.push(function(t){e(t)})});case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}},t)}))).apply(this,arguments)}function X(e){w.forEach(function(t){t(e)}),w.splice(0)}function Q(){return Z.apply(this,arguments)}function Z(){return(Z=i()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(v.r)return t.abrupt("return",!1);t.next=2;break;case 2:return t.next=4,c.b.getInstance().postMessage({type:c.c.CheckSyncDiskUpdate});case 4:return e=t.sent,t.abrupt("return",e&&0===e.data);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function $(){return tt.apply(this,arguments)}function tt(){return(tt=i()(o.a.mark(function t(){var e,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(v.r)return Object(v.u)("syncdisk startSyncDisk"),t.next=4,y.b.getInstance().startSyncDisk();t.next=8;break;case 4:return e=t.sent,t.abrupt("return",e&&e.state===l.i.RUNNING);case 8:return t.next=10,c.b.getInstance().postMessage({type:c.c.StartupSyncDisk});case 10:return n=t.sent,t.abrupt("return",n&&n.data);case 12:case"end":return t.stop()}},t)}))).apply(this,arguments)}function et(){return nt.apply(this,arguments)}function nt(){return(nt=i()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.b.getInstance().postMessage({type:c.c.GetSyncDiskOnboardingState});case 2:return e=t.sent,t.abrupt("return",e&&e.data);case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function rt(){return st.apply(this,arguments)}function st(){return(st=i()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.b.getInstance().postMessage({type:c.c.CancelSyncDiskOnboarding});case 2:return e=t.sent,t.abrupt("return",e&&e.data);case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function at(t){try{return localStorage.setItem(l.c.ONBOARDING_TYPE,t.toString()),!0}catch(t){}return!1}function ot(){var t=localStorage.getItem(l.c.ONBOARDING_TYPE);return null===t?null:Number(t)}function it(){return ut.apply(this,arguments)}function ut(){return(ut=i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.syncDiskConnection.getFileCachePathInfo();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}function ct(t){return lt.apply(this,arguments)}function lt(){return(lt=i()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.syncDiskConnection.setFileCachePath(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}function pt(){return dt.apply(this,arguments)}function dt(){return(dt=i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.syncDiskConnection.startMoveFileCache();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}function ht(t){return Object(h.j)(t)?{module:"teamspace",spaceType:l.h.TEAM_SPACE}:Object(h.h)(t)?{module:"sharespace",spaceType:l.h.SHARED_SPACE}:{module:"myspace",spaceType:l.h.MY_SPACE}}function ft(){return yt.apply(this,arguments)}function yt(){return(yt=i()(o.a.mark(function t(){var e,n,r,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Object(v.u)("syncdisk startSyncDiskService"),e=y.b.getInstance(),t.prev=2,t.next=5,e.getState();case 5:return t.abrupt("return");case 8:t.prev=8,t.t0=t.catch(2);case 10:return Object(v.u)("syncdisk startSyncDiskService start"),t.next=13,e.start();case 13:return t.next=15,Object(v.e)();case 15:return n=t.sent,r={lang:Object(C.c)(),isStaging:!1,fgCommitDeleteEvent:!0,fgEnableDebugLog:k.o,fgNewFeature:k.p,spaceHomeHost:N.a.host,deviceId:n.deviceId,userId:n.userId,session:n.sessionId,larkVersion:Object(v.m)(),tenantId:n.tenantId,softwareType:"core"},Object(v.u)("syncdisk startSyncDiskService handShake"),t.next=20,e.handShake(r);case 20:s=t.sent,Object(v.u)("syncdisk startSyncDiskService handShake res",s.state),Object(T.l)(s);case 23:case"end":return t.stop()}},t,null,[[2,8]])}))).apply(this,arguments)}function vt(){return St.apply(this,arguments)}function St(){return(St=i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Object(v.u)("syncdisk stopSyncDiskService"),t.next=3,y.b.getInstance().stop();case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}}).call(this,bt("2vAP"))},"2Aq9":function(t,e,n){"use strict";var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,o,n,i){function u(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{a(i.next(t))}catch(t){n(t)}}function s(t){try{a(i.throw(t))}catch(t){n(t)}}function a(t){t.done?e(t.value):u(t.value).then(r,s)}a((i=i.apply(t,o||[])).next())})},i=this&&this.__generator||function(t,n){var r,s,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:i(0),throw:i(1),return:i(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function i(e){return function(t){return u([e,t])}}function u(e){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,s&&(a=2&e[0]?s.return:e[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return o.label++,{value:e[1],done:!1};case 5:o.label++,s=e[1],e=[0];continue;case 7:e=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){o=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){o.label=e[1];break}if(6===e[0]&&o.label<a[1]){o.label=a[1],a=e;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(e);break}a[2]&&o.ops.pop(),o.trys.pop();continue}e=n.call(t,o)}catch(t){e=[6,t],s=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u,c,l=n("Iqpv"),p=n("Ob3q"),d=n("3ylz"),h=a(n("4O8T")),f=n("hnm2");(c=u=u||{})[c.UnInit=-1]="UnInit",c[c.Initing=0]="Initing",c[c.Inited=2]="Inited",c[c.InitError=3]="InitError";var y,v={debug:console.log,info:console.log,error:console.error},S=(y=h.default,s(C,y),C.prototype.init=function(r){var s;return o(this,void 0,void 0,function(){var e,n;return i(this,function(t){switch(t.label){case 0:return e=r.clientType||"syncdisk_tray",this.stopAutoReconnect(),this.logger=r.logger||v,this.state=u.Initing,n=!1,this.ws=new l.SyncDiskWebSocket({onError:this.onWSError,onClose:this.onWSClose,logger:this.logger,query:"clientType="+e,serverType:r.serverType||d.ServerType.SYNC_MAIN,isNodeEnv:r.isNodeEnv||!1}),[4,this.connect()];case 1:return(n=t.sent())&&this.emit(d.ConnectionEvent.CONNECTION_STATUS_CHANGE,d.ConnectionStatus.CONNECTED),n&&this.subscribeByWS(),null!==(s=this.logger)&&void 0!==s&&s.info(d.logPrefix,"init ws res",n),this.state=n?u.Inited:u.InitError,this.resolveWaitForConnectList(n),this.checkLaunchStatus(),[2]}})})},C.prototype.connect=function(){var n;return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:if(!this.ws)return[2,!1];e=30,t.label=1;case 1:return e--?[4,this.ws.connect()]:[3,4];case 2:return t.sent()?(this.stopAutoReconnect(),[3,4]):(null!==(n=this.logger)&&void 0!==n&&n.info(d.logPrefix,"ws conect retry rest",e),[4,f.sleep(1e3)]);case 3:return t.sent(),[3,1];case 4:return[2,0<e]}})})},C.prototype.autoReconnect=function(){return o(this,void 0,void 0,function(){var e=this;return i(this,function(t){return[2,new Promise(function(r){return o(e,void 0,void 0,function(){var e,n=this;return i(this,function(t){switch(t.label){case 0:return[4,null===(e=this.ws)||void 0===e?void 0:e.connect()];case 1:return t.sent()?(r(),[2]):(this.autoConnectTimer=setInterval(function(){return o(n,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,null===(e=this.ws)||void 0===e?void 0:e.connect()];case 1:return t.sent()&&(this.stopAutoReconnect(),r()),[2]}})})},6e4),[2])}})})})]})})},C.prototype.stopAutoReconnect=function(){0!==this.autoConnectTimer&&(clearInterval(this.autoConnectTimer),this.autoConnectTimer=0)},C.prototype.reconnectLimitCheck=function(){var t=Date.now();if(this.reconnectTimeStampList.push(t),this.reconnectTimeStampList.length<6)return!0;var e=this.reconnectTimeStampList[0];return this.reconnectTimeStampList.shift(),!(t-e<6e4)},C.prototype.resetStatusAfterClose=function(){this.isLaunched=!1},C.prototype.subscribeByWS=function(){var t,e,r=this;null!==(t=this.ws)&&void 0!==t&&t.removeAllListeners(d.pushEvent),null!==(e=this.ws)&&void 0!==e&&e.addListener(d.pushEvent,function(t){var e=t.callType,n=t.data;e===p.PushEventType.PushLaunchStatus&&r.handleLaunchStatusPush(n),r.emit(e,n)})},C.prototype.handleLaunchStatusPush=function(t){t.status===d.LaunchStatus.LAUNCHED&&this.handleLaunched()},C.prototype.handleLaunched=function(){this.isLaunched=!0,this.emit(d.ConnectionEvent.CONNECTION_STATUS_CHANGE,d.ConnectionStatus.READY),this.resolveWaitForLaunchList(!0)},C.prototype.waitForConnect=function(){return o(this,void 0,void 0,function(){var n=this;return i(this,function(t){return[2,new Promise(function(e){n.state===u.Inited?e(!0):n.waitForConnectReadyList.push(function(t){e(t)})})]})})},C.prototype.waitForLaunch=function(){return o(this,void 0,void 0,function(){var n=this;return i(this,function(t){return[2,new Promise(function(e){n.isLaunched?e(!0):n.waitForLaunchReadyList.push(function(t){e(t)})})]})})},C.prototype.resolveWaitForLaunchList=function(e){this.waitForLaunchReadyList.forEach(function(t){t(e)}),this.waitForLaunchReadyList=[]},C.prototype.resolveWaitForConnectList=function(e){this.waitForConnectReadyList.forEach(function(t){t(e)}),this.waitForConnectReadyList=[]},C.prototype.checkLaunchStatus=function(){var n,r;return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),null!==(n=this.logger)&&void 0!==n&&n.info(d.logPrefix,"start check launch status."),[4,this.getLaunchStatus()];case 1:return e=t.sent(),null!==(r=this.logger)&&void 0!==r&&r.info(d.logPrefix,"check launch status res",e),e.status===d.LaunchStatus.LAUNCHED&&this.handleLaunched(),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}})})},Object.defineProperty(C.prototype,"isReady",{get:function(){return this.state===u.Inited&&this.isLaunched},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"isConnectReady",{get:function(){return this.state===u.Inited},enumerable:!0,configurable:!0}),C.prototype.ensureWsReady=function(){return o(this,void 0,void 0,function(){return i(this,function(t){return this.ws&&this.isReady?[2,!0]:[2,Promise.reject({errCode:d.ErrorCode.ConnectionUnReady})]})})},C.prototype.send=function(e,n){var r;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(r=this.ws)||void 0===r?void 0:r.send({callType:e,data:n})];case 2:return[2,t.sent()]}})})},C.prototype.launch=function(s){var a;return o(this,void 0,void 0,function(){var e,n,r=this;return i(this,function(t){switch(t.label){case 0:return this.isLaunched=!1,[4,this.ensureWsReady()];case 1:t.sent(),e=null,t.label=2;case 2:return t.trys.push([2,4,,5]),[4,null===(a=this.ws)||void 0===a?void 0:a.send({callType:p.CallType.Launch,data:s})];case 3:return t.sent(),[3,5];case 4:return n=t.sent(),e=n,[3,5];case 5:return this.isLaunched=!0,setTimeout(function(){r.resolveWaitForLaunchList(null===e)},0),[2,!e||Promise.reject(e)]}})})},C.prototype.getLaunchStatus=function(){var e;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.isConnectReady?[4,null===(e=this.ws)||void 0===e?void 0:e.send({callType:p.CallType.GetLaunchStatus})]:[2,Promise.reject({errCode:d.ErrorCode.ConnectionUnReady})];case 1:return[2,t.sent()]}})})},C.prototype.getSyncRecords=function(n,r){var s;return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(s=this.ws)||void 0===s?void 0:s.send({callType:p.CallType.GetSyncRecords,data:{lastRecordId:n,length:r}})];case 2:return[2,(null==(e=t.sent())?void 0:e.content)||[]]}})})},C.prototype.getParentNodeToken=function(n){var r;return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(r=this.ws)||void 0===r?void 0:r.send({callType:p.CallType.GetParentNodeToken,data:{nodeToken:n}})];case 2:return[2,null==(e=t.sent())?void 0:e.parentNodeToken]}})})},C.prototype.openFolder=function(e,n){var r;return void 0===n&&(n=""),o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(r=this.ws)||void 0===r?void 0:r.send({callType:p.CallType.OpenFolder,data:{token:n,type:e}})];case 2:return[2,!!t.sent()]}})})},C.prototype.open=function(e,n){var r;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(r=this.ws)||void 0===r?void 0:r.send({callType:p.CallType.Open,data:{token:e,localApp:n}})];case 2:return[2,!!t.sent()]}})})},C.prototype.lookupApps=function(n){var r;return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(r=this.ws)||void 0===r?void 0:r.send({callType:p.CallType.LookupApps,data:{ext:n}})];case 2:return[2,(null==(e=t.sent())?void 0:e.items)||[]]}})})},C.prototype.setFolderSync=function(e,n){var r;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(r=this.ws)||void 0===r?void 0:r.send({callType:p.CallType.SetFolderSync,data:{token:e,spaceType:n}})];case 2:return t.sent(),[2,!0]}})})},C.prototype.cancelFolderSync=function(e){var n;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(n=this.ws)||void 0===n?void 0:n.send({callType:p.CallType.CancelFolderSync,data:{token:e}})];case 2:return t.sent(),[2,!0]}})})},C.prototype.getFolderSyncStatus=function(e,n){var r;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(r=this.ws)||void 0===r?void 0:r.send({callType:p.CallType.GetFolderSyncStatus,data:{token:e,type:n}})];case 2:return[2,t.sent()]}})})},C.prototype.getGlobalSyncStatus=function(){var e;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(e=this.ws)||void 0===e?void 0:e.send({callType:p.CallType.GetGlobalSyncStatus})];case 2:return[2,t.sent()]}})})},C.prototype.shutdown=function(e){var n;return void 0===e&&(e=d.ExitCode.USER_SHUTDOWN),o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.isConnectReady?[4,null===(n=this.ws)||void 0===n?void 0:n.send({callType:p.CallType.Shutdown,data:{exitCode:e}})]:[2,Promise.reject({errCode:d.ErrorCode.ConnectionUnReady})];case 1:return t.sent(),[2]}})})},C.prototype.checkFilePermission=function(e){var n;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(n=this.ws)||void 0===n?void 0:n.send({callType:p.CallType.CheckFilePermission,data:{nodeTokenList:e}})];case 2:return[2,t.sent().nodeTokenList]}})})},C.prototype.taskRetry=function(e){var n;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(n=this.ws)||void 0===n?void 0:n.send({callType:p.CallType.TaskRetry,data:{taskList:e}})];case 2:return t.sent(),[2,!0]}})})},C.prototype.getFileCachePathInfo=function(){var e;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(e=this.ws)||void 0===e?void 0:e.send({callType:p.CallType.GetFileCachePath})];case 2:return[2,t.sent()]}})})},C.prototype.setFileCachePath=function(e){var n;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(n=this.ws)||void 0===n?void 0:n.send({callType:p.CallType.SetFileCachePath,data:{fileCachePath:e}})];case 2:return[2,t.sent().result]}})})},C.prototype.getFileCachePathMoveStatus=function(){var e;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.isConnectReady?[4,null===(e=this.ws)||void 0===e?void 0:e.send({callType:p.CallType.GetFileCachePathMoveStatus})]:[2,Promise.reject({errCode:d.ErrorCode.ConnectionUnReady})];case 1:return[2,t.sent()]}})})},C.prototype.startMoveFileCache=function(){var e;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(e=this.ws)||void 0===e?void 0:e.send({callType:p.CallType.StartMoveFileCache})];case 2:return t.sent(),[2,!0]}})})},C.prototype.getNodeSyncStatus=function(e){var n;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.ensureWsReady()];case 1:return t.sent(),[4,null===(n=this.ws)||void 0===n?void 0:n.send({callType:p.CallType.GetNodeSyncStatus,data:{token:e}})];case 2:return[2,t.sent()]}})})},C);function C(){var t=y.call(this)||this;return t.state=u.UnInit,t.waitForConnectReadyList=[],t.waitForLaunchReadyList=[],t.ws=null,t.reconnectTimeStampList=[],t.logger=void 0,t.isLaunched=!1,t.autoConnectTimer=0,t.onWSClose=function(s){return o(t,void 0,void 0,function(){var e,n,r;return i(this,function(t){switch(t.label){case 0:return this.resetStatusAfterClose(),this.emit(d.ConnectionEvent.CONNECTION_STATUS_CHANGE,d.ConnectionStatus.UNCONNECT),this.emit(d.ConnectionEvent.CONNECTION_CLOSED,s),e=this.reconnectLimitCheck(),null!==(n=this.logger)&&void 0!==n&&n.info(d.logPrefix,"onWSClose",s.code,e),e?[4,f.sleep(2e3)]:[3,3];case 1:return t.sent(),[4,this.autoReconnect()];case 2:t.sent(),this.handleLaunched(),null!==(r=this.logger)&&void 0!==r&&r.info(d.logPrefix,"onWSClose reconnect ok"),t.label=3;case 3:return[2]}})})},t.onWSError=function(n){return o(t,void 0,void 0,function(){var e;return i(this,function(t){return null!==(e=this.logger)&&void 0!==e&&e.info(d.logPrefix,"onWSError",n),[2]})})},t}e.SyncDiskConnection=S,e.syncDiskConnection=new S},"3ylz":function(t,e,n){"use strict";var r,s,a,o,i,u,c,l,p,d,h,f;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.ErrorCode||(e.ErrorCode={})).WebsocketNotReady="sdc_1001",r.ConnectionUnReady="sdc_1002",r.NotExistAPI="sdc_1003",e.callErrCodePrefix="sdc_call_",e.logPrefix="sdc:",e.pushEvent="pushEvent",(s=e.TreeNodeType||(e.TreeNodeType={}))[s.UNKNOW=-1]="UNKNOW",s[s.FOLDER=0]="FOLDER",s[s.FILE=12]="FILE",s[s.MY_SPACE_ROOT=128]="MY_SPACE_ROOT",s[s.SHARED_SPACE_ROOT=129]="SHARED_SPACE_ROOT",s[s.SYNCDISK_ROOT=255]="SYNCDISK_ROOT",(a=e.FileSyncStatus||(e.FileSyncStatus={}))[a.UNKNOWN=0]="UNKNOWN",a[a.UNSYNC=1]="UNSYNC",a[a.SYNCING=2]="SYNCING",a[a.SYNC_COMPLETE=3]="SYNC_COMPLETE",a[a.SYNC_PENDING=4]="SYNC_PENDING",a[a.SYNC_ERROR=5]="SYNC_ERROR",a[a.REMOVED=6]="REMOVED",(o=e.SyncOption||(e.SyncOption={}))[o.SYNC=0]="SYNC",o[o.CANCEL=1]="CANCEL",(i=e.SpaceType||(e.SpaceType={}))[i.UNKNOW=0]="UNKNOW",i[i.MY_SPACE=1]="MY_SPACE",i[i.SHARED_SPACE=2]="SHARED_SPACE",(u=e.LaunchStatus||(e.LaunchStatus={}))[u.LAUNCHED=3]="LAUNCHED",u[u.UNLAUNCH=2]="UNLAUNCH",(c=e.Result||(e.Result={}))[c.SUCESS=0]="SUCESS",c[c.UNKNOW_ERR=1]="UNKNOW_ERR",c[c.NOT_LOGIN=2]="NOT_LOGIN",c[c.ALREADY_LOGIN=3]="ALREADY_LOGIN",c[c.NO_FILE_PERMISSION=5]="NO_FILE_PERMISSION",c[c.NO_MORE_SPACE=6]="NO_MORE_SPACE",c[c.NO_DIR_PERMISSION=7]="NO_DIR_PERMISSION",(l=e.CachePathMoveStatus||(e.CachePathMoveStatus={}))[l.UNKNOW=-1]="UNKNOW",l[l.NORMAL=0]="NORMAL",l[l.MOVING=1]="MOVING",l[l.FINISHED=2]="FINISHED",(p=e.ExitCode||(e.ExitCode={}))[p.PROGRAM_EXIST=1]="PROGRAM_EXIST",p[p.PATH_NOT_FOUND=2]="PATH_NOT_FOUND",p[p.HEARTBEAT_STOP=3]="HEARTBEAT_STOP",p[p.USER_RESTART=18]="USER_RESTART",p[p.USER_SHUTDOWN=19]="USER_SHUTDOWN",(d=e.ConnectionEvent||(e.ConnectionEvent={})).CONNECTION_STATUS_CHANGE="CONNECTION_STATUS_CHANGE",d.CONNECTION_CLOSED="CONNECTION_CLOSED",(h=e.ConnectionStatus||(e.ConnectionStatus={}))[h.UNCONNECT=1]="UNCONNECT",h[h.CONNECTED=4]="CONNECTED",h[h.READY=10]="READY",(f=e.ServerType||(e.ServerType={}))[f.SYNC_MAIN=1]="SYNC_MAIN",f[f.SYNC_LITE=2]="SYNC_LITE"},"4Tbs":function(t,e,n){"use strict";var r,s;Object.defineProperty(e,"__esModule",{value:!0}),(s=r=r||{}).Launch="Launch",s.GetLaunchStatus="GetLaunchStatus",s.GetSyncRecords="GetSyncRecords",s.OpenFolder="OpenFolder",s.GetParentNodeToken="GetParentNodeToken",s.LookupApps="LookupApps",s.Open="Open",s.SetFolderSync="SetFolderSync",s.CancelFolderSync="CancelFolderSync",s.GetFolderSyncStatus="GetFolderSyncStatus",s.GetGlobalSyncStatus="GetGlobalSyncStatus",s.Shutdown="Shutdown",s.CheckFilePermission="CheckFilePermission",s.TaskRetry="TaskRetry",s.GetFileCachePath="GetFileCachePath",s.SetFileCachePath="SetFileCachePath",s.GetFileCachePathMoveStatus="GetFileCachePathMoveStatus",s.StartMoveFileCache="StartMoveFileCache",s.GetNodeSyncStatus="GetNodeSyncStatus",e.default=r},IBHi:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return g});var f,r,y,s,a=n("o0o1"),v=n.n(a),o=n("yXPU"),S=n.n(o),i=n("lwsE"),C=n.n(i),u=n("W8MJ"),b=n.n(u),c=n("a1gu"),N=n.n(c),l=n("Nsbk"),k=n.n(l),p=n("7W2i"),T=n.n(p),E=n("7EGn"),d=n("4O8T"),h=n.n(d);function _(){return Math.random().toString(36).slice(2,10)}(r=f=f||{}).HandShake="HandShake",r.AutoInstall="AutoInstall",r.Start="Start",r.OpenMountingPath="OpenMountingPath",r.GetState="GetState",r.StateChange="State",(s=y=y||{}).ShellError="ShellError",s.EnvError="EnvError";var w,O="ShellAPI.app.services.syncDisk",g=function(t){function e(){var t;return C()(this,e),(t=N()(this,k()(e).call(this))).requestMap=new Map,t.sendNativeMessage=Object(E.default)(window,O,"sendMessage"),t.bindEvent(),t}function n(){return r.apply(this,arguments)}var r,s,a,o,i,u;function c(){return s.apply(this,arguments)}function l(){return a.apply(this,arguments)}function p(t){return o.apply(this,arguments)}function d(){return i.apply(this,arguments)}function h(){return u.apply(this,arguments)}return T()(e,t),b()(e,[{key:"start",value:(u=S()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ShellAPI.app.services.syncDisk.start());case 1:case"end":return t.stop()}},t)})),h)},{key:"stop",value:(i=S()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ShellAPI.app.services.syncDisk.stop());case 1:case"end":return t.stop()}},t)})),d)},{key:"bindEvent",value:function(){var o=this;window.ShellAPI.app.ipc.on("SYNC_DISK",function(t){var e,n,r,s,a=t.detail;a&&(n=(e=JSON.parse(a))&&e.requestId,r=e&&e.callType,n?(s=o.requestMap.get(n))&&(o.requestMap.delete(n),s(e)):r&&o.emit(r,e.data))})}},{key:"sendMessage",value:function(t){var r=this;return new Promise(function(e,n){r.sendNativeMessage?(t.requestId||(t.requestId=_()),r.requestMap.set(t.requestId,function(t){0===t.result?e(t.data):n(t.result)}),window.ShellAPI.app.services.syncDisk.sendMessage(JSON.stringify(t)).catch(function(t){n(y.ShellError)})):n(y.EnvError)})}},{key:"handShake",value:(o=S()(v.a.mark(function t(e){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendMessage({callType:f.HandShake,data:e});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t,this)})),p)},{key:"startSyncDisk",value:(a=S()(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendMessage({callType:f.Start});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)})),l)},{key:"autoInstall",value:(s=S()(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendMessage({callType:f.AutoInstall});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)})),c)},{key:"getState",value:(r=S()(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendMessage({callType:f.GetState});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)})),n)}],[{key:"getInstance",value:function(){return w=w||new e}}]),e}(h.a)},Iqpv:function(t,e,n){"use strict";var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,o,n,i){function u(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n=n||Promise)(function(e,n){function r(t){try{a(i.next(t))}catch(t){n(t)}}function s(t){try{a(i.throw(t))}catch(t){n(t)}}function a(t){t.done?e(t.value):u(t.value).then(r,s)}a((i=i.apply(t,o||[])).next())})},l=this&&this.__generator||function(t,n){var r,s,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:i(0),throw:i(1),return:i(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function i(e){return function(t){return u([e,t])}}function u(e){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,s&&(a=2&e[0]?s.return:e[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return o.label++,{value:e[1],done:!1};case 5:o.label++,s=e[1],e=[0];continue;case 7:e=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){o=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){o.label=e[1];break}if(6===e[0]&&o.label<a[1]){o.label=a[1],a=e;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(e);break}a[2]&&o.ops.pop(),o.trys.pop();continue}e=n.call(t,o)}catch(t){e=[6,t],s=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i,u=o(n("4O8T")),p=n("3ylz"),c=o(n("P+Ns")),d=n("hnm2"),h=5e3,f=(i=u.default,s(y,i),y.prototype.doConnect=function(a){var t,e,o=this;return null!==(e=null===(t=this.props)||void 0===t?void 0:t.logger)&&void 0!==e&&e.debug(p.logPrefix,"ws connet try connect on url",a),new Promise(function(e){var n=null,r=setTimeout(function(){n&&n.close(),e(null)},h),s=function(t){r&&clearTimeout(r),!t&&n&&n.close(),e(t)};try{var t=o.props.isNodeEnv?{origin:"https://bytedance.feishu.cn"}:void 0;(n=new c.default(a,t)).binaryType="arraybuffer",n.onerror=function(t){s(null)},n.onopen=function(){s(n)}}catch(t){s(null)}})},y.prototype.connect=function(){var u,c;return a(this,void 0,void 0,function(){var e,n,r,s,a,o,i;return l(this,function(t){switch(t.label){case 0:e=this.props.serverType===p.ServerType.SYNC_MAIN?35487:38487,n=100,r=10,s=0,t.label=1;case 1:return s<=r?(o="ws://localhost:"+(a=e+s*n)+"/?"+(this.props.query||""),[4,this.doConnect(o)]):[3,3];case 2:return(i=t.sent())?(this.ws=i,this.bindEvent(),null!==(c=null===(u=this.props)||void 0===u?void 0:u.logger)&&void 0!==c&&c.info(p.logPrefix,"ws connet on port",a),[3,3]):(s+=1,[3,1]);case 3:return[2,s<=r]}})})},y.prototype.bindEvent=function(){var o=this;this.ws&&(this.ws.onmessage=function(t){d.debugLog("recv:",JSON.stringify(t.data));var e,n,r,s,a=t.data;a&&(a instanceof ArrayBuffer&&(a=String.fromCharCode.apply(null,Array.from(new Uint8Array(a)))),n=(e=JSON.parse(a))&&e.requestId,r=e&&e.callType,n?(s=o.requestMap.get(n))&&(o.requestMap.delete(n),s(e)):r&&o.emit(p.pushEvent,{callType:r,data:e.data}))},this.ws.onclose=function(t){o.props.onClose(t)},this.ws.onerror=function(t){o.props.onError(t)})},y.genRequestId=function(){return Math.random().toString(36).slice(2,10)},y.prototype.send=function(t){var r=this;return new Promise(function(e,n){r.ws&&r.ws.readyState===c.default.OPEN?(t.requestId||(t.requestId=y.genRequestId()),r.requestMap.set(t.requestId,function(t){0===t.result?e(t.data):n(p.callErrCodePrefix+t.result)}),d.debugLog("send:",JSON.stringify(t)),r.ws.send(JSON.stringify(t))):n(p.ErrorCode.WebsocketNotReady)})},y);function y(t){var e=i.call(this)||this;return e.ws=null,e.requestMap=new Map,e.props=t,e.bindEvent(),e}e.SyncDiskWebSocket=f},Ob3q:function(t,n,e){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(e("Iqpv"));var s=e("4Tbs");n.CallType=s.default;var a=e("TCuV");n.PushEventType=a.default},"P+Ns":function(n,t,e){(function(t){var e=null;"undefined"!=typeof WebSocket?e=WebSocket:"undefined"!=typeof MozWebSocket?e=MozWebSocket:void 0!==t?e=t.WebSocket||t.MozWebSocket:"undefined"!=typeof window?e=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(e=self.WebSocket||self.MozWebSocket),n.exports=e}).call(this,e("yLpj"))},TCuV:function(t,e,n){"use strict";var r,s;Object.defineProperty(e,"__esModule",{value:!0}),(s=r=r||{}).PushGlobalSyncStatus="PushGlobalStatus",s.PushSyncRecord="PushSyncRecord",s.PushNoPermissionFile="PushNoPermissionFile",s.PushCanNotCreateFile="PushCanNotCreateFile",s.PushNodeSyncStatusUpdate="NodeSyncStatusUpdate",s.PushNodeSyncStatus="PushNodeSyncStatus",s.PushLaunchStatus="PushLaunchStatus",s.PushCreateFileInRootDir="PushCreateFileInRootDir",s.PushFileCachePathMoveStatus="PushFileCachePathMoveStatus",s.PushUploadFileFail="PushUploadFileFail",s.PushDownloadFileFail="PushDownloadFileFail",s.PushCanNotCancelFolderSync="PushCanNotCancelFolderSync",e.default=r},"Z/YB":function(t,e,n){"use strict";n.d(e,"j",function(){return C}),n.d(e,"i",function(){return b}),n.d(e,"a",function(){return N}),n.d(e,"c",function(){return k}),n.d(e,"h",function(){return T}),n.d(e,"e",function(){return E}),n.d(e,"g",function(){return _}),n.d(e,"f",function(){return w}),n.d(e,"b",function(){return O}),n.d(e,"k",function(){return g}),n.d(e,"d",function(){return P}),n.d(e,"m",function(){return I}),n.d(e,"l",function(){return R});var r=n("o0o1"),c=n.n(r),s=n("yXPU"),a=n.n(s),o=n("lSNA"),i=n.n(o),u=n("jp/M"),p=n("D7h9"),d=n("QM+C"),h=n("eoP6"),l=n("qGoe"),f=n("nyid"),y=n("/Rq9"),v=n("vfWA"),S=n("+mgp"),C=function(t){return(0,p.default.dispatch)({type:u.actionTypes.syncDisk.UPDATE_NODE_SYNC_STATUS_BATCH,payload:t})},b=function(t){return(0,p.default.dispatch)({type:u.actionTypes.syncDisk.UPDATE_CUR_FOLDER_SYNC_INFO,payload:t})},N=function(t){var e=p.default.getState,n=t.files,r=t.statusList,s=e(),a=s.entities.nodes,o=Object.assign({},s.appState.syncDisk.nodeSyncStatus),i=0,u=0,c=0,l=n.size;r.forEach(function(t){o[t.token]=t.syncStatus}),n.forEach(function(t){var e,n=o[t.token];n===h.k.SYNCING?i+=1:n!==h.k.SYNC_ERROR||(e=a.get(t.token))&&(e.type===d.NUM_FILE_TYPE.FOLDER?u+=1:c+=1)}),b({synchingCount:i,totalCount:l,failDirCount:u,failFileCount:c})},k=function(t){var e=t.token,o=t.type;Object(y.e)(e,o).then(function(t){var e,n,r,s,a;t&&(e=t.synchingCount,n=t.totalCount,r=t.failDirCount,s=t.failFileCount,a=t.childrenStatus.concat([{token:t.token,type:t.type,syncStatus:t.syncStatus}]),o===v.TreeNodeType.FOLDER&&b({synchingCount:e,totalCount:n,failDirCount:r,failFileCount:s}),C({statusList:a}))})},T=function(t){return(0,p.default.dispatch)({type:u.actionTypes.syncDisk.SET_IS_SHOW_ONBOARDING,isShow:t})},E=function(t){return(0,p.default.dispatch)({type:u.actionTypes.syncDisk.SET_IS_IN_ONBOARDING,isInOnboarding:t})},_=function(t){return(0,p.default.dispatch)({type:u.actionTypes.syncDisk.SET_IS_ONBOARDING_CANCELED,isOnboardingCanceled:t})},w=function(t){return(0,p.default.dispatch)({type:u.actionTypes.syncDisk.SET_IS_SYNCDISK_INSTALLED,isInstalled:t})},O=function(t,e){return i()({type:u.actionTypes.syncDisk.FETCH_INSTALLER_CONFIG},d.REQUEST,{url:u.apiUrls.GET_INSTALL_CONFIG,method:u.apiUrls.METHOD.GET,params:{lark_version:t,os:e},options:{retryConfig:l.a.explorer.retryConfig}})},g=function(){var n=a()(c.a.mark(function t(e,n){var r,s,a,o,i,u;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=p.default.getState,s=r(),a=Object(f.d)(s),S.q&&a){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,Object(y.e)("",e);case 7:if(o=t.sent){t.next=10;break}return t.abrupt("return",!1);case 10:return i=o.childrenStatus,u=new Set(i.map(function(t){return t.token})),n.forEach(function(t){u.has(t)||i.push({type:v.TreeNodeType.UNKNOW,token:t,syncStatus:v.FileSyncStatus.UNSYNC})}),C({statusList:i}),t.abrupt("return",!0);case 15:case"end":return t.stop()}},t)}));return function(t,e){return n.apply(this,arguments)}}(),P=function(){return(0,p.default.dispatch)({type:u.actionTypes.syncDisk.RESET_ALL_SYNC_STATUS})},I=function(t){return(0,p.default.dispatch)({type:u.actionTypes.syncDisk.UPDATE_SYNCDISK_STATUS,payload:{syncDiskStatus:t}})},R=function(t){return(0,p.default.dispatch)({type:u.actionTypes.syncDisk.UPDATE_SYNCDISK_STATE,payload:{syncDiskState:t}})}},hnm2:function(t,s,e){"use strict";(function(n){var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var a=arguments[e],o=0,i=a.length;o<i;o++,s++)r[s]=a[o];return r};function t(e){return void 0===e&&(e=1e3),new Promise(function(t){return setTimeout(t,e)})}function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{void 0!==n&&n.process&&"development"===n.process.env.LARK_NODE_ENV&&console.log.apply(console,r(["sdc: "],t))}catch(t){}}Object.defineProperty(s,"__esModule",{value:!0}),s.sleep=t,s.debugLog=e}).call(this,e("yLpj"))},nyid:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"e",function(){return i}),n.d(e,"d",function(){return u}),n.d(e,"h",function(){return c}),n.d(e,"g",function(){return l});var r=function(t){return t.appState.syncDisk.nodeSyncStatus},s=function(t){return t.appState.syncDisk.curFolderSyncInfo},a=function(t){return t.appState.syncDisk.isShowOnboarding},o=function(t){return t.appState.syncDisk.isInOnboarding},i=function(t){return t.appState.syncDisk.isOnboardingCanceled},u=function(t){return t.appState.syncDisk.isInstalled},c=function(t){return t.appState.syncDisk.syncDiskStatus},l=function(t){return t.appState.syncDisk.syncDiskState}},vfWA:function(t,n,e){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(e("2Aq9")),r(e("3ylz"));var s=e("Ob3q");n.PushEventType=s.PushEventType}}]);
//# sourceMappingURL=commons--create_by_template_modal--create_by_template_modal_new_layout--create_team_space_modal--ex--a373becd.8e6c46ee4528f2739dd2.js.map