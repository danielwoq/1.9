(this.webpackJsonp=this.webpackJsonp||[]).push([["file-card"],{"+gjv":function(e,t,r){},"/aIJ":function(e,t,r){},"0Q5d":function(e,t,r){"use strict";var n=r("pVnL"),i=r.n(n),a=r("QILm"),o=r.n(a),s=r("q1tI"),c=r.n(s);t.a=function(e){e.styles;var t=o()(e,["styles"]);return c.a.createElement("svg",i()({width:"14",height:"14",viewBox:"0 0 14 14"},t),c.a.createElement("path",{d:"M10.56 5.78L5.9 10.62a1.8 1.8 0 01-2.61 0 2 2 0 010-2.7l5.5-5.68a2.98 2.98 0 014.31 0 3.23 3.23 0 010 4.45L7.2 12.73a4.13 4.13 0 01-5.96 0 4.48 4.48 0 010-6.17l5.04-5.2c.07-.06.13-.1.13-.12l.06-.07c.21-.23.51-.23.73 0 .2.23.2.55 0 .75l-.19.2L2 7.33a3.35 3.35 0 000 4.65 3.1 3.1 0 004.47 0l5.04-5.2.18-.2.67-.68c.76-.78.76-2.1 0-2.89a1.96 1.96 0 00-2.8 0L4.04 8.67c-.3.33-.3.85 0 1.14.3.32.82.32 1.09 0l4.68-4.8c.21-.23.52-.23.73 0 .24.25.24.58.03.77z",fill:"#07F",fillRule:"nonzero"}))}},"0cyJ":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMTYgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUwLjIgKDU1MDQ3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5PdmFsIDU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iU3ltYm9scyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InRpcHPmj5DphpIyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQuMDAwMDAwLCAtMTQuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJlcnJvciI+CiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNC4wMDAwMDAsIDE0LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik04LDE2IEMzLjU4MTcyMiwxNiAwLDEyLjQxODI3OCAwLDggQzAsMy41ODE3MjIgMy41ODE3MjIsMCA4LDAgQzEyLjQxODI3OCwwIDE2LDMuNTgxNzIyIDE2LDggQzE2LDEyLjQxODI3OCAxMi40MTgyNzgsMTYgOCwxNiBaIiBpZD0iT3ZhbC01IiBmaWxsPSIjRUU1MDUwIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNyw0IEw3LjQ4LDEwIEw4LjUsMTAgTDksNCBDOSw0IDkuMjc2OTc3NTQsMyA4LDMgQzYuNzIzMDIyNDYsMyA3LDQgNyw0IFoiIGlkPSLvvIEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLTIiIGZpbGw9IiNGRkZGRkYiIGN4PSI4IiBjeT0iMTIiIHI9IjEiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4K"},"2M8O":function(e,t,r){},"2Upt":function(e,t,r){"use strict";r.d(t,"a",function(){return v});var n=r("lwsE"),i=r.n(n),a=r("W8MJ"),o=r.n(a),s=r("a1gu"),c=r.n(s),u=r("Nsbk"),l=r.n(u),d=r("7W2i"),p=r.n(d),h=r("q1tI"),f=r.n(h),v=(r("/aIJ"),r("+gjv"),function(e){function t(){return i()(this,t),c()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"componentDidMount",value:function(){var t=this;this.getPlayerComponent().then(function(e){t.player=e})}},{key:"componentWillUnmount",value:function(){this.player&&this.player.dispose()}},{key:"getPlayerComponent",value:function(){var t=this;return Promise.all([r.e("vendors--doc_common_videojs"),r.e("doc_common_videojs")]).then(r.t.bind(null,"PTN7",7)).then(function(e){return(0,e.default)(t.videoNode,t.props,t.onPlayerReady)})}},{key:"render",value:function(){var t=this;return f.a.createElement("div",{className:"mention-modal-video","data-vjs-player":!0},f.a.createElement("video",{ref:function(e){return t.videoNode=e},className:"video-js"}))}}]),t}(h.Component))},"4kWC":function(e,t,r){},"4v/9":function(e,t,r){"use strict";var n=r("pVnL"),i=r.n(n),a=r("QILm"),o=r.n(a),s=r("q1tI"),c=r.n(s);t.a=function(e){e.styles;var t=o()(e,["styles"]);return c.a.createElement("svg",i()({width:"24",height:"24",viewBox:"0 0 24 24"},t),c.a.createElement("path",{fill:"#2B2F36",fillRule:"evenodd",d:"M19.5 16.87v1.87c0 .41-.34.75-.75.75H5.25a.75.75 0 01-.75-.75v-1.88c0-.2.17-.37.38-.37h.75c.2 0 .37.17.37.38v1.12h12v-1.13c0-.2.17-.37.38-.37h.75c.2 0 .37.17.37.38zm-6.74-3.35l2.16-2.16a.38.38 0 01.53 0l.53.53c.14.14.14.38 0 .53l-3.71 3.71a.37.37 0 01-.54 0l-3.7-3.71a.37.37 0 010-.53l.52-.53a.38.38 0 01.53 0l2.18 2.17V4.88c0-.21.16-.38.37-.38h.75c.2 0 .38.17.38.38v8.64z"}))}},"5RRi":function(e,S,j){"use strict";(function(u){j.d(S,"a",function(){return _});var e=j("lwsE"),n=j.n(e),t=j("W8MJ"),i=j.n(t),r=j("a1gu"),a=j.n(r),o=j("Nsbk"),s=j.n(o),c=j("7W2i"),l=j.n(c),d=j("BmhO"),p=j("TSYQ"),h=j.n(p),f=j("q1tI"),v=j.n(f),m=j("MUo5"),k=j("3doy"),b=j("dvZ7"),g=j("Xngx"),y=j("chPe"),w=j("QM+C"),E=j("yvYZ"),C=j("jbvk"),I=j("2ACu"),O=j("7b5p"),T=j("hFNK"),x=j("D7h9"),D=j("U1nc"),P=Object(D.a)(),_=function(e){function r(){var t;return n()(this,r),(t=a()(this,s()(r).apply(this,arguments))).commonBoxPreviewProps=Object(b.h)(),t.state={isInaccessible:!1},t.onKeyDown=function(e){27===(e||window.event).keyCode&&t.handleClose(),e.stopPropagation()},t.handleClose=function(){Object(I.default)("click_close_mentioned_obj",{mention_file_type:t.fileType}),t.props.handleClose()},t.handleBoxPreviewEventBusReady=function(e){e&&e.on(d.b.GET_PREVIEW_INFO_ERROR,function(e){e&&e.errorCode&&d.o.includes(e.errorCode)&&t.setState({isInaccessible:!0})})},t.onClickApplyPermission=function(){x.default.dispatch(Object(m.sendSuiteParentPermissionRequest)(t.fileToken,w.NUM_SUITE_TYPE.FILE,1,""))},t.renderWatermark=function(){return v.a.createElement(y.a,null)},t.renderInaccessibleComponent=function(e){return v.a.createElement(T.a,{errCode:e,onClickApplyPermission:t.onClickApplyPermission,canApplyPermission:t.canApplyPermission})},t}return l()(r,e),i()(r,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.motion,r=e.style,n=e.closable,i=e.handleDownload,a=e.fileAttrs,o=e.otherPermissions,s=this.state.isInaccessible,c=Object(E.mapBoxFileTypeToIcon)(this.fileType);return v.a.createElement("section",{style:r,className:h()("drive-modal",{modal_hidden:!t})},v.a.createElement("div",{className:"modal-header"},n&&v.a.createElement(v.a.Fragment,null,v.a.createElement("button",{className:"close-btn",onClick:this.handleClose},v.a.createElement(C.a,{width:26,height:26})),v.a.createElement("div",{className:"line"})),v.a.createElement("div",{className:"modal-title"},v.a.createElement(c,{className:"icon icon-placeholder"}),v.a.createElement("div",{className:"file-info"},v.a.createElement("div",{className:"file-name"},this.fileName),v.a.createElement("div",{className:"file-size"},this.fileSize))),v.a.createElement("div",{className:"modal-btns"},!s&&v.a.createElement(O.a,{onClick:i,tooltip:u("mention.download"),decisiveDownloadable:a.decisiveDownloadable}))),v.a.createElement("div",{className:"modal-body"},v.a.createElement(P,Object.assign({},this.commonBoxPreviewProps,{fileToken:this.fileToken,mountPoint:this.mountPoint,permission:{exportable:this.downloadable,copyable:Object(b.n)(o.copyable)},renderInaccessibleComponent:this.renderInaccessibleComponent,renderWatermark:this.renderWatermark,moduleId:"drive_modal_".concat(this.fileToken),showPresenterFollowerLocation:!1,onEventBusReady:this.handleBoxPreviewEventBusReady}))))}},{key:"fileType",get:function(){return this.props.fileAttrs.type}},{key:"fileSize",get:function(){var e=this.props.fileAttrs;return Object(g.g)(e.size)}},{key:"fileName",get:function(){return this.props.fileAttrs.name}},{key:"fileToken",get:function(){return this.props.fileAttrs.driveKey}},{key:"canApplyPermission",get:function(){var e=this.props.fileAttrs;return Boolean(e.canApplyPermission)}},{key:"mountPoint",get:function(){var e=this.props.fileAttrs,t=e.suiteType,r=e.token;return{type:k.mountPointTypeMap[t],token:r}}},{key:"downloadable",get:function(){var e=this.props,t=e.otherPermissions,r=e.fileAttrs;return void 0!==r.decisiveDownloadable?r.decisiveDownloadable:t&&t.exportable}}]),r}(v.a.PureComponent)}).call(this,j("2vAP"))},"7b5p":function(e,t,r){"use strict";var n=r("5cZX"),i=r("YsLn"),a=r("m/+l"),o=r("Ivgd"),s=function(e){return{currentSuiteIsDeleted:Object(n.n)(e),currentSuiteIsNotFound:Object(n.p)(e),currentSuiteIsForbidden:Object(n.o)(e),otherPermissions:Object(n.u)(e)}},c={setPreviewSDKDownload:i.i},u=Object(a.connect)(s,c)(o.a);r.d(t,"a",function(){return u})},A9lI:function(e,t,r){"use strict";var n=r("q1tI"),i=r.n(n),a=(r("Yc+F"),function(e){var t=e.className,r=void 0===t?"loader-placeholder layout-row layout-main-center layout-cross-center":t;return i.a.createElement("div",{className:r},i.a.createElement("div",{className:"loader loader-spinning"},i.a.createElement("span",{className:"loader-dot"},i.a.createElement("i",null),i.a.createElement("i",null),i.a.createElement("i",null),i.a.createElement("i",null))))});r.d(t,"a",function(){return a})},AVrj:function(e,t,r){"use strict";var n=r("DB7/");t.a=n.a},Ae4K:function(e,t,n){"use strict";var d={};n.r(d),n.d(d,"CancelTokenSource",function(){return x.CancelTokenSource}),n.d(d,"setEnvConfigs",function(){return z}),n.d(d,"CancelToken",function(){return F}),n.d(d,"getShouldUseNearbyDriveAPI",function(){return B}),n.d(d,"request",function(){return re}),n.d(d,"post",function(){return ie}),n.d(d,"postUrlEncoded",function(){return ae}),n.d(d,"postFormData",function(){return oe}),n.d(d,"importPostFormData",function(){return ce}),n.d(d,"importGet",function(){return ue});var c,u,i,b=n("BAjd"),r=n("RIqP"),h=n.n(r),a=n("J4zp"),C=n.n(a),o=n("o0o1"),I=n.n(o),s=n("yXPU"),f=n.n(s),l=n("lwsE"),p=n.n(l),v=n("W8MJ"),m=n.n(v),k=n("a1gu"),g=n.n(k),y=n("Nsbk"),w=n.n(y),E=n("7W2i"),O=n.n(E),T=n("7EGn"),x=n("vYB2"),D=n.n(x),P=n("Qyje"),_=n.n(P),S=n("95pV"),j=n("TJya"),M=n("qkt2"),N=n("EAIz");function z(e){var t=e.defaultNearbyDriveAPI,r=e.driveStreamAPIHost,n=e.isNearbyDriveAPIEnabled;c=t,u=r,i=n}var L=D.a.create({withCredentials:!0});Object(S.a)(L);var R=function(e){return"".concat(L.defaults.baseURL).concat(e).replace(/(?:^.*\/\/[^\/]+\/)|(?:\/*(?:\?.*)?$)/g,"").replace(/\//g,".")},F=D.a.CancelToken,U=!1;function B(){return!U&&i&&c}var W,H,Q=20,V=16e3,q=2e3;(H=W=W||{}).INCREASE="increase",H.REDUCE="reduce";var K=new Map,Y=new Map;function Z(e,t){var r=K.get(e),n=r||0;t===W.INCREASE?n=r?Math.min(V,2*r):q:t===W.REDUCE&&(n=r&&q<r?r/2:0),K.set(e,n)}function J(e){Y.delete(e)}function X(e){var t=Y.get(e),r=t?t+1:1;Y.set(e,r)}function $(e){X(e),Z(e,W.INCREASE)}function ee(e){J(e),Z(e,W.REDUCE)}function te(e){var t=e.match(/^https?\:\/\/[^\/?#]*([^?#]*).*$/);return t&&t[1]?t[1]:e}var re=function(){var t=f()(I.a.mark(function e(t){var r,n,i,a,o,s;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=te(t.url),e.prev=1,n=K.get(r))return e.next=6,Object(M.i)(n);e.next=6;break;case 6:return e.next=8,L(t);case 8:if(i=e.sent,0!==(a=i.data).code)throw{response:i};e.next=12;break;case 12:return ee(r),e.abrupt("return",a.data);case 16:if(e.prev=16,e.t0=e.catch(1),!e.t0.response||429!==e.t0.response.status){e.next=24;break}if((o=Y.get(r))&&Q<=o)throw e.t0.response.data;e.next=22;break;case 22:return $(r),e.abrupt("return",re(t));case 24:if(s=401===Object(T.default)(e.t0,"response.status")||Object(T.default)(e.t0,"response.data.code")===b.i,u&&s&&B()&&t.url.includes(c))return U=!0,t.url=t.url.replace("https://".concat(c),u),e.abrupt("return",re(t));e.next=29;break;case 29:if(ee(r),e.t0.response){e.next=32;break}throw new Error("Network Error");case 32:throw e.t0.response.data;case 33:case"end":return e.stop()}},e,null,[[1,16]])}));return function(e){return t.apply(this,arguments)}}(),ne=function(){var n=f()(I.a.mark(function e(t,r,n){var i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object.assign({},Object(j.a)(),{"x-command":R(t)},n?n.headers:null),e.t0=N.e,e.t0)return e.t1=Object,e.t2=i,e.next=7,Object(N.c)();e.next=9;break;case 7:e.t3=e.sent,e.t1.assign.call(e.t1,e.t2,e.t3);case 9:return e.abrupt("return",re(Object.assign({},n,{url:t,method:"post",headers:i,data:r})));case 10:case"end":return e.stop()}},e)}));return function(e,t,r){return n.apply(this,arguments)}}(),ie=function(e,t,r){return ne(e,t,r)},ae=function(e,t,r){return ne(e,_.a.stringify(t),Object.assign({},r,{headers:Object.assign({"Content-Type":"application/x-www-form-urlencoded"},r?r.headers:null)}))},oe=function(e,t,r){return ne(e,t,Object.assign({},r,{headers:Object.assign({"Content-Type":"multipart/form-data"},r?r.headers:null)}))},se=function(){var t=f()(I.a.mark(function e(t){var r,n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t);case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),e.t0.response){e.next=12;break}throw new Error("Network Error");case 12:throw e.t0.response.data;case 13:case"end":return e.stop()}},e,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}(),ce=function(e,t,r){return se(Object.assign({},r,{url:e,method:"post",headers:Object.assign({"x-command":R(e),"Content-Type":"multipart/form-data"},r?r.headers:null),data:t}))},ue=function(e,t,r){return se(Object.assign({},r,{url:e,method:"get",headers:Object.assign({"x-command":R(e)},r?r.headers:null),params:t}))},le=n("gfe6"),de=n("QM+C"),pe=n("D7h9"),he=n("5cZX"),fe=function(){function r(e){var c=this;p()(this,r),this.tasks=[],this.events=[],this._retry=!1,this.defaults={simultaneousUploads:3,dragOverClass:"dragover",throttleProgressCallbacks:1,prepareTarget:b.b.PREPARE,testTarget:b.b.CHUNK_CHECK,uploadTarget:b.b.CHUNK_UPLOAD,finishTarget:b.b.FINISH,xhrTimeout:0,clearInput:!0,setChunkTypeFromFile:!1,fastModeEnabled:!1,getMountPoint:function(){return""},shouldAddToRecents:!0,getParentToken:function(){return""},createDirectory:function(){return Promise.resolve("")},uploadChunk:function(){return Promise.resolve("")},uploadMergedChunk:function(){return Promise.resolve("")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.name+" is too small, please upload files larger than "+Object(M.a)(c.getOpt(b.l.minFileSize))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(e,t,r){alert(e.name+" is too large, please upload files less than "+Object(M.a)(c.getOpt(b.l.maxFileSize))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.name+" has type not allowed, please upload files of type "+c.getOpt(b.l.fileType)+".")},emptyDirectoryCallback:function(e){alert(e.name+"contains no file")},importableType:[],directoryNotImportableCallback:function(e){alert(e.name+"cannot be imported")},preferMergedChunks:!0,isImportUploadMixedEnabled:!1},this.onDrop=function(e){var t,r,n,i,a,o,s;c.triggerDragSideEffects(e,!1),e.preventDefault(),Object(he.h)(pe.default.getState())!==de.FOLDER_PERMISSION.READABLE?e.dataTransfer&&(r=(t=e.dataTransfer).items,n=t.files,r&&r[0]&&"string"===r[0].kind||(r||n)&&(i=r||n,o=(a=c.opts).importUploadMixedModePredicator,s=a.onImportUploadMixedTask,"function"==typeof o&&o(i,e)&&"function"==typeof s?s(i,e):c.loadFiles(i,e))):console.info("Current folder is read-only.")},this.onDragLeave=function(e){e.currentTarget&&c.triggerDragSideEffects(e,!1)},this.onDragOverEnter=function(e){e.preventDefault();var t=e.dataTransfer;t&&(t.types.indexOf&&0<=t.types.indexOf("Files")?(e.stopPropagation(),t.dropEffect="copy",t.effectAllowed="copy",c.triggerDragSideEffects(e,!0)):(t.dropEffect="none",t.effectAllowed="none"))},this.triggerDragSideEffects=function(e,t){c.toggleDragOverClass(e,t),c.triggerDragHandler(t)},this.toggleDragOverClass=function(e,t){var r=c.getOpt(b.l.dragOverClass);t?e.currentTarget.classList.add(r):e.currentTarget.classList.remove(r)},this.triggerDragHandler=function(e){var t=e?c.getOpt(b.l.onDragStart):c.getOpt(b.l.onDragEnd);t&&t()},this.processItem=function(e,t,r){if(!e)return null;if(e instanceof File||e.isFile)return ot(e,c,t,r);var n=r&&r.isImport;return it(e,c,t,{isImport:n})},this.onOnline=function(){c.fire(b.k.online),(c.pausedByOffline||c.filesAddedWhenOffline)&&(c.upload(!0),c.pausedByOffline=!1,c.filesAddedWhenOffline=!1)},this.onOffline=function(){c.fire(b.k.offline),c.isUploading&&(c.pausedByOffline=!0,c.pauseAll())},this.handleDropEvent=function(e){c.onDrop(e)},this.handleChangeEvent=function(e){var t=e.target;c.loadFiles(t.files,e),t.value=""},this.supported=Boolean(FileList&&File&&Blob&&Blob.prototype.slice),this.opts=e||{};var t=this.opts;z({defaultNearbyDriveAPI:t.defaultNearbyDriveAPI,driveStreamAPIHost:t.driveStreamAPIHost,isNearbyDriveAPIEnabled:t.isNearbyDriveAPIEnabled})}function e(){return t.apply(this,arguments)}var t,n;function i(e,t,r){return n.apply(this,arguments)}return m()(r,[{key:"getOpt",value:function(e){var t=this;if(Array.isArray(e)){var r={};return e.forEach(function(e){r[e]=t.getOpt(e)}),r}return(void 0!==this.opts[e]?this.opts:this.defaults)[e]}},{key:"on",value:function(e,t){this.events.push(e.toLowerCase(),t)}},{key:"fire",value:function(e){for(var t=e.toLowerCase(),r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var a=0;a<=this.events.length;a+=2)this.events[a]===t&&this.events[a+1].apply(this,n),"catchall"===this.events[a]&&this.events[a+1].apply(null,[e].concat(n));"fileerror"===e?this.fire(b.k.error,n[1],n[0]):"fileprogress"===e&&this.fire(b.k.progress)}},{key:"processDirectory",value:function(e,t,r){return it(e,this,t,r)}},{key:"loadFiles",value:(n=f()(I.a.mark(function e(t,r,n){var i,a,o,s,c,u,l,d,p,h,f,v,m;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n&&n.isDirectory,!t||0===t.length&&!i)return e.abrupt("return");e.next=3;break;case 3:if(this.fire(b.k.beforeAdd),a=Array.from(t).map(function(e){return e instanceof DataTransferItem?e.webkitGetAsEntry():e}),i&&1===a.length&&""===a[0].webkitRelativePath&&(i=!1),o=[],s=n&&n.versionInfo,c=n&&n.parentToken,i)return u=n&&n.isImport,e.t0=o,e.next=14,this.processDirectory(a,r,{isImport:u,parentToken:c});e.next=18;break;case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=49;break;case 18:d=!(l=!0),p=void 0,e.prev=21,h=a[Symbol.iterator]();case 23:if(l=(f=h.next()).done){e.next=35;break}return v=f.value,m=void 0,m=n&&"function"==typeof n.jobTypePredicator?n.jobTypePredicator(v)===b.j.Import:n&&n.isImport,e.t2=o,e.next=30,this.processItem(v,r,{isImport:m,versionInfo:s,parentToken:c,jobTypePredicator:n?n.jobTypePredicator:void 0});case 30:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 32:l=!0,e.next=23;break;case 35:e.next=41;break;case 37:e.prev=37,e.t4=e.catch(21),d=!0,p=e.t4;case 41:e.prev=41,e.prev=42,l||null==h.return||h.return();case 44:if(e.prev=44,d)throw p;e.next=47;break;case 47:return e.finish(44);case 48:return e.finish(41);case 49:this.appendTaskQueue(o,r);case 50:case"end":return e.stop()}},e,this,[[21,37,41,49],[42,,44,48]])})),i)},{key:"appendTaskQueue",value:function(e,t){var r,n=e.filter(function(e){return e});(r=this.tasks).push.apply(r,h()(n)),this.fire(b.k.tasksAdded,n,t),Object(le.c)()||(this.filesAddedWhenOffline=!0)}},{key:"uploadNextChunk",value:(t=f()(I.a.mark(function e(){var t,r,n,i,a,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!(t=!0),n=void 0,e.prev=3,i=this.tasks[Symbol.iterator]();case 5:if(t=(a=i.next()).done){e.next=15;break}return o=a.value,e.next=9,o.upload();case 9:if(e.sent)return e.abrupt("return",!0);e.next=12;break;case 12:t=!0,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),r=!0,n=e.t0;case 21:e.prev=21,e.prev=22,t||null==i.return||i.return();case 24:if(e.prev=24,r)throw n;e.next=27;break;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return this.tasks.every(function(e){return e.completed})&&this.fire(b.k.complete),e.abrupt("return",!1);case 32:case"end":return e.stop()}},e,this,[[3,17,21,29],[22,,24,28]])})),e)},{key:"assignBrowse",value:function(e,t){var n=this,i=t.isDirectory,a=t.allowMultiple,o=t.isImport;(e=Object(M.f)(e)).forEach(function(e){var t;"INPUT"===e.tagName&&"file"===e.type?t=e:((t=document.createElement("input")).setAttribute("type","file"),t.style.display="none",e.addEventListener("click",function(){t.style.opacity=0,t.style.display="block",t.focus(),t.click(),t.style.display="none"},!1),e.appendChild(t)),a?t.setAttribute("multiple","multiple"):t.removeAttribute("multiple"),i?t.setAttribute("webkitdirectory","webkitdirectory"):t.removeAttribute("webkitdirectory");var r=n.getOpt(b.l.fileType);void 0!==r&&1<=r.length?t.setAttribute("accept",r.map(function(e){return(e=e.replace(/\s/g,"").toLowerCase()).match(/^[^.][^/]+$/)&&(e="."+e),e}).join(",")):t.removeAttribute("accept"),t.addEventListener("change",function(e){n.loadFiles(e.target.files,e,{isImport:o,isDirectory:i}),n.getOpt(b.l.clearInput)&&(e.target.value="")},!1)})}},{key:"assignDrop",value:function(e){var t=this;(e=Object(M.f)(e)).forEach(function(e){e.addEventListener("dragover",t.onDragOverEnter,!1),e.addEventListener("dragenter",t.onDragOverEnter,!1),e.addEventListener("dragleave",t.onDragLeave,!1),e.addEventListener("drop",t.onDrop,!1)})}},{key:"unAssignDrop",value:function(e){var t=this;(e=Object(M.f)(e)).forEach(function(e){e.removeEventListener("dragover",t.onDragOverEnter),e.removeEventListener("dragenter",t.onDragOverEnter),e.removeEventListener("dragleave",t.onDragLeave),e.removeEventListener("drop",t.onDrop)})}},{key:"setNetworkCheck",value:function(e){e?(window.addEventListener("online",this.onOnline),window.addEventListener("offline",this.onOffline)):(window.removeEventListener("online",this.onOnline),window.removeEventListener("offline",this.onOffline))}},{key:"upload",value:function(e){if(Object(le.c)()&&(!this.isUploading||this._retry)){this._retry=!1,e&&this.tasks.forEach(function(e){return e.resume()}),this.fire(b.k.uploadStart);for(var t=this.getOpt(b.l.simultaneousUploads),r=0;r<t;r++)this.uploadNextChunk()}}},{key:"pauseAll",value:function(){this.tasks.forEach(function(e){e.abort(),e.pause(!0)}),this.fire(b.k.pauseAll)}},{key:"pause",value:function(t){var e=this.tasks.find(function(e){return e.uuid===t});e?(e.abort(),e.pause(!0),this.fire(b.k.pause,e)):console.error("Cannot find file with uuid:",t)}},{key:"retry",value:function(t){var e;Object(le.c)()&&(this._retry=!0,(e=this.tasks.find(function(e){return e.uuid===t}))?e.retry():console.error("Cannot find file with uuid:",t))}},{key:"retryAll",value:function(e){var t=this;e&&0!==e.length&&e.forEach(function(e){t.retry(e)})}},{key:"rePending",value:function(t){var e;Object(le.c)()&&((e=this.tasks.find(function(e){return e.uuid===t}))?(e.resume(),this.fire(b.k.pending,e)):console.error("Cannot find file with uuid:",t))}},{key:"rePendingAll",value:function(e){var t=this;e&&0!==e.length&&(e.forEach(function(e){t.rePending(e)}),this.isUploading||this.upload())}},{key:"cancel",value:function(t){var e=this.tasks.find(function(e){return e.uuid===t});e?(e.cancel(),this.fire(b.k.cancel,e)):console.error("Cannot find file with uuid:",t)}},{key:"cancelAll",value:function(){for(var e=this.tasks.length-1;0<=e;e--)this.tasks[e].cancel();this.fire(b.k.cancelAll)}},{key:"progress",value:function(){var r=0,n=0;return this.tasks.forEach(function(e){var t=e.size;r+=e instanceof lt?e.sizeProgress*t:e.progress*t,n+=t}),0<n?r/n:0}},{key:"uploadedSize",value:function(){return this.tasks.reduce(function(e,t){return t instanceof lt?e+t.sizeProgress*t.size:e+t.progress*t.size},0)}},{key:"addFile",value:function(e,t,r){this.loadFiles([e],t,r)}},{key:"addFiles",value:function(e,t,r){this.loadFiles(e,t,r)}},{key:"removeTask",value:function(e){for(var t=this.tasks.length-1;0<=t;t--)this.tasks[t]===e&&this.tasks.splice(t,1)}},{key:"getFromUniqueIdentifier",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=this.tasks[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o instanceof lt){var s=o.getFromUniqueIdentifier(e);if(s)return s}else if(o.uuid===e)return o}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return null}},{key:"getSize",value:function(){return this.tasks.reduce(function(e,t){return e+t.size},0)}},{key:"isUploading",get:function(){return this.tasks.some(function(e){return e.isUploading})}}]),r}(),ve=function(){function a(e){var t,r=e.uploaderObj,n=e.rootTask,i=e.parentToken;p()(this,a),this.uploaderObj=r,n?this.rootTask=n:(t=r.getOpt(b.l.getParentToken),this.parentToken=i||t())}return m()(a,[{key:"getOpt",value:function(e){return this.uploaderObj.getOpt(e)}},{key:"fire",value:function(e){for(var r=this,t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Array.isArray(e)||(e=[e]),e.forEach(function(e){var t;return(t=r.uploaderObj).fire.apply(t,[e].concat(n))})}},{key:"parentToken",set:function(e){this._parentToken=e},get:function(){return this._parentToken}},{key:"rootTask",set:function(e){this._rootTask=e},get:function(){return this._rootTask||this}},{key:"isTask",get:function(){return this.rootTask===this}}]),a}(),me=function(e){function c(e){var t,r=e.uploaderObj,n=e.file,i=e.uuid,a=e.rootTask,o=e.parentToken,s=e.isJobTypeDeterminedByPredicator;return p()(this,c),(t=g()(this,w()(c).call(this,{uploaderObj:r,rootTask:a,parentToken:o}))).error=!1,t.paused=!1,t.resumed=!1,t.file=n,t.uuid=i,t.isJobTypeDeterminedByPredicator=!!s,t}return O()(c,e),m()(c,[{key:"checkRootTaskProgress",value:function(){this.rootTask instanceof dt&&this.rootTask.checkTaskProgress()}},{key:"pause",value:function(e){this.paused=void 0===e?!this.paused:e}},{key:"resume",value:function(){this.pause(!1),this.resumed=!0}},{key:"isPaused",get:function(){return this.paused}},{key:"name",get:function(){return this.file?this.file.name:""}},{key:"type",get:function(){return this.file?this.file.type:""}},{key:"size",get:function(){return this.file?this.file.size:0}}]),c}(ve),ke=me,be=n("cDf5"),ge=n.n(be),ye=n("PJYZ"),we=n.n(ye),Ee=[b.e.PENDING,b.e.ERROR],Ce=function(e){function i(e){var r;p()(this,i),(r=g()(this,w()(i).call(this,e))).chunks=[],r.cachedChunks=[],r.startTime=0,r.timeCost=0,r.chunkEvent=function(e,t){switch(e){case b.c.PROGRESS:if(r.paused)break;r.fire([b.k.fileProgress,b.k.collectReport],r.rootTask,t);break;case b.c.ERROR:r.abort(),r.markError(),r.cachedChunks=r.chunks,r.chunks=[],r.fire([b.k.taskError,b.k.collectReport],we()(r),Object.assign({},"object"===ge()(t)?t:null,{type:b.o.ChunkError})),r.isTask||r.checkRootTaskProgress();break;case b.c.SUCCESS:if(r.error||!r.chunks||0===r.chunks.length)return;r.fire([b.k.fileProgress,b.k.collectReport],r.rootTask,Object.assign({},"object"===ge()(t)?t:null,{type:b.o.ChunkSuccess})),r.readyToFinish&&r.finish(t);break;case b.c.RETRY:r.isTask&&r.fire(b.k.taskRetry,we()(r));break;case b.c.REPORT_ERROR:r.fire(b.k.collectReport,r.rootTask,Object.assign({},"object"===ge()(t)?t:null,{type:b.o.ChunkError}))}},r._prevProgress=0;var t=e.versionInfo;t&&(r.fileToken=t.fileToken,r.memberId=t.memberId,r.versionUpload=!0);var n=r.getOpt(b.l.getMountPoint);return r.mountPoint=n(),r}function t(e){return r.apply(this,arguments)}var r,n,a;function o(e){return n.apply(this,arguments)}function s(){return a.apply(this,arguments)}return O()(i,e),m()(i,[{key:"upload",value:(a=f()(I.a.mark(function e(){var t,r,n,i,a,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(le.c)()){e.next=2;break}return e.abrupt("return",!1);case 2:return this._bootstrapKickedOff||(this._bootstrapKickedOff=!0,this._bootstrapTask=this.bootstrap()),e.next=5,this._bootstrapTask;case 5:if(this.paused)return e.abrupt("return",!1);e.next=7;break;case 7:this.resumed&&(this.markStartTime(),this.resumed=!1),r=!(t=!0),n=void 0,e.prev=11,i=this.chunks[Symbol.iterator]();case 13:if(t=(a=i.next()).done){e.next=23;break}if(o=a.value,Ee.includes(o.status()))return e.next=19,o.send();e.next=20;break;case 19:return e.abrupt("return",!0);case 20:t=!0,e.next=13;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(11),r=!0,n=e.t0;case 29:e.prev=29,e.prev=30,t||null==i.return||i.return();case 32:if(e.prev=32,r)throw n;e.next=35;break;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return e.abrupt("return",!1);case 38:case"end":return e.stop()}},e,this,[[11,25,29,37],[30,,32,36]])})),s)},{key:"retry",value:function(){Object(le.c)()&&(this.paused&&(this.cachedChunks=this.chunks),this._bootstrapTask=this.bootstrap(!0),this.isTask&&this.uploaderObj.upload(),this.pause(!1))}},{key:"abort",value:function(){var t=0;this.chunks.forEach(function(e){e.status()===b.e.UPLOADING&&(e.abort(),t++)}),this.isTask&&0<t&&this.fire(b.k.fileProgress,this),this.addTimeCost()}},{key:"cancel",value:function(){var t=this,e=this.chunks;this.chunks=[],e.forEach(function(e){e.status()===b.e.UPLOADING&&(e.abort(),t.uploaderObj.uploadNextChunk())}),this.isTask&&(this.uploaderObj.removeTask(this),this.fire(b.k.fileProgress,this))}},{key:"bootstrap",value:(n=f()(I.a.mark(function e(t){var r,n,i,a,o,s,c,u,l,d,p;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.abort(),this.error=!1,this.markStartTime(),this.resumed=!1,t&&this.cachedChunks&&0<this.cachedChunks.length)return this.chunks=this.cachedChunks,this.cachedChunks=[],this.readyToFinish&&this.finish(""),e.abrupt("return");e.next=9;break;case 9:if(n="",e.prev=10,void 0===this.parentToken)throw new Error("Mount node token unspecified");e.next=13;break;case 13:return n=Object(M.d)(),e.next=16,ie(this.getOpt(b.l.prepareTarget),Object(M.g)({name:this.name,mount_node_token:this.parentToken,mount_point:this.mountPoint,size:this.size,file_token:this.fileToken}),{headers:Object.assign({"x-request-id":n,"x-tt-trace-id":n},N.e?Object(N.d)():{})});case 16:r=e.sent,e.next=26;break;case 19:return e.prev=19,e.t0=e.catch(10),this.markError(),this.fire(b.k.collectReport,this,{type:b.o.FilePrepareError,reqId:n,msg:e.t0.message}),this.isTask?this.fire(b.k.taskError,this,{type:b.o.FilePrepareError,isIllegal:e.t0&&e.t0.code===b.h}):this.checkRootTaskProgress(),e.t0&&e.t0.code===b.g&&(this.fire(b.k.usageLimitReached,b.m.upload),this.uploaderObj.pauseAll()),e.abrupt("return");case 26:if(i=r.block_size,a=r.num_blocks,o=r.upload_id,s=r.option_block_size,this.chunkSize=i,this.totalChunks=a,this.uploadId=o,this.suggestedChunkSize=s,0===this.totalChunks)return this.finish(""),e.abrupt("return");e.next=34;break;case 34:if(this.chunks=[],this._prevProgress=0,c={uploaderObj:this.uploaderObj,fileObj:this,callback:this.chunkEvent},this.shouldUseMergedChunks)for(u=this.suggestedChunkSize/this.chunkSize,l=Math.ceil(this.totalChunks/u),d=0;d<l;d++)this.chunks.push(new $e(Object.assign({},c,{chunkSize:this.chunkSize,offset:d,numOfChunks:u})));else for(p=0;p<this.totalChunks;p++)this.chunks.push(new Ze(Object.assign({},c,{chunkSize:this.chunkSize,offset:p})));case 38:case"end":return e.stop()}},e,this,[[10,19]])})),o)},{key:"markStartTime",value:function(){this.startTime=Date.now()}},{key:"markError",value:function(){this.error=!0,this.addTimeCost()}},{key:"addTimeCost",value:function(){this.startTime&&(this.timeCost+=Date.now()-this.startTime,this.startTime=0)}},{key:"finish",value:(r=f()(I.a.mark(function e(t){var r,n,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.prev=1,r=Object(M.d)(),n=this.getOpt(b.l.shouldAddToRecents),e.next=6,ie(this.getOpt(b.l.finishTarget),Object(M.g)({upload_id:this.uploadId,num_blocks:this.totalChunks,member_id:this.memberId,push_open_history_record:this.isTask&&n?null:0}),{headers:{"x-request-id":r,"x-tt-trace-id":r}});case 6:(i=e.sent).file_token&&(this.fileToken=i.file_token,this.fileVersion=i.version,this.fileDataVersion=i.data_version,this.addTimeCost(),this.reportFileSuccess(),this.isTask?this.fire(b.k.taskSuccess,this,t):this.checkRootTaskProgress()),e.next=17;break;case 10:e.prev=10,e.t0=e.catch(1),this.cachedChunks=this.chunks,this.markError(),this.fire(b.k.collectReport,this,{type:b.o.FileFinishError,reqId:r,msg:e.t0.message}),this.isTask?this.fire(b.k.taskError,this,{type:b.o.FileFinishError}):this.checkRootTaskProgress(),e.t0&&e.t0.code&&this.fire(b.k.fileError,e.t0.code);case 17:case"end":return e.stop()}},e,this,[[1,10]])})),t)},{key:"reportFileSuccess",value:function(){var e=this.size,t=this.timeCost,r=e&&t?Math.round(e/t*1e3):void 0;this.fire(b.k.collectReport,this,{type:b.o.FileSuccess,fileSize:e,timeCost:t,uploadSpeed:r})}},{key:"setRootTaskUploadingChunk",value:function(e){this.isTask||(this.rootTask.uploadingChunk=e)}},{key:"pushRootTaskUploadedChunk",value:function(e){this.isTask||this.rootTask.uploadedChunks.push(e)}},{key:"progress",get:function(){if(this.error)return 1;var t=0,r=!1;return this.chunks.forEach(function(e){e.status()===b.e.ERROR&&(r=!0),t+=e.progress(!0)}),t=r||.99999<t?1:t,t=Math.max(this._prevProgress,t),r||(this._prevProgress=t),t}},{key:"isUploading",get:function(){var e=this.progress,t=this.chunks.some(function(e){return e.status()===b.e.UPLOADING}),r=Boolean(0<e&&e<1&&!this.error&&!this.paused);return t||r}},{key:"completed",get:function(){return!!this.fileVersion&&this.readyToFinish}},{key:"shouldUseMergedChunks",get:function(){if(!this.uploaderObj.getOpt(b.l.preferMergedChunks)||!this.suggestedChunkSize)return!1;var e=this.suggestedChunkSize/this.chunkSize;return e===Math.round(e)}},{key:"readyToFinish",get:function(){return!!this.uploadId&&!this.chunks.some(function(e){return e.status()!==b.e.SUCCESS})}}]),i}(me),Ie=function(){function s(e){var r=this,t=e.uploaderObj,n=e.fileObj,i=e.offset,a=e.chunkSize,o=e.callback;p()(this,s),this.size=0,this.uploading=!1,this.reqId="",this.timeCost=0,this.aborted=!1,this.cancel=null,this.onUploadProgress=function(e){var t=Date.now()-r.lastProgressCallback;t>1e3*r.uploaderObj.getOpt(b.l.throttleProgressCallbacks)&&(r.reportProgressMetric(e.loaded-r.lastReportedLoaded,t),r.lastProgressCallback=Date.now(),r.lastReportedLoaded=e.loaded),r.loaded=e.loaded||0},this.setCancelToken=function(e){return r.cancel=e},this.uploaderObj=t,this.fileObj=n,this.fileObjSize=n.size,this.offset=i,this.callback=o,this.chunkSize=a,this.chunkType=this.uploaderObj.getOpt(b.l.setChunkTypeFromFile)?this.fileObj.file.type:"",this.loaded=0,this.lastReportedLoaded=0}return m()(s,[{key:"triggerNext",value:function(e,t){this.uploading=!1,this.callback(e,this.getMessage(t)),this.uploaderObj.uploadNextChunk()}},{key:"reportProgressMetric",value:function(e,t){0<e&&this.callback(b.c.PROGRESS,{metric:!0,diffSize:e,diffTime:t})}},{key:"reportError",value:function(e){this.callback(b.c.REPORT_ERROR,this.getMessage(e))}},{key:"abort",value:function(){this.cancel&&(this.cancel(),this.cancel=null,this.aborted=!0)}},{key:"status",value:function(){return this.uploading?b.e.UPLOADING:this.loaded?b.e.SUCCESS:this.aborted?b.e.ABORT:this.cancel?b.e.ERROR:b.e.PENDING}},{key:"getMessage",value:function(e){var t=this.size,r=this.timeCost,n=t&&r?Math.round(t/r*1e3):void 0,i={offset:this.offset,status:this.status(),responseData:this.responseData||"",reqId:this.reqId,chunkSize:t,timeCost:r,uploadSpeed:n};return e&&(i.msg=e),i}},{key:"progress",value:function(e){var t=e?this.size/this.fileObjSize:1;switch(this.status()){case b.e.SUCCESS:case b.e.ERROR:return+t;case b.e.PENDING:return 0;default:return this.loaded/this.size*t}}},{key:"loadedSize",get:function(){return this.loaded}}]),s}(),Oe=n("2spZ"),Te=n("iP/4");function xe(e){return crypto.subtle.digest("SHA-256",e).then(De)}function Ae(e){return _e(new Uint8Array(e)).toString()}function De(e){for(var t=new Uint8Array(e),r="",n=0,i=t.byteLength;n<i;n++)r+=String.fromCharCode(t[n]);return btoa(r)}function Pe(e){for(var t=new Uint8Array(e.length),r=0,n=e.length;r<n;++r)t[r]=255&e.charCodeAt(r);return t}function _e(e){e="string"==typeof e?Pe(e):e;for(var t=new Uint32Array([1,0,e.length,0,0,65521,5552,0]),r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6];0<i;){for(o=c<i?c:i,i-=o;n+=r+=e[a++],--o;);r%=s,n%=s}return(n<<16|r)>>>0}var Se,je,Me={calcSHA256Async:xe,calcADLER32:Ae},Ne={HASH_ADLER32:"adler32",HASH_AND_CHECKSUM:"hash_and_checksum",HASH_SHA256:"sha256"},ze=new Map;function Le(){return Re.apply(this,arguments)}function Re(){return(Re=f()(I.a.mark(function e(){var t,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.e("boxWorker").then(n.t.bind(null,"TD40",7));case 3:t=e.sent,r=t.default,(Se=new r).onmessage=Fe,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to load box.worker.js",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}function Fe(e){var t,r=e.data,n=r.callerId,i=r.content,a=r.errorMsg;ze.has(n)&&(t=ze.get(n),ze.delete(n),a?t.reject(new Error(a)):t.resolve(i))}function Ue(){return+new Date+Math.random()}function Be(e,t,r,n){return We.apply(this,arguments)}function We(){return(We=f()(I.a.mark(function e(t,r,n,i){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Se){e.next=5;break}return je=je||Le(),e.next=4,je;case 4:je=null;case 5:Se.postMessage({callerId:t,type:r,content:n}),ze.set(t,i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var He=function(i){return function(r){var n=Ue();return new Promise(function(e,t){Be(n,i,r,{resolve:e,reject:t})})}},Ge=He(Ne.HASH_SHA256);function Qe(e){return Te.a.isEdge?Me.calcSHA256Async(e):Ge(e)}var Ve,qe,Ke=He(Ne.HASH_ADLER32),Ye=He(Ne.HASH_AND_CHECKSUM),Ze=function(e){function r(e){var t;return p()(this,r),(t=g()(this,w()(r).call(this,e))).startByte=t.offset*t.chunkSize,t.endByte=Math.min(t.fileObjSize,(t.offset+1)*t.chunkSize),t.size=t.endByte-t.startByte,t.doUploadChunk=t.uploaderObj.getOpt(b.l.uploadChunk),t}function t(e,t){return n.apply(this,arguments)}var n,i,a,o;function s(e){return i.apply(this,arguments)}function c(e){return a.apply(this,arguments)}function u(){return o.apply(this,arguments)}return O()(r,e),m()(r,[{key:"send",value:(o=f()(I.a.mark(function e(){var t,r,n,i,a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.uploading=!0,t=this.fileObj.file.slice(this.startByte,this.endByte,this.chunkType),e.next=4,this.calcHashAndChecksum(t);case 4:return r=e.sent,n=r.hash,i=r.checksum,a=this.size,e.next=10,this.checkChunkExistence({hash:n,checksum:i,size:a});case 10:if(!e.sent){e.next=16;break}this.loaded=this.size,this.triggerNext(b.c.SUCCESS),e.next=18;break;case 16:return e.next=18,this.uploadChunk({sliceData:t,checksum:i,size:a},b.d);case 18:case"end":return e.stop()}},e,this)})),u)},{key:"checkChunkExistence",value:(a=f()(I.a.mark(function e(t){var r,n,i,a,o,s;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.hash,n=t.checksum,i=t.size,this.uploaderObj.getOpt(b.l.fastModeEnabled)){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,a=Date.now(),e.next=8,ie(this.uploaderObj.getOpt(b.l.testTarget),{upload_id:this.fileObj.uploadId,seq:this.offset,hash:r,checksum:n,size:i});case 8:return o=e.sent,this.timeCost=Date.now()-a,s=Boolean(o.exist),e.abrupt("return",s);case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",!1);case 17:case"end":return e.stop()}},e,this,[[4,14]])})),c)},{key:"calcHashAndChecksum",value:(i=f()(I.a.mark(function e(t){var r,n,i,a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.h)(t);case 2:if(r=e.sent,Te.a.isEdge)return e.next=6,Qe(r);e.next=12;break;case 6:return n=e.sent,e.next=9,Ke(r);case 9:i=e.sent,e.next=17;break;case 12:return e.next=14,Ye(r);case 14:a=e.sent,n=a.hash,i=a.checksum;case 17:return e.abrupt("return",{hash:n,checksum:i});case 18:case"end":return e.stop()}},e)})),s)},{key:"uploadChunk",value:(n=f()(I.a.mark(function e(t,r){var n,i,a,o,s,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sliceData,i=t.checksum,a=t.size,e.prev=1,this.callback(b.c.PROGRESS),this.fileObj.setRootTaskUploadingChunk(this),this.reqId=Object(M.d)(),o=Date.now(),this.lastProgressCallback=o,e.next=9,this.doUploadChunk({request:d,uploadId:this.fileObj.uploadId,offset:this.offset,checksum:i,sliceData:n,reqId:this.reqId,onUploadProgress:this.onUploadProgress,setCancelToken:this.setCancelToken});case 9:s=e.sent,this.cancel=null,c=Date.now(),this.timeCost=c-o,this.responseData=s,0===this.loaded&&this.reportError("Incorrect loaded value"),this.loaded=a,this.reportProgressMetric(a-this.lastReportedLoaded,c-this.lastProgressCallback),this.fileObj.pushRootTaskUploadedChunk(this),this.triggerNext(b.c.SUCCESS),e.next=40;break;case 21:if(e.prev=21,e.t0=e.catch(1),this.loaded=0,this.lastReportedLoaded=0,!Object(M.e)()||this.aborted){e.next=37;break}if(0<r)return this.reportError(e.t0.message),e.next=30,Object(Oe.c)(1e3);e.next=34;break;case 30:return e.next=32,this.uploadChunk({sliceData:n,checksum:i,size:a},r-1);case 32:e.next=35;break;case 34:this.triggerNext(b.c.ERROR,e.t0.message);case 35:e.next=40;break;case 37:this.aborted=!1,this.uploading=!1,this.cancel=null;case 40:return e.prev=40,this.fileObj.setRootTaskUploadingChunk(null),e.finish(40);case 43:case"end":return e.stop()}},e,this,[[1,21,40,43]])})),t)}]),r}(Ie),Je=n("QILm"),Xe=n.n(Je),$e=function(e){function o(e){var t,r=e.numOfChunks,n=Xe()(e,["numOfChunks"]);p()(this,o);var i=(t=g()(this,w()(o).call(this,n))).chunkSize*r;t.startByte=t.offset*i,t.endByte=Math.min(t.fileObjSize,(t.offset+1)*i),t.size=t.endByte-t.startByte,t.actualNumOfSubChunks=Math.ceil(t.size/t.chunkSize),t.startSubChunkIndex=t.offset*r,t.uploadedSubChunkIndices=[];var a=Boolean(navigator.serviceWorker&&navigator.serviceWorker.controller);return t.strategy=a?"simple":"optimized",t.doUploadMergedChunk=t.uploaderObj.getOpt(b.l.uploadMergedChunk),t}function t(e){return r.apply(this,arguments)}var r,n,i;function a(e){return n.apply(this,arguments)}function s(){return i.apply(this,arguments)}return O()(o,e),m()(o,[{key:"send",value:(i=f()(I.a.mark(function e(){var t,r,n,i=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<i.length&&void 0!==i[0]?i[0]:b.d,e.prev=1,this.uploading=!0,r=this.seqList,e.next=6,this.getPendingSliceData(r);case 6:return n=e.sent,e.next=9,this.uploadChunk(Object.assign({},n,{seqList:r}));case 9:e.next=30;break;case 11:if(e.prev=11,e.t0=e.catch(1),this.loaded=0,this.lastReportedLoaded=0,!Object(M.e)()||this.aborted){e.next=27;break}if(0<t)return this.reportError(e.t0.message),e.next=20,Object(Oe.c)(1e3);e.next=24;break;case 20:return e.next=22,this.send(t-1);case 22:e.next=25;break;case 24:this.triggerNext(b.c.ERROR,e.t0.message);case 25:e.next=30;break;case 27:this.aborted=!1,this.uploading=!1,this.cancel=null;case 30:return e.prev=30,this.fileObj.setRootTaskUploadingChunk(null),e.finish(30);case 33:case"end":return e.stop()}},e,this,[[1,11,30,33]])})),s)},{key:"uploadChunk",value:(n=f()(I.a.mark(function e(t){var r,n,i,a,o,s,c,u,l=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.blob,n=t.checksums,i=t.size,a=t.seqList,this.callback(b.c.PROGRESS),this.fileObj.setRootTaskUploadingChunk(this),this.reqId=Object(M.d)(),o=Date.now(),this.lastProgressCallback=o,e.next=8,this.doUploadMergedChunk({request:d,uploadId:this.fileObj.uploadId,offset:this.offset,size:i,checksums:n,seqList:a,chunkSize:this.chunkSize,sliceData:r,reqId:this.reqId,onUploadProgress:this.onUploadProgress,setCancelToken:this.setCancelToken});case 8:if(s=e.sent,this.cancel=null,c=Date.now(),this.timeCost=c-o,this.responseData=s,0===this.loaded&&this.reportError("Incorrect loaded value"),this.loaded=i,this.reportProgressMetric(i-this.lastReportedLoaded,c-this.lastProgressCallback),(u=s&&s.success_seq_list)&&u.forEach(function(e){l.uploadedSubChunkIndices.includes(e)||l.uploadedSubChunkIndices.push(e)}),this.uploadedSubChunkIndices.length!==this.actualNumOfSubChunks)throw s;e.next=20;break;case 20:this.fileObj.pushRootTaskUploadedChunk(this),this.triggerNext(b.c.SUCCESS);case 22:case"end":return e.stop()}},e,this)})),a)},{key:"getPendingSliceData",value:(r=f()(I.a.mark(function e(t){var r,n,i,a,o,s,c,u,l,d,p,h=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getByteRanges(t),n=r.map(function(e){var t=C()(e,2),r=t[0],n=t[1];return h.fileObj.file.slice(r,n,h.chunkType)}),e.next=4,Promise.all(n.map(M.h));case 4:return i=e.sent,a=i.reduce(function(e,t){return e+t.byteLength},0),e.next=8,Promise.all(i.map(Ke));case 8:if(o=e.sent,1===n.length)return e.abrupt("return",{blob:n[0],size:a,checksums:o});e.next=11;break;case 11:if("simple"===this.strategy)return s=r[0][0],c=r[r.length-1][1],u=this.fileObj.file.slice(s,c,this.chunkType),e.abrupt("return",{blob:u,size:a,checksums:o});e.next=16;break;case 16:return l=new Uint8Array(a),d=0,i.forEach(function(e){var t=new Uint8Array(e);l.set(t,d),d+=e.byteLength}),p=new Blob([l]),e.abrupt("return",{blob:p,size:a,checksums:o});case 21:case"end":return e.stop()}},e,this)})),t)},{key:"getByteRanges",value:function(e){var t=this;return e.map(function(e){return[e*t.chunkSize,Math.min(t.endByte,(e+1)*t.chunkSize)]})}},{key:"totalSubChunkIndices",get:function(){var r=this;return new Array(this.actualNumOfSubChunks).fill(null).map(function(e,t){return r.startSubChunkIndex+t})}},{key:"seqList",get:function(){var t=this;return"simple"===this.strategy?this.totalSubChunkIndices:this.totalSubChunkIndices.filter(function(e){return!t.uploadedSubChunkIndices.includes(e)})}}]),o}(Ie),et=100,tt=function(e){function t(){return p()(this,t),g()(this,w()(t).apply(this,arguments))}function r(e){return n.apply(this,arguments)}var n,i,a;function o(e){return i.apply(this,arguments)}function s(){return a.apply(this,arguments)}return O()(t,e),m()(t,[{key:"upload",value:(a=f()(I.a.mark(function e(){var t,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(le.c)()||this.error||this.paused||this.uploading||this.converting||this.finished)return e.abrupt("return",!1);e.next=2;break;case 2:if(e.prev=2,t=Object(M.d)(),this.ticket){e.next=8;break}return e.next=7,this.uploadFileToParser(t);case 7:this.ticket=e.sent;case 8:return e.next=10,this.getParserResult(this.ticket);case 10:return this.finished=!0,this.isTask?this.fire(b.k.taskSuccess,this):this.checkRootTaskProgress(),e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(2),(r=this.uploading?b.o.ImportUploadError:this.converting?b.o.ImportParseError:null)&&this.fire(b.k.collectReport,this,{type:r,reqId:t,msg:e.t0.message}),Object(le.c)()&&(this.error=!0,this.isTask?r&&this.fire(b.k.taskError,this,{type:r}):this.checkRootTaskProgress()),this.uploading=!1,this.converting=!1,e.abrupt("return",!1);case 23:return e.prev=23,this.uploaderObj.uploadNextChunk(),e.finish(23);case 26:case"end":return e.stop()}},e,this,[[2,15,23,26]])})),s)},{key:"uploadFileToParser",value:(i=f()(I.a.mark(function e(t){var r,n,i,a,o,s=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cancelSource=F.source(),this.uploading=!0,(r=new FormData).append("name",this.name),r.append("type",this.type),r.append("size",String(this.size)),r.append("parent_token",this.parentToken),r.append("file",this.file),n=b.n.includes(this.type)?b.a:"",i=n?{"x-command":n}:{},e.next=12,ce(b.b.IMPORT_UPLOAD,r,{cancelToken:this.cancelSource.token,onUploadProgress:function(e){var t=e.loaded,r=e.total;s._progress=0===r?1:t/r,s.fire(b.k.fileProgress,s)},headers:Object.assign({"x-request-id":t,"x-tt-trace-id":t},i)});case 12:if(a=e.sent,o=a.ticket){e.next=17;break}throw this.fire(b.k.fileError,a.code),new Error(a);case 17:return this.uploading=!1,e.abrupt("return",o);case 19:case"end":return e.stop()}},e,this)})),o)},{key:"getParserResult",value:(n=f()(I.a.mark(function e(t){var r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Import task ticket not returned");case 2:this.checkTimes=0,this.converting=!0;case 4:if(this.checkTimes<et)return e.next=7,Object(M.i)(0===this.checkTimes?1e3:3e3);e.next=16;break;case 7:return e.next=9,ue(b.b.IMPORT_STATUS,{ticket:t});case 9:if((r=e.sent)&&void 0!==r.code)return 0===r.code?(this.fileToken=Object(T.default)(r,"tokens.0",""),r.warningCode&&this.fire(b.k.fileWarning,r.warningCode)):r.code===b.g?this.fire(b.k.usageLimitReached,b.m.import):this.fire(b.k.fileError,{type:this.type||Object(M.c)(this.name)||"",code:r.code}),e.abrupt("break",16);e.next=13;break;case 13:this.checkTimes+=1,e.next=4;break;case 16:if(this.fileToken){e.next=18;break}throw new Error("Check import task result failed");case 18:this.converting=!1;case 19:case"end":return e.stop()}},e,this)})),r)},{key:"retry",value:function(){Object(le.c)()&&(this.abort(),this.error=!1,this.uploaderObj.upload(this.paused))}},{key:"abort",value:function(){this.isUploading&&(this.cancelSource&&this.cancelSource.cancel(),this.uploading=!1,this.converting=!1,this.checkTimes=et,this.isTask&&this.fire(b.k.fileProgress,this))}},{key:"cancel",value:function(){this.abort(),this.isTask&&(this.uploaderObj.uploadNextChunk(),this.uploaderObj.removeTask(this))}},{key:"progress",get:function(){return this.error?1:this._progress}},{key:"isUploading",get:function(){return this.uploading||this.converting}},{key:"completed",get:function(){return this.finished}}]),t}(me),rt=tt;function nt(t){return new Promise(function(e){t.file(e)})}function it(e,t,r,n){return at.apply(this,arguments)}function at(){return(at=f()(I.a.mark(function e(t,r,n,i){var a,o,s,c,u,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i&&i.rootTask,o=i&&i.parentPath,s=i&&i.parentToken,c=i&&i.isImport,u=Object(M.b)(Array.isArray(t)?t[0]:t),l=new dt({input:t,uploaderObj:r,uuid:u,rootTask:a,parentPath:o,parentToken:s,isImport:c}),e.next=8,l.init(n);case 8:if(a){e.next=18;break}if(!c||l.totalFiles===l.totalRawFiles){e.next=14;break}if(r.getOpt(b.l.directoryNotImportableCallback)(l),0===l.totalFiles)return e.abrupt("return",null);e.next=14;break;case 14:if(0===l.totalFiles)return r.getOpt(b.l.emptyDirectoryCallback)(l),e.abrupt("return",null);e.next=18;break;case 18:return l.isTask&&r.fire(b.k.taskAdded,l,n),e.abrupt("return",l);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ot(e,t,r,n){return st.apply(this,arguments)}function st(){return(st=f()(I.a.mark(function e(t,r,n,i){var a,o,s,c,u,l,d,p,h,f,v,m,k;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof File)){e.next=4;break}e.t0=t,e.next=7;break;case 4:return e.next=6,nt(t);case 6:e.t0=e.sent;case 7:if(a=e.t0,o=r.getOpt([b.l.minFileSize,b.l.maxFileSize,b.l.maxImportFileSize,b.l.minFileSizeErrorCallback,b.l.maxFileSizeErrorCallback,b.l.fileType,b.l.fileTypeErrorCallback,b.l.importableType]),s=a.name,c=a.type,i&&i.rootTask&&/^(\~\$|\.)/g.test(s))return e.abrupt("return",null);e.next=13;break;case 13:if(!(0<o.fileType.length)){e.next=28;break}u=!1,e.t1=I.a.keys(o.fileType);case 16:if((e.t2=e.t1()).done){e.next=25;break}if(l=e.t2.value,o.fileType[l]=o.fileType[l].replace(/\s/g,"").toLowerCase(),d=(o.fileType[l].match(/^[^.][^/]+$/)?".":"")+o.fileType[l],s.substr(-1*d.length).toLowerCase()===d||-1!==d.indexOf("/")&&(-1!==d.indexOf("*")&&c.substr(0,d.indexOf("*"))===d.substr(0,d.indexOf("*"))||c===d))return u=!0,e.abrupt("break",25);e.next=23;break;case 23:e.next=16;break;case 25:if(u){e.next=28;break}return o.fileTypeErrorCallback(a),e.abrupt("return",null);case 28:if(!((p=i&&i.isImport)&&0<o.importableType.length)){e.next=33;break}if(o.importableType.includes(c)||o.importableType.includes(Object(M.c)(s))){e.next=33;break}return e.abrupt("return",null);case 33:if(void 0!==o.minFileSize&&a.size<o.minFileSize)return o.minFileSizeErrorCallback(a),e.abrupt("return",null);e.next=36;break;case 36:if(h=o.maxFileSize,f=Ve.upload,p&&(h=o.maxImportFileSize,f=Ve.import),void 0!==h&&a.size>h)return o.maxFileSizeErrorCallback(a,f,h),e.abrupt("return",null);e.next=42;break;case 42:return v=Object(M.b)(a),m={file:a,uploaderObj:r,uuid:v||"",rootTask:i&&i.rootTask,parentToken:i&&i.parentToken,isJobTypeDeterminedByPredicator:i&&"function"==typeof i.jobTypePredicator},(k=p?new tt(m):new Ce(Object.assign({},m,{versionInfo:i&&i.versionInfo}))).isTask&&r.fire(b.k.taskAdded,k,n),e.abrupt("return",k);case 47:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ct(e){return e.webkitRelativePath}(qe=Ve=Ve||{})[qe.import=1]="import",qe[qe.upload=2]="upload";var ut=-1,lt=function(e){function u(e){var o,t=e.input,r=e.parentPath,n=e.parentToken,i=e.uploaderObj,a=e.uuid,s=e.rootTask,c=e.isImport;return p()(this,u),(o=g()(this,w()(u).call(this,{uploaderObj:i,parentToken:n,rootTask:s}))).uploadedChunks=[],o.uploadingChunk=null,o.paused=!1,o.bootstrapError=!1,o.bootstrapping=!1,o.subDirectories=[],o.files=[],o.rawFileCount=0,o._size=ut,o.parseFile=function(e){var t=ct(e),r=o.parentPath||"".concat(o.dirName,"/"),n=e.name.replace(/\\/g,"/"),i=t.replace(r,"").replace(n,"").split("/"),a=1<i.length;return{isDirectory:a,parentPath:a?"".concat(r).concat(i[0],"/"):"",file:e}},Array.isArray(t)?o.directoryFiles=t:o.directoryEntry=t,o.uuid=a,o.parentPath=r||"",o.isImport=c||!1,o.createDirectory=i.getOpt(b.l.createDirectory),o}function t(){return r.apply(this,arguments)}var r,n,i;function a(e){return n.apply(this,arguments)}function o(){return i.apply(this,arguments)}return O()(u,e),m()(u,[{key:"init",value:function(e){return this.directoryEntry?this.initByDirectoryEntry(e):this.initByDirectoryFiles(e)}},{key:"upload",value:(i=f()(I.a.mark(function e(){var t,r,n,i,a,o,s,c,u,l,d,p;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(M.e)()){e.next=2;break}return e.abrupt("return",!1);case 2:if(this.bootstrapped){e.next=5;break}return e.next=5,this.bootstrap();case 5:if(this.paused)return e.abrupt("return",!1);e.next=7;break;case 7:if(this.bootstrapped){e.next=9;break}return e.abrupt("return",!1);case 9:r=!(t=!0),n=void 0,e.prev=12,i=this.subDirectories[Symbol.iterator]();case 14:if(t=(a=i.next()).done){e.next=24;break}return o=a.value,e.next=18,o.upload();case 18:if(e.sent)return e.abrupt("return",!0);e.next=21;break;case 21:t=!0,e.next=14;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(12),r=!0,n=e.t0;case 30:e.prev=30,e.prev=31,t||null==i.return||i.return();case 33:if(e.prev=33,r)throw n;e.next=36;break;case 36:return e.finish(33);case 37:return e.finish(30);case 38:c=!(s=!0),u=void 0,e.prev=41,l=this.files[Symbol.iterator]();case 43:if(s=(d=l.next()).done){e.next=55;break}if(p=d.value,this.paused)return e.abrupt("return",!1);e.next=47;break;case 47:return e.next=49,p.upload();case 49:if(e.sent)return e.abrupt("return",!0);e.next=52;break;case 52:s=!0,e.next=43;break;case 55:e.next=61;break;case 57:e.prev=57,e.t1=e.catch(41),c=!0,u=e.t1;case 61:e.prev=61,e.prev=62,s||null==l.return||l.return();case 64:if(e.prev=64,c)throw u;e.next=67;break;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return e.abrupt("return",!1);case 70:case"end":return e.stop()}},e,this,[[12,26,30,38],[31,,33,37],[41,57,61,69],[62,,64,68]])})),o)},{key:"pause",value:function(r){this.subDirectories.forEach(function(e){e.pause(r)}),this.files.forEach(function(e,t){e.pause(r)}),this.paused=void 0===r?!this.paused:r}},{key:"resume",value:function(){this.pause(!1)}},{key:"abort",value:function(){var t=0;this.subDirectories.forEach(function(e){e.isUploading&&(e.abort(),t++)}),this.files.forEach(function(e){e.isUploading&&(e.abort(),t++)}),0<t&&this.fire(b.k.taskProgress,this.rootTask)}},{key:"cancel",value:function(){this.files.forEach(function(e){e.isUploading&&e.abort()}),this.files=[],this.subDirectories.forEach(function(e){e.isUploading&&e.abort()}),this.subDirectories=[],this.uploaderObj.removeTask(this),this.fire(b.k.taskProgress,this.rootTask)}},{key:"retry",value:function(){Object(M.e)()&&(this.paused=!1,this.bootstrapError?this.upload():(this.subDirectories.forEach(function(e){e.paused&&e.pause(!1),e.error&&e.retry()}),this.files.forEach(function(e){e.isPaused&&e.pause(!1),e.error&&e.retry()}),this.isTask&&this.uploaderObj.upload()))}},{key:"checkTaskProgress",value:function(){var e,t,r;this.isTask?this.paused||(r=(e=this.finishedFiles)+this.failedFiles<(t=this.totalFiles)?b.k.taskProgress:e===t?b.k.taskSuccess:b.k.taskError,this.fire(r,this.rootTask)):console.error("ERR - unexpected code execution.")}},{key:"getFromUniqueIdentifier",value:function(t){var e=this.files.find(function(e){return e.uuid===t});if(e)return e;var r=!0,n=!1,i=void 0;try{for(var a,o=this.subDirectories[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value.getFromUniqueIdentifier(t);if(s)return s}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return null}},{key:"readEntries",value:function(d,e){var p=this;return new Promise(function(l){e.readEntries(function(){var t=f()(I.a.mark(function e(t){var r,n,i,a,o,s,c,u;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!(r=!0),i=void 0,e.prev=3,a=t[Symbol.iterator]();case 5:if(r=(o=a.next()).done){e.next=26;break}if((s=o.value).isDirectory)return e.next=10,it(s,p.uploaderObj,d,{rootTask:p.rootTask,isImport:p.isImport});e.next=14;break;case 10:(c=e.sent)&&p.subDirectories.push(c),e.next=23;break;case 14:if(s.isFile)return e.next=17,ot(s,p.uploaderObj,d,{rootTask:p.rootTask,isImport:p.isImport});e.next=22;break;case 17:(u=e.sent)&&p.files.push(u),p.rawFileCount++,e.next=23;break;case 22:console.warn("Invalid FileSystemEntry encountered:",s);case 23:r=!0,e.next=5;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(3),n=!0,i=e.t0;case 32:e.prev=32,e.prev=33,r||null==a.return||a.return();case 35:if(e.prev=35,n)throw i;e.next=38;break;case 38:return e.finish(35);case 39:return e.finish(32);case 40:l(0<t.length);case 41:case"end":return e.stop()}},e,null,[[3,28,32,40],[33,,35,39]])}));return function(e){return t.apply(this,arguments)}}())})}},{key:"initByDirectoryEntry",value:function(i){var a=this;return new Promise(function(){var t=f()(I.a.mark(function e(t){var r,n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.directoryEntry.createReader(),e.next=3,a.readEntries(i,r);case 3:n=e.sent;case 4:if(n)return e.next=7,a.readEntries(i,r);e.next=10;break;case 7:n=e.sent,e.next=4;break;case 10:t(void 0);case 11:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}},{key:"initByDirectoryFiles",value:(n=f()(I.a.mark(function e(t){var r,n,i,a,o,s,c,u,l,d,p,h,f,v,m,k,b,g,y,w,E;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.directoryFiles){e.next=2;break}return e.abrupt("return");case 2:this.setDirName(),r=new Map,n=this.directoryFiles.map(this.parseFile),a=!(i=!0),o=void 0,e.prev=8,s=n[Symbol.iterator]();case 10:if(i=(c=s.next()).done){e.next=26;break}if(u=c.value,l=u.isDirectory,d=u.parentPath,p=u.file,!l){e.next=18;break}(h=r.get(d)||[]).push(p),r.set(d,h),e.next=23;break;case 18:return e.next=20,ot(p,this.uploaderObj,t,{rootTask:this.rootTask,isImport:this.isImport});case 20:(f=e.sent)&&this.files.push(f),this.rawFileCount++;case 23:i=!0,e.next=10;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(8),a=!0,o=e.t0;case 32:e.prev=32,e.prev=33,i||null==s.return||s.return();case 35:if(e.prev=35,a)throw o;e.next=38;break;case 38:return e.finish(35);case 39:return e.finish(32);case 40:m=!(v=!0),k=void 0,e.prev=43,b=r[Symbol.iterator]();case 45:if(v=(g=b.next()).done){e.next=54;break}return y=C()(g.value,2),d=y[0],w=y[1],e.next=49,it(w,this.uploaderObj,t,{rootTask:this.rootTask,isImport:this.isImport,parentPath:d});case 49:(E=e.sent)&&this.subDirectories.push(E);case 51:v=!0,e.next=45;break;case 54:e.next=60;break;case 56:e.prev=56,e.t1=e.catch(43),m=!0,k=e.t1;case 60:e.prev=60,e.prev=61,v||null==b.return||b.return();case 63:if(e.prev=63,m)throw k;e.next=66;break;case 66:return e.finish(63);case 67:return e.finish(60);case 68:case"end":return e.stop()}},e,this,[[8,28,32,40],[33,,35,39],[43,56,60,68],[61,,63,67]])})),a)},{key:"bootstrap",value:(r=f()(I.a.mark(function e(){var t,r,n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.parentToken)throw new Error("Mount node token unspecified");e.next=2;break;case 2:if(this.bootstrapping)return e.abrupt("return");e.next=4;break;case 4:t=4,this.bootstrapping=!0;case 6:if(0,r="",this.bootstrapped)return e.abrupt("break",39);e.next=10;break;case 10:return e.prev=10,r=Object(M.d)(),e.next=14,this.createDirectory({request:d,parentToken:this.parentToken,rootToken:this.rootTask.parentToken,name:this.name,reqId:r});case 14:if(n=e.sent,this.bootstrapped)return this.fire(b.k.collectReport,this.rootTask,{type:b.o.FolderCreateError,msg:"createDirectory when bootstrapped"}),e.abrupt("break",39);e.next=18;break;case 18:if(n)return this.bootstrapped=!0,this.bootstrapError=!1,this.setChildrenParentToken(n),e.abrupt("break",39);e.next=23;break;case 23:throw new Error("no new directory token");case 26:if(e.prev=26,e.t0=e.catch(10),this.fire(b.k.collectReport,this.rootTask,{type:b.o.FolderCreateError,reqId:r,msg:e.t0.message}),0==t--)return this.bootstrapError=!0,this.fire(b.k.taskError,this.rootTask,{type:b.o.FolderCreateError}),e.abrupt("break",39);e.next=33;break;case 33:return e.next=35,Object(M.i)(1e3);case 35:if(this.paused)return e.abrupt("break",39);e.next=37;break;case 37:e.next=6;break;case 39:this.bootstrapping=!1;case 40:case"end":return e.stop()}},e,this,[[10,26]])})),t)},{key:"setDirName",value:function(){var e,t=this.directoryFiles;t&&0!==t.length&&(this.parentPath?this.dirName=this.parentPath.replace(/\/$/,"").split("/").pop():(e=ct(t[0]),this.dirName=e.split("/")[0]))}},{key:"setChildrenParentToken",value:function(t){this.selfToken=t,this.files.forEach(function(e){return e.parentToken=t}),this.subDirectories.forEach(function(e){return e.parentToken=t})}},{key:"recursiveGetCount",value:function(r,n){return this.files.reduce(function(e,t){return t[r]?e+1:e},0)+this.subDirectories.reduce(function(e,t){return e+t[n]},0)}},{key:"totalFiles",get:function(){return this.subDirectories.reduce(function(e,t){return e+t.totalFiles},this.files.length)}},{key:"totalRawFiles",get:function(){return this.subDirectories.reduce(function(e,t){return e+t.totalRawFiles},this.rawFileCount)}},{key:"finishedFiles",get:function(){return this.recursiveGetCount("completed","finishedFiles")}},{key:"failedFiles",get:function(){return this.recursiveGetCount("error","failedFiles")}},{key:"failedFileNames",get:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var i,a=this.subDirectories[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.error&&e.push.apply(e,h()(o.failedFileNames))}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}var s=!0,c=!1,u=void 0;try{for(var l,d=this.files[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var p=l.value;p.error&&e.push(p.name)}}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}return e}},{key:"progress",get:function(){var e=this.files.find(function(e){return e.isUploading});if(e)return e.progress;var t=this.subDirectories.find(function(e){return e.isUploading});return t?t.progress:1}},{key:"sizeProgress",get:function(){var e=this.uploadedChunks.reduce(function(e,t){return e+t.size},0),t=0;return this.uploadingChunk&&(t=this.uploadingChunk.loadedSize),(e+t)/this.size}},{key:"isUploading",get:function(){return this.files.some(function(e){return e.isUploading})||this.subDirectories.some(function(e){return e.isUploading})}},{key:"completed",get:function(){return this.files.every(function(e){return e.completed})&&this.subDirectories.every(function(e){return e.completed})}},{key:"error",get:function(){return this.bootstrapError||this.files.some(function(e){return e.error})||this.subDirectories.some(function(e){return e.error})}},{key:"name",get:function(){return this.directoryEntry?this.directoryEntry.name:this.dirName||""}},{key:"type",get:function(){return b.f}},{key:"size",get:function(){if(this._size>ut)return this._size;var e=this.files.reduce(function(e,t){return e+t.size},0);return this._size=this.subDirectories.reduce(function(e,t){return e+t.size},e),this._size}}]),u}(ve),dt=lt;n.d(t,"a",function(){return ke}),n.d(t,"b",function(){return rt}),n.d(t,"d",function(){return fe}),n.d(t,"e",function(){return Ke})},Aojf:function(e,t,r){"use strict";var n=r("pVnL"),i=r.n(n),a=r("QILm"),o=r.n(a),s=r("q1tI"),c=r.n(s);t.a=function(e){e.styles;var t=o()(e,["styles"]);return c.a.createElement("svg",i()({width:"32",height:"36",viewBox:"0 0 32 36"},t),c.a.createElement("path",{d:"M28.5 15.5H22a5.5 5.5 0 01-5.5-5.5V3.5H5c-.83 0-1.5.67-1.5 1.5v26c0 .83.67 1.5 1.5 1.5h22c.83 0 1.5-.67 1.5-1.5V15.5zm0-3v-.26c0-.38-.15-.75-.42-1.03l-6.92-7.25a1.5 1.5 0 00-1.08-.46h-.58V10a2.5 2.5 0 002.5 2.5h6.5zM5 .5h15.08c1.22 0 2.4.5 3.25 1.4l6.92 7.23a4.5 4.5 0 011.25 3.11V31a4.5 4.5 0 01-4.5 4.5H5A4.5 4.5 0 01.5 31V5A4.5 4.5 0 015 .5z",fill:"#E3E5EA",fillRule:"nonzero"}))}},BAjd:function(e,t,r){"use strict";r.d(t,"b",function(){return c}),r.d(t,"k",function(){return n}),r.d(t,"m",function(){return a}),r.d(t,"l",function(){return h}),r.d(t,"c",function(){return u}),r.d(t,"e",function(){return d}),r.d(t,"d",function(){return b}),r.d(t,"o",function(){return f}),r.d(t,"j",function(){return m}),r.d(t,"f",function(){return g}),r.d(t,"g",function(){return y}),r.d(t,"h",function(){return w}),r.d(t,"i",function(){return E}),r.d(t,"a",function(){return C}),r.d(t,"n",function(){return I});var n,i,a,o,s=r("VIFs"),c={CHUNK_CHECK:Object(s.prependAPI)("/api/box/upload/block/check/"),CHUNK_UPLOAD:Object(s.prependDriveStreamAPI)("/api/box/stream/upload/block/"),FINISH:Object(s.prependAPI)("/api/box/upload/finish/"),PREPARE:Object(s.prependAPI)("/api/box/upload/prepare/"),IMPORT_UPLOAD:Object(s.prependAPI)("/api/parser/uploadfile/"),IMPORT_STATUS:Object(s.prependAPI)("/api/parser/getresult/")};(i=n=n||{}).beforeAdd="beforeAdd",i.cancel="cancel",i.cancelAll="cancelAll",i.complete="complete",i.error="error",i.taskProgress="taskProgress",i.fileProgress="fileProgress",i.fileError="fileError",i.fileWarning="fileWarning",i.taskAdded="taskAdded",i.taskError="taskError",i.taskRetry="taskRetry",i.tasksAdded="tasksAdded",i.taskSuccess="taskSuccess",i.pause="pause",i.pauseAll="pauseAll",i.progress="progress",i.uploadStart="uploadStart",i.offline="offline",i.online="online",i.usageLimitReached="usageLimitReached",i.collectReport="collectReport",i.pending="pending",(o=a=a||{}).upload="upload",o.import="import";var u,l,d,p,h={clearInput:"clearInput",dragOverClass:"dragOverClass",fileType:"fileType",importableType:"importableType",fileTypeErrorCallback:"fileTypeErrorCallback",finishTarget:"finishTarget",getParentToken:"getParentToken",createDirectory:"createDirectory",uploadChunk:"uploadChunk",uploadMergedChunk:"uploadMergedChunk",getMountPoint:"getMountPoint",maxFileSize:"maxFileSize",maxImportFileSize:"maxImportFileSize",maxFileSizeErrorCallback:"maxFileSizeErrorCallback",minFileSize:"minFileSize",minFileSizeErrorCallback:"minFileSizeErrorCallback",fastModeEnabled:"fastModeEnabled",emptyDirectoryCallback:"emptyDirectoryCallback",directoryNotImportableCallback:"directoryNotImportableCallback",prepareTarget:"prepareTarget",setChunkTypeFromFile:"setChunkTypeFromFile",simultaneousUploads:"simultaneousUploads",testTarget:"testTarget",throttleProgressCallbacks:"throttleProgressCallbacks",uploadTarget:"uploadTarget",xhrTimeout:"xhrTimeout",onDragStart:"onDragStart",onDragEnd:"onDragEnd",shouldAddToRecents:"shouldAddToRecents",preferMergedChunks:"preferMergedChunks"};(l=u=u||{}).ERROR="error",l.PROGRESS="progress",l.RETRY="retry",l.SUCCESS="success",l.REPORT_ERROR="report_error",(p=d=d||{}).ERROR="error",p.PENDING="pending",p.SUCCESS="success",p.UPLOADING="uploading",p.ABORT="abort";var f,v,m,k,b=3;(v=f=f||{}).ChunkError="ChunkError",v.ChunkSuccess="ChunkSuccess",v.FileFinishError="FileFinishError",v.FilePrepareError="FilePrepareError",v.FileSuccess="FileSuccess",v.FolderCreateError="FolderCreateError",v.ImportUploadError="ImportUploadError",v.ImportParseError="ImportParseError",(k=m=m||{}).Upload="upload",k.Import="import",k.Exit="Exit";var g="directory-a47de874",y=11001,w=10009,E=90002007,C="api.sheet.parser.uploadfile",I=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv"]},BLac:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var codePointAt;__webpack_require__.d(__webpack_exports__,"a",function(){return CanvasWM}),__webpack_require__.d(__webpack_exports__,"b",function(){return SvgWM}),__webpack_require__.d(__webpack_exports__,"c",function(){return WatermarkType}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{configurable:!0,value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},writable:!0}),"function"!=typeof String.prototype.codePointAt&&(codePointAt=function(e){if(null===this)throw TypeError();var t=String(this),r=t.length,n=e?Number(e):0;if(n!=n&&(n=0),!(n<0||r<=n)){var i,a=t.charCodeAt(n);return 55296<=a&&a<=56319&&n+1<r&&56320<=(i=t.charCodeAt(n+1))&&i<=57343?1024*(a-55296)+i-56320+65536:a}},Object.defineProperty(String.prototype,"codePointAt",{configurable:!0,value:codePointAt,writable:!0}));var _extendStatics=function(e,t){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}_extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function __awaiter(a,o,s,c){return new(s=s||Promise)(function(e,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function n(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}i((c=c.apply(a,o||[])).next())})}function __generator(e,r){var n,i,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function s(t){return function(e){return c([t,e])}}function c(t){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,i=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){o.label=t[1];break}if(6===t[0]&&o.label<a[1]){o.label=a[1],a=t;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(t);break}a[2]&&o.ops.pop(),o.trys.pop();continue}t=r.call(e,o)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}var BaseWM=(jx.prototype.contentWidth=function(e){var t=this.getActualLength(e),r=this.options;return t*r.fontSize/2+r.gap},jx.prototype.getActualLength=function(e){for(var t=0,r=0,n=e;r<n.length;r++)256<=n[r].codePointAt(0)?t+=2:t+=1;return t},jx);function jx(e){this.DefaultFontFamily="'PingFang SC', 'Microsoft YaHei',\n  'Helvetica Neue', Helvetica, Arial, sans-serif",this.options=e,this.options.color=this.options.color||"rgba(0, 0, 0, .07)",this.options.fontSize=this.options.fontSize||16,this.options.fontWeight=this.options.fontWeight||"normal",this.options.fontFamily=this.options.fontFamily||this.DefaultFontFamily,this.options.invisibleColor=this.options.invisibleColor||"transparent",this.options.rotate=this.options.rotate||-20,this.options.gap=this.options.gap||120}var CanvasWM=(wx=BaseWM,__extends(xx,wx),xx.prototype.toDataURI=function(e){var t=this.getActualLength(e),r=this.options,n=r.color,i=r.fontFamily,a=r.fontSize,o=r.fontWeight,s=r.gap,c=r.rotate,u=t*a/2+s,l=document.createElement("canvas");l.setAttribute("width",u+"px"),l.setAttribute("height",u+"px");var d=l.getContext("2d");return d.translate(u/2,u/2),d.rotate(c*Math.PI/180),d.fillStyle="transparent",d.fillRect(0,0,u,u),d.translate(-u/2,-u/2),d.fillStyle=""+n,d.textBaseline="middle",d.textAlign="center",d.font=o+" "+a+"px  "+i,d.fillText(e,u/2,u/2),l.toDataURL()},xx.prototype.genStyle=function(e){var t=this.toDataURI(e),r=this.getActualLength(e),n=this.options,i=r*n.fontSize/2+n.gap;return"\n      background-image: url("+t+"), url("+t+");\n      background-repeat: repeat, repeat;\n      background-position: "+i/2+"px "+i/2+"px, 0 0;\n    "},xx),wx;function xx(){return null!==wx&&wx.apply(this,arguments)||this}var commonjsGlobal="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var base64=createCommonjsModule(function(module,exports){var Tx,Ux;Tx="undefined"!=typeof self?self:"undefined"!=typeof window?window:commonjsGlobal,Ux=function(global){var _Base64=global.Base64,version="2.4.9",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(err){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[b64chars.charAt(r>>>18),b64chars.charAt(r>>>12&63),2<=t?"=":b64chars.charAt(r>>>6&63),1<=t?"=":b64chars.charAt(63&r)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,r=t%4,n=(0<t?b64tab[e.charAt(0)]<<18:0)|(1<t?b64tab[e.charAt(1)]<<12:0)|(2<t?b64tab[e.charAt(2)]<<6:0)|(3<t?b64tab[e.charAt(3)]:0),i=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(255&n)];return i.length-=[0,0,2,1][r],i.join("")},atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,cb_decode)},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e},noEnum;return global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty&&(noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}),global.Meteor&&(Base64=global.Base64),module.exports&&(module.exports.Base64=global.Base64),{Base64:global.Base64}},module.exports=Ux(Tx)}),base64_1=base64.Base64,SvgWM=(Ry=BaseWM,__extends(Sy,Ry),Sy.prototype.toDataURI=function(e){var t=this.getActualLength(e),r=this.options,n=r.color,i=r.fontFamily,a=r.fontSize,o=r.fontWeight,s=t*a/2+r.gap,c='\n      <svg xmlns="http://www.w3.org/2000/svg"\n        width="'+s+'" height="'+s+'"\n        style="transform: rotate('+r.rotate+'deg); transform-origin: 50% 50%;">\n          <text xmlns="http://www.w3.org/2000/svg"\n            x="50%" y="50%" text-anchor="middle" alignment-baseline="middle"\n            fill="'+n+'"\n            font-weight="'+o+'"\n            style="font-size: '+a+'px;"\n            font-family="'+i+'">\n              '+e+"\n          </text>\n      </svg>\n    ";return"data:image/svg+xml;base64,"+base64_1.encode(c)},Sy.prototype.genStyle=function(e){var t=this.toDataURI(e),r=this.getActualLength(e),n=this.options,i=r*n.fontSize/2+n.gap;return"\n      background-image: url("+t+"), url("+t+");\n      background-repeat: repeat, repeat;\n      background-position: "+i/2+"px "+i/2+"px, 0 0;\n    "},Sy),Ry,WatermarkType,Gz;function Sy(){return null!==Ry&&Ry.apply(this,arguments)||this}function observeSelector(i,a){if(i){var e={attributes:!0,childList:!0,subtree:!0},o=i.cloneNode(!0),s=i.parentNode||document.body,t=new MutationObserver(function(e){i&&e.forEach(function(e){var t,r=e.target,n=Array.prototype.slice.call(e.removedNodes)[0];r===i?(t=o.cloneNode(!0),s.replaceChild(t,i),i=t,"function"==typeof a&&a()):n===i&&(i=i.cloneNode(!0),s.appendChild(i),"function"==typeof a&&a())})});return t.observe(document.body,e),function(){return t.disconnect()}}}function loadjs(e){var r=document.getElementsByTagName("head").item(0),n=document.createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",e),new Promise(function(e,t){r?(r.appendChild(n),n.onload=function(){e()},n.onerror=function(){t("mutationobserver pkg load error")}):t("head empty")})}function watermarkObserver(r,n){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:if(!(t=document.querySelector(r)))return[3,6];if(t.removeAttribute("class"),"undefined"!=typeof MutationObserver)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,loadjs("//unpkg.pstatp.com/mutationobserver-shim/0.3.3/dist/mutationobserver.min.js")];case 2:return e.sent(),[2,observeSelector(t,n)];case 3:return e.sent(),[3,4];case 4:return[3,6];case 5:return[2,observeSelector(t,n)];case 6:return[2]}})})}Gz=WatermarkType=WatermarkType||{},Gz.SVG="svg",Gz.CanvasWM="canvas";var Watermark=(Hz.prototype.update=function(e,t){if(void 0===t&&(t={}),this.destroy(),this.text=e,this.options=Object.assign(this.options,t),!this.text)throw new Error("水印文字不能为空");this.options.selector=this.options.selector||".watermark",this.options.type=this.options.type||WatermarkType.CanvasWM;var r=this.options,n=r.type,i=r.inline,a=null;switch(n){case WatermarkType.SVG:a=new SvgWM(this.options);break;case WatermarkType.CanvasWM:a=new CanvasWM(this.options)}var o=a.genStyle(e);i?this.addInlineStyle(o):this.addStyleElement(o)},Hz.prototype.freeze=function(e){return watermarkObserver(this.options.selector,e)},Hz.prototype.destroy=function(){var e,t;this.options&&(e=this.options.selector,null!==(t=document.getElementById(e))&&document.head.removeChild(t))},Hz.prototype.addInlineStyle=function(r){var e=document.querySelectorAll(this.options.selector);Array.prototype.slice.call(e).forEach(function(e){var t=e.getAttribute("style");null===t?e.setAttribute("style",r):t.lastIndexOf(";")===t.length-1?e.setAttribute("style",""+t+r):e.setAttribute("style",t+";"+r)})},Hz.prototype.addStyleElement=function(e){var t=this.options.selector,r=document.createElement("style");r.type="text/css",r.innerHTML=t+" { "+e+" }",r.id=t,document.head.appendChild(r)},Hz);function Hz(e,t){void 0===t&&(t={}),this.text=e,this.options=t,this.update(e,t)}var index=function(e,t){return void 0===t&&(t={}),new Watermark(e,t)};__webpack_exports__.d=index}).call(this,__webpack_require__("yLpj"))},"DB7/":function(e,C,I){"use strict";(function(d){I.d(C,"a",function(){return E});var e=I("lwsE"),i=I.n(e),t=I("W8MJ"),r=I.n(t),n=I("a1gu"),a=I.n(n),o=I("Nsbk"),s=I.n(o),c=I("7W2i"),u=I.n(c),l=I("q1tI"),p=I.n(l),h=(I("17x9"),I("TSYQ")),f=I.n(h),v=I("yvYZ"),m=I("HIeq"),k=I("UAY2"),b=I("2ACu"),g=I("2Upt"),y=I("jbvk"),w=I("7b5p"),E=function(e){function n(e){var r;i()(this,n),(r=a()(this,s()(n).call(this,e))).onKeyDown=function(e){27===(e||window.event).keyCode&&r.handleClose(),e.stopPropagation()},r.loadImage=function(){r.imageNode.style.display="block";var e=r.imagePreview,t=r.imageNode.clientWidth/r.imageNode.clientHeight;e.clientWidth/t>e.clientHeight?(r.imageNode.style.height=e.clientHeight+"px",r.imageNode.style.width=e.clientHeight*t+"px"):r.imageNode.style.width=e.clientWidth+"px",r.imageLoading.style.display="none",r.imageNode.style.visibility="visible"},r.handleClose=function(){Object(b.default)("click_close_mentioned_obj",{mention_file_type:r.fileType}),r.props.handleClose()},r.previewOnLoad=function(){r.iframePreview.style.display="block",r.iframeLoading.style.display="none"},r._videoOptions=function(e){return{controls:!0,autoplay:!0,sources:[{src:e.previewUrl,type:/^mp3/i.test(r.fileType)?"audio/".concat(r.fileType):/^mov/i.test(r.fileType)?"video/mp4":"video/".concat(r.fileType)}]}};var t=e.fileAttrs;return r.fileType=t.type,r.fileSize=Object(m.g)(t.size,!0),r.fileName=t.name,r.FileTypeIcon=Object(v.mapBoxFileTypeToIcon)(r.fileType),r.downloadable=t.decisiveDownloadable,r}return u()(n,e),r()(n,[{key:"componentDidMount",value:function(){document.addEventListener("resize",this.loadImage),document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("resize",this.loadImage),document.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){var t=this,e=this.props,r=e.motion,n=e.style,i=e.closable,a=e.previewUrl,o=e.isIframe,s=e.handleDownload,c=this._videoOptions({previewUrl:a}),u=/^mp3|mp4|ogg|webm|mov/i.test(this.fileType)?p.a.createElement(g.a,c):p.a.createElement("div",{className:"image-preview",ref:function(e){return t.imagePreview=e}},p.a.createElement("div",{ref:function(e){return t.imageLoading=e},className:"layout-row layout-main-center layout-cross-center image-loading-wrapper iframe-loading"},p.a.createElement(k.a,null)),p.a.createElement("img",{src:a,alt:"",onLoad:this.loadImage,ref:function(e){return t.imageNode=e}})),l=this.FileTypeIcon;return p.a.createElement("section",{style:n,className:f()("drive-modal",{modal_hidden:!r})},p.a.createElement("div",{className:"modal-header"},i&&p.a.createElement(p.a.Fragment,null,p.a.createElement("button",{className:"close-btn",onClick:this.handleClose},p.a.createElement(y.a,{width:26,height:26})),p.a.createElement("div",{className:"line"})),p.a.createElement("div",{className:"modal-title"},p.a.createElement(l,{className:"icon icon-placeholder"}),p.a.createElement("div",{className:"file-info"},p.a.createElement("div",{className:"file-name"},this.fileName),p.a.createElement("div",{className:"file-size"},this.fileSize))),p.a.createElement("div",{className:"modal-btns"},p.a.createElement(w.a,{onClick:s,tooltip:d("mention.download"),decisiveDownloadable:this.downloadable}))),p.a.createElement("div",{className:"modal-body"},o?p.a.createElement("div",{className:"iframe-container"},p.a.createElement("div",{ref:function(e){return t.iframeLoading=e},className:"layout-row layout-main-center layout-cross-center mention-loading-wrapper iframe-loading"},p.a.createElement(k.a,null)),p.a.createElement("iframe",{id:"iframe-container",ref:function(e){return t.iframePreview=e},seamless:"seamless",src:a,onLoad:this.previewOnLoad})):u))}}]),n}(l.Component)}).call(this,I("2vAP"))},EGiY:function(e,t,r){e.exports={watermark:"_3K2NEN-3OMd-r0cfD5r0Ov","pdf-watermark":"_2nP8VwRwyc52IIX_quzx5x"}},FZZY:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZwogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+CiAgPHBhdGggZmlsbD0iI0FGQUZBRiIgZD0iTTYyNC42NiA3ODUuMTRBMzguOTQgMzguOTQgMCAwIDEgNjM5IDczMS45N2EzOC45NCAzOC45NCAwIDAgMSA1My4yMSAxNC4xN2w5MC4xMyAxNTYuMUEzOC45NCAzOC45NCAwIDAgMSA3NjggOTU1LjRhMzguOTQgMzguOTQgMCAwIDEtNTMuMjEtMTQuMTdsLTkwLjEzLTE1Ni4xeiIvPgogIDxwYXRoIGZpbGw9IiNEMUQxRDEiIGQ9Ik0yNDEuNjYgMTIxLjc2QTM4Ljk0IDM4Ljk0IDAgMCAxIDI1NiA2OC42YTM4Ljk0IDM4Ljk0IDAgMCAxIDUzLjIxIDE0LjE3bDkwLjEzIDE1Ni4xQTM4Ljk0IDM4Ljk0IDAgMCAxIDM4NSAyOTIuMDNhMzguOTQgMzguOTQgMCAwIDEtNTMuMjEtMTQuMTdsLTkwLjEzLTE1Ni4xeiIvPgogIDxwYXRoIGZpbGw9IiM5RDlEOUQiIGQ9Ik0yMzguODYgNjI0LjY2QTM4Ljk0IDM4Ljk0IDAgMCAxIDI5Mi4wMyA2MzlhMzguOTQgMzguOTQgMCAwIDEtMTQuMTcgNTMuMjFsLTE1Ni4xIDkwLjEzQTM4Ljk0IDM4Ljk0IDAgMCAxIDY4LjYgNzY4YTM4Ljk0IDM4Ljk0IDAgMCAxIDE0LjE3LTUzLjIxbDE1Ni4xLTkwLjEzeiIvPgogIDxwYXRoIGZpbGw9IiNDMkMyQzIiIGQ9Ik05MDIuMjQgMjQxLjY2QTM4Ljk0IDM4Ljk0IDAgMCAxIDk1NS40IDI1NmEzOC45NCAzOC45NCAwIDAgMS0xNC4xNiA1My4yMWwtMTU2LjEgOTAuMTNBMzguOTQgMzguOTQgMCAwIDEgNzMxLjk3IDM4NWEzOC45NCAzOC45NCAwIDAgMSAxNC4xNy01My4yMWwxNTYuMS05MC4xM3oiLz4KICA8cGF0aCBmaWxsPSIjQTNBM0EzIiBkPSJNMzMxLjc5IDc0Ni4xNEEzOC45NCAzOC45NCAwIDAgMSAzODUgNzMxLjk3YTM4Ljk0IDM4Ljk0IDAgMCAxIDE0LjM0IDUzLjE3bC05MC4xMyAxNTYuMUEzOC45NCAzOC45NCAwIDAgMSAyNTYgOTU1LjRhMzguOTQgMzguOTQgMCAwIDEtMTQuMzQtNTMuMTdsOTAuMTMtMTU2LjF6Ii8+CiAgPHBhdGggZmlsbD0iI0M4QzhDOCIgZD0iTTcxNC43OSA4Mi43NkEzOC45NCAzOC45NCAwIDAgMSA3NjggNjguNmEzOC45NCAzOC45NCAwIDAgMSAxNC4zNCA1My4xN2wtOTAuMTMgMTU2LjFBMzguOTQgMzguOTQgMCAwIDEgNjM5IDI5Mi4wM2EzOC45NCAzOC45NCAwIDAgMS0xNC4zNC01My4xN2w5MC4xMy0xNTYuMXoiLz4KICA8cGF0aCBmaWxsPSIjOTQ5NDk0IiBkPSJNMjc3Ljg2IDMzMS43OWMxOC42IDEwLjczIDI0Ljk0IDM0LjU2IDE0LjE3IDUzLjIxcy0zNC41NyAyNS4wNy01My4xNyAxNC4zNEw4Mi43NiAzMDkuMkEzOC45NCAzOC45NCAwIDAgMSA2OC42IDI1NmEzOC45NCAzOC45NCAwIDAgMSA1My4xNy0xNC4zNGwxNTYuMSA5MC4xM3oiLz4KICA8cGF0aCBmaWxsPSIjQjZCNkI2IiBkPSJNOTQxLjI0IDcxNC43OUEzOC45NCAzOC45NCAwIDAgMSA5NTUuNCA3NjhhMzguOTQgMzguOTQgMCAwIDEtNTMuMTYgMTQuMzRsLTE1Ni4xLTkwLjEzQTM4Ljk0IDM4Ljk0IDAgMCAxIDczMS45NyA2MzlhMzguOTQgMzguOTQgMCAwIDEgNTMuMTctMTQuMzRsMTU2LjEgOTAuMTN6Ii8+CiAgPHBhdGggZmlsbD0iIzk5OSIgZD0iTTIxOS4xMiA0NzNjMjEuNDcgMCAzOC44OCAxNy40NiAzOC44OCAzOXMtMTcuNCAzOS0zOC44OCAzOUgzOC44OEMxNy40IDU1MSAwIDUzMy41NCAwIDUxMnMxNy40LTM5IDM4Ljg4LTM5aDE4MC4yNHoiLz4KICA8cGF0aCBmaWxsPSIjQkJCIiBkPSJNOTg1LjEyIDQ3M2MyMS40NyAwIDM4Ljg4IDE3LjQ2IDM4Ljg4IDM5cy0xNy40IDM5LTM4Ljg4IDM5SDgwNC44OEM3ODMuNCA1NTEgNzY2IDUzMy41NCA3NjYgNTEyczE3LjQtMzkgMzguODgtMzloMTgwLjI0eiIvPgogIDxwYXRoIGZpbGw9IiNDRENEQ0QiIGQ9Ik01NTEgMjE5LjEyYzAgMjEuNDctMTcuNDYgMzguODgtMzkgMzguODhzLTM5LTE3LjQtMzktMzguODhWMzguODhDNDczIDE3LjQgNDkwLjQ2IDAgNTEyIDBzMzkgMTcuNCAzOSAzOC44OHYxODAuMjR6Ii8+CiAgPHBhdGggZmlsbD0iI0E5QTlBOSIgZD0iTTU1MSA5ODUuMTJjMCAyMS40Ny0xNy40NiAzOC44OC0zOSAzOC44OHMtMzktMTcuNC0zOS0zOC44OFY4MDQuODhjMC0yMS40NyAxNy40Ni0zOC44OCAzOS0zOC44OHMzOSAxNy40IDM5IDM4Ljg4djE4MC4yNHoiLz4KPC9zdmc+Cg=="},GZdw:function(e,g,y){"use strict";(function(i){y.d(g,"a",function(){return b});var e=y("lwsE"),n=y.n(e),t=y("W8MJ"),a=y.n(t),r=y("a1gu"),o=y.n(r),s=y("Nsbk"),c=y.n(s),u=y("7W2i"),l=y.n(u),d=y("q1tI"),p=y.n(d),h=y("KCMi"),f=y("UAY2"),v=y("dGXE"),m=y("n/R6"),k=y("2Upt"),b=function(e){function r(e){var t;return n()(this,r),(t=o()(this,c()(r).call(this,e))).state={loading:!1,previewUrl:"",isIframe:!1},t.previewOnLoad=function(){t.setState({loading:!1})},t.loadNutPrevewUrl(),t}return l()(r,e),a()(r,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.driveKey!==this.props.driveKey&&this.loadNutPrevewUrl()}},{key:"loadNutPrevewUrl",value:function(){var t=this,e=this.props.driveKey,r=v.a,n=!1;this.canUseOWAPreview&&(r=v.b,n=!0),r({drive_file_key:e},function(e){t.setState({previewUrl:e.previewurl||e.downloadurl,isIframe:n})},function(){m.a.show({type:"error",closable:!0,content:i("mention.preview_failure")})})}},{key:"render",value:function(){var e,t,r=this.props.type,n=this.state,i=n.loading,a=n.previewUrl,o=n.isIframe;return o||(e=Object(h.c)(a,r),t=/^mp3|mp4|ogg|webm|mov/i.test(r)?p.a.createElement(k.a,Object.assign({},e)):p.a.createElement("div",{className:"image-preview"},p.a.createElement("img",{src:a,alt:"",onLoad:this.previewOnLoad}))),p.a.createElement("div",{className:"iframe-container"},i?p.a.createElement("div",{className:"layout-row layout-main-center layout-cross-center mention-loading-wrapper iframe-loading"},p.a.createElement(f.a,null)):null,o?p.a.createElement("iframe",{seamless:!0,src:a,onLoad:this.previewOnLoad}):t)}},{key:"canUseOWAPreview",get:function(){var e=this.props,t=e.type,r=e.size;return Object(h.b)(t,r)}}]),r}(d.Component)}).call(this,y("2vAP"))},HGRm:function(e,t,r){"use strict";r.r(t);var n=r("m/+l"),i=r("xNBk"),a=r("5cZX"),o=r("vc5i"),s=r("jzcD"),c=r("03In"),u=r("MUo5"),l={getFileInfo:c.h,sendSuiteParentPermissionRequest:u.sendSuiteParentPermissionRequest},d=function(e){return{translated:Object(s.b)(e).status.translated,otherPermissions:Object(a.u)(e),suiteType:Object(o.o)(e),token:Object(o.n)(e),haveEditPermission:Object(a.c)(e),haveCommentPermission:Object(a.b)(e)}};t.default=Object(n.connect)(d,l)(i.a)},HdOY:function(e,t,r){"use strict";var n=r("pVnL"),i=r.n(n),a=r("QILm"),o=r.n(a),s=r("q1tI"),c=r.n(s);t.a=function(e){e.styles;var t=o()(e,["styles"]);return c.a.createElement("svg",i()({width:"133",height:"126",viewBox:"0 0 133 126",xmlnsXlink:"http://www.w3.org/1999/xlink"},t),c.a.createElement("defs",null,c.a.createElement("path",{id:"726545e2c7a36b4203264486452cc2c1-a",d:"M0 125.54h132.62V.09H0z"})),c.a.createElement("g",{fill:"none",fillRule:"evenodd"},c.a.createElement("path",{d:"M-13-18h160v160H-13z"}),c.a.createElement("path",{fill:"#D6DAE1",d:"M.33 106.14h112.01V14.58H.34z"}),c.a.createElement("path",{fill:"#F4F5F9",d:"M96.4 37.82l-9.77 62.88L9.7 88.76l9.77-62.89z"}),c.a.createElement("path",{d:"M26.26 82.2l5.85-45.45M33.9 83.9l5.85-45.45",stroke:"#FFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("g",{transform:"translate(.33 .1)"},c.a.createElement("path",{d:"M132.26 91.49a39.38 39.38 0 11-78.04-10.66 39.38 39.38 0 0178.04 10.66",fill:"#FFC200"}),c.a.createElement("mask",{id:"726545e2c7a36b4203264486452cc2c1-b",fill:"#fff"},c.a.createElement("use",{xlinkHref:"#726545e2c7a36b4203264486452cc2c1-a"})),c.a.createElement("path",{fill:"#B5BEC8",mask:"url(#726545e2c7a36b4203264486452cc2c1-b)",d:"M0 15.1h33.48V.09H0z"}),c.a.createElement("path",{d:"M68.18 84.4s24.72 23.42 50.75 0M77.94 91.55L73.38 100M93.55 95.45v10.41M108.52 92.2l6.5 7.16",stroke:"#18263C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",mask:"url(#726545e2c7a36b4203264486452cc2c1-b)"}))))}},Ivgd:function(e,I,O){"use strict";(function(r){O.d(I,"a",function(){return C});var e=O("lSNA"),n=O.n(e),t=O("lwsE"),i=O.n(t),a=O("W8MJ"),o=O.n(a),s=O("a1gu"),c=O.n(s),u=O("Nsbk"),l=O.n(u),d=O("7W2i"),p=O.n(d),h=(O("yro/"),O("4v/9")),f=O("dvZ7"),v=O("TSYQ"),m=O.n(v),k=O("q1tI"),b=O.n(k),g=O("UlbS"),y=O("KrGf"),w=O("kS6I"),E="suite-download-btn",C=function(e){function t(){var r;return i()(this,t),(r=c()(this,l()(t).apply(this,arguments))).handleClick=function(e){var t;r.downloadable&&((t=r.props.onClick)?t(e):(r.props.setPreviewSDKDownload(!0),Object(f.f)({action:"download",source:"headerbar"})))},r}return p()(t,e),o()(t,[{key:"render",value:function(){return this.shouldHideButton?null:b.a.createElement(g.Tooltip,{title:this.props.tooltipText||this.defaultTooltipText,adjustPlacements:["bottom","bottomRight"],hideActions:["onClick","onMouseLeave"]},b.a.createElement("button",{className:m()(E,n()({},"".concat(E,"--disabled"),!this.downloadable)),onClick:this.handleClick},b.a.createElement(h.a,null),b.a.createElement("span",{className:"".concat(E,"__text")},r("common.download_file"))))}},{key:"authorityDownload",get:function(){return Object(w.f)(w.b.FILE_DOWNLOAD)}},{key:"downloadable",get:function(){if(!this.authorityDownload)return!1;var e=this.props,t=e.otherPermissions,r=e.decisiveDownloadable;return void 0!==r?r:t&&t.exportable}},{key:"defaultTooltipText",get:function(){return this.downloadable?r("tooltip.download_this_file"):this.authorityDownload?r("tooltip.download_disabled"):r("CreationDoc_ECM_AdminDisableToast")}},{key:"shouldHideButton",get:function(){var e=this.props,t=e.currentSuiteIsDeleted,r=e.currentSuiteIsNotFound,n=e.currentSuiteIsForbidden;return Object(y.b)()?!this.downloadable:Boolean(t||n||r)}}]),t}(b.a.PureComponent)}).call(this,O("2vAP"))},KCMi:function(e,t,r){"use strict";r.d(t,"c",function(){return u}),r.d(t,"a",function(){return l}),r.d(t,"b",function(){return d});var n=r("RIqP"),i=r.n(n),a=r("BmhO"),o=r("3doy"),s=r("VI6H"),c=10485760;function u(e,t){return{controls:!0,autoplay:!0,sources:[{src:e,type:/^mp3/i.test(t)?"audio/".concat(t):/^mov/i.test(t)?"video/mp4":"video/".concat(t)}]}}function l(e,t){return f(e)||t&&h(e)}function d(e,t){return Object(s.f)()&&p(e)&&t<=c}function p(e){return/(^| )docx|doc|xlsx|xls|pptx|ppt|pdf/i.test(e)}function h(e){return[].concat(i()(o.PDFPreviewTypes),i()(a.L)).includes(e.toLowerCase())}function f(e){return a.d.includes(e.toLowerCase())}},Ne8Z:function(e,t,r){"use strict";var n=r("5cZX"),i=r("m/+l"),a=r("5RRi"),o=function(e){return{otherPermissions:Object(n.u)(e)}},s=Object(i.connect)(o)(a.a);r.d(t,"a",function(){return s})},OJaq:function(e,t,r){"use strict";var n=r("pVnL"),i=r.n(n),a=r("QILm"),o=r.n(a),s=r("q1tI"),c=r.n(s);t.a=function(e){e.styles;var t=o()(e,["styles"]);return c.a.createElement("svg",i()({width:"160",height:"160",viewBox:"0 0 160 160"},t),c.a.createElement("g",{fill:"none",fillRule:"evenodd"},c.a.createElement("path",{fill:"#D6DAE1",d:"M19.85 120.27h105.37V33.7H19.85z"}),c.a.createElement("path",{fill:"#F4F5F9",d:"M110.98 55.89l-9.31 59.83-73.28-11.37 9.3-59.83z"}),c.a.createElement("path",{d:"M44.34 98.06l5.13-43.29M51.74 99.2l5.13-43.29",stroke:"#FFF",strokeWidth:".67"}),c.a.createElement("path",{d:"M124.65 74.7a16.52 16.52 0 10-33.04 0",stroke:"#18263C",strokeWidth:"1.33",strokeLinecap:"round",strokeLinejoin:"round"}),c.a.createElement("path",{fill:"#FFC200",d:"M79.08 74.7h58.1v58.1h-58.1z"}),c.a.createElement("path",{fill:"#B5BEC8",d:"M20.02 34.34h31.6V20.12h-31.6z"}),c.a.createElement("path",{d:"M105.85 106.82a7.4 7.4 0 114.56 0v10.5c0 .38-.3.67-.67.67h-3.22a.67.67 0 01-.67-.66v-10.51z",fill:"#18263C"})))}},Thla:function(e,t,r){"use strict";var n=r("lSNA"),i=r.n(n),a=r("lwsE"),o=r.n(a),s=r("W8MJ"),c=r.n(s),u=r("a1gu"),l=r.n(u),d=r("Nsbk"),p=r.n(d),h=r("7W2i"),f=r.n(h),v=r("Muja"),m=r("fp5s"),k=r("hMnB"),b=r.n(k),g=r("q1tI"),y=r.n(g),w=(r("17x9"),r("TSYQ")),E=r.n(w),C=r("BLac"),I=r("Zfr0"),O=function(){function n(e,t,r){o()(this,n),this.selector="."+e,this.options=Object.assign({},n.defaultOptions,{},r),this.wm=Object(C.d)(t,Object.assign({},this.options,{type:Object(I.getWatermarkType)(),selector:this.selector}))}return c()(n,[{key:"update",value:function(e,t){this.options=Object.assign({},this.options,{},t),this.wm.update(e,Object.assign({},this.options,{type:Object(I.getWatermarkType)(),selector:this.selector}))}},{key:"destroy",value:function(){this.wm.destroy()}}]),n}();O.defaultOptions=Object(I.getDefaultWatermarkOptions)();var T=r("EGiY"),x=r.n(T),D=r("VI6H"),P=r("QM+C");r.d(t,"a",function(){return _});var _="TIAWBFTROSIDWYKTTIAW";function S(e){var t=Object(D.o)(e.id,e.name);return Object(I.getMark)({name:t,mobile:e.mobile,email:e.email})}function j(){var e=new URLSearchParams(b.a.search),t=e.get("name")||"",r=e.get("mobile")||"",n=e.get("email")||"";return Object(I.getMark)({name:t,mobile:r,email:n})}var M=function(e){function r(e){var t;return o()(this,r),(t=l()(this,p()(r).call(this,e))).wm=null,t.destroyWatermark=function(){t.wm&&(t.removeSSRHandler&&cancelAnimationFrame(t.removeSSRHandler),t.wm.destroy())},t.removeSSRWatermark=function(){var e=document.querySelector(".ssrWaterMark"),t=document.querySelector("#watermarkSSRStyle");e&&e.remove(),t&&t.remove()},t.token=_+Object(m.a)(),t}return f()(r,e),c()(r,[{key:"componentDidMount",value:function(){this.isVisible()&&this.renderWatermark(this.watermarkText,this.props.watermarkOptions)}},{key:"shouldComponentUpdate",value:function(e){return this.props.user.id!==e.user.id||!Object(v.default)(this.props.style,e.style)||this.props.settings.enable_watermark!==e.settings.enable_watermark||!Object(v.default)(this.props.watermarkOptions,e.watermarkOptions)}},{key:"componentDidUpdate",value:function(e){this.isVisible()?this.renderWatermark(this.watermarkText,this.props.watermarkOptions):this.destroyWatermark()}},{key:"componentWillUnmount",value:function(){this.destroyWatermark()}},{key:"componentDidCatch",value:function(e){console.error(e)}},{key:"isVisible",value:function(){return Object(I.isRenderWatermark)(this.props.settings.enable_watermark)}},{key:"renderWatermark",value:function(e,t){this.wm?this.wm.update(e,t):(this.wm=new O(this.token,e,t),this.removeSSRHandler=requestAnimationFrame(this.removeSSRWatermark))}},{key:"render",value:function(){if(this.isVisible()){var e,t=this.props.style,r=E()(this.token,(e={},i()(e,x.a.watermark,!P.isPDFAccess),i()(e,x.a["pdf-watermark"],P.isPDFAccess),e));return y.a.createElement("div",{className:r,style:t})}return null}},{key:"watermarkText",get:function(){var e=this.props.user;return P.isPDFAccess?j():S(e)}}]),r}(y.a.Component);M.defaultProps={style:{},watermarkOptions:{}};t.b=M},U1nc:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("CnBM"),i=r.n(n),a=r("iP/4"),o=r("q7cj");function s(){return a.a.isInVC?i()({loader:function(){return r.e("box_vc_follow_preview").then(r.bind(null,"mB3v"))},loading:function(){return null}}):o.f}},UAY2:function(e,t,r){"use strict";var n=r("lwsE"),i=r.n(n),a=r("W8MJ"),o=r.n(a),s=r("a1gu"),c=r.n(s),u=r("Nsbk"),l=r.n(u),d=r("7W2i"),p=r.n(d),h=r("q1tI"),f=r.n(h),v=r("TSYQ"),m=r.n(v),k=(r("17x9"),r("2M8O"),function(e){function t(){return i()(this,t),c()(this,l()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"render",value:function(){var e=m()("spiner",this.props.className),t={transform:"scale(".concat(this.props.scale,")")};return f.a.createElement("span",{className:e,style:t},f.a.createElement("span",{"aria-hidden":"true"}),f.a.createElement("span",{"aria-hidden":"true"}),f.a.createElement("span",{"aria-hidden":"true"}))}}]),t}(h.PureComponent));t.a=k},XCCd:function(e,t,r){"use strict";r.r(t);var n=r("ZGZ5"),i=r("m/+l"),a=r("Thla"),o=r("mszz"),s=r("peh1"),c=Object(s.createSelector)(n.a,function(e){return e.toJSON()}),u=function(e){return{user:c(e),settings:Object(o.b)(e)}},l=Object(i.connect)(u,null)(a.b);t.default=l},XkjS:function(e,w,E){"use strict";(function(i){E.d(w,"a",function(){return y});var e=E("lwsE"),t=E.n(e),r=E("W8MJ"),n=E.n(r),a=E("2ACu"),o=E("D7h9"),s=E("Ne8Z"),c=E("q1tI"),u=E.n(c),l=E("m/+l"),d=E("6jTl"),p=(E("gaI2"),E("AVrj")),h=E("dGXE"),f=E("uEBw"),v=E("KCMi"),m=E("iP/4"),k=E("TM+l"),b=E("QM+C");function g(e){Object(k.b)([{token:e.driveKey,type:b.NUM_SUITE_TYPE.FILE,mountPoint:{type:e.suiteType,token:e.token}}]),Object(a.default)("bitable_attach_download",{source:e.source,file_size:e.size,attach_file_type:e.type})}var y=function(){function r(e){var n=this;t()(this,r),this.props=e,this.openningModal=null,this.handlePreviewDownload=function(e){n.props.handleClickDownload(e)},this.handlePreview=function(){var e,t,r;n.allowPreview?(t=(e=n.props).type,r=e.useDriveStorage,Object(a.default)("click_open_mentioned_obj",{mention_file_type:t}),r?n.handleBytePreview():n.handleNutPreview()):Object(f.g)(i("mention.please_download"))},this.manualCloseModal=function(){n.openningModal&&(n.openningModal.close(),n.openningModal=null,n.isOpening=!1)},this.isOpening=!1}return n()(r,[{key:"updateProps",value:function(e){this.props=e}},{key:"handleBytePreview",value:function(){this.showPreviewModal(this.props.driveKey,!1)}},{key:"handleNutPreview",value:function(){var t=this,e=this.props.driveKey,r=h.a,n=!1;this.canUseOWAPreview&&(r=h.b,n=!0),r({drive_file_key:e},function(e){t.showPreviewModal(e.previewurl||e.downloadurl,n)},function(){Object(f.g)(i("mention.preview_failure"))})}},{key:"showPreviewModal",value:function(r,n){var i=this;this.openningModal=d.a.show({onCancel:function(){i.isOpening=!1,i.props.onCancel&&i.props.onCancel(),console.warn("cancelled")},getContent:function(e){var t=r.startsWith("http");return u.a.createElement(l.Provider,{store:o.default},t?u.a.createElement(p.a,Object.assign({},e,{handleDownload:i.handlePreviewDownload,previewUrl:r,fileAttrs:Object.assign({},i.props),isIframe:n})):u.a.createElement(s.a,Object.assign({},e,{handleDownload:i.handlePreviewDownload,fileToken:r,fileAttrs:Object.assign({},i.props)})))},visibleSpringConfig:{stiffness:170,damping:26,precision:1},wrapClassName:"preview-modal"}),m.a.isEdge&&window.getSelection().removeAllRanges(),this.isOpening=!0,this.props.onShow&&this.props.onShow()}},{key:"isPreviewing",get:function(){return this.isOpening}},{key:"allowPreview",get:function(){var e=this.props,t=e.type,r=e.size,n=e.useDriveStorage;return Object(f.e)(t,r,!!n)}},{key:"canUseOWAPreview",get:function(){var e=this.props,t=e.type,r=e.size;return Object(v.b)(t,r)}}],[{key:"open",value:function(t){function e(e){g(t)}new r(Object.assign({},t,{useDriveStorage:!0,handleClickDownload:t.handleClickDownload||e})).handlePreview()}}]),r}()}).call(this,E("2vAP"))},"Yc+F":function(e,t,r){},YsLn:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"c",function(){return o}),r.d(t,"b",function(){return s}),r.d(t,"i",function(){return c}),r.d(t,"d",function(){return u}),r.d(t,"h",function(){return l}),r.d(t,"l",function(){return d}),r.d(t,"k",function(){return p}),r.d(t,"e",function(){return h}),r.d(t,"g",function(){return f}),r.d(t,"j",function(){return v}),r.d(t,"f",function(){return m}),r.d(t,"m",function(){return k});var n=r("S9xK"),i=r("jp/M"),a=function(){return{type:i.actionTypes.box.EMIT_UPDATE_STORAGE_USAGES}},o=function(e){return{type:n.a.SET_CURRENT_FOLDER_IMAGE_LIST_INFO,payload:e}},s=function(){return{type:n.a.RESET_CURRENT_FOLDER_IMAGE_LIST_INFO}},c=function(e){return{type:i.actionTypes.box.SET_PREVIEW_SDK_DOWNLOAD,payload:e}},u=function(e){return{type:i.actionTypes.box.SET_FILE_FIND,payload:e}},l=function(e){return{type:i.actionTypes.box.SET_PDF_PRINT,payload:e}},d=function(){return{type:i.actionTypes.box.UPDATE_VERSION_SEED}},p=function(e,t){return{type:i.actionTypes.box.FILE_NAME_UPDATED,payload:{fileName:e,version:t}}},h=function(e){return{type:i.actionTypes.box.SET_IFRAME_LAYER_SHOW,payload:e}},f=function(e){return{type:n.a.SET_BOX_SUITE_IS_IN_EDIT_MODE,payload:e}},v=function(){return{type:i.actionTypes.box.TOGGLE_FILE_INFO_PANEL}},m=function(e){return{type:n.a.SET_IS_FILE_DRAGGING,payload:e}},k=function(e){var t=e.token,r=e.isFolder,n=e.parentToken;return{type:i.actionTypes.box.UPLOAD_SUCCESS,payload:{token:t,isFolder:r,parentToken:n}}}},Zfr0:function(e,t,r){"use strict";r.r(t),r.d(t,"getWatermarkType",function(){return p}),r.d(t,"getMark",function(){return h}),r.d(t,"getAnonymousMark",function(){return f}),r.d(t,"getActualLength",function(){return v}),r.d(t,"isLark",function(){return m}),r.d(t,"isRenderWatermark",function(){return k}),r.d(t,"getWatermarkColor",function(){return b}),r.d(t,"getDefaultWatermarkOptions",function(){return g});var n=r("puQj"),i=r.n(n),a=r("qxQb"),o=r.n(a),s=r("MjSh"),c=r("iP/4"),u=r("BLac"),l=r("7cb0"),d=r("QM+C");function p(){return c.a.isQQ||c.a.is360||c.a.windows?u.c.CanvasWM:u.c.SVG}var h=function(e){var t,r="",n=e.name,i=e.mobile,a=e.email,o="",s="";switch(i&&4<=i.length&&(o=i.substring(i.length-4,i.length)),a&&(s=(t=a.match(/.+(?=@)/))?t[0]:""),!0){case o&&v(n+o)<25:r="".concat(n," ").concat(o);break;case o&&25<=v(n+o):r="".concat(n.substring(0,17),"... ").concat(o);break;case v(n+s)<25:r="".concat(n," ").concat(s);break;case 25<v(n)&&25<v(s):r="".concat(s.substring(0,22),"...");break;case v(n)<=25&&25<v(s):r=n;break;case 25<v(n)&&v(s)<=0:r="".concat(n.substring(0,22),"...");break;default:r=s}return r},f=function(e){var t="",r=e.name,n=e.tenant_name;switch(!0){case v(r+n)<=25:t="".concat(n," ").concat(r);break;case 25<v(r+n):t="".concat(n.substring(0,v(r)),"... ").concat(r);break;default:t="".concat(n," ").concat(r)}return t},v=function(e){for(var t=0,r=0;r<e.length;r++)256<=e[r].codePointAt(0)?t+=2:t+=1;return t};function m(){return/Lark/g.test(navigator.userAgent)}function k(e){return!(void 0===e||!d.isAnonymousAccess&&!d.isPDFAccess)||(m()?!Object(l.b)(l.a.isEnabledNativeWatermark):!(!/\blark=\d/.test(location.search)||m())||void 0!==e&&0!==e)}function b(){return i.a.windows?o()(s.N500,.12):(i.a.mac,o()(s.N500,.1))}function g(){return{fontSize:14,color:b(),gap:148,rotate:-15}}},chPe:function(e,t,r){"use strict";var n=r("XCCd"),i=r("vE74"),a=r("q1tI"),o=r.n(a),s={width:"calc(100% - ".concat(Object(i.e)(),"px)"),marginRight:"".concat(Object(i.e)(),"px")},c=function(){return o.a.createElement(n.default,{style:s})};r.d(t,"a",function(){return c})},dGXE:function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return s});r("o0o1"),r("yXPU");var i=r("toa8"),a=r("HIeq");r("2ACu"),r("lG83"),r("fQzm"),r("pylR"),r("jp/M");function o(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return Object(i.d)(e).then(function(e){t(e.data)}).catch(function(){2<n?r():o(e,t,r,n+=1)})}function n(e,t,r){var n=e.drive_file_key;o({method:"POST",url:"/api/drive/getpreviewurl/",data:JSON.stringify({token:Object(a.e)(),drive_file_key:n}),headers:{"Content-Type":"application/json"},timeout:1e4},t,r)}function s(e,t,r){var n=e.drive_file_key;o({method:"POST",url:"/api/drive/getdownloadurl/",data:JSON.stringify({token:Object(a.e)(),drive_file_key:n}),headers:{"Content-Type":"application/json"},timeout:1e4},t,r)}},g6NV:function(e,t,r){},gaI2:function(e,t,r){},hFNK:function(e,n,i){"use strict";(function(d){i.d(n,"c",function(){return v}),i.d(n,"b",function(){return m}),i.d(n,"a",function(){return r});var e=i("q1tI"),p=i.n(e),t=i("BmhO"),h=i("HdOY"),f=i("OJaq");i("g6NV");function v(e){return e===t.f.NO_PERMISSION}function m(e){return e===t.f.DELETED||e===t.f.MOUNT_POINT_DELETED||e===t.f.NOT_FOUND}function r(e){var t=e.errCode,r=e.canApplyPermission,n=e.onClickApplyPermission,i=e.className,a=void 0===i?"":i,o="",s="",c=!1,u=null,l=!0;if(v(t))o=d("filecard.no_permission_title"),s=d("filecard.no_permission_content"),l=c=r,u=f.a;else{if(!m(t))return null;o=d("filecard.preview_error"),s=d("filecard.preview_error_content"),u=h.a}return p.a.createElement("div",{className:"preview-error-wrap ".concat(a)},p.a.createElement(u,{className:"error-icon"}),p.a.createElement("div",{className:"error-title"},o),l&&p.a.createElement("div",{className:"error-content"},s),c&&p.a.createElement("button",{onClick:n,className:"error-btn"},d("filecard.apply_permission")))}}).call(this,i("2vAP"))},jbvk:function(e,t,r){"use strict";var n=r("pVnL"),i=r.n(n),a=r("QILm"),o=r.n(a),s=r("q1tI"),c=r.n(s);t.a=function(e){e.styles;var t=o()(e,["styles"]);return c.a.createElement("svg",i()({width:"24",height:"24",viewBox:"0 0 24 24"},t),c.a.createElement("path",{d:"M18.01 5.74l.5.5a.4.4 0 010 .56l-5.45 5.45 5.2 5.2a.4.4 0 010 .56l-.5.5a.4.4 0 01-.56 0L12 13.3l-4.95 4.95a.4.4 0 01-.56 0l-.5-.5a.4.4 0 010-.56l4.95-4.95-5.2-5.2a.4.4 0 010-.56l.5-.5a.4.4 0 01.56 0l5.2 5.2 5.45-5.45a.4.4 0 01.56 0z",fill:"#646A73",fillRule:"nonzero"}))}},k7EW:function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return l});var n=r("rLED"),i=r("U6jp"),a=r("EyGs"),o=Object(i.j)("appVersion"),s=Object(n.N)("download_manager_least_version",""),c=Object(a.a)(o,s),u=Object(n.N)("native_download_manager_least_version",""),l=Object(n.I)("native_download_manager_enabled",!1)&&Object(a.a)(o,u)},omim:function(e,u,l){"use strict";(function(e){l.d(u,"a",function(){return o}),l.d(u,"g",function(){return s}),l.d(u,"d",function(){return i}),l.d(u,"c",function(){return n}),l.d(u,"f",function(){return a}),l.d(u,"e",function(){return c});var t=l("iP/4"),r=l("k7EW");l.d(u,"b",function(){return r.a});var n=e||t.a.isLarkWindow,i=t.a.isLark&&!/electron/i.test(navigator.userAgent),a=e&&i&&r.b,o=!0;i?o=r.b:n&&(o=r.a);var s=n&&!r.a,c=!i&&e&&r.a}).call(this,l("kCIs"))},pylR:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("o0o1"),a=r.n(n),i=r("yXPU"),o=r.n(i),s=r("Ae4K");function c(i){return new Promise(function(){var t=o()(a.a.mark(function e(r){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FileReader).onload=o()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.e)(n.result);case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}},e)})),n.readAsArrayBuffer(i);case 3:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}},qkt2:function(e,t,r){"use strict";r.d(t,"f",function(){return o}),r.d(t,"b",function(){return c}),r.d(t,"d",function(){return u}),r.d(t,"a",function(){return l}),r.d(t,"g",function(){return d}),r.d(t,"h",function(){return p}),r.d(t,"i",function(){return h}),r.d(t,"c",function(){return f}),r.d(t,"e",function(){return v});var n=r("u3oV"),i=r("gfe6"),a=r("nN3d"),o=function(e){return Array.isArray(e)?e:[e]},s=0,c=function(e){if(!e)return Object(a.c)(12);var t=e.webkitRelativePath||e.relativePath||e.fileName||e.name,r=e.size,n=Object(a.c)(6);return s++,"".concat(r,"-").concat(t.replace(/[^0-9a-zA-Z_-]/gim,""),"-").concat(n,"-").concat(s)},u=function(){return Object(a.c)(32)},l=function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},d=function(e){return Object(n.a)(e,function(e){return null!=e})};function p(n){return new Promise(function(e,t){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(){t("upload read blob error")},r.readAsArrayBuffer(n)})}function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise(function(e){return window.setTimeout(e,t)})}function f(e){var t=String(e).split(".").pop();return t&&t!==e?t.toLowerCase():""}function v(){return navigator.onLine&&Object(i.c)()}},uEBw:function(e,g,y){"use strict";(function(n){y.d(g,"a",function(){return u}),y.d(g,"f",function(){return l}),y.d(g,"g",function(){return p}),y.d(g,"e",function(){return h}),y.d(g,"c",function(){return v}),y.d(g,"b",function(){return m}),y.d(g,"d",function(){return k}),y.d(g,"h",function(){return b});y("J4zp");var t=y("n/R6"),i=y("KCMi"),r=y("2ACu"),a=y("Mvmg"),e=y("BmhO"),o="client_uploader_file_operation",s="file_card_file_info",c="request_file_block_permission",u={enter:"enter",quit:"quit",show_toolbar:"show_toolbar",click_inline_view:"click_inline_view",click_card_view:"click_card_view",click_preview_view:"click_preview_view",icon_download:"icon_download"};function l(e){var t=decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)}function d(e){for(var t=0,r=0;r<e.length;r++)127<e.charCodeAt(r)||94===e.charCodeAt(r)?t+=2:t+=1;return 20<t?"".concat(e.substring(0,10),"..."):e}function p(e){t.a.show({type:"error",closable:!0,content:e})}function h(e,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return r&&Object(i.a)(e,r)||Object(i.b)(e,t)}function f(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Object(r.default)(e,Object.assign({},t))}function v(){f(o,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}function m(){f(s,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}function k(){f(c,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}e.s.PNG,e.s.JPG,e.s.JPEG,e.s.GIF,e.s.ICO;function b(e){var t,r=d(e.name);return e.name.length>a.d&&(t="「".concat(r,"」 ").concat(n("drive.file_name_valid"))),(e.size>a.f||0===e.size)&&(t="「".concat(r,"」 ").concat(n("drive.file_size_valid_v2"))),/(?:[?*<>:"/\\|]+)/g.test(e.name)&&(t="「".concat(r,"」 ").concat(n("drive.file_name_char"))),t}}).call(this,y("2vAP"))},vMj0:function(e,h,f){"use strict";(function(a){f.d(h,"d",function(){return i}),f.d(h,"b",function(){return c}),f.d(h,"a",function(){return u}),f.d(h,"c",function(){return l}),f.d(h,"f",function(){return d}),f.d(h,"e",function(){return p});var e=f("q1tI"),o=f.n(e),s=f("UlbS"),n=f("HIeq"),t=f("E3/O"),r=f("A9lI");function i(e){var t=e.show,r=e.onClick;return t?o.a.createElement("div",{className:"drive-btn preview-btn",onClick:r},o.a.createElement("div",{className:"tooltiptext"},o.a.createElement("span",{className:"font-12"},a("mention.preview")))):null}function c(e){var t=e.size,r=e.status;return"failure"===r?o.a.createElement("div",{className:"saveText"},o.a.createElement("img",{className:"icon",src:f("0cyJ")}),o.a.createElement("span",{className:"desc"},a("mention.saved_failure"))):"saving"===r?o.a.createElement("div",{className:"saveText"},o.a.createElement("img",{className:"loading-icon",src:f("FZZY")}),o.a.createElement("span",{className:"desc"},a("mention.saving"))):o.a.createElement("div",null,Object(n.g)(t,!0))}function u(e){var t=e.show,r=e.disable,n=e.disableText,i=e.onClick;return t?r?o.a.createElement(s.Tooltip,{title:n},o.a.createElement("div",{className:"drive-btn download-btn disabled",onClick:function(e){return e.stopPropagation()}})):o.a.createElement("div",{className:"drive-btn download-btn",onClick:i},o.a.createElement("div",{className:"tooltiptext"},o.a.createElement("span",{className:"font-12"},a("mention.download")))):null}function l(e){return e.show?o.a.createElement("div",{className:"drive-btn loading-btn"}):null}function d(e){return e.show?o.a.createElement("div",{className:"progress"},o.a.createElement("div",{className:"progress-text"},e.progress,"%"),o.a.createElement(t.a,{progress:e.progress})):null}function p(e){return o.a.createElement("div",{className:"preview-progress"},o.a.createElement(r.a,null),o.a.createElement("div",{className:"preview-progress__text"},a("box.uploader.header.uploading")+" ",e.progress,"%"))}}).call(this,f("2vAP"))},wAsq:function(e,t,r){"use strict";r.d(t,"b",function(){return d}),r.d(t,"c",function(){return p}),r.d(t,"a",function(){return h});var n=r("dYt1"),i=r("HA5h"),a=r("SyrE"),o=r("Trbk"),s="PRESENTER_FOLLOWER_LOCATION",c={presenter:{x:0,y:0,space:""},follower:{x:0,y:0,space:""}},u=Object(n.a)(c),l=function(e,t){var r=Object(i.a)(u[e],t);u[e]=r},d=function(e,t){t&&l(e,t),a.g.emit("".concat(o.c,":").concat(s),u)},p=function(e,t){l(e,{space:t})},h=function(){u=Object(n.a)(c)}},xNBk:function(e,ge,ye){"use strict";(function(v){var n,e,t=ye("o0o1"),u=ye.n(t),r=ye("yXPU"),i=ye.n(r),a=ye("lwsE"),l=ye.n(a),o=ye("W8MJ"),c=ye.n(o),s=ye("a1gu"),d=ye.n(s),p=ye("Nsbk"),h=ye.n(p),f=ye("7W2i"),m=ye.n(f),k=ye("7EGn"),b=ye("hMnB"),g=ye.n(b),y=(ye("4kWC"),ye("q1tI")),w=ye.n(y),E=ye("yvYZ"),C=ye("VI6H"),I=ye("dGXE"),O=ye("2ACu"),T=ye("FnDM"),x=ye("1dfU"),D=ye("HIeq"),P=ye("vMj0"),_=ye("A9lI"),S=ye("TM+l"),j=ye("TSYQ"),M=ye.n(j),N=ye("H6oK"),z=ye("BmhO"),L=ye("S/x3"),R=ye("dvZ7"),F=ye("3doy"),U=ye("0Q5d"),B=ye("Aojf"),W=ye("XkjS"),H=ye("GZdw"),Q=ye("uEBw"),V=ye("Xngx"),q=ye("VIFs"),K=ye("iP/4"),Y=ye("U6jp"),Z=ye("EQyw"),J=ye("QM+C"),X=ye("hFNK"),ee=ye("6jTl"),te=ye("OX8E"),re=ye("Mvmg"),ne=ye("chPe"),ie=ye("GIL9"),ae=ye("Hj9z"),oe=ye("Trbk"),se=ye("lQZd"),ce=ye("wAsq"),ue=ye("U1nc"),le=ye("AW8B"),de=ye("rLED"),pe=ye("kS6I"),he=Object(ue.a)();(e=n=n||{}).WILL_UPDATE="BLOCK_INSTANCE_HEIGHT_WILL_UPDATE",e.DID_UPDATE="BLOCK_INSTANCE_HEIGHT_DID_UPDATE";var fe="preview",ve="download",me="FileCardBlock",ke="full_screen_switch",be=function(e){function s(e){var c;l()(this,s),(c=d()(this,h()(s).call(this,e))).previewWrapEl=null,c.isNewCreated=!1,c.isDriveAudio=!1,c.isDriveVideo=!1,c.isDriveImage=!1,c.showCoverPreview=!1,c.commonBoxPreviewProps=Object(R.h)(),c.replayFollowActionHandler=function(e){var t=e.actionType,r=e.data,n=r.driveKey,i=r.op,a=c.props.driveKey;ke===t&&("open"!==i||n!==a||c.previewHelper.isPreviewing?"close"===i&&c.previewHelper.isPreviewing&&c.previewHelper.manualCloseModal():c.switchStatus("preview"))},c.sendVcAction=function(e){var t=c.props.driveKey;Object(ce.b)("follower",{space:"open"===e?t:Object(x.a)(Object(se.g)())}),te.a.emit(oe.a,{module:me,actionType:ke,data:{op:e,driveKey:t}})},c.setScreenVisible=function(e){var t,r,n=c.props,i=n.viewType,a=n.size,o=n.type;c.isNeedRequestFileInfo()&&e&&c.getFileInfo(),e!==c.state.screenVisible&&i===N.ViewTypes.PREVIEW&&c.previewWrapEl&&(c.setState({screenVisible:e}),(!(t=c.isDriveAudio||c.isDriveVideo)||t&&e)&&c.setState({showContent:e}),r=e?"buffer_change_inview":"buffer_change_outview",Object(O.default)("doc_file_view_preview_status",{preview_load_status:r,mention_file_len:a,mention_file_type:o}))},c.getAuthorityDownloadable=function(){return Object(pe.f)(pe.b.FILE_DOWNLOAD)},c.updateStateFromProps=function(e,t){var r=Object(D.d)();return e===r||t&&t[r]?"finish":"start"},c.handleClickDownload=function(e){var t,r,n,i,a,o,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"card_btn";c.allowDownload(c.props)&&c.state.canApplyPermission&&(e.stopPropagation(),r=(t=c.props).driveKey,n=t.type,i=t.size,a=t.useDriveStorage,o=t.name,Object(O.default)("mention_download",{download_op_source:s,mention_file_len:i,mention_file_type:n}),r&&(K.a.isLarkPhone?c.openLarkPhonePreview():(a?c.isNoPermission()?ee.a.show({title:v("filecard.no_permission_title"),body:v("filecard.no_permission_content"),confirmText:v("filecard.apply_permission"),onConfirm:c.onClickApplyPermission}):c.isFileDeleted()?ee.a.show({title:v("filecard.file_download_error_title"),body:v("filecard.preview_error_content"),hasCancel:!1}):Object(S.b)([{name:o,token:r,type:J.NUM_SUITE_TYPE.FILE,mountPoint:{type:Object(T.f)(),token:Object(D.e)()}}]):Object(I.a)({drive_file_key:r},function(e){c.getDownloadUrlSuccess(e.downloadurl||"")},function(){Object(Q.g)(v("mention.download_failure"))}),Object(Q.c)({action:Q.a.icon_download,uploader_file_type:c.props.type,file_is_have_edit:c.props.haveEditPermission.toString(),view_status:c.props.viewType,drive_key:c.getEncrptyDrivekey()}))))},c.openLarkPhonePreview=function(){Object(Y.A)(c.getLarkPhonePreviewProps())},c.onClickPreview=function(e){var t=c.props,r=t.driveKey,n=t.type,i=t.haveEditPermission,a=t.viewType;a===N.ViewTypes.PREVIEW&&c.pause(),"none"!==r&&c.previewHelper.allowPreview&&(c.previewHelper.handlePreview(),e&&e.stopPropagation()),c.sendVcAction("open"),te.a.emit("FILE_ENTER_FULL_SCREEN_MODE"),Object(Q.c)({action:Q.a.enter,uploader_file_type:n,file_is_have_edit:i.toString(),view_status:a,drive_key:c.getEncrptyDrivekey()})},c.onViewSwitch=function(e){var t="";switch(e){case N.ViewTypes.INLINE:t=Q.a.click_inline_view;break;case N.ViewTypes.CARD:t=Q.a.click_card_view;break;case N.ViewTypes.PREVIEW:t=Q.a.click_preview_view}Object(Q.c)({action:t,uploader_file_type:c.props.type,file_is_have_edit:c.props.haveEditPermission.toString(),view_status:c.props.viewType,drive_key:c.getEncrptyDrivekey()})},c.onProgressEvent=function(){te.a.on(re.b,c.handleProgressEvent)},c.handleProgressEvent=function(e,t){t===c.props.fileId&&c.setState({fileProgress:e,isUploader:!0})},c.onInlineFileClick=function(e){e.stopPropagation(),c.previewHelper.allowPreview?c.onClickPreview(e):c.handleClickDownload(e)},c.clearSearchResult=function(e){c.setState(function(){return{searchResult:e}})},c.updateSearchResult=function(e){c.setState(function(){return{searchResult:e.searchResult}}),void 0!==e.isSelected&&c.setState(function(){return{selectedKey:e.selectedKey,isSelected:e.isSelected}})},c.setPreviewWrapEl=function(e){c.previewWrapEl=e},c.onCoverLoadError=function(e){c.setState({showCoverError:!0})},c.onPriviewLoaded=function(){setTimeout(function(){c.setState({previewLoaded:!0})},500)},c.onClickApplyPermission=function(){var e=c.props,t=e.sendSuiteParentPermissionRequest,r=e.driveKey,n=e.type;t(r,J.NUM_SUITE_TYPE.FILE,1,""),Object(Q.d)({mention_file_type:n})},c.renderWatermark=function(){return w.a.createElement(ne.a,null)},c.onGetPreviewInfoError=function(e){c.setState({fileErrorCode:e})},c.handleBoxPreviewEventBusReady=function(e){e&&(e.on(z.b.GET_PREVIEW_INFO_ERROR,function(e){e&&e.errorCode&&c.onGetPreviewInfoError(e.errorCode),e&&e.extraData&&c.updateApplyPermission(Boolean(e.extraData.can_apply_parent_perm))}),e.on(z.b.FILE_INFO_CHANGED,function(e){var t,r;e&&(t=e.fileInfo,r=Object(L.k)(t),t&&t.name&&Object(k.default)(t,"preview_meta.data")&&(0===Object.keys(t.preview_meta.data).length||0===Object(k.default)(t,"preview_meta.data.".concat(r,".status")))&&c.setState({cacheFileInfo:t}))}),c.pause=e.triggerMediaPause.bind(e))},c.getPdfPreloadThreshold=function(){return K.a.isInVC&&Object(de.I)("pdf_preload_disabled")?0:void 0};var t=e.driveKey,r=e.viewType,n=e.editor,i=e.registActions,a=e.useDriveStorage,o=e.type;return c.state={uploadStatus:c.updateStateFromProps(e.uploadOwner,e.owners),showContent:n&&n.pure||!1,showCoverError:!1,previewLoaded:!1,fileErrorCode:"none"===t||r===N.ViewTypes.PREVIEW?0:-1,fileProgress:0,isUploader:!1,canApplyPermission:!0,searchResult:[],selectedKey:"",isSelected:!1,screenVisible:n&&n.pure||!1,cacheFileInfo:void 0},c.previewHelper=new W.a(c.getPreivewProps(e)),i&&i(c.onClickPreview,c.handleClickDownload,c.onViewSwitch),c.updateBlockToolbars(c.props),c.isNewCreated="none"===e.driveKey,c.isDriveAudio=a&&Object(V.l)(o.toLowerCase()),c.isDriveVideo=a&&Object(V.n)(o.toLowerCase()),c.isDriveImage=a&&Object(V.m)(o.toLowerCase()),c.showCoverPreview=!!n&&($(n.getDocBody()).hasClass("doc-history-list")||Object(ie.a)()),c.onProgressEvent(),c.emitHeightWillUpdate(),e.toggleRef&&e.toggleRef(c.setScreenVisible),c}function t(){return r.apply(this,arguments)}var r;return m()(s,e),c()(s,[{key:"emitHeightWillUpdate",value:function(){this.props.emitter&&this.props.emitter.emit(n.WILL_UPDATE)}},{key:"emitHeightDidUpdate",value:function(){this.props.emitter&&this.props.emitter.emit(n.DID_UPDATE)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.updateStateFromProps(e.uploadOwner,e.owners);this.setState({uploadStatus:t}),this.previewHelper.updateProps(this.getPreivewProps(e)),this.updateBlockToolbars(e)}},{key:"componentWillUnmount",value:function(){te.a.off(re.b,this.handleProgressEvent),this.props.emitter&&this.props.emitter.removeAllListeners(),this.previewHelper.manualCloseModal(),this.eventBinding("off")}},{key:"componentDidMount",value:function(){this.props.emitter&&(this.props.emitter.on("highlightResult",this.updateSearchResult),this.props.emitter.on("clearSearchResult",this.clearSearchResult),this.props.emitter.emit(ae.VIEW_RENDERED)),this.eventBinding("on"),this.emitHeightDidUpdate(),this.sendVcAction("close")}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){e.viewType!==this.props.viewType&&this.emitHeightWillUpdate()}},{key:"componentDidUpdate",value:function(){this.emitHeightDidUpdate()}},{key:"eventBinding",value:function(e){te.a[e]("".concat(oe.g,":").concat(me),this.replayFollowActionHandler),Object(O.default)("bind_vc_event",{module:me,operation:e})}},{key:"switchStatus",value:function(t){var e,r=this.props.allToolbars;!r||(e=r.find(function(e){return e.key===t}))&&e.handler&&e.handler()}},{key:"getFileInfo",value:(r=i()(u.a.mark(function e(){var t,r,n,i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.state.fileErrorCode)return e.abrupt("return");e.next=2;break;case 2:if(this.props.useDriveStorage){e.next=4;break}return e.abrupt("return");case 4:if(t=this.props,r=t.getFileInfo,n=t.driveKey,i=t.type,"none"===n)return e.abrupt("return");e.next=7;break;case 7:return a=this.mountPoint,o=a.token,s=a.type,c=0,e.prev=9,e.next=12,r({fileToken:n,mountNodeToken:o,mountPoint:s});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(9),c=e.t0.code,e.t0.data&&this.updateApplyPermission(Boolean(e.t0.data.can_apply_parent_perm));case 18:this.setState({fileErrorCode:c}),Object(Q.b)({mention_file_type:i,code:c});case 20:case"end":return e.stop()}},e,this,[[9,14]])})),t)},{key:"updateApplyPermission",value:function(e){this.setState({canApplyPermission:e}),this.updateBlockToolbars(this.props)}},{key:"getPreivewProps",value:function(e){var t=this;return{name:e.name,size:e.size,driveKey:e.driveKey,type:e.type,suiteType:e.suiteType,token:e.token,useDriveStorage:e.useDriveStorage,handleClickDownload:this.handleClickDownload,decisiveDownloadable:this.allowDownload(e),canApplyPermission:this.state.canApplyPermission,onCancel:function(){t.sendVcAction("close"),te.a.emit("FILE_EXIT_FULL_SCREEN_MODE"),e.editor.updateBrowserSelectionFromRep(!0),Object(Q.c)({action:Q.a.quit,uploader_file_type:t.props.type,file_is_have_edit:t.props.haveEditPermission.toString(),view_status:t.props.viewType,drive_key:t.getEncrptyDrivekey()})}}}},{key:"filterTranslateModeToolbars",value:function(e){return e.filter(function(e){return e.key===fe||e.key===ve||e===N.CommonCommandKey.separator||e===N.CommonCommandKey.comment&&Object(le.e)()})}},{key:"updateDownloadToolbarTooltip",value:function(e){var t=e.find(function(e){return e.key===ve});t&&!this.getAuthorityDownloadable()&&(t.tooltip=v("CreationDoc_ECM_AdminDisableToast"))}},{key:"updateBlockToolbars",value:function(e){var t,r,n,i,a=e.allToolbars,o=e.haveEditPermission,s=e.updateToolbar,c=e.viewType,u=void 0===c?N.ViewTypes.CARD:c,l=e.translated;s&&a&&(t=l?this.filterTranslateModeToolbars(a):a,r=["".concat(N.ViewTypes.INLINE,"_view"),"".concat(N.ViewTypes.CARD,"_view"),"".concat(N.ViewTypes.PREVIEW,"_view")],n=[fe,"".concat(N.ViewTypes.PREVIEW,"_view")],i="none"===e.driveKey,this.previewHelper.allowPreview||(t=t.filter(function(e){return-1===n.indexOf(e.key)})),this.allowDownload(e)?this.updateDownloadToolbarTooltip(t):t=t.filter(function(e){return e.key!==ve}),i&&(t=t.filter(function(e){return-1===["preview",ve].indexOf(e.key)})),this.state.canApplyPermission||(t=t.filter(function(e){return-1===[ve].indexOf(e.key)})),l||(o||(t=t.filter(function(e){return-1===r.indexOf(e.key)})),t.forEach(function(e){-1<r.indexOf(e.key)&&(e.active=e.key==="".concat(u,"_view"))})),s(t))}},{key:"getLarkPhonePreviewProps",value:function(){var e=this.props,t=e.driveKey,r=e.size,n=e.actualType,i=e.name;return{file_id:e.fileId,drive_file_key:t,file_name:i,file_mime_type:n,file_size:r,type:e.useDriveStorage?1:0,mount_node_token:Object(D.e)(),mount_point:Object(T.f)(),downloadPath:Object(S.c)({token:t,mountPoint:{token:Object(D.e)(),type:Object(T.f)()}})}}},{key:"getEncrptyDrivekey",value:function(){var e=this.props.driveKey;return"none"===e?e:Object(x.a)(e)}},{key:"getDownloadUrlSuccess",value:function(e){e&&(g.a.href=e)}},{key:"allowDownload",value:function(e){var t=e.otherPermissions,r=e.useDriveStorage;return t&&t.exportable&&(Object(C.f)()||r)&&!Object(Z.a)()}},{key:"showDownloadBtn",value:function(){var e=this.props.driveKey,t=this.state.canApplyPermission,r="none"===e;return(!this.isNoPermission()||!this.previewHelper.allowPreview)&&t&&!Object(Z.a)()&&!r&&this.allowDownload(this.props)}},{key:"renderNameWithHl",value:function(e){var t=this.state,r=t.searchResult,n=t.isSelected,i=t.selectedKey;return r.length?w.a.createElement(ae.Highlight,{bgColor:re.e,activeBgColor:re.h,activeKey:i,isSelected:n,context:r},e):e}},{key:"renderInlineLink",value:function(){var e=this.props.name;return w.a.createElement("a",{href:"javascript:void(0);",className:"inline-filecard",onClick:this.onInlineFileClick},w.a.createElement(U.a,null),this.renderNameWithHl(e))}},{key:"renderCard",value:function(){var e=this.props,t=e.name,r=e.size,n=e.type,i=e.driveKey,a=e.fileId,o=e.useDriveStorage,s=e.selected,c=this.state,u=c.fileProgress,l=c.isUploader,d="none"===i,p=Object(E.mapBoxFileTypeToIcon)(n),h=M()("layout-row","layout-cross-center","drive-uploader",d&&"drive-loading",s&&"drive-selected"),f=l?w.a.createElement(P.f,{show:d,progress:u}):w.a.createElement(P.c,{show:d});return w.a.createElement("div",{id:"file-card_".concat(a),className:h,onClick:this.onClickPreview},w.a.createElement("span",{className:"file-icon"},w.a.createElement(p,{width:"48",height:"48"})),w.a.createElement("div",{className:"layout-column layout-main-center flex"},w.a.createElement("div",{className:"file-name"},this.renderNameWithHl(t)),w.a.createElement("div",{className:"drive-desc"},w.a.createElement(P.b,{size:r,status:this.state.uploadStatus}))),(Object(C.f)()||o)&&w.a.createElement("div",{className:"layout-row drive-button-opt layout-cross-center"},f,w.a.createElement(P.d,{onClick:this.onClickPreview,show:!d&&this.previewHelper.allowPreview}),w.a.createElement(P.a,{show:this.showDownloadBtn(),disable:!this.getAuthorityDownloadable(),disableText:v("CreationDoc_ECM_AdminDisableToast"),onClick:this.handleClickDownload})),w.a.createElement("span",{className:"j-copy-span"}))}},{key:"getPreviewErrorView",value:function(){var e=this.state,t=e.fileErrorCode,r=e.canApplyPermission;return w.a.createElement(X.a,{errCode:t,canApplyPermission:r,onClickApplyPermission:this.onClickApplyPermission,className:this.isDriveAudio?"preview-error-wrap-min":""})}},{key:"getPreviewView",value:function(){var e,t,r,n=this.props,i=n.type,a=n.size,o=n.driveKey,s=n.useDriveStorage,c=n.editor,u=n.haveEditPermission,l=n.otherPermissions,d=this.state,p=d.showContent,h=d.showCoverError,f=d.screenVisible,v=d.cacheFileInfo,m=Object(q.prependAPI)("/api/box/stream/download/v2/cover/".concat(o,"?width=850&height=850&policy=near"));return!p||this.showCoverPreview?(e=M()({"drive-cover-preview":!0,"drive-cover-preview-error":h}),t=w.a.createElement("div",{className:e},h?null:s&&!this.isDriveAudio&&"none"!==o&&!this.isNewCreated&&w.a.createElement("img",{className:"preview-cover-img",src:m,onError:this.onCoverLoadError}),w.a.createElement("div",{className:"cover-load-error"},w.a.createElement(B.a,null)),this.renderCard())):s?"none"!==o&&(r=M()({"box-preview-wrap":!0,"box-preview-wrap-loading":!h&&!f}),t=w.a.createElement("div",{className:r},w.a.createElement(he,Object.assign({},this.commonBoxPreviewProps,{fileToken:o,mountPoint:this.mountPoint,pdfToolbarConfig:[],pdfThumbnailDefaultOn:!1,pdfDefaultZoomValue:z.q.FULL,permission:{editable:u,exportable:this.allowDownload(this.props),copyable:Object(R.n)(l.copyable)},pdfPreloadThreshold:this.getPdfPreloadThreshold(),renderWatermark:this.renderWatermark,coverSrc:m,initialFileInfo:v,moduleId:"drive_".concat(o),showPresenterFollowerLocation:!1,onEventBusReady:this.handleBoxPreviewEventBusReady})),w.a.createElement("div",{className:"drive-cover-preview"},w.a.createElement("img",{className:"preview-cover-img","data-src":m}),this.renderCard()))):t=c&&$(c.getDocBody()).hasClass("doc-history-list")?w.a.createElement("div",{className:"drive-cover-preview drive-cover-preview-error"},w.a.createElement("div",{className:"cover-load-error"},w.a.createElement(B.a,null))):w.a.createElement(H.a,{type:i,size:a,driveKey:o}),t}},{key:"isNoPermission",value:function(){return Object(X.c)(this.state.fileErrorCode)}},{key:"isFileDeleted",value:function(){return Object(X.b)(this.state.fileErrorCode)}},{key:"isNeedRequestFileInfo",value:function(){var e=this.props,t=e.blockVersion,r=e.version,n=e.blockSize,i=e.useDriveStorage,a=e.fromCopy,o=this.state.fileErrorCode;return!!i&&(-1===o&&(t!==re.g&&(r!==re.g&&(!a&&!n))))}},{key:"renderPreview",value:function(){var e=this.props,t=e.name,r=e.selected,n=this.state,i=n.fileProgress,a=n.isUploader,o={"preview-wrap":!0,"drive-selected":r,"preview-type-video":this.isDriveVideo,"preview-type-audio":this.isDriveAudio,"preview-type-image":this.isDriveImage},s=null;this.isNeedRequestFileInfo()||(s=this.isNoPermission()||this.isFileDeleted()?this.getPreviewErrorView():this.getPreviewView());var c=a?w.a.createElement(P.e,{progress:i}):w.a.createElement(_.a,null);return w.a.createElement("div",{className:M()(o),ref:this.setPreviewWrapEl},w.a.createElement("div",{className:"preview-content"},s||c),w.a.createElement("div",{className:"preview-footer"},w.a.createElement("a",{href:"javascript:void(0);",onClick:this.onInlineFileClick},w.a.createElement(U.a,null),this.renderNameWithHl(t))),w.a.createElement("span",{className:"j-copy-span"}))}},{key:"render",value:function(){var e=this.props.viewType;return e===N.ViewTypes.INLINE?this.renderInlineLink():e===N.ViewTypes.CARD||Object(ie.a)()&&!J.isPDFAccess?this.renderCard():e===N.ViewTypes.PREVIEW?this.renderPreview():null}},{key:"mountPoint",get:function(){var e=this.props,t=e.token,r=e.suiteType;return{type:F.mountPointTypeMap[r],token:t}}}]),s}(y.PureComponent);ge.a=be}).call(this,ye("2vAP"))},"yro/":function(e,t,r){}}]);
//# sourceMappingURL=file-card.f2339f64736413161a0c.js.map